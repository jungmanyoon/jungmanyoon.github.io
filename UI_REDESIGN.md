# UI 재설계 계획서

## 개요

**목표**: 복잡한 기존 대시보드를 엑셀 스타일의 직관적인 단일 화면으로 재설계

**참조 모델**: `레시피계산기.xlsx` - 한 화면에 원본/변환 레시피가 나란히 배치된 구조

---

## 현재 문제점 분석

### 1. UI 복잡성
- **컴포넌트 과다**: 50개 이상의 컴포넌트가 분산되어 관리 어려움
- **중복 기능**: RedesignedDashboard, DashboardLayout, DashboardCompact 등 유사 컴포넌트 중복
- **깊은 중첩**: panels/, actions/, comparison/, tools/ 등 과도한 폴더 구조

### 2. 사용성 문제
- **화면 전환 필요**: 원본/변환 레시피 확인을 위해 여러 화면 이동
- **설정 분산**: 팬 선택, 제법 변환, 환경 설정이 각각 다른 패널에 분리
- **정보 과부하**: 한 번에 너무 많은 옵션 표시

### 3. 핵심 기능 부재
- **엑셀 스타일 뷰 미흡**: 레시피계산기.xlsx처럼 직관적인 표 형태 부족
- **참조 데이터 접근성**: 팬 사이즈, 비용적, 제빵 기준표 접근이 불편

---

## 새로운 UI 설계

### 레이아웃 구조

```
┌─────────────────────────────────────────────────────────────────┐
│  [헤더] 레시피북 - 빠른 설정 (팬/제법/배수)          [참조데이터]│
├────────────────────────┬────────────────────────────────────────┤
│                        │                                        │
│    📋 원본 레시피       │    🔄 변환 레시피                      │
│                        │                                        │
│  ┌──────────────────┐  │  ┌──────────────────────────────────┐  │
│  │ 제품명: [입력]   │  │  │ 제품명: [자동계산]               │  │
│  │ 팬: [선택]      │  │  │ 팬: [선택]                       │  │
│  │ 수량: [입력]    │  │  │ 수량: [입력]                     │  │
│  │ 총중량: [계산]  │  │  │ 총중량: [계산]                   │  │
│  └──────────────────┘  │  └──────────────────────────────────┘  │
│                        │                                        │
│  ┌──────────────────┐  │  ┌──────────────────────────────────┐  │
│  │순│분류│재료│비율│g│  │  │순│분류│재료│비율│g│차이│        │  │
│  │1 │밀가루│강력│100│500│  │1 │밀가루│강력│100│750│+250│      │  │
│  │2 │수분│물│65│325│    │  │2 │수분│물│65│487│+162│          │  │
│  │3 │...│...│...│...│   │  │3 │...│...│...│...│...│          │  │
│  └──────────────────┘  │  └──────────────────────────────────┘  │
│                        │                                        │
│  [합계] 밀가루: 500g   │  [합계] 밀가루: 750g                   │
│         수분: 325g     │         수분: 487g                     │
│         총: 1000g      │         총: 1500g (×1.5)              │
│                        │                                        │
├────────────────────────┴────────────────────────────────────────┤
│  [푸터] 저장 | 내보내기 | 초기화 | 도움말                       │
└─────────────────────────────────────────────────────────────────┘
```

### 참조 데이터 사이드바 (토글)

```
┌─────────────────────┐
│ 📊 참조 데이터      │
├─────────────────────┤
│ [팬 사이즈]         │
│ ├─ 사각팬           │
│ │  ├─ 식빵틀 1820㎤ │
│ │  ├─ 파운드 1456㎤ │
│ ├─ 원형팬           │
│ │  ├─ 1호 1325㎤    │
│ │  ├─ 2호 1908㎤    │
├─────────────────────┤
│ [비용적 기준]       │
│ ├─ 식빵: 3.4        │
│ ├─ 파운드: 2.4      │
│ ├─ 스펀지: 5.8      │
├─────────────────────┤
│ [제빵 기준]         │
│ ├─ 수분비율         │
│ │  식빵: 55~68%     │
│ ├─ 계란비율         │
│ │  전란: 75%        │
├─────────────────────┤
│ [사전반죽 비율]     │
│ ├─ 중종법           │
│ │  밀가루: 50%      │
│ │  수분: 100%       │
└─────────────────────┘
```

---

## 적용 기술/패턴

### 단계별 적용 내역

| 단계 | 작업 | 적용 요소 |
|------|------|-----------|
| 1 | 프로젝트 탐색 | `Explore Agent` + `--persona-architect` |
| 2 | 설계 문서 작성 | `--persona-scribe` + `--persona-architect` |
| 3 | 컴포넌트 정리 | `--persona-refactorer` |
| 4 | 메인 레이아웃 | `--persona-frontend` + `--magic` (UI 생성) |
| 5 | 재료 테이블 | `--persona-frontend` + 엑셀 스타일 구현 |
| 6 | 참조 데이터 | `--c7` (Tailwind 패턴) |
| 7 | 상태 연결 | 기존 Zustand 스토어 활용 |
| 8 | 테스트 | `--persona-qa` |

---

## 삭제 대상 컴포넌트

### dashboard/ 폴더 정리
```
삭제:
- DashboardCompact.tsx (사용 안함)
- DashboardLayout.tsx (새 레이아웃으로 대체)
- panels/ 전체 (새 구조로 통합)
- actions/ 전체 (헤더로 통합)
- comparison/ 전체 (테이블로 통합)
- tools/ 전체 (사이드바로 통합)

유지/수정:
- RedesignedDashboard.tsx → SimpleDashboard.tsx로 완전 재작성
- TopControlBar.tsx → 간소화
- ReferenceDataPanel.tsx → 사이드바로 재구성
```

### 기타 정리
```
삭제 고려:
- conversion/ 폴더의 중복 컴포넌트들
- calculator/ 폴더 (메인 대시보드로 통합)
```

---

## 새로운 컴포넌트 구조

```
src/components/
├── layout/
│   └── SimpleDashboard.tsx      # 메인 단일 페이지
├── recipe/
│   ├── RecipeHeader.tsx         # 제품명, 팬, 수량 설정
│   ├── IngredientTable.tsx      # 엑셀 스타일 재료 테이블
│   └── RecipeSummary.tsx        # 합계 표시
├── sidebar/
│   └── ReferenceDataSidebar.tsx # 참조 데이터 (팬, 비용적, 기준)
└── common/
    ├── Header.tsx               # 앱 헤더
    └── Toast.tsx                # 알림
```

---

## 주요 개선 사항

### 1. 단일 화면 원칙
- 모든 핵심 기능이 스크롤 없이 한 화면에 표시
- 원본 | 변환 나란히 비교 (50:50 분할)

### 2. 엑셀 스타일 테이블
- 행 추가/삭제 가능
- 셀 직접 편집
- 자동 합계 계산
- 차이값 색상 표시 (증가: 파랑, 감소: 빨강)

### 3. 빠른 설정 접근
- 팬 선택: 드롭다운 (카테고리 > 종류)
- 배수 조절: 숫자 입력 또는 슬라이더
- 제법 선택: 버튼 그룹

### 4. 참조 데이터 즉시 접근
- 사이드바 토글로 빠른 참조
- 클릭 시 값 자동 적용 기능

---

## 구현 우선순위

1. **Phase 1**: 기본 레이아웃 (원본 | 변환 분할)
2. **Phase 2**: 재료 테이블 (엑셀 스타일)
3. **Phase 3**: 참조 데이터 사이드바
4. **Phase 4**: 상태 관리 연결
5. **Phase 5**: 세부 기능 (저장, 내보내기 등)

---

## 기대 효과

- **학습 곡선 감소**: 엑셀과 유사한 익숙한 UI
- **작업 효율 향상**: 화면 전환 없이 모든 작업 가능
- **유지보수 용이**: 컴포넌트 수 대폭 감소 (50+ → 10개 미만)
- **성능 향상**: 불필요한 렌더링 감소

---

## 구현 완료 내역

### 적용된 SuperClaude 요소

| 단계 | 작업 내용 | 적용 요소 | 결과 |
|------|----------|-----------|------|
| 1 | 프로젝트 탐색 | `Explore Agent` + `--persona-architect` | 50+ 컴포넌트 구조 파악 |
| 2 | 설계 문서 작성 | `--persona-scribe` + `--persona-architect` | UI_REDESIGN.md 생성 |
| 3 | 스토어 분석 | `--persona-analyzer` | useDashboardStore 구조 파악 |
| 4 | SimpleDashboard 구현 | `--persona-frontend` + `--magic` | 엑셀 스타일 UI 구현 |
| 5 | App.tsx 수정 | `--persona-refactorer` | 라우팅 통합 |
| 6 | 테스트 | `--persona-qa` | 빌드 성공 확인 |

### 생성된 파일

```
src/components/dashboard/SimpleDashboard.tsx  (새로 생성)
UI_REDESIGN.md                                 (새로 생성)
src/App.tsx                                    (수정)
```

### 새로운 UI 특징

1. **한 화면 분할 뷰**
   - 좌측: 원본 레시피 (재료 테이블 + 합계)
   - 우측: 변환 레시피 (재료 테이블 + 차이 표시 + 합계)

2. **엑셀 스타일 테이블**
   - 분류별 그룹화 (밀가루, 수분, 유지, 당류, 기타)
   - 베이커스 퍼센트 자동 계산
   - 차이값 색상 표시 (증가: 녹색, 감소: 빨강)

3. **빠른 설정 바**
   - 레시피 선택 드롭다운
   - 배수 조절 (+/- 버튼 및 직접 입력)
   - 빠른 배수 버튼 (×0.5, ×1, ×1.5, ×2, ×3)
   - 초기화 버튼

4. **참조 데이터 사이드바**
   - 팬 사이즈 (레시피계산기.xlsx 데이터)
   - 비용적 기준
   - 사전반죽 비율
   - 재료별 수율
   - 제빵 기준 정보

### 다음 단계 (선택적)

- [ ] 재료 직접 편집 기능
- [ ] 팬 선택 시 자동 스케일링
- [ ] 레시피 저장/내보내기 기능
- [ ] 제법 변환 (중종법 등) 통합
- [ ] 기존 불필요한 컴포넌트 삭제
