{"version":3,"file":"AdvancedDashboard.tsx-BvOclCFE.js","sources":["../../../node_modules/lucide-react/dist/esm/icons/chevron-right.js","../../../node_modules/lucide-react/dist/esm/icons/cookie.js","../../../node_modules/lucide-react/dist/esm/icons/file-text.js","../../../node_modules/lucide-react/dist/esm/icons/flame.js","../../../node_modules/lucide-react/dist/esm/icons/grip-vertical.js","../../../node_modules/lucide-react/dist/esm/icons/layers.js","../../../node_modules/lucide-react/dist/esm/icons/link.js","../../../node_modules/lucide-react/dist/esm/icons/list-ordered.js","../../../node_modules/lucide-react/dist/esm/icons/minus.js","../../../node_modules/lucide-react/dist/esm/icons/thermometer-sun.js","../../../node_modules/lucide-react/dist/esm/icons/unlink.js","../../../src/hooks/useLayoutSettings.ts","../../../src/components/common/ResizeHandle.tsx","../../../src/utils/hangul.ts","../../../src/components/common/AutocompleteInput.tsx","../../../src/components/common/BulkIngredientInput.tsx","../../../src/utils/calculations/yieldLoss.ts","../../../src/components/common/YieldLossCalculator.tsx","../../../src/components/dashboard/AdvancedDashboard.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.537.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [[\"path\", { d: \"m9 18 6-6-6-6\", key: \"mthhwq\" }]];\nconst ChevronRight = createLucideIcon(\"chevron-right\", __iconNode);\n\nexport { __iconNode, ChevronRight as default };\n//# sourceMappingURL=chevron-right.js.map\n","/**\n * @license lucide-react v0.537.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5\", key: \"laymnq\" }],\n  [\"path\", { d: \"M8.5 8.5v.01\", key: \"ue8clq\" }],\n  [\"path\", { d: \"M16 15.5v.01\", key: \"14dtrp\" }],\n  [\"path\", { d: \"M12 12v.01\", key: \"u5ubse\" }],\n  [\"path\", { d: \"M11 17v.01\", key: \"1hyl5a\" }],\n  [\"path\", { d: \"M7 14v.01\", key: \"uct60s\" }]\n];\nconst Cookie = createLucideIcon(\"cookie\", __iconNode);\n\nexport { __iconNode, Cookie as default };\n//# sourceMappingURL=cookie.js.map\n","/**\n * @license lucide-react v0.537.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z\", key: \"1rqfz7\" }],\n  [\"path\", { d: \"M14 2v4a2 2 0 0 0 2 2h4\", key: \"tnqrlb\" }],\n  [\"path\", { d: \"M10 9H8\", key: \"b1mrlr\" }],\n  [\"path\", { d: \"M16 13H8\", key: \"t4e002\" }],\n  [\"path\", { d: \"M16 17H8\", key: \"z1uh3a\" }]\n];\nconst FileText = createLucideIcon(\"file-text\", __iconNode);\n\nexport { __iconNode, FileText as default };\n//# sourceMappingURL=file-text.js.map\n","/**\n * @license lucide-react v0.537.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z\",\n      key: \"96xj49\"\n    }\n  ]\n];\nconst Flame = createLucideIcon(\"flame\", __iconNode);\n\nexport { __iconNode, Flame as default };\n//# sourceMappingURL=flame.js.map\n","/**\n * @license lucide-react v0.537.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"9\", cy: \"12\", r: \"1\", key: \"1vctgf\" }],\n  [\"circle\", { cx: \"9\", cy: \"5\", r: \"1\", key: \"hp0tcf\" }],\n  [\"circle\", { cx: \"9\", cy: \"19\", r: \"1\", key: \"fkjjf6\" }],\n  [\"circle\", { cx: \"15\", cy: \"12\", r: \"1\", key: \"1tmaij\" }],\n  [\"circle\", { cx: \"15\", cy: \"5\", r: \"1\", key: \"19l28e\" }],\n  [\"circle\", { cx: \"15\", cy: \"19\", r: \"1\", key: \"f4zoj3\" }]\n];\nconst GripVertical = createLucideIcon(\"grip-vertical\", __iconNode);\n\nexport { __iconNode, GripVertical as default };\n//# sourceMappingURL=grip-vertical.js.map\n","/**\n * @license lucide-react v0.537.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z\",\n      key: \"zw3jo\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12\",\n      key: \"1wduqc\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17\",\n      key: \"kqbvx6\"\n    }\n  ]\n];\nconst Layers = createLucideIcon(\"layers\", __iconNode);\n\nexport { __iconNode, Layers as default };\n//# sourceMappingURL=layers.js.map\n","/**\n * @license lucide-react v0.537.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\", key: \"1cjeqo\" }],\n  [\"path\", { d: \"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\", key: \"19qd67\" }]\n];\nconst Link = createLucideIcon(\"link\", __iconNode);\n\nexport { __iconNode, Link as default };\n//# sourceMappingURL=link.js.map\n","/**\n * @license lucide-react v0.537.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M10 12h11\", key: \"6m4ad9\" }],\n  [\"path\", { d: \"M10 18h11\", key: \"11hvi2\" }],\n  [\"path\", { d: \"M10 6h11\", key: \"c7qv1k\" }],\n  [\"path\", { d: \"M4 10h2\", key: \"16xx2s\" }],\n  [\"path\", { d: \"M4 6h1v4\", key: \"cnovpq\" }],\n  [\"path\", { d: \"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1\", key: \"m9a95d\" }]\n];\nconst ListOrdered = createLucideIcon(\"list-ordered\", __iconNode);\n\nexport { __iconNode, ListOrdered as default };\n//# sourceMappingURL=list-ordered.js.map\n","/**\n * @license lucide-react v0.537.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [[\"path\", { d: \"M5 12h14\", key: \"1ays0h\" }]];\nconst Minus = createLucideIcon(\"minus\", __iconNode);\n\nexport { __iconNode, Minus as default };\n//# sourceMappingURL=minus.js.map\n","/**\n * @license lucide-react v0.537.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 9a4 4 0 0 0-2 7.5\", key: \"1jvsq6\" }],\n  [\"path\", { d: \"M12 3v2\", key: \"1w22ol\" }],\n  [\"path\", { d: \"m6.6 18.4-1.4 1.4\", key: \"w2yidj\" }],\n  [\"path\", { d: \"M20 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z\", key: \"iof6y5\" }],\n  [\"path\", { d: \"M4 13H2\", key: \"118le4\" }],\n  [\"path\", { d: \"M6.34 7.34 4.93 5.93\", key: \"1brd51\" }]\n];\nconst ThermometerSun = createLucideIcon(\"thermometer-sun\", __iconNode);\n\nexport { __iconNode, ThermometerSun as default };\n//# sourceMappingURL=thermometer-sun.js.map\n","/**\n * @license lucide-react v0.537.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71\",\n      key: \"yqzxt4\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71\",\n      key: \"4qinb0\"\n    }\n  ],\n  [\"line\", { x1: \"8\", x2: \"8\", y1: \"2\", y2: \"5\", key: \"1041cp\" }],\n  [\"line\", { x1: \"2\", x2: \"5\", y1: \"8\", y2: \"8\", key: \"14m1p5\" }],\n  [\"line\", { x1: \"16\", x2: \"16\", y1: \"19\", y2: \"22\", key: \"rzdirn\" }],\n  [\"line\", { x1: \"19\", x2: \"22\", y1: \"16\", y2: \"16\", key: \"ox905f\" }]\n];\nconst Unlink = createLucideIcon(\"unlink\", __iconNode);\n\nexport { __iconNode, Unlink as default };\n//# sourceMappingURL=unlink.js.map\n","/**\n * useLayoutSettings - ì‚¬ìš©ì ë ˆì´ì•„ì›ƒ ì„¤ì • ì €ì¥/ë³µì› Hook\n *\n * ì €ì¥ í•­ëª©:\n * - ì‚¬ì´ë“œë°” ë„ˆë¹„\n * - ë ˆì‹œí”¼ ì»¨í…Œì´ë„ˆ ë†’ì´\n * - ê³µì • íŒ¨ë„ ë†’ì´\n * - ê°œë³„ ê³µì • ì•„ì´í…œ ë„ˆë¹„\n */\n\nimport { useState, useEffect, useCallback } from 'react';\n\nconst STORAGE_KEY = 'recipe-dashboard-layout';\n\ninterface ProcessItemSize {\n  width: number;\n  minHeight?: number;\n}\n\ninterface LayoutSettings {\n  sidebarWidth: number;\n  recipeContainerHeight: number;  // ë ˆì‹œí”¼ í…Œì´ë¸” ì˜ì—­ ë¹„ìœ¨ (0-1)\n  processRowHeight: number;       // ê³µì • í–‰ ë†’ì´\n  processPanelHeight: number;     // ê³µì • íŒ¨ë„ ì „ì²´ ë†’ì´\n  processItems: Record<string, ProcessItemSize>;  // ê³µì • IDë³„ í¬ê¸°\n}\n\nconst DEFAULT_SETTINGS: LayoutSettings = {\n  sidebarWidth: 320,\n  recipeContainerHeight: 0.6,  // 60%\n  processRowHeight: 36,\n  processPanelHeight: 256,\n  processItems: {},\n};\n\nexport function useLayoutSettings() {\n  const [settings, setSettings] = useState<LayoutSettings>(() => {\n    // ì´ˆê¸° ë¡œë“œ ì‹œ localStorageì—ì„œ ë³µì›\n    if (typeof window !== 'undefined') {\n      try {\n        const saved = localStorage.getItem(STORAGE_KEY);\n        if (saved) {\n          const parsed = JSON.parse(saved);\n          return { ...DEFAULT_SETTINGS, ...parsed };\n        }\n      } catch (e) {\n        console.warn('ë ˆì´ì•„ì›ƒ ì„¤ì • ë¡œë“œ ì‹¤íŒ¨:', e);\n      }\n    }\n    return DEFAULT_SETTINGS;\n  });\n\n  // ì„¤ì • ë³€ê²½ ì‹œ ìë™ ì €ì¥ (ë””ë°”ìš´ìŠ¤)\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      try {\n        localStorage.setItem(STORAGE_KEY, JSON.stringify(settings));\n      } catch (e) {\n        console.warn('ë ˆì´ì•„ì›ƒ ì„¤ì • ì €ì¥ ì‹¤íŒ¨:', e);\n      }\n    }, 300);\n\n    return () => clearTimeout(timer);\n  }, [settings]);\n\n  // ì‚¬ì´ë“œë°” ë„ˆë¹„ ë³€ê²½\n  const setSidebarWidth = useCallback((width: number) => {\n    setSettings(prev => ({\n      ...prev,\n      sidebarWidth: Math.max(200, Math.min(500, width)),\n    }));\n  }, []);\n\n  // ë ˆì‹œí”¼ ì»¨í…Œì´ë„ˆ ë†’ì´ ë¹„ìœ¨ ë³€ê²½\n  const setRecipeContainerHeight = useCallback((ratio: number) => {\n    setSettings(prev => ({\n      ...prev,\n      recipeContainerHeight: Math.max(0.3, Math.min(0.8, ratio)),\n    }));\n  }, []);\n\n  // ê³µì • í–‰ ë†’ì´ ë³€ê²½\n  const setProcessRowHeight = useCallback((height: number) => {\n    setSettings(prev => ({\n      ...prev,\n      processRowHeight: Math.max(28, Math.min(80, height)),\n    }));\n  }, []);\n\n  // ê³µì • íŒ¨ë„ ì „ì²´ ë†’ì´ ë³€ê²½\n  const setProcessPanelHeight = useCallback((height: number) => {\n    setSettings(prev => ({\n      ...prev,\n      processPanelHeight: Math.max(120, Math.min(500, height)),\n    }));\n  }, []);\n\n  // ê°œë³„ ê³µì • ì•„ì´í…œ í¬ê¸° ë³€ê²½\n  const setProcessItemSize = useCallback((id: string, size: Partial<ProcessItemSize>) => {\n    setSettings(prev => ({\n      ...prev,\n      processItems: {\n        ...prev.processItems,\n        [id]: {\n          ...prev.processItems[id],\n          width: size.width ?? prev.processItems[id]?.width ?? 120,\n          minHeight: size.minHeight ?? prev.processItems[id]?.minHeight,\n        },\n      },\n    }));\n  }, []);\n\n  // ê³µì • ì•„ì´í…œ í¬ê¸° ê°€ì ¸ì˜¤ê¸°\n  const getProcessItemSize = useCallback((id: string): ProcessItemSize => {\n    return settings.processItems[id] || { width: 120 };\n  }, [settings.processItems]);\n\n  // ì„¤ì • ì´ˆê¸°í™”\n  const resetSettings = useCallback(() => {\n    setSettings(DEFAULT_SETTINGS);\n    localStorage.removeItem(STORAGE_KEY);\n  }, []);\n\n  return {\n    settings,\n    setSidebarWidth,\n    setRecipeContainerHeight,\n    setProcessRowHeight,\n    setProcessPanelHeight,\n    setProcessItemSize,\n    getProcessItemSize,\n    resetSettings,\n  };\n}\n\nexport type { LayoutSettings, ProcessItemSize };\n","/**\n * ResizeHandle - ë“œë˜ê·¸ë¡œ í¬ê¸° ì¡°ì ˆ ê°€ëŠ¥í•œ í•¸ë“¤ ì»´í¬ë„ŒíŠ¸\n */\n\nimport React, { useCallback, useRef, useEffect } from 'react';\n\ninterface ResizeHandleProps {\n  direction: 'horizontal' | 'vertical';\n  onResize: (delta: number) => void;\n  onResizeEnd?: () => void;\n  className?: string;\n}\n\nexport const ResizeHandle: React.FC<ResizeHandleProps> = ({\n  direction,\n  onResize,\n  onResizeEnd,\n  className = '',\n}) => {\n  const isDragging = useRef(false);\n  const startPos = useRef(0);\n\n  const handleMouseDown = useCallback((e: React.MouseEvent) => {\n    e.preventDefault();\n    isDragging.current = true;\n    startPos.current = direction === 'horizontal' ? e.clientX : e.clientY;\n    document.body.style.cursor = direction === 'horizontal' ? 'col-resize' : 'row-resize';\n    document.body.style.userSelect = 'none';\n  }, [direction]);\n\n  useEffect(() => {\n    const handleMouseMove = (e: MouseEvent) => {\n      if (!isDragging.current) return;\n\n      const currentPos = direction === 'horizontal' ? e.clientX : e.clientY;\n      const delta = currentPos - startPos.current;\n      startPos.current = currentPos;\n      onResize(delta);\n    };\n\n    const handleMouseUp = () => {\n      if (isDragging.current) {\n        isDragging.current = false;\n        document.body.style.cursor = '';\n        document.body.style.userSelect = '';\n        onResizeEnd?.();\n      }\n    };\n\n    document.addEventListener('mousemove', handleMouseMove);\n    document.addEventListener('mouseup', handleMouseUp);\n\n    return () => {\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n    };\n  }, [direction, onResize, onResizeEnd]);\n\n  const baseClasses = direction === 'horizontal'\n    ? 'w-1 cursor-col-resize hover:bg-blue-400 active:bg-blue-500 transition-colors'\n    : 'h-1 cursor-row-resize hover:bg-blue-400 active:bg-blue-500 transition-colors';\n\n  return (\n    <div\n      className={`${baseClasses} bg-transparent group flex items-center justify-center ${className}`}\n      onMouseDown={handleMouseDown}\n    >\n      {/* ì‹œê°ì  íŒíŠ¸ */}\n      {direction === 'horizontal' ? (\n        <div className=\"w-0.5 h-8 bg-gray-300 group-hover:bg-blue-400 rounded-full opacity-0 group-hover:opacity-100 transition-opacity\" />\n      ) : (\n        <div className=\"h-0.5 w-8 bg-gray-300 group-hover:bg-blue-400 rounded-full opacity-0 group-hover:opacity-100 transition-opacity\" />\n      )}\n    </div>\n  );\n};\n\nexport default ResizeHandle;\n","/**\r\n * í•œê¸€ ì´ˆì„± ê²€ìƒ‰ ìœ í‹¸ë¦¬í‹°\r\n * \"ë°•ã„¹\" â†’ \"ë°•ë ¥ë¶„\" ê°™ì€ ì´ˆì„± ê²€ìƒ‰ ì§€ì›\r\n */\r\n\r\n// í•œê¸€ ìœ ë‹ˆì½”ë“œ ë²”ìœ„\r\nconst HANGUL_START = 0xAC00\r\nconst HANGUL_END = 0xD7A3\r\nconst CHO_COUNT = 588 // 21 * 28\r\n\r\n// ì´ˆì„± ëª©ë¡\r\nconst CHO_LIST = [\r\n  'ã„±', 'ã„²', 'ã„´', 'ã„·', 'ã„¸', 'ã„¹', 'ã…', 'ã…‚', 'ã…ƒ', 'ã……',\r\n  'ã…†', 'ã…‡', 'ã…ˆ', 'ã…‰', 'ã…Š', 'ã…‹', 'ã…Œ', 'ã…', 'ã…'\r\n]\r\n\r\n/**\r\n * í•œê¸€ ë¬¸ìì¸ì§€ í™•ì¸\r\n */\r\nexport function isHangul(char: string): boolean {\r\n  const code = char.charCodeAt(0)\r\n  return code >= HANGUL_START && code <= HANGUL_END\r\n}\r\n\r\n/**\r\n * ì´ˆì„±ì¸ì§€ í™•ì¸\r\n */\r\nexport function isChosung(char: string): boolean {\r\n  return CHO_LIST.includes(char)\r\n}\r\n\r\n/**\r\n * í•œê¸€ ë¬¸ìì—ì„œ ì´ˆì„± ì¶”ì¶œ\r\n */\r\nexport function getChosung(char: string): string {\r\n  const code = char.charCodeAt(0)\r\n  if (code >= HANGUL_START && code <= HANGUL_END) {\r\n    const choIndex = Math.floor((code - HANGUL_START) / CHO_COUNT)\r\n    return CHO_LIST[choIndex]\r\n  }\r\n  return char\r\n}\r\n\r\n/**\r\n * ë¬¸ìì—´ì—ì„œ ì´ˆì„±ë§Œ ì¶”ì¶œ\r\n */\r\nexport function extractChosung(text: string): string {\r\n  return text.split('').map(getChosung).join('')\r\n}\r\n\r\n/**\r\n * ì´ˆì„± íŒ¨í„´ ë§¤ì¹­ ê²€ì‚¬\r\n * \"ã…‚ã„¹ã…‚\" íŒ¨í„´ì´ \"ë°•ë ¥ë¶„\"ê³¼ ë§¤ì¹­ë˜ëŠ”ì§€ í™•ì¸\r\n */\r\nexport function matchChosung(text: string, pattern: string): boolean {\r\n  const textChosungs = extractChosung(text)\r\n  const patternLower = pattern.toLowerCase()\r\n\r\n  let textIdx = 0\r\n  let patternIdx = 0\r\n\r\n  while (textIdx < text.length && patternIdx < pattern.length) {\r\n    const textChar = text[textIdx]\r\n    const patternChar = pattern[patternIdx]\r\n\r\n    // íŒ¨í„´ì´ ì´ˆì„±ì¸ ê²½ìš°\r\n    if (isChosung(patternChar)) {\r\n      // í…ìŠ¤íŠ¸ê°€ í•œê¸€ì´ë©´ ì´ˆì„± ë¹„êµ\r\n      if (isHangul(textChar)) {\r\n        if (getChosung(textChar) === patternChar) {\r\n          textIdx++\r\n          patternIdx++\r\n        } else {\r\n          return false\r\n        }\r\n      } else {\r\n        return false\r\n      }\r\n    }\r\n    // íŒ¨í„´ì´ ì™„ì„±ëœ í•œê¸€ì¸ ê²½ìš°\r\n    else if (isHangul(patternChar)) {\r\n      if (textChar.toLowerCase() === patternChar.toLowerCase()) {\r\n        textIdx++\r\n        patternIdx++\r\n      } else {\r\n        return false\r\n      }\r\n    }\r\n    // ê·¸ ì™¸ (ì˜ë¬¸, ìˆ«ì ë“±)\r\n    else {\r\n      if (textChar.toLowerCase() === patternChar.toLowerCase()) {\r\n        textIdx++\r\n        patternIdx++\r\n      } else {\r\n        return false\r\n      }\r\n    }\r\n  }\r\n\r\n  // íŒ¨í„´ì„ ëª¨ë‘ ì†Œë¹„í–ˆìœ¼ë©´ ë§¤ì¹­ ì„±ê³µ\r\n  return patternIdx === pattern.length\r\n}\r\n\r\n/**\r\n * ê²€ìƒ‰ì–´ë¡œ ì¬ë£Œ ëª©ë¡ í•„í„°ë§\r\n * ì´ˆì„± ê²€ìƒ‰ + ì¼ë°˜ ê²€ìƒ‰ ëª¨ë‘ ì§€ì›\r\n */\r\nexport function searchIngredients(\r\n  ingredients: string[],\r\n  query: string\r\n): string[] {\r\n  if (!query.trim()) return ingredients\r\n\r\n  const queryLower = query.toLowerCase().trim()\r\n\r\n  return ingredients.filter(ingredient => {\r\n    const ingredientLower = ingredient.toLowerCase()\r\n\r\n    // 1. ì¼ë°˜ í¬í•¨ ê²€ìƒ‰\r\n    if (ingredientLower.includes(queryLower)) {\r\n      return true\r\n    }\r\n\r\n    // 2. ì´ˆì„± ê²€ìƒ‰ (ì‹œì‘ ë¶€ë¶„ ë§¤ì¹­)\r\n    if (matchChosung(ingredient, query)) {\r\n      return true\r\n    }\r\n\r\n    // 3. ì´ˆì„± íŒ¨í„´ì´ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ ê²€ì‚¬\r\n    const textChosungs = extractChosung(ingredient)\r\n    const queryChosungs = extractChosung(query)\r\n    if (textChosungs.includes(queryChosungs)) {\r\n      return true\r\n    }\r\n\r\n    return false\r\n  })\r\n}\r\n\r\n/**\r\n * ê²€ìƒ‰ ê²°ê³¼ ì •ë ¬ (ê´€ë ¨ë„ìˆœ)\r\n * ì‹œì‘ ë¶€ë¶„ ë§¤ì¹­ > í¬í•¨ ë§¤ì¹­ > ì´ˆì„± ë§¤ì¹­\r\n */\r\nexport function sortByRelevance(\r\n  ingredients: string[],\r\n  query: string\r\n): string[] {\r\n  const queryLower = query.toLowerCase().trim()\r\n\r\n  return [...ingredients].sort((a, b) => {\r\n    const aLower = a.toLowerCase()\r\n    const bLower = b.toLowerCase()\r\n\r\n    // ì‹œì‘ ë¶€ë¶„ ë§¤ì¹­ ìš°ì„ \r\n    const aStartsWith = aLower.startsWith(queryLower) || matchChosung(a, query)\r\n    const bStartsWith = bLower.startsWith(queryLower) || matchChosung(b, query)\r\n\r\n    if (aStartsWith && !bStartsWith) return -1\r\n    if (!aStartsWith && bStartsWith) return 1\r\n\r\n    // í¬í•¨ ë§¤ì¹­\r\n    const aIncludes = aLower.includes(queryLower)\r\n    const bIncludes = bLower.includes(queryLower)\r\n\r\n    if (aIncludes && !bIncludes) return -1\r\n    if (!aIncludes && bIncludes) return 1\r\n\r\n    // ê¸¸ì´ìˆœ (ì§§ì€ ê²ƒ ìš°ì„ )\r\n    return a.length - b.length\r\n  })\r\n}\r\n","/**\r\n * AutocompleteInput - í•œê¸€ ì´ˆì„± ê²€ìƒ‰ ì§€ì› ìë™ì™„ì„± ì…ë ¥\r\n * \"ë°•ã„¹\" â†’ \"ë°•ë ¥ë¶„\" ê°™ì€ ì´ˆì„± ê²€ìƒ‰ ê°€ëŠ¥\r\n */\r\n\r\nimport React, { useState, useRef, useEffect, useCallback, useMemo } from 'react'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { searchIngredients, sortByRelevance } from '@/utils/hangul'\r\nimport { findIngredientInfo } from '@/data/ingredientDatabase'\r\nimport { useSettingsStore } from '@/stores/useSettingsStore'\r\n\r\ninterface AutocompleteInputProps {\r\n  value: string\r\n  displayValue?: string  // í¸ì§‘ ì¤‘ì´ ì•„ë‹ ë•Œ í‘œì‹œí•  ê°’ (ë²ˆì—­ëœ ì´ë¦„ ë“±)\r\n  onChange: (value: string) => void\r\n  onSelect?: (value: string) => void\r\n  placeholder?: string\r\n  className?: string\r\n  suggestions?: string[]  // ì»¤ìŠ¤í…€ ì¶”ì²œ ëª©ë¡ (ê¸°ë³¸: ì¬ë£Œ ëª©ë¡)\r\n  maxSuggestions?: number\r\n  disabled?: boolean\r\n  autoFocus?: boolean\r\n}\r\n\r\nexport default function AutocompleteInput({\r\n  value,\r\n  displayValue,\r\n  onChange,\r\n  onSelect,\r\n  placeholder,\r\n  className = '',\r\n  suggestions: customSuggestions,  // ì»¤ìŠ¤í…€ ëª©ë¡ì´ ì£¼ì–´ì§€ë©´ ê·¸ê²ƒì„ ì‚¬ìš©\r\n  maxSuggestions = 8,\r\n  disabled = false,\r\n  autoFocus = false\r\n}: AutocompleteInputProps) {\r\n  const { t } = useTranslation()\r\n  const resolvedPlaceholder = placeholder ?? t('components.autocomplete.placeholder')\r\n  // ì„¤ì • ìŠ¤í† ì–´ì—ì„œ í†µí•© ì¬ë£Œ ëª©ë¡ ê°€ì ¸ì˜¤ê¸° (ì»¤ìŠ¤í…€ ëª©ë¡ì´ ì—†ì„ ë•Œë§Œ)\r\n  const getAllIngredientNames = useSettingsStore(state => state.getAllIngredientNames)\r\n  const suggestions = customSuggestions ?? getAllIngredientNames()\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const [isFocused, setIsFocused] = useState(false)\r\n  const [highlightedIndex, setHighlightedIndex] = useState(-1)\r\n  const [recentIngredients, setRecentIngredients] = useState<string[]>([])\r\n\r\n  const inputRef = useRef<HTMLInputElement>(null)\r\n  const listRef = useRef<HTMLUListElement>(null)\r\n\r\n  // ìµœê·¼ ì‚¬ìš© ì¬ë£Œ ë¡œë“œ\r\n  useEffect(() => {\r\n    const saved = localStorage.getItem('recentIngredients')\r\n    if (saved) {\r\n      try {\r\n        setRecentIngredients(JSON.parse(saved))\r\n      } catch {\r\n        // ignore\r\n      }\r\n    }\r\n  }, [])\r\n\r\n  // ìµœê·¼ ì‚¬ìš© ì¬ë£Œ ì €ì¥\r\n  const saveRecentIngredient = useCallback((ingredient: string) => {\r\n    setRecentIngredients(prev => {\r\n      const filtered = prev.filter(i => i !== ingredient)\r\n      const updated = [ingredient, ...filtered].slice(0, 10)\r\n      localStorage.setItem('recentIngredients', JSON.stringify(updated))\r\n      return updated\r\n    })\r\n  }, [])\r\n\r\n  // í•„í„°ë§ëœ ì¶”ì²œ ëª©ë¡\r\n  const filteredSuggestions = useMemo(() => {\r\n    if (!value.trim()) {\r\n      // ì…ë ¥ì´ ì—†ìœ¼ë©´ ìµœê·¼ ì‚¬ìš© ì¬ë£Œ í‘œì‹œ\r\n      return recentIngredients.slice(0, maxSuggestions)\r\n    }\r\n\r\n    // ê²€ìƒ‰ ë° ì •ë ¬\r\n    const searched = searchIngredients(suggestions, value)\r\n    const sorted = sortByRelevance(searched, value)\r\n    return sorted.slice(0, maxSuggestions)\r\n  }, [value, suggestions, recentIngredients, maxSuggestions])\r\n\r\n  // ì„ íƒ ì²˜ë¦¬\r\n  const handleSelect = useCallback((selected: string) => {\r\n    onChange(selected)\r\n    onSelect?.(selected)\r\n    saveRecentIngredient(selected)\r\n    setIsOpen(false)\r\n    setHighlightedIndex(-1)\r\n  }, [onChange, onSelect, saveRecentIngredient])\r\n\r\n  // í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜\r\n  const handleKeyDown = useCallback((e: React.KeyboardEvent) => {\r\n    if (!isOpen) {\r\n      if (e.key === 'ArrowDown' || e.key === 'ArrowUp') {\r\n        setIsOpen(true)\r\n        return\r\n      }\r\n    }\r\n\r\n    switch (e.key) {\r\n      case 'ArrowDown':\r\n        e.preventDefault()\r\n        setHighlightedIndex(prev =>\r\n          prev < filteredSuggestions.length - 1 ? prev + 1 : 0\r\n        )\r\n        break\r\n      case 'ArrowUp':\r\n        e.preventDefault()\r\n        setHighlightedIndex(prev =>\r\n          prev > 0 ? prev - 1 : filteredSuggestions.length - 1\r\n        )\r\n        break\r\n      case 'Enter':\r\n        e.preventDefault()\r\n        if (highlightedIndex >= 0 && highlightedIndex < filteredSuggestions.length) {\r\n          handleSelect(filteredSuggestions[highlightedIndex])\r\n        } else if (filteredSuggestions.length > 0) {\r\n          handleSelect(filteredSuggestions[0])\r\n        }\r\n        break\r\n      case 'Escape':\r\n        setIsOpen(false)\r\n        setHighlightedIndex(-1)\r\n        break\r\n      case 'Tab':\r\n        if (isOpen && highlightedIndex >= 0) {\r\n          e.preventDefault()\r\n          handleSelect(filteredSuggestions[highlightedIndex])\r\n        }\r\n        break\r\n    }\r\n  }, [isOpen, highlightedIndex, filteredSuggestions, handleSelect])\r\n\r\n  // ì…ë ¥ ë³€ê²½\r\n  const handleChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n    onChange(e.target.value)\r\n    setIsOpen(true)\r\n    setHighlightedIndex(-1)\r\n  }, [onChange])\r\n\r\n  // í¬ì»¤ìŠ¤ ì²˜ë¦¬\r\n  const handleFocus = useCallback(() => {\r\n    setIsOpen(true)\r\n    setIsFocused(true)\r\n  }, [])\r\n\r\n  // ë¸”ëŸ¬ ì²˜ë¦¬ (ë”œë ˆì´ë¡œ í´ë¦­ ì´ë²¤íŠ¸ ì²˜ë¦¬)\r\n  const handleBlur = useCallback(() => {\r\n    setTimeout(() => {\r\n      setIsOpen(false)\r\n      setIsFocused(false)\r\n      setHighlightedIndex(-1)\r\n    }, 200)\r\n  }, [])\r\n\r\n  // í•˜ì´ë¼ì´íŠ¸ëœ í•­ëª© ìŠ¤í¬ë¡¤\r\n  useEffect(() => {\r\n    if (highlightedIndex >= 0 && listRef.current) {\r\n      const item = listRef.current.children[highlightedIndex] as HTMLElement\r\n      if (item) {\r\n        item.scrollIntoView({ block: 'nearest' })\r\n      }\r\n    }\r\n  }, [highlightedIndex])\r\n\r\n  // ì¹´í…Œê³ ë¦¬ ì´ëª¨ì§€ ë§¤í•‘\r\n  const getCategoryEmoji = (name: string): string => {\r\n    const info = findIngredientInfo(name)\r\n    if (!info) return ''\r\n\r\n    const emojiMap: Record<string, string> = {\r\n      flour: 'ğŸŒ¾',\r\n      liquid: 'ğŸ’§',\r\n      fat: 'ğŸ§ˆ',\r\n      sugar: 'ğŸ¯',\r\n      egg: 'ğŸ¥š',\r\n      dairy: 'ğŸ¥›',\r\n      leavening: 'ğŸ«§',\r\n      salt: 'ğŸ§‚',\r\n      flavoring: 'ğŸŒ¿',\r\n      nut: 'ğŸ¥œ',\r\n      fruit: 'ğŸ',\r\n      chocolate: 'ğŸ«',\r\n      other: 'ğŸ“¦'\r\n    }\r\n    return emojiMap[info.category] || ''\r\n  }\r\n\r\n  // í‘œì‹œí•  ê°’: í¬ì»¤ìŠ¤ ì¤‘ì—ëŠ” ì›ë³¸ê°’(ê²€ìƒ‰ìš©), ì•„ë‹ˆë©´ displayValue ë˜ëŠ” ì›ë³¸ê°’\r\n  const shownValue = isFocused ? value : (displayValue ?? value)\r\n\r\n  return (\r\n    <div className=\"relative\">\r\n      <input\r\n        ref={inputRef}\r\n        type=\"text\"\r\n        value={shownValue}\r\n        onChange={handleChange}\r\n        onKeyDown={handleKeyDown}\r\n        onFocus={handleFocus}\r\n        onBlur={handleBlur}\r\n        placeholder={resolvedPlaceholder}\r\n        disabled={disabled}\r\n        autoFocus={autoFocus}\r\n        className={`w-full px-3 py-2 border border-gray-300 rounded-lg\r\n          focus:ring-2 focus:ring-amber-500 focus:border-amber-500\r\n          disabled:bg-gray-100 disabled:cursor-not-allowed\r\n          ${className}`}\r\n        autoComplete=\"off\"\r\n      />\r\n\r\n      {/* ì¶”ì²œ ëª©ë¡ ë“œë¡­ë‹¤ìš´ */}\r\n      {isOpen && filteredSuggestions.length > 0 && (\r\n        <ul\r\n          ref={listRef}\r\n          className=\"absolute z-50 w-full mt-1 bg-white border border-gray-200\r\n            rounded-lg shadow-lg max-h-60 overflow-auto\"\r\n        >\r\n          {!value.trim() && recentIngredients.length > 0 && (\r\n            <li className=\"px-3 py-1 text-xs text-gray-500 bg-gray-50 border-b\">\r\n              {t('components.autocomplete.recentlyUsed')}\r\n            </li>\r\n          )}\r\n          {filteredSuggestions.map((item, index) => (\r\n            <li\r\n              key={item}\r\n              onClick={() => handleSelect(item)}\r\n              className={`px-3 py-2 cursor-pointer flex items-center gap-2\r\n                ${index === highlightedIndex\r\n                  ? 'bg-amber-100 text-amber-900'\r\n                  : 'hover:bg-gray-100'\r\n                }`}\r\n            >\r\n              <span className=\"text-sm\">{getCategoryEmoji(item)}</span>\r\n              <span className=\"flex-1\">{item}</span>\r\n              {index === highlightedIndex && (\r\n                <span className=\"text-xs text-gray-400\">Enter</span>\r\n              )}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n\r\n      {/* ì…ë ¥ íŒíŠ¸ */}\r\n      {isOpen && value.trim() && filteredSuggestions.length === 0 && (\r\n        <div className=\"absolute z-50 w-full mt-1 px-3 py-2 bg-gray-50\r\n          border border-gray-200 rounded-lg text-sm text-gray-500\">\r\n          {t('components.autocomplete.noMatch', { value })}\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * BulkIngredientInput - ë°°í•©í‘œ ì¼ê´„ ì…ë ¥ ì»´í¬ë„ŒíŠ¸\r\n * ë³µì‚¬/ë¶™ì—¬ë„£ê¸°ë¡œ ì—¬ëŸ¬ ì¬ë£Œë¥¼ í•œë²ˆì— ì…ë ¥\r\n *\r\n * ì§€ì› í˜•ì‹:\r\n * - ê°•ë ¥ë¶„ 500g\r\n * - ê°•ë ¥ë¶„\t500\r\n * - ê°•ë ¥ë¶„, 500g\r\n * - ê°•ë ¥ë¶„ 500\r\n */\r\n\r\nimport React, { useState, useCallback } from 'react'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { X, Upload, FileText, AlertCircle, CheckCircle } from 'lucide-react'\r\nimport { findIngredientInfo } from '@/data/ingredientDatabase'\r\n\r\ninterface ParsedIngredient {\r\n  name: string\r\n  amount: number\r\n  category: string\r\n  isValid: boolean\r\n  error?: string\r\n}\r\n\r\ninterface BulkIngredientInputProps {\r\n  isOpen: boolean\r\n  onClose: () => void\r\n  onImport: (ingredients: Array<{ name: string; amount: number; category: string }>) => void\r\n}\r\n\r\n// ì¹´í…Œê³ ë¦¬ ë§¤í•‘\r\nconst CATEGORY_MAP: Record<string, string> = {\r\n  flour: 'flour',\r\n  liquid: 'liquid',\r\n  fat: 'wetOther',\r\n  sugar: 'other',\r\n  egg: 'wetOther',\r\n  dairy: 'liquid',\r\n  leavening: 'other',\r\n  salt: 'other',\r\n  flavoring: 'other',\r\n  nut: 'other',\r\n  fruit: 'other',\r\n  chocolate: 'other',\r\n  other: 'other'\r\n}\r\n\r\n/**\r\n * í•œ ì¤„ í…ìŠ¤íŠ¸ì—ì„œ ì¬ë£Œëª…ê³¼ ì–‘ íŒŒì‹±\r\n */\r\nfunction parseIngredientLine(line: string): ParsedIngredient | null {\r\n  const trimmed = line.trim()\r\n  if (!trimmed || trimmed.startsWith('#') || trimmed.startsWith('//')) {\r\n    return null // ë¹ˆ ì¤„ì´ë‚˜ ì£¼ì„ ë¬´ì‹œ\r\n  }\r\n\r\n  // ë‹¤ì–‘í•œ êµ¬ë¶„ì ì‹œë„: íƒ­, ì‰¼í‘œ, ê³µë°±+ìˆ«ì\r\n  let name = ''\r\n  let amountStr = ''\r\n\r\n  // íŒ¨í„´ 1: íƒ­ êµ¬ë¶„ (ê°•ë ¥ë¶„\\t500)\r\n  if (trimmed.includes('\\t')) {\r\n    const parts = trimmed.split('\\t').map(p => p.trim()).filter(Boolean)\r\n    if (parts.length >= 2) {\r\n      name = parts[0]\r\n      amountStr = parts[1]\r\n    }\r\n  }\r\n  // íŒ¨í„´ 2: ì‰¼í‘œ êµ¬ë¶„ (ê°•ë ¥ë¶„, 500g)\r\n  else if (trimmed.includes(',')) {\r\n    const parts = trimmed.split(',').map(p => p.trim()).filter(Boolean)\r\n    if (parts.length >= 2) {\r\n      name = parts[0]\r\n      amountStr = parts[1]\r\n    }\r\n  }\r\n  // íŒ¨í„´ 3: ê³µë°± + ìˆ«ì (ê°•ë ¥ë¶„ 500g ë˜ëŠ” ê°•ë ¥ë¶„ 500)\r\n  else {\r\n    const match = trimmed.match(/^(.+?)\\s+(\\d+\\.?\\d*)\\s*(g|kg|ml|L|ê°œ)?$/i)\r\n    if (match) {\r\n      name = match[1].trim()\r\n      amountStr = match[2]\r\n      // kg, L ë‹¨ìœ„ ë³€í™˜\r\n      const unit = match[3]?.toLowerCase()\r\n      if (unit === 'kg') {\r\n        amountStr = String(parseFloat(match[2]) * 1000)\r\n      } else if (unit === 'l') {\r\n        amountStr = String(parseFloat(match[2]) * 1000)\r\n      }\r\n    }\r\n  }\r\n\r\n  // íŒŒì‹± ì‹¤íŒ¨\r\n  if (!name) {\r\n    return {\r\n      name: trimmed,\r\n      amount: 0,\r\n      category: 'other',\r\n      isValid: false,\r\n      error: 'í˜•ì‹ì„ ì¸ì‹í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤'\r\n    }\r\n  }\r\n\r\n  // ìˆ«ìì—ì„œ g, ml ë“± ë‹¨ìœ„ ì œê±°\r\n  const cleanAmount = amountStr.replace(/[^\\d.]/g, '')\r\n  const amount = parseFloat(cleanAmount)\r\n\r\n  if (isNaN(amount) || amount <= 0) {\r\n    return {\r\n      name,\r\n      amount: 0,\r\n      category: 'other',\r\n      isValid: false,\r\n      error: `ì–‘ì„ ì¸ì‹í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤: \"${amountStr}\"`\r\n    }\r\n  }\r\n\r\n  // ì¬ë£Œ ì •ë³´ ì¡°íšŒ\r\n  const info = findIngredientInfo(name)\r\n  const category = info ? CATEGORY_MAP[info.category] || 'other' : 'other'\r\n\r\n  return {\r\n    name,\r\n    amount,\r\n    category,\r\n    isValid: true\r\n  }\r\n}\r\n\r\nexport default function BulkIngredientInput({\r\n  isOpen,\r\n  onClose,\r\n  onImport\r\n}: BulkIngredientInputProps) {\r\n  const { t } = useTranslation()\r\n  const [inputText, setInputText] = useState('')\r\n  const [parsedIngredients, setParsedIngredients] = useState<ParsedIngredient[]>([])\r\n  const [isParsed, setIsParsed] = useState(false)\r\n\r\n  // í…ìŠ¤íŠ¸ íŒŒì‹±\r\n  const handleParse = useCallback(() => {\r\n    const lines = inputText.split('\\n')\r\n    const parsed = lines\r\n      .map(parseIngredientLine)\r\n      .filter((item): item is ParsedIngredient => item !== null)\r\n\r\n    setParsedIngredients(parsed)\r\n    setIsParsed(true)\r\n  }, [inputText])\r\n\r\n  // ê°€ì ¸ì˜¤ê¸° í™•ì •\r\n  const handleImport = useCallback(() => {\r\n    const validIngredients = parsedIngredients\r\n      .filter(ing => ing.isValid)\r\n      .map(ing => ({\r\n        name: ing.name,\r\n        amount: ing.amount,\r\n        category: ing.category\r\n      }))\r\n\r\n    if (validIngredients.length > 0) {\r\n      onImport(validIngredients)\r\n      setInputText('')\r\n      setParsedIngredients([])\r\n      setIsParsed(false)\r\n      onClose()\r\n    }\r\n  }, [parsedIngredients, onImport, onClose])\r\n\r\n  // ì´ˆê¸°í™”\r\n  const handleReset = useCallback(() => {\r\n    setInputText('')\r\n    setParsedIngredients([])\r\n    setIsParsed(false)\r\n  }, [])\r\n\r\n  // í´ë¦½ë³´ë“œì—ì„œ ë¶™ì—¬ë„£ê¸°\r\n  const handlePaste = useCallback(async () => {\r\n    try {\r\n      const text = await navigator.clipboard.readText()\r\n      setInputText(text)\r\n      setIsParsed(false)\r\n    } catch (err) {\r\n      console.error('í´ë¦½ë³´ë“œ ì½ê¸° ì‹¤íŒ¨:', err)\r\n    }\r\n  }, [])\r\n\r\n  if (!isOpen) return null\r\n\r\n  const validCount = parsedIngredients.filter(i => i.isValid).length\r\n  const invalidCount = parsedIngredients.filter(i => !i.isValid).length\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\">\r\n      <div className=\"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[80vh] flex flex-col\">\r\n        {/* í—¤ë” */}\r\n        <div className=\"flex items-center justify-between px-4 py-3 border-b\">\r\n          <h3 className=\"font-semibold text-lg flex items-center gap-2\">\r\n            <FileText className=\"w-5 h-5 text-amber-600\" />\r\n            {t('components.bulkInput.title')}\r\n          </h3>\r\n          <button onClick={onClose} className=\"p-1 hover:bg-gray-100 rounded\">\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* ë³¸ë¬¸ */}\r\n        <div className=\"flex-1 overflow-auto p-4 space-y-4\">\r\n          {/* ì…ë ¥ ì•ˆë‚´ */}\r\n          <div className=\"text-sm text-gray-600 bg-gray-50 p-3 rounded-lg\">\r\n            <p className=\"font-medium mb-1\">{t('components.bulkInput.supportedFormats')}</p>\r\n            <ul className=\"text-xs space-y-0.5 text-gray-500\">\r\n              <li>â€¢ {t('components.bulkInput.formatExample1')}</li>\r\n              <li>â€¢ {t('components.bulkInput.formatExample2')}</li>\r\n              <li>â€¢ {t('components.bulkInput.formatExample3')}</li>\r\n            </ul>\r\n          </div>\r\n\r\n          {/* í…ìŠ¤íŠ¸ ì…ë ¥ ì˜ì—­ */}\r\n          <div>\r\n            <div className=\"flex items-center justify-between mb-2\">\r\n              <label className=\"text-sm font-medium text-gray-700\">{t('components.bulkInput.ingredientList')}</label>\r\n              <button\r\n                onClick={handlePaste}\r\n                className=\"text-xs flex items-center gap-1 px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded\"\r\n              >\r\n                <Upload className=\"w-3 h-3\" />\r\n                {t('common.pasteFromClipboard')}\r\n              </button>\r\n            </div>\r\n            <textarea\r\n              value={inputText}\r\n              onChange={(e) => {\r\n                setInputText(e.target.value)\r\n                setIsParsed(false)\r\n              }}\r\n              placeholder={t('components.bulkInput.placeholder')}\r\n              className=\"w-full h-40 p-3 border rounded-lg text-sm font-mono resize-none focus:ring-2 focus:ring-amber-500 focus:border-amber-500\"\r\n            />\r\n          </div>\r\n\r\n          {/* íŒŒì‹± ê²°ê³¼ ë¯¸ë¦¬ë³´ê¸° */}\r\n          {isParsed && parsedIngredients.length > 0 && (\r\n            <div className=\"border rounded-lg overflow-hidden\">\r\n              <div className=\"bg-gray-50 px-3 py-2 border-b flex items-center justify-between\">\r\n                <span className=\"text-sm font-medium\">{t('components.bulkInput.parseResult')}</span>\r\n                <div className=\"flex gap-2 text-xs\">\r\n                  {validCount > 0 && (\r\n                    <span className=\"text-green-600 flex items-center gap-1\">\r\n                      <CheckCircle className=\"w-3 h-3\" />\r\n                      {t('components.bulkInput.successCount', { count: validCount })}\r\n                    </span>\r\n                  )}\r\n                  {invalidCount > 0 && (\r\n                    <span className=\"text-red-500 flex items-center gap-1\">\r\n                      <AlertCircle className=\"w-3 h-3\" />\r\n                      {t('components.bulkInput.failCount', { count: invalidCount })}\r\n                    </span>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div className=\"max-h-48 overflow-auto\">\r\n                <table className=\"w-full text-sm\">\r\n                  <thead className=\"bg-gray-50 sticky top-0\">\r\n                    <tr>\r\n                      <th className=\"text-left px-3 py-1.5 font-medium\">{t('common.status')}</th>\r\n                      <th className=\"text-left px-3 py-1.5 font-medium\">{t('components.bulkInput.tableName')}</th>\r\n                      <th className=\"text-right px-3 py-1.5 font-medium\">{t('components.bulkInput.tableAmount')}</th>\r\n                      <th className=\"text-left px-3 py-1.5 font-medium\">{t('common.note')}</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {parsedIngredients.map((ing, idx) => (\r\n                      <tr key={idx} className={`border-t ${ing.isValid ? '' : 'bg-red-50'}`}>\r\n                        <td className=\"px-3 py-1.5\">\r\n                          {ing.isValid ? (\r\n                            <CheckCircle className=\"w-4 h-4 text-green-500\" />\r\n                          ) : (\r\n                            <AlertCircle className=\"w-4 h-4 text-red-500\" />\r\n                          )}\r\n                        </td>\r\n                        <td className=\"px-3 py-1.5\">{ing.name}</td>\r\n                        <td className=\"px-3 py-1.5 text-right font-mono\">\r\n                          {ing.isValid ? ing.amount : '-'}\r\n                        </td>\r\n                        <td className=\"px-3 py-1.5 text-xs text-gray-500\">\r\n                          {ing.error || (findIngredientInfo(ing.name) ? t('components.bulkInput.dbMatched') : '')}\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* í‘¸í„° */}\r\n        <div className=\"flex items-center justify-between px-4 py-3 border-t bg-gray-50\">\r\n          <button\r\n            onClick={handleReset}\r\n            className=\"px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-200 rounded\"\r\n          >\r\n            {t('common.reset')}\r\n          </button>\r\n          <div className=\"flex gap-2\">\r\n            <button\r\n              onClick={onClose}\r\n              className=\"px-4 py-1.5 text-sm border rounded hover:bg-gray-100\"\r\n            >\r\n              {t('common.cancel')}\r\n            </button>\r\n            {!isParsed ? (\r\n              <button\r\n                onClick={handleParse}\r\n                disabled={!inputText.trim()}\r\n                className=\"px-4 py-1.5 text-sm bg-amber-500 text-white rounded hover:bg-amber-600 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              >\r\n                {t('common.parse')}\r\n              </button>\r\n            ) : (\r\n              <button\r\n                onClick={handleImport}\r\n                disabled={validCount === 0}\r\n                className=\"px-4 py-1.5 text-sm bg-green-500 text-white rounded hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              >\r\n                {t('components.bulkInput.importCount', { count: validCount })}\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * ìˆ˜ìœ¨ ì†ì‹¤ ì˜ˆì¸¡ ìœ í‹¸ë¦¬í‹°\r\n * ì œê³¼ì œë¹µ ê³µì •ë³„ ìˆ˜ìœ¨ ì†ì‹¤ì„ ì˜ˆì¸¡í•˜ê³  ìµœì¢… ìƒì‚°ëŸ‰ì„ ê³„ì‚°\r\n *\r\n * ì¶œì²˜: ì œê³¼ì œë¹µ ì‹¤ë¬´ ë°ì´í„° ê¸°ë°˜\r\n */\r\n\r\nexport type ProductCategory = 'bread' | 'cake' | 'pastry' | 'cookie' | 'other'\r\n\r\n/**\r\n * ê³µì •ë³„ ì†ì‹¤ë¥  ë°ì´í„°\r\n * ê° ìˆ˜ì¹˜ëŠ” í•´ë‹¹ ê³µì •ì—ì„œ ì†ì‹¤ë˜ëŠ” ë¹„ìœ¨ (%)\r\n */\r\nexport interface ProcessLossRates {\r\n  mixing: number      // ë¯¹ì‹± ì†ì‹¤ (ë°˜ì£½ê¸°/ë³¼ì— ë¶™ëŠ” ì–‘)\r\n  fermentation: number // ë°œíš¨ ì†ì‹¤ (ê°€ìŠ¤ ë°©ì¶œ)\r\n  dividing: number    // ë¶„í•  ì†ì‹¤ (ë¶„í•  ì‹œ ë¶™ëŠ” ì–‘)\r\n  shaping: number     // ì„±í˜• ì†ì‹¤ (ì„±í˜•ëŒ€ì— ë¶™ëŠ” ì–‘)\r\n  baking: number      // êµ½ê¸° ì†ì‹¤ (ìˆ˜ë¶„ ì¦ë°œ)\r\n  cooling: number     // ëƒ‰ê° ì†ì‹¤ (ì¶”ê°€ ìˆ˜ë¶„ ì¦ë°œ)\r\n}\r\n\r\n/**\r\n * ì œí’ˆ ì¢…ë¥˜ë³„ ê¸°ë³¸ ì†ì‹¤ë¥ \r\n */\r\nexport const DEFAULT_LOSS_RATES: Record<ProductCategory, ProcessLossRates> = {\r\n  bread: {\r\n    mixing: 2.0,       // ë°˜ì£½ì´ ëˆì ì—¬ì„œ ë¶™ìŒ\r\n    fermentation: 1.0, // ë°œíš¨ ì¤‘ ê°€ìŠ¤ ì¼ë¶€ ë°©ì¶œ\r\n    dividing: 1.5,     // ë¶„í• ëŒ€/ìŠ¤í¬ë˜í¼ì— ë¶™ìŒ\r\n    shaping: 1.0,      // ì„±í˜• ì‹œ ë¶™ìŒ\r\n    baking: 12.0,      // ìˆ˜ë¶„ ì¦ë°œ (ì‹ë¹µ ê¸°ì¤€)\r\n    cooling: 2.0       // ëƒ‰ê° ì¤‘ ì¶”ê°€ ìˆ˜ë¶„ ì†ì‹¤\r\n  },\r\n  cake: {\r\n    mixing: 3.0,       // ë°˜ì£½ì´ ë¬½ì–´ì„œ ë” ë¶™ìŒ\r\n    fermentation: 0,   // ë°œíš¨ ì—†ìŒ\r\n    dividing: 0,       // ë¶„í•  ì—†ìŒ (íŒ¬ì— ë°”ë¡œ íˆ¬ì…)\r\n    shaping: 0,        // ì„±í˜• ì—†ìŒ\r\n    baking: 15.0,      // ìˆ˜ë¶„ ì¦ë°œ (ìŠ¤í€ì§€ ê¸°ì¤€)\r\n    cooling: 1.5       // ëƒ‰ê° ì¤‘ ìˆ˜ë¶„ ì†ì‹¤\r\n  },\r\n  pastry: {\r\n    mixing: 1.5,       // ë¹„êµì  ëœ ëˆì ì„\r\n    fermentation: 0.5, // ì•½ê°„ì˜ ë°œíš¨\r\n    dividing: 2.0,     // ì¸µì´ ë§ì•„ ë¶„í•  ì†ì‹¤ ë†’ìŒ\r\n    shaping: 2.0,      // ì¸µ ì„±í˜• ì‹œ ì†ì‹¤\r\n    baking: 18.0,      // ìˆ˜ë¶„ ì¦ë°œ + ë²„í„° ìš©ì¶œ\r\n    cooling: 1.0       // ëƒ‰ê° ì†ì‹¤\r\n  },\r\n  cookie: {\r\n    mixing: 2.5,       // ë²„í„° ë°˜ì£½ ë¶™ìŒ\r\n    fermentation: 0,   // ë°œíš¨ ì—†ìŒ\r\n    dividing: 1.0,     // ë¶„í•  ì†ì‹¤\r\n    shaping: 1.5,      // ì„±í˜• ì†ì‹¤\r\n    baking: 8.0,       // ìˆ˜ë¶„ ì¦ë°œ (ë‚®ì€ ìˆ˜ë¶„ ë°˜ì£½)\r\n    cooling: 0.5       // ëƒ‰ê° ì†ì‹¤ ì ìŒ\r\n  },\r\n  other: {\r\n    mixing: 2.0,\r\n    fermentation: 0.5,\r\n    dividing: 1.0,\r\n    shaping: 1.0,\r\n    baking: 12.0,\r\n    cooling: 1.5\r\n  }\r\n}\r\n\r\n/**\r\n * ì„¸ë¶€ ì œí’ˆë³„ ì†ì‹¤ë¥  ì¡°ì •\r\n */\r\nexport const PRODUCT_LOSS_ADJUSTMENTS: Record<string, Partial<ProcessLossRates>> = {\r\n  // ì‹ë¹µë¥˜\r\n  pullman: { baking: 10.0 },      // ëšœê»‘ ë®ì–´ì„œ ì†ì‹¤ ì ìŒ\r\n  mountain: { baking: 13.0 },     // ì—´ë¦° ìƒíƒœë¡œ êµ½ê¸°\r\n  brioche: { baking: 11.0, mixing: 3.0 }, // ë²„í„° ë§ì•„ ë¯¹ì‹± ì†ì‹¤ ë†’ìŒ\r\n\r\n  // ì¼€ì´í¬ë¥˜\r\n  genoise: { baking: 14.0, mixing: 4.0 },\r\n  chiffon: { baking: 13.0, mixing: 3.5 },\r\n  pound: { baking: 10.0, mixing: 3.0 },\r\n  brownie: { baking: 8.0 },       // ì´‰ì´‰í•˜ê²Œ êµ½ê¸°\r\n  cheesecake: { baking: 5.0 },    // ìˆ˜ë¶„ ì†ì‹¤ ì ìŒ\r\n\r\n  // í˜ì´ìŠ¤íŠ¸ë¦¬\r\n  croissant: { baking: 20.0, shaping: 3.0 },\r\n  danish: { baking: 18.0, shaping: 2.5 },\r\n  puff_pastry: { baking: 22.0 },  // ë†’ì€ ìˆ˜ë¶„ ì¦ë°œ\r\n\r\n  // ê¸°íƒ€ ë¹µ\r\n  baguette: { baking: 18.0, shaping: 1.5 },\r\n  ciabatta: { baking: 16.0, mixing: 3.0 }, // ê³ ìˆ˜ë¶„ ë°˜ì£½\r\n  sourdough: { baking: 15.0, fermentation: 2.0 },\r\n\r\n  // ì¿ í‚¤/ê¸°íƒ€\r\n  cookie: { baking: 8.0 },\r\n  scone: { baking: 12.0 },\r\n  tart: { baking: 10.0, shaping: 2.0 }\r\n}\r\n\r\n/**\r\n * í™˜ê²½ ìš”ì¸ì— ë”°ë¥¸ ì†ì‹¤ë¥  ì¡°ì •\r\n */\r\nexport interface EnvironmentFactors {\r\n  humidity?: number      // ìŠµë„ (%, ê¸°ë³¸ 60)\r\n  temperature?: number   // ì‹¤ì˜¨ (Â°C, ê¸°ë³¸ 25)\r\n  altitude?: number      // ê³ ë„ (m, ê¸°ë³¸ 0) - ì°¸ê³ ìš©\r\n}\r\n\r\n/**\r\n * í™˜ê²½ì— ë”°ë¥¸ êµ½ê¸° ì†ì‹¤ ì¡°ì • ê³„ìˆ˜ ê³„ì‚°\r\n */\r\nexport function calculateEnvironmentAdjustment(env: EnvironmentFactors): number {\r\n  let adjustment = 1.0\r\n\r\n  // ìŠµë„ ì˜í–¥ (60%ë¥¼ ê¸°ì¤€ìœ¼ë¡œ)\r\n  // ìŠµë„ ë‚®ìœ¼ë©´ ìˆ˜ë¶„ ì¦ë°œ ì¦ê°€, ë†’ìœ¼ë©´ ê°ì†Œ\r\n  if (env.humidity !== undefined) {\r\n    const humidityDiff = 60 - env.humidity\r\n    adjustment *= 1 + (humidityDiff * 0.005) // 10% ì°¨ì´ë‹¹ 5% ì¡°ì •\r\n  }\r\n\r\n  // ì˜¨ë„ ì˜í–¥ (25Â°Cë¥¼ ê¸°ì¤€ìœ¼ë¡œ)\r\n  // ì˜¨ë„ ë†’ìœ¼ë©´ ë°œíš¨ ë¹¨ë¼ì§€ê³  ìˆ˜ë¶„ ì¦ë°œ ì¦ê°€\r\n  if (env.temperature !== undefined) {\r\n    const tempDiff = env.temperature - 25\r\n    adjustment *= 1 + (tempDiff * 0.01) // 5Â°C ì°¨ì´ë‹¹ 5% ì¡°ì •\r\n  }\r\n\r\n  return Math.max(0.8, Math.min(1.3, adjustment)) // 80%~130% ë²”ìœ„ ì œí•œ\r\n}\r\n\r\n/**\r\n * ìˆ˜ìœ¨ ì†ì‹¤ ê³„ì‚° ê²°ê³¼\r\n */\r\nexport interface YieldLossResult {\r\n  inputWeight: number           // íˆ¬ì… ì¤‘ëŸ‰ (g)\r\n  outputWeight: number          // ì˜ˆìƒ ì‚°ì¶œ ì¤‘ëŸ‰ (g)\r\n  totalLossPercent: number      // ì´ ì†ì‹¤ë¥  (%)\r\n  totalLossWeight: number       // ì´ ì†ì‹¤ ì¤‘ëŸ‰ (g)\r\n  yieldPercent: number          // ìˆ˜ìœ¨ (%)\r\n\r\n  // ê³µì •ë³„ ìƒì„¸\r\n  processLosses: {\r\n    stage: string\r\n    lossPercent: number\r\n    lossWeight: number\r\n    remainingWeight: number\r\n  }[]\r\n\r\n  // ì¡°ì–¸\r\n  tips: string[]\r\n}\r\n\r\n/**\r\n * ê³µì • ì„ íƒ ìƒíƒœ íƒ€ì…\r\n */\r\nexport type ProcessStageSelection = {\r\n  mixing: boolean\r\n  fermentation: boolean\r\n  dividing: boolean\r\n  shaping: boolean\r\n  baking: boolean\r\n  cooling: boolean\r\n}\r\n\r\n/**\r\n * ê¸°ë³¸ ê³µì • ì„ íƒ (ëª¨ë‘ ì„ íƒ)\r\n */\r\nexport const DEFAULT_STAGE_SELECTION: ProcessStageSelection = {\r\n  mixing: true,\r\n  fermentation: true,\r\n  dividing: true,\r\n  shaping: true,\r\n  baking: true,\r\n  cooling: true\r\n}\r\n\r\n/**\r\n * ìˆ˜ìœ¨ ì†ì‹¤ ê³„ì‚°\r\n * @param inputWeight íˆ¬ì… ì¤‘ëŸ‰ (g)\r\n * @param category ì œí’ˆ ì¹´í…Œê³ ë¦¬\r\n * @param productType ì„¸ë¶€ ì œí’ˆ íƒ€ì… (ì„ íƒ)\r\n * @param environment í™˜ê²½ ìš”ì¸ (ì„ íƒ)\r\n * @param enabledStages í™œì„±í™”ëœ ê³µì • (ì„ íƒ)\r\n * @returns ìˆ˜ìœ¨ ì†ì‹¤ ê³„ì‚° ê²°ê³¼\r\n */\r\nexport function calculateYieldLoss(\r\n  inputWeight: number,\r\n  category: ProductCategory,\r\n  productType?: string,\r\n  environment?: EnvironmentFactors,\r\n  enabledStages?: ProcessStageSelection\r\n): YieldLossResult {\r\n  // ê¸°ë³¸ ì†ì‹¤ë¥  ê°€ì ¸ì˜¤ê¸°\r\n  const baseLossRates = { ...DEFAULT_LOSS_RATES[category] }\r\n\r\n  // ì„¸ë¶€ ì œí’ˆë³„ ì¡°ì • ì ìš©\r\n  if (productType && PRODUCT_LOSS_ADJUSTMENTS[productType]) {\r\n    Object.assign(baseLossRates, PRODUCT_LOSS_ADJUSTMENTS[productType])\r\n  }\r\n\r\n  // í™˜ê²½ ì¡°ì • ê³„ìˆ˜\r\n  const envAdjustment = environment\r\n    ? calculateEnvironmentAdjustment(environment)\r\n    : 1.0\r\n\r\n  // ê³µì •ë³„ ì†ì‹¤ ê³„ì‚°\r\n  const processLosses: YieldLossResult['processLosses'] = []\r\n  let remainingWeight = inputWeight\r\n\r\n  const stages: { key: keyof ProcessLossRates; name: string }[] = [\r\n    { key: 'mixing', name: 'ë¯¹ì‹±' },\r\n    { key: 'fermentation', name: 'ë°œíš¨' },\r\n    { key: 'dividing', name: 'ë¶„í• ' },\r\n    { key: 'shaping', name: 'ì„±í˜•' },\r\n    { key: 'baking', name: 'êµ½ê¸°' },\r\n    { key: 'cooling', name: 'ëƒ‰ê°' }\r\n  ]\r\n\r\n  // ê¸°ë³¸ ê³µì • ì„ íƒ ìƒíƒœ (ëª¨ë‘ í™œì„±í™”)\r\n  const stageSelection = enabledStages || DEFAULT_STAGE_SELECTION\r\n\r\n  for (const stage of stages) {\r\n    // ë¹„í™œì„±í™”ëœ ê³µì •ì€ ê±´ë„ˆë›°ê¸°\r\n    if (!stageSelection[stage.key]) continue\r\n\r\n    let lossPercent = baseLossRates[stage.key]\r\n\r\n    // êµ½ê¸° ë‹¨ê³„ì— í™˜ê²½ ì¡°ì • ì ìš©\r\n    if (stage.key === 'baking') {\r\n      lossPercent *= envAdjustment\r\n    }\r\n\r\n    // ì†ì‹¤ì´ 0ì´ë©´ ê±´ë„ˆë›°ê¸°\r\n    if (lossPercent <= 0) continue\r\n\r\n    const lossWeight = Math.round(remainingWeight * (lossPercent / 100))\r\n    remainingWeight -= lossWeight\r\n\r\n    processLosses.push({\r\n      stage: stage.name,\r\n      lossPercent: Math.round(lossPercent * 10) / 10,\r\n      lossWeight,\r\n      remainingWeight\r\n    })\r\n  }\r\n\r\n  // ì´ê³„ ê³„ì‚°\r\n  const outputWeight = remainingWeight\r\n  const totalLossWeight = inputWeight - outputWeight\r\n  const totalLossPercent = Math.round((totalLossWeight / inputWeight) * 1000) / 10\r\n  const yieldPercent = Math.round((outputWeight / inputWeight) * 1000) / 10\r\n\r\n  // ì¡°ì–¸ ìƒì„±\r\n  const tips = generateYieldTips(category, productType, totalLossPercent, environment)\r\n\r\n  return {\r\n    inputWeight,\r\n    outputWeight,\r\n    totalLossPercent,\r\n    totalLossWeight,\r\n    yieldPercent,\r\n    processLosses,\r\n    tips\r\n  }\r\n}\r\n\r\n/**\r\n * ìˆ˜ìœ¨ ê´€ë ¨ ì¡°ì–¸ ìƒì„±\r\n */\r\nfunction generateYieldTips(\r\n  category: ProductCategory,\r\n  productType?: string,\r\n  totalLoss?: number,\r\n  environment?: EnvironmentFactors\r\n): string[] {\r\n  const tips: string[] = []\r\n\r\n  // ì¹´í…Œê³ ë¦¬ë³„ ê¸°ë³¸ ì¡°ì–¸\r\n  if (category === 'bread') {\r\n    tips.push('ë°˜ì£½ê¸° ë‚´ë¶€ì— ì˜¤ì¼ ìŠ¤í”„ë ˆì´ë¡œ ë°˜ì£½ ë¶™ìŒ ë°©ì§€')\r\n    tips.push('ë¶„í•  ì‹œ ìŠ¤í¬ë˜í¼ì— ë°€ê°€ë£¨ ì‚¬ìš©')\r\n  } else if (category === 'cake') {\r\n    tips.push('ë³¼/íœ˜í¼ì— ë¶™ì€ ë°˜ì£½ì„ ê¹¨ë—ì´ ê¸ì–´ ì‚¬ìš©')\r\n    tips.push('íŒ¬ì— ìœ ì‚°ì§€ ê¹”ì•„ ì†ì‹¤ ìµœì†Œí™”')\r\n  } else if (category === 'pastry') {\r\n    tips.push('ì‘ì—…ëŒ€ì— ë°€ê°€ë£¨ ì ì ˆíˆ ë¿Œë ¤ ë¶™ìŒ ë°©ì§€')\r\n    tips.push('ì°¨ê°€ìš´ ìƒíƒœë¡œ ì‘ì—…í•´ ë²„í„° ìš©ì¶œ ë°©ì§€')\r\n  }\r\n\r\n  // ì œí’ˆë³„ íŠ¹ìˆ˜ ì¡°ì–¸\r\n  if (productType === 'croissant') {\r\n    tips.push('êµ½ê¸° í›„ ë°”ë¡œ ì„ ë°˜ì— ì˜¬ë ¤ ë°”ë‹¥ ëˆ…ëˆ…í•¨ ë°©ì§€')\r\n  } else if (productType === 'baguette') {\r\n    tips.push('ìŠ¤íŒ€ êµ½ê¸°ë¡œ ê»ì§ˆ í˜•ì„± í›„ ìˆ˜ë¶„ ì¦ë°œ ì¡°ì ˆ')\r\n  } else if (productType === 'chiffon') {\r\n    tips.push('íŒ¬ì— ê¸°ë¦„ ë°”ë¥´ì§€ ì•Šì•„ì•¼ ë†’ì´ ìœ ì§€')\r\n  }\r\n\r\n  // í™˜ê²½ ê´€ë ¨ ì¡°ì–¸\r\n  if (environment?.humidity !== undefined) {\r\n    if (environment.humidity < 50) {\r\n      tips.push('ê±´ì¡°í•œ í™˜ê²½: ë°˜ì£½ ë®ê°œë¡œ í‘œë©´ ê±´ì¡° ë°©ì§€')\r\n    } else if (environment.humidity > 70) {\r\n      tips.push('ìŠµí•œ í™˜ê²½: êµ½ê¸° ì‹œê°„ ì•½ê°„ ì—°ì¥ ê³ ë ¤')\r\n    }\r\n  }\r\n\r\n  if (environment?.temperature !== undefined) {\r\n    if (environment.temperature > 30) {\r\n      tips.push('ê³ ì˜¨ í™˜ê²½: ë°˜ì£½ ì˜¨ë„ ê´€ë¦¬ì— ì£¼ì˜')\r\n    }\r\n  }\r\n\r\n  return tips\r\n}\r\n\r\n/**\r\n * ëª©í‘œ ì‚°ì¶œëŸ‰ì— í•„ìš”í•œ íˆ¬ì…ëŸ‰ ì—­ì‚°\r\n * @param targetOutput ëª©í‘œ ì‚°ì¶œëŸ‰ (g)\r\n * @param category ì œí’ˆ ì¹´í…Œê³ ë¦¬\r\n * @param productType ì„¸ë¶€ ì œí’ˆ íƒ€ì… (ì„ íƒ)\r\n * @param environment í™˜ê²½ ìš”ì¸ (ì„ íƒ)\r\n * @param enabledStages í™œì„±í™”ëœ ê³µì • (ì„ íƒ)\r\n * @returns í•„ìš”í•œ íˆ¬ì…ëŸ‰ (g)\r\n */\r\nexport function calculateRequiredInput(\r\n  targetOutput: number,\r\n  category: ProductCategory,\r\n  productType?: string,\r\n  environment?: EnvironmentFactors,\r\n  enabledStages?: ProcessStageSelection\r\n): number {\r\n  // ë¨¼ì € ì˜ˆìƒ ìˆ˜ìœ¨ ê³„ì‚° (1000g ê¸°ì¤€)\r\n  const sampleResult = calculateYieldLoss(1000, category, productType, environment, enabledStages)\r\n  const yieldRate = sampleResult.yieldPercent / 100\r\n\r\n  // í•„ìš” íˆ¬ì…ëŸ‰ ê³„ì‚°\r\n  return Math.ceil(targetOutput / yieldRate)\r\n}\r\n\r\n/**\r\n * ìˆ˜ìœ¨ ì†ì‹¤ ìš”ì•½ í…ìŠ¤íŠ¸ ìƒì„±\r\n */\r\nexport function getYieldSummary(result: YieldLossResult): string {\r\n  return `íˆ¬ì… ${result.inputWeight}g â†’ ì˜ˆìƒ ì‚°ì¶œ ${result.outputWeight}g (ìˆ˜ìœ¨ ${result.yieldPercent}%, ì†ì‹¤ ${result.totalLossPercent}%)`\r\n}\r\n\r\nexport default {\r\n  calculateYieldLoss,\r\n  calculateRequiredInput,\r\n  getYieldSummary,\r\n  DEFAULT_LOSS_RATES,\r\n  PRODUCT_LOSS_ADJUSTMENTS\r\n}\r\n","/**\r\n * ìˆ˜ìœ¨ ì†ì‹¤ ì˜ˆì¸¡ ì»´í¬ë„ŒíŠ¸\r\n * íˆ¬ì… ì¤‘ëŸ‰ì—ì„œ ì˜ˆìƒ ì‚°ì¶œëŸ‰ì„ ê³„ì‚°í•˜ê³  ê³µì •ë³„ ì†ì‹¤ì„ ì‹œê°í™”\r\n * ê³µì •ë³„ ì„ íƒ ê¸°ëŠ¥ ì§€ì›\r\n */\r\n\r\nimport React, { useState, useMemo, useCallback } from 'react'\r\nimport { useTranslation } from 'react-i18next'\r\nimport {\r\n  calculateYieldLoss,\r\n  calculateRequiredInput,\r\n  ProductCategory,\r\n  YieldLossResult,\r\n  ProcessStageSelection,\r\n  DEFAULT_STAGE_SELECTION\r\n} from '@/utils/calculations/yieldLoss'\r\nimport { ChevronDown, ChevronUp, TrendingDown, Scale, Info, AlertTriangle, Check } from 'lucide-react'\r\n\r\ninterface YieldLossCalculatorProps {\r\n  /** íˆ¬ì… ì¤‘ëŸ‰ (g) - ì™¸ë¶€ì—ì„œ ì „ë‹¬ */\r\n  inputWeight?: number\r\n  /** ì œí’ˆ ì¹´í…Œê³ ë¦¬ */\r\n  category?: ProductCategory\r\n  /** ì„¸ë¶€ ì œí’ˆ íƒ€ì… */\r\n  productType?: string\r\n  /** í™˜ê²½ ìš”ì¸ (ìŠµë„, ì˜¨ë„) */\r\n  environment?: {\r\n    humidity?: number\r\n    temperature?: number\r\n  }\r\n  /** ê³µì • ì„ íƒ ìƒíƒœ (ì™¸ë¶€ì—ì„œ ì „ë‹¬) */\r\n  stageSelection?: ProcessStageSelection\r\n  /** ê³µì • ì„ íƒ ë³€ê²½ ì‹œ ì½œë°± */\r\n  onStageSelectionChange?: (selection: ProcessStageSelection) => void\r\n  /** ì»´íŒ©íŠ¸ ëª¨ë“œ (ê°„ëµ í‘œì‹œ) */\r\n  compact?: boolean\r\n  /** í´ë˜ìŠ¤ëª… */\r\n  className?: string\r\n}\r\n\r\n// ì œí’ˆ ì¹´í…Œê³ ë¦¬ ì˜µì…˜ (keys for translation)\r\nconst CATEGORY_KEYS: { value: ProductCategory; key: string }[] = [\r\n  { value: 'bread', key: 'bread' },\r\n  { value: 'cake', key: 'cake' },\r\n  { value: 'pastry', key: 'pastry' },\r\n  { value: 'cookie', key: 'cookie' },\r\n  { value: 'other', key: 'other' }\r\n]\r\n\r\n// ì„¸ë¶€ ì œí’ˆ íƒ€ì… ì˜µì…˜ (keys for translation)\r\nconst PRODUCT_TYPE_KEYS: Record<ProductCategory, { value: string; key: string }[]> = {\r\n  bread: [\r\n    { value: '', key: 'general_bread' },\r\n    { value: 'pullman', key: 'pullman' },\r\n    { value: 'mountain', key: 'mountain' },\r\n    { value: 'brioche', key: 'brioche' },\r\n    { value: 'baguette', key: 'baguette' },\r\n    { value: 'ciabatta', key: 'ciabatta' },\r\n    { value: 'sourdough', key: 'sourdough' }\r\n  ],\r\n  cake: [\r\n    { value: '', key: 'general_cake' },\r\n    { value: 'genoise', key: 'genoise' },\r\n    { value: 'chiffon', key: 'chiffon' },\r\n    { value: 'pound', key: 'pound' },\r\n    { value: 'brownie', key: 'brownie' },\r\n    { value: 'cheesecake', key: 'cheesecake' }\r\n  ],\r\n  pastry: [\r\n    { value: '', key: 'general_pastry' },\r\n    { value: 'croissant', key: 'croissant' },\r\n    { value: 'danish', key: 'danish' },\r\n    { value: 'puff_pastry', key: 'puff_pastry' }\r\n  ],\r\n  cookie: [\r\n    { value: '', key: 'general_cookie' },\r\n    { value: 'cookie', key: 'cookie' },\r\n    { value: 'scone', key: 'scone' }\r\n  ],\r\n  other: [\r\n    { value: '', key: 'general_other' },\r\n    { value: 'tart', key: 'tart' }\r\n  ]\r\n}\r\n\r\n// ê³µì • ì •ë³´ (keys for translation)\r\nconst STAGE_KEYS: { key: keyof ProcessStageSelection; translationKey: string; icon: string }[] = [\r\n  { key: 'mixing', translationKey: 'mixing', icon: 'ğŸ¥£' },\r\n  { key: 'fermentation', translationKey: 'fermentation', icon: 'ğŸ' },\r\n  { key: 'dividing', translationKey: 'dividing', icon: 'âœ‚ï¸' },\r\n  { key: 'shaping', translationKey: 'shaping', icon: 'ğŸ‘' },\r\n  { key: 'baking', translationKey: 'baking', icon: 'ğŸ”¥' },\r\n  { key: 'cooling', translationKey: 'cooling', icon: 'â„ï¸' }\r\n]\r\n\r\nexport default function YieldLossCalculator({\r\n  inputWeight: externalInputWeight,\r\n  category: externalCategory,\r\n  productType: externalProductType,\r\n  environment: externalEnvironment,\r\n  stageSelection: externalStageSelection,\r\n  onStageSelectionChange,\r\n  compact = false,\r\n  className = ''\r\n}: YieldLossCalculatorProps) {\r\n  const { t } = useTranslation()\r\n  // ë‚´ë¶€ ìƒíƒœ (ì™¸ë¶€ propì´ ì—†ì„ ë•Œ ì‚¬ìš©)\r\n  const [internalInputWeight, setInternalInputWeight] = useState(1000)\r\n  const [internalCategory, setInternalCategory] = useState<ProductCategory>('bread')\r\n  const [internalProductType, setInternalProductType] = useState('')\r\n  const [humidity, setHumidity] = useState(60)\r\n  const [temperature, setTemperature] = useState(25)\r\n  const [showDetails, setShowDetails] = useState(!compact)\r\n  const [showEnvironment, setShowEnvironment] = useState(false)\r\n  const [showStageSelection, setShowStageSelection] = useState(true)\r\n  const [mode, setMode] = useState<'forward' | 'reverse'>('forward')\r\n  const [targetOutput, setTargetOutput] = useState(800)\r\n  const [internalStageSelection, setInternalStageSelection] = useState<ProcessStageSelection>(DEFAULT_STAGE_SELECTION)\r\n\r\n  // ì™¸ë¶€ prop ìš°ì„ , ì—†ìœ¼ë©´ ë‚´ë¶€ ìƒíƒœ ì‚¬ìš©\r\n  const inputWeight = externalInputWeight ?? internalInputWeight\r\n  const category = externalCategory ?? internalCategory\r\n  const productType = externalProductType ?? internalProductType\r\n  const environment = externalEnvironment ?? { humidity, temperature }\r\n  const stageSelection = externalStageSelection ?? internalStageSelection\r\n\r\n  // ê³µì • ì„ íƒ ë³€ê²½ í•¸ë“¤ëŸ¬\r\n  const handleStageToggle = useCallback((stageKey: keyof ProcessStageSelection) => {\r\n    const newSelection = {\r\n      ...stageSelection,\r\n      [stageKey]: !stageSelection[stageKey]\r\n    }\r\n\r\n    if (onStageSelectionChange) {\r\n      onStageSelectionChange(newSelection)\r\n    } else {\r\n      setInternalStageSelection(newSelection)\r\n    }\r\n  }, [stageSelection, onStageSelectionChange])\r\n\r\n  // ì „ì²´ ì„ íƒ/í•´ì œ\r\n  const handleSelectAll = useCallback((selectAll: boolean) => {\r\n    const newSelection: ProcessStageSelection = {\r\n      mixing: selectAll,\r\n      fermentation: selectAll,\r\n      dividing: selectAll,\r\n      shaping: selectAll,\r\n      baking: selectAll,\r\n      cooling: selectAll\r\n    }\r\n\r\n    if (onStageSelectionChange) {\r\n      onStageSelectionChange(newSelection)\r\n    } else {\r\n      setInternalStageSelection(newSelection)\r\n    }\r\n  }, [onStageSelectionChange])\r\n\r\n  // ì„ íƒëœ ê³µì • ìˆ˜ ê³„ì‚°\r\n  const selectedCount = useMemo(() => {\r\n    return Object.values(stageSelection).filter(Boolean).length\r\n  }, [stageSelection])\r\n\r\n  // ìˆ˜ìœ¨ ê³„ì‚°\r\n  const result = useMemo<YieldLossResult | null>(() => {\r\n    if (inputWeight <= 0) return null\r\n    return calculateYieldLoss(inputWeight, category, productType || undefined, environment, stageSelection)\r\n  }, [inputWeight, category, productType, environment, stageSelection])\r\n\r\n  // ì—­ì‚° ê³„ì‚° (ëª©í‘œ ì‚°ì¶œëŸ‰ â†’ í•„ìš” íˆ¬ì…ëŸ‰)\r\n  const requiredInput = useMemo(() => {\r\n    if (targetOutput <= 0) return 0\r\n    return calculateRequiredInput(targetOutput, category, productType || undefined, environment, stageSelection)\r\n  }, [targetOutput, category, productType, environment, stageSelection])\r\n\r\n  // ì†ì‹¤ë¥  ìƒ‰ìƒ\r\n  const getLossColor = (percent: number) => {\r\n    if (percent >= 15) return 'text-red-600'\r\n    if (percent >= 10) return 'text-orange-500'\r\n    if (percent >= 5) return 'text-yellow-600'\r\n    return 'text-green-600'\r\n  }\r\n\r\n  // ì»´íŒ©íŠ¸ ëª¨ë“œ\r\n  if (compact && result) {\r\n    return (\r\n      <div className={`flex items-center gap-2 text-sm ${className}`}>\r\n        <TrendingDown className=\"w-4 h-4 text-orange-500\" />\r\n        <span>\r\n          {t('components.yieldLoss.expectedOutput')}: <b className=\"text-blue-600\">{result.outputWeight.toLocaleString()}g</b>\r\n          <span className={`ml-1 ${getLossColor(result.totalLossPercent)}`}>\r\n            (-{result.totalLossPercent}%)\r\n          </span>\r\n          {selectedCount < 6 && (\r\n            <span className=\"ml-1 text-gray-400 text-xs\">({selectedCount}{t('components.yieldLoss.processes')})</span>\r\n          )}\r\n        </span>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className={`bg-white border rounded-lg shadow-sm ${className}`}>\r\n      {/* í—¤ë” */}\r\n      <div className=\"flex items-center justify-between p-3 border-b bg-gradient-to-r from-orange-50 to-amber-50\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <TrendingDown className=\"w-5 h-5 text-orange-600\" />\r\n          <h3 className=\"font-semibold text-gray-800\">{t('components.yieldLoss.title')}</h3>\r\n        </div>\r\n        <div className=\"flex gap-1\">\r\n          <button\r\n            onClick={() => setMode('forward')}\r\n            className={`px-2 py-1 text-xs rounded ${mode === 'forward' ? 'bg-orange-500 text-white' : 'bg-gray-100 text-gray-600'}`}\r\n          >\r\n            {t('components.yieldLoss.inputToOutput')}\r\n          </button>\r\n          <button\r\n            onClick={() => setMode('reverse')}\r\n            className={`px-2 py-1 text-xs rounded ${mode === 'reverse' ? 'bg-orange-500 text-white' : 'bg-gray-100 text-gray-600'}`}\r\n          >\r\n            {t('components.yieldLoss.outputToInput')}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* ì…ë ¥ ì„¹ì…˜ */}\r\n      <div className=\"p-3 space-y-3\">\r\n        {/* ì œí’ˆ ì„ íƒ (ì™¸ë¶€ propì´ ì—†ì„ ë•Œë§Œ í‘œì‹œ) */}\r\n        {!externalCategory && (\r\n          <div className=\"grid grid-cols-2 gap-2\">\r\n            <div>\r\n              <label className=\"block text-xs text-gray-500 mb-1\">{t('components.yieldLoss.productType')}</label>\r\n              <select\r\n                value={internalCategory}\r\n                onChange={(e) => {\r\n                  setInternalCategory(e.target.value as ProductCategory)\r\n                  setInternalProductType('')\r\n                }}\r\n                className=\"w-full px-2 py-1.5 text-sm border rounded\"\r\n              >\r\n                {CATEGORY_KEYS.map(opt => (\r\n                  <option key={opt.value} value={opt.value}>{t(`components.yieldLoss.categories.${opt.key}`)}</option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-xs text-gray-500 mb-1\">{t('components.yieldLoss.detailProduct')}</label>\r\n              <select\r\n                value={internalProductType}\r\n                onChange={(e) => setInternalProductType(e.target.value)}\r\n                className=\"w-full px-2 py-1.5 text-sm border rounded\"\r\n              >\r\n                {PRODUCT_TYPE_KEYS[internalCategory].map(opt => (\r\n                  <option key={opt.value} value={opt.value}>{t(`components.yieldLoss.products.${opt.key}`)}</option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* ê³µì • ì„ íƒ */}\r\n        <div>\r\n          <button\r\n            onClick={() => setShowStageSelection(!showStageSelection)}\r\n            className=\"flex items-center gap-1 text-xs text-gray-600 hover:text-gray-800 mb-2\"\r\n          >\r\n            {showStageSelection ? <ChevronUp className=\"w-3 h-3\" /> : <ChevronDown className=\"w-3 h-3\" />}\r\n            <span className=\"font-medium\">{t('components.yieldLoss.processSelection')}</span>\r\n            <span className=\"text-gray-400\">({selectedCount}/6 {t('components.yieldLoss.selectedProcesses')})</span>\r\n          </button>\r\n\r\n          {showStageSelection && (\r\n            <div className=\"p-2 bg-gray-50 rounded space-y-2\">\r\n              <div className=\"flex justify-between items-center mb-1\">\r\n                <span className=\"text-xs text-gray-500\">{t('components.yieldLoss.selectProcessesForCalc')}</span>\r\n                <div className=\"flex gap-1\">\r\n                  <button\r\n                    onClick={() => handleSelectAll(true)}\r\n                    className=\"px-2 py-0.5 text-xs bg-blue-100 text-blue-600 rounded hover:bg-blue-200\"\r\n                  >\r\n                    {t('components.yieldLoss.selectAll')}\r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleSelectAll(false)}\r\n                    className=\"px-2 py-0.5 text-xs bg-gray-200 text-gray-600 rounded hover:bg-gray-300\"\r\n                  >\r\n                    {t('components.yieldLoss.deselectAll')}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              <div className=\"grid grid-cols-3 gap-1\">\r\n                {STAGE_KEYS.map(stage => (\r\n                  <button\r\n                    key={stage.key}\r\n                    onClick={() => handleStageToggle(stage.key)}\r\n                    className={`flex items-center gap-1 px-2 py-1.5 rounded text-xs transition-colors ${\r\n                      stageSelection[stage.key]\r\n                        ? 'bg-orange-100 text-orange-700 border border-orange-300'\r\n                        : 'bg-white text-gray-400 border border-gray-200 line-through'\r\n                    }`}\r\n                  >\r\n                    <span>{stage.icon}</span>\r\n                    <span>{t(`components.yieldLoss.stages.${stage.translationKey}`)}</span>\r\n                    {stageSelection[stage.key] && (\r\n                      <Check className=\"w-3 h-3 ml-auto\" />\r\n                    )}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n              {selectedCount < 6 && (\r\n                <div className=\"text-xs text-orange-600 flex items-center gap-1\">\r\n                  <AlertTriangle className=\"w-3 h-3\" />\r\n                  {t('components.yieldLoss.processesExcluded', { count: 6 - selectedCount })}\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* ì¤‘ëŸ‰ ì…ë ¥ */}\r\n        <div className=\"flex items-center gap-3\">\r\n          {mode === 'forward' ? (\r\n            <>\r\n              {/* íˆ¬ì…â†’ì‚°ì¶œ ëª¨ë“œ */}\r\n              <div className=\"flex-1\">\r\n                <label className=\"block text-xs text-gray-500 mb-1\">{t('components.yieldLoss.inputWeight')} (g)</label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={externalInputWeight ?? internalInputWeight}\r\n                  onChange={(e) => !externalInputWeight && setInternalInputWeight(parseInt(e.target.value) || 0)}\r\n                  disabled={!!externalInputWeight}\r\n                  className=\"w-full px-2 py-1.5 text-sm border rounded text-right font-mono\"\r\n                />\r\n              </div>\r\n              <div className=\"flex items-center pt-5\">\r\n                <span className=\"text-gray-400\">â†’</span>\r\n              </div>\r\n              <div className=\"flex-1\">\r\n                <label className=\"block text-xs text-gray-500 mb-1\">\r\n                  {t('components.yieldLoss.expectedOutput')} (g)\r\n                  {selectedCount < 6 && <span className=\"text-orange-500 ml-1\">*{selectedCount}{t('components.yieldLoss.processes')}</span>}\r\n                </label>\r\n                <div className=\"px-2 py-1.5 text-sm bg-blue-50 border border-blue-200 rounded text-right font-mono font-semibold text-blue-700\">\r\n                  {result?.outputWeight.toLocaleString() ?? '-'}\r\n                </div>\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <>\r\n              {/* ì‚°ì¶œâ†’íˆ¬ì… ëª¨ë“œ (ì—­ì‚°) */}\r\n              <div className=\"flex-1\">\r\n                <label className=\"block text-xs text-gray-500 mb-1\">{t('components.yieldLoss.targetOutput')} (g)</label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={targetOutput}\r\n                  onChange={(e) => setTargetOutput(parseInt(e.target.value) || 0)}\r\n                  className=\"w-full px-2 py-1.5 text-sm border rounded text-right font-mono\"\r\n                />\r\n              </div>\r\n              <div className=\"flex items-center pt-5\">\r\n                <span className=\"text-gray-400\">â†</span>\r\n              </div>\r\n              <div className=\"flex-1\">\r\n                <label className=\"block text-xs text-gray-500 mb-1\">{t('components.yieldLoss.requiredInput')} (g)</label>\r\n                <div className=\"px-2 py-1.5 text-sm bg-green-50 border border-green-200 rounded text-right font-mono font-semibold text-green-700\">\r\n                  {requiredInput.toLocaleString()}\r\n                </div>\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        {/* ìˆ˜ìœ¨ ìš”ì•½ */}\r\n        {mode === 'forward' && result && (\r\n          <div className=\"flex items-center justify-between px-3 py-2 bg-gray-50 rounded\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <Scale className=\"w-4 h-4 text-gray-500\" />\r\n              <span className=\"text-sm text-gray-600\">{t('components.yieldLoss.yield')}</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-3\">\r\n              <span className=\"text-lg font-bold text-blue-600\">{result.yieldPercent}%</span>\r\n              <span className={`text-sm ${getLossColor(result.totalLossPercent)}`}>\r\n                ({t('components.yieldLoss.loss')} {result.totalLossPercent}% / {result.totalLossWeight.toLocaleString()}g)\r\n              </span>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* í™˜ê²½ ì„¤ì • í† ê¸€ */}\r\n        {!externalEnvironment && (\r\n          <button\r\n            onClick={() => setShowEnvironment(!showEnvironment)}\r\n            className=\"flex items-center gap-1 text-xs text-gray-500 hover:text-gray-700\"\r\n          >\r\n            {showEnvironment ? <ChevronUp className=\"w-3 h-3\" /> : <ChevronDown className=\"w-3 h-3\" />}\r\n            {t('components.yieldLoss.envSettings')}\r\n          </button>\r\n        )}\r\n\r\n        {/* í™˜ê²½ ì„¤ì • */}\r\n        {showEnvironment && !externalEnvironment && (\r\n          <div className=\"grid grid-cols-2 gap-2 p-2 bg-gray-50 rounded\">\r\n            <div>\r\n              <label className=\"block text-xs text-gray-500 mb-1\">{t('components.yieldLoss.humidity')} (%)</label>\r\n              <input\r\n                type=\"number\"\r\n                value={humidity}\r\n                onChange={(e) => setHumidity(parseInt(e.target.value) || 60)}\r\n                min={20}\r\n                max={90}\r\n                className=\"w-full px-2 py-1 text-sm border rounded text-right\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-xs text-gray-500 mb-1\">{t('components.yieldLoss.roomTemp')} (Â°C)</label>\r\n              <input\r\n                type=\"number\"\r\n                value={temperature}\r\n                onChange={(e) => setTemperature(parseInt(e.target.value) || 25)}\r\n                min={15}\r\n                max={40}\r\n                className=\"w-full px-2 py-1 text-sm border rounded text-right\"\r\n              />\r\n            </div>\r\n            {(humidity !== 60 || temperature !== 25) && (\r\n              <div className=\"col-span-2 flex items-start gap-1 text-xs text-orange-600\">\r\n                <AlertTriangle className=\"w-3 h-3 mt-0.5 flex-shrink-0\" />\r\n                <span>{t('components.yieldLoss.envNote')}</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* ìƒì„¸ í† ê¸€ */}\r\n        {mode === 'forward' && result && (\r\n          <button\r\n            onClick={() => setShowDetails(!showDetails)}\r\n            className=\"flex items-center gap-1 text-xs text-blue-600 hover:text-blue-800\"\r\n          >\r\n            {showDetails ? <ChevronUp className=\"w-3 h-3\" /> : <ChevronDown className=\"w-3 h-3\" />}\r\n            {t('components.yieldLoss.processDetails')}\r\n          </button>\r\n        )}\r\n\r\n        {/* ê³µì •ë³„ ì†ì‹¤ ìƒì„¸ */}\r\n        {showDetails && mode === 'forward' && result && (\r\n          <div className=\"space-y-2\">\r\n            <div className=\"text-xs text-gray-500 mb-2\">{t('components.yieldLoss.processDetailsDesc')}</div>\r\n            {result.processLosses.map((loss, idx) => (\r\n              <div key={idx} className=\"flex items-center text-sm\">\r\n                <div className=\"w-12 text-gray-600\">{loss.stage}</div>\r\n                <div className=\"flex-1 mx-2\">\r\n                  <div className=\"h-2 bg-gray-200 rounded overflow-hidden\">\r\n                    <div\r\n                      className={`h-full ${loss.lossPercent >= 10 ? 'bg-red-400' : loss.lossPercent >= 5 ? 'bg-orange-400' : 'bg-yellow-400'}`}\r\n                      style={{ width: `${Math.min(loss.lossPercent * 5, 100)}%` }}\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div className=\"w-16 text-right text-gray-500\">-{loss.lossPercent}%</div>\r\n                <div className=\"w-20 text-right font-mono text-gray-600\">-{loss.lossWeight}g</div>\r\n                <div className=\"w-24 text-right font-mono text-gray-400\">â†’ {loss.remainingWeight.toLocaleString()}g</div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n        {/* íŒ */}\r\n        {result && result.tips.length > 0 && (\r\n          <div className=\"p-2 bg-blue-50 rounded text-xs\">\r\n            <div className=\"flex items-center gap-1 text-blue-700 font-medium mb-1\">\r\n              <Info className=\"w-3 h-3\" />\r\n              {t('components.yieldLoss.minimizeLossTips')}\r\n            </div>\r\n            <ul className=\"list-disc list-inside text-blue-600 space-y-0.5\">\r\n              {result.tips.slice(0, 3).map((tip, idx) => (\r\n                <li key={idx}>{tip}</li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","/**\n * AdvancedDashboard - ì œê³¼ì œë¹µ ì „ë¬¸ê°€ìš© í†µí•© ë ˆì‹œí”¼ ë³€í™˜ ëŒ€ì‹œë³´ë“œ v2\n *\n * í˜ë¥´ì†Œë‚˜: --persona-frontend (UI/UX) + --persona-backend (ë°ì´í„°) + ì œê³¼ì œë¹µ ë„ë©”ì¸ ì „ë¬¸ê°€\n *\n * v2 ê°œì„ ì‚¬í•­:\n * - íŒ¬ ì„¤ì • ë³€ê²½ â†’ ë°°ìˆ˜ ìë™ ì—°ë™\n * - ë™ì  í¬ê¸° ìµœì í™” (20-25ê°œ ì¬ë£Œ ê¸°ì¤€)\n * - ë©”ëª¨/ê³µì • ë³„ë„ í•˜ë‹¨ íŒ¨ë„\n * - ì‚¬ì´ë“œë°” ë„ˆë¹„ í™•ëŒ€\n * - ë ˆì‹œí”¼ í…Œì´ë¸” ì»´íŒ©íŠ¸í™”\n */\n\nimport React, { useState, useMemo, useCallback, useEffect, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useDashboardStore } from '@/stores/useDashboardStore';\nimport { useRecipeStore } from '@/stores/useRecipeStore';\nimport { useToastStore } from '@/stores/useToastStore';\nimport { useSettingsStore } from '@/stores/useSettingsStore';\nimport { useLayoutSettings } from '@/hooks/useLayoutSettings';\nimport { useLocalization } from '@/hooks/useLocalization';\nimport ResizeHandle from '@/components/common/ResizeHandle';\nimport AutocompleteInput from '@/components/common/AutocompleteInput';\nimport BulkIngredientInput from '@/components/common/BulkIngredientInput';\nimport YieldLossCalculator from '@/components/common/YieldLossCalculator';\nimport PhaseIngredientsView from '@/components/recipe/PhaseIngredientsView';\nimport { ProcessStageSelection, DEFAULT_STAGE_SELECTION } from '@/utils/calculations/yieldLoss';\nimport { findIngredientInfo } from '@/data/ingredientDatabase';\nimport {\n  ChevronDown, ChevronRight, ChevronUp, Plus, Minus, X,\n  Save, Flame, Scale, Wheat, Droplets, TrendingDown,\n  Cookie, Layers, ThermometerSun, Link, Unlink,\n  Clock, ListOrdered, RotateCcw, GripVertical, Copy, FileText,\n  Youtube, Globe, BookOpen, User, GraduationCap\n} from 'lucide-react';\nimport { SourceType } from '@types/recipe.types';\n\n// ============================================\n// íƒ€ì… ì •ì˜\n// ============================================\n\ninterface PanEntry {\n  id: string;\n  mode: 'pan' | 'count';  // íŒ¬ ëª¨ë“œ / ê°œìˆ˜ ëª¨ë“œ\n  // íŒ¬ ëª¨ë“œ í•„ë“œ\n  category: string;\n  type: string;\n  quantity: number;\n  divisionCount: number;\n  panWeight: number;\n  divisionWeight: number;\n  // ê°œìˆ˜ ëª¨ë“œ í•„ë“œ (ëª¨ë‹ë¹µ ë“±)\n  unitCount?: number;    // ê°œìˆ˜\n  unitWeight?: number;   // ê°œë‹¹ ì¤‘ëŸ‰(g)\n}\n\ninterface OvenSettings {\n  type: 'convection' | 'deck' | 'airfryer';\n  level: string;\n  firstBake: { topTemp: number; bottomTemp: number; time: number };\n  secondBake: { topTemp: number; bottomTemp: number; time: number };\n}\n\ninterface MethodSettings {\n  type: 'straight' | 'sponge' | 'poolish' | 'biga' | 'tangzhong' | 'autolyse' | 'levain' | 'coldFerment' | 'retard';\n  flourRatio: number;\n  waterRatio: number;\n  yeastAdjustment: number;      // ì „ì²´ ì´ìŠ¤íŠ¸ ì¡°ì • ê³„ìˆ˜ (1.0 = 100%)\n  prefermentYeastRatio: number; // ì‚¬ì „ë°˜ì£½ì— ë“¤ì–´ê°€ëŠ” ì´ìŠ¤íŠ¸ ë¹„ìœ¨ (0.0~1.0)\n}\n\ninterface IngredientEntry {\n  id: string;\n  order: number;\n  category: 'flour' | 'liquid' | 'wetOther' | 'other';\n  subCategory: string;\n  name: string;\n  ratio: number;\n  amount: number;\n  note: string;\n  moistureContent?: number;\n  phase?: string;  // 'tangzhong', 'preferment', 'main', 'topping' ë“±\n  phaseOrder?: number;  // ë‹¨ê³„ ë‚´ ìˆœì„œ\n}\n\ninterface ProcessStep {\n  id: string;\n  order: number;\n  description: string;\n  time?: number;\n  temp?: number;\n}\n\n// ============================================\n// ìƒìˆ˜ ë°ì´í„°\n// ============================================\n\n// íŒ¬ ë°ì´í„°ëŠ” ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ useSettingsStoreë¥¼ í†µí•´ ë™ì ìœ¼ë¡œ ìƒì„±ë¨\n// (PAN_DATAëŠ” AdvancedDashboard ì»´í¬ë„ŒíŠ¸ ë‚´ useMemoë¡œ ê´€ë¦¬)\n\n// ì œë¹µìš© ë¹„ìš©ì  (cmÂ³/g) - í•™ìˆ  ê¸°ì¤€ ì°¸ì¡°\n// ë¹„ìš©ì ì´ ë†’ì„ìˆ˜ë¡ ê°€ë³ê³  ì—ì–´ë¦¬, ë‚®ì„ìˆ˜ë¡ ì¡°ë°€í•¨\nconst BREAD_SPECIFIC_VOLUMES: Record<string, number> = {\n  'í’€ë¨¼ì‹ë¹µ': 3.4,      // ëšœê»‘ ë®ì–´ êµ¬ì›€ â†’ ì¡°ë°€ (ì œê³¼ê¸°ëŠ¥ì¥ ê¸°ì¤€)\n  'ì‚°í˜•ì‹ë¹µ': 4.2,      // ììœ ë¡­ê²Œ ë¶€í’€ìŒ â†’ ì—ì–´ë¦¬ (4.0~4.5)\n  'ë²„í„°í†±ì‹ë¹µ': 4.0,    // ì‚°í˜• ê³„ì—´\n  'ì˜¥ìˆ˜ìˆ˜ì‹ë¹µ': 3.8,    // ì¤‘ê°„\n  'ìš°ìœ ì‹ë¹µ': 4.0,      // ì‚°í˜• ê³„ì—´\n  'ëª¨ë‹ë¹µ': 3.2,        // ì†Œí˜•ë¹µ\n  'ë² ì´ê¸€': 2.5,        // ë§¤ìš° ì¡°ë°€ (ì‚¶ëŠ” ê³µì •)\n  'ë¸Œë¦¬ì˜¤ìŠˆ': 3.5,      // ë²„í„° í’ë¶€, ì¤‘ê°„ ë°€ë„\n  'ì¹˜ì•„ë°”íƒ€': 5.0,      // ê³ ìˆ˜í™”ìœ¨ 80%, í° ê¸°ê³µ\n  'ë°”ê²ŒíŠ¸': 5.5,        // í¬ëŸ¬ìŠ¤íŠ¸ ë¹„ìœ¨ ë†’ìŒ, ì—ì–´ë¦¬\n};\n\n// ì œê³¼ìš© ë°˜ì£½ ë¹„ì¤‘ (Specific Gravity) - êµ­ë‚´ ì œê³¼ì œë¹µ ê¸°ì¤€\n// ë°˜ì£½ ë¹„ì¤‘ = ë°˜ì£½ ë¬´ê²Œ Ã· ë¬¼ ë¬´ê²Œ (ê°™ì€ ì»µ ì‚¬ìš©), ë‚®ì„ìˆ˜ë¡ ê³µê¸° ë§ìŒ\nconst CAKE_BATTER_SPECIFIC_GRAVITY: Record<string, number> = {\n  'íŒŒìš´ë“œì¼€ì´í¬': 0.83,     // ëŒ€í•œì œê³¼í˜‘íšŒ: 0.80-0.85 ë²”ìœ„ ì¤‘ê°„ê°’\n  'ë ˆì´ì–´ì¼€ì´í¬': 0.83,     // ë°˜ì£½í˜• ì¼€ì´í¬: 0.80-0.85\n  'ìŠ¤í€ì§€ì¼€ì´í¬': 0.55,     // ë²„í„° ìŠ¤í€ì§€(ì œëˆ„ì™€ì¦ˆ): 0.50-0.60\n  'ì‹œí°ì¼€ì´í¬': 0.45,       // ì‹œí°/ë¡¤ì¼€ì´í¬: 0.40-0.50\n  'ì—”ì ¤í‘¸ë“œì¼€ì´í¬': 0.40,   // ê°€ì¥ ê°€ë²¼ìš´ ë°˜ì£½ (ì¶”ì •)\n  'ë¬´ìŠ¤ì¼€ì´í¬': 0.90,       // ë¬´ê±°ìš´ ë°˜ì£½ (ì¶”ì •)\n};\n\n// ì œê³¼ìš© êµ¬ìš´ í›„ ë¹„ìš©ì  (cmÂ³/g) - íŒ¬ ê³„ì‚°ìš©\n// ë°˜ì£½ ë¹„ì¤‘ â†’ êµ¬ìš´ í›„ ë¹„ìš©ì  ë³€í™˜ (ëŒ€ëµì  ì¶”ì •)\nconst CAKE_SPECIFIC_VOLUMES: Record<string, number> = {\n  'íŒŒìš´ë“œì¼€ì´í¬': 2.5,      // ScienceDirect 2025: 2.1-2.8 ë²”ìœ„\n  'ë ˆì´ì–´ì¼€ì´í¬': 2.5,      // ì—ë©€ì „ ì¼€ì´í¬: 2.2-2.3\n  'ìŠ¤í€ì§€ì¼€ì´í¬': 2.3,      // ë°˜ì£½ë¹„ì¤‘ 0.55 ê¸°ì¤€ ì¶”ì •\n  'ì‹œí°ì¼€ì´í¬': 3.2,        // ë°˜ì£½ë¹„ì¤‘ 0.45 ê¸°ì¤€ ì¶”ì •\n  'ì—”ì ¤í‘¸ë“œì¼€ì´í¬': 4.5,    // ê°€ì¥ ê°€ë²¼ìš´ ì¼€ì´í¬\n  'ë¬´ìŠ¤ì¼€ì´í¬': 1.8,        // ë§¤ìš° ì¡°ë°€í•¨\n};\n\n// ì œê³¼ ì œí’ˆ íŒë³„ í—¬í¼ í•¨ìˆ˜\nconst isPastryProduct = (productName: string): boolean => {\n  return Object.keys(CAKE_BATTER_SPECIFIC_GRAVITY).includes(productName);\n};\n\n// í˜„ì¬ í™”ë©´ì€ ì œë¹µìš© - ë™ì  ë¹„ìš©ì ì€ ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ useMemoë¡œ ìƒì„±ë¨\n// (ê¸°ë³¸ê°’ BREAD_SPECIFIC_VOLUMES + ì„¤ì • ìŠ¤í† ì–´ì˜ ì˜¤ë²„ë¼ì´ë“œ)\n\n// íŒ¬ ì¹´í…Œê³ ë¦¬/íƒ€ì… ìœ íš¨ì„± ê²€ì¦ í—¬í¼ í•¨ìˆ˜ëŠ” ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ ë™ì  PAN_DATAì™€ í•¨ê»˜ ì •ì˜ë¨\n\n// ì œë²• ë¹„ìœ¨ (ChainBaker, Weekend Bakery ì°¸ì¡°)\n// flour: ì „ì²´ ë°€ê°€ë£¨ ì¤‘ ì‚¬ì „ë°˜ì£½ì— ì‚¬ìš©í•  ë¹„ìœ¨\n// water: ì‚¬ì „ë°˜ì£½ ë°€ê°€ë£¨ ëŒ€ë¹„ ìˆ˜ë¶„ ë¹„ìœ¨ (ë² ì´ì»¤ìŠ¤ í¼ì„¼íŠ¸)\nconst METHOD_RATIOS: Record<string, { flour: number; water: number }> = {\n  straight: { flour: 0, water: 0 },\n  sponge: { flour: 0.5, water: 0.6 },       // ì¤‘ì¢…ë²•: ë°€ê°€ë£¨ 50%, ìˆ˜ë¶„ 60% (50-80%)\n  poolish: { flour: 0.3, water: 1.0 },      // í´ë¦¬ì‰¬: ë°€ê°€ë£¨ 30%, ìˆ˜ë¶„ 100% (1:1 ì•¡ì¢…)\n  biga: { flour: 0.3, water: 0.55 },        // ë¹„ê°€: ë°€ê°€ë£¨ 30%, ìˆ˜ë¶„ 55% (ê±´ì¡°í•œ ë°˜ì£½)\n  tangzhong: { flour: 0.1, water: 5.0 },    // íƒ•ì¢…ë²•: ë°€ê°€ë£¨ 10%, ë¬¼ 500% (1:5 í˜¸í™”)\n  autolyse: { flour: 1.0, water: 0.65 },    // ì˜¤í† ë¦¬ì¦ˆ: ì „ì²´ ë°€ê°€ë£¨, ìˆ˜ë¶„ 65%\n  levain: { flour: 0.2, water: 1.0 },       // ë¥´ë°©: ë°€ê°€ë£¨ 20%, ìˆ˜ë¶„ 100% (1:1 ì‚¬ì›Œë„ìš°)\n  coldFerment: { flour: 0, water: 0 },      // ì €ì˜¨ë°œíš¨: ì‚¬ì „ë°˜ì£½ ì—†ìŒ (ëƒ‰ì¥ ë°œíš¨)\n  retard: { flour: 0, water: 0 },           // ì €ì˜¨ìˆ™ì„±: ì‚¬ì „ë°˜ì£½ ì—†ìŒ (ì„±í˜• í›„ ëƒ‰ì¥)\n};\n\n// ì œë²•ë³„ ì´ìŠ¤íŠ¸ ì¡°ì • ê¸°ë³¸ê°’ (ì„¤ì • ìŠ¤í† ì–´ fallbackìš©)\n// yeastAdjustment: ì „ì²´ ì´ìŠ¤íŠ¸ ì¡°ì • ê³„ìˆ˜\n// prefermentYeastRatio: ì‚¬ì „ë°˜ì£½ì— ë“¤ì–´ê°€ëŠ” ì´ìŠ¤íŠ¸ ë¹„ìœ¨\nconst DEFAULT_METHOD_YEAST: Record<string, { yeastAdjustment: number; prefermentYeastRatio: number }> = {\n  straight: { yeastAdjustment: 1.0, prefermentYeastRatio: 0 },\n  sponge: { yeastAdjustment: 0.75, prefermentYeastRatio: 1.0 },    // ì¤‘ì¢…ë²•: ì´ìŠ¤íŠ¸ 75%, ì „ëŸ‰ ì‚¬ì „ë°˜ì£½\n  poolish: { yeastAdjustment: 0.66, prefermentYeastRatio: 0.15 },  // í´ë¦¬ì‰¬: ì´ìŠ¤íŠ¸ 66% (SFBI ê¶Œì¥), 15% ì‚¬ì „ë°˜ì£½\n  biga: { yeastAdjustment: 0.50, prefermentYeastRatio: 0.1 },      // ë¹„ê°€: ì´ìŠ¤íŠ¸ 50% (SFBI ê¶Œì¥), 10% ì‚¬ì „ë°˜ì£½\n  tangzhong: { yeastAdjustment: 1.0, prefermentYeastRatio: 0 },    // íƒ•ì¢…: ì´ìŠ¤íŠ¸ ë™ì¼, ì‚¬ì „ë°˜ì£½ ì—†ìŒ\n  autolyse: { yeastAdjustment: 1.0, prefermentYeastRatio: 0 },     // ì˜¤í† ë¦¬ì¦ˆ: ì´ìŠ¤íŠ¸ ë™ì¼, ì‚¬ì „ë°˜ì£½ ì—†ìŒ\n  levain: { yeastAdjustment: 0, prefermentYeastRatio: 0 },         // ë¥´ë°©: ìƒì—… ì´ìŠ¤íŠ¸ ë¯¸ì‚¬ìš©\n  coldFerment: { yeastAdjustment: 0.4, prefermentYeastRatio: 0 },  // ì €ì˜¨ë°œíš¨: ì´ìŠ¤íŠ¸ 40% (ì¥ì‹œê°„ ë°œíš¨ë¡œ ê°ëŸ‰)\n  retard: { yeastAdjustment: 1.0, prefermentYeastRatio: 0 },       // ì €ì˜¨ìˆ™ì„±: ì„±í˜• í›„ ìˆ™ì„±ì´ë¼ ì´ìŠ¤íŠ¸ ë™ì¼\n};\n\n// Translation keys for method labels (used with t() function)\nconst METHOD_KEYS: Record<string, string> = {\n  straight: 'method.straight', sponge: 'method.sponge', poolish: 'method.poolish',\n  biga: 'method.biga', tangzhong: 'method.tangzhong', autolyse: 'method.autolyse', levain: 'method.levain',\n  coldFerment: 'method.coldFerment', retard: 'method.retard',\n};\n\n// Translation keys for category labels (used with t() function)\nconst CATEGORY_KEYS: Record<string, string> = {\n  flour: 'dashboard.flour', liquid: 'dashboard.liquid', wetOther: 'dashboard.fat', other: 'dashboard.other',\n};\n\n// ë‹¨ê³„(Phase) ë©”íƒ€ë°ì´í„° - êµ¬ë¶„ì„  í‘œì‹œìš© (labelKey for translation)\nconst PHASE_META: Record<string, { icon: string; labelKey: string; bgColor: string; textColor: string; borderColor: string }> = {\n  tangzhong: { icon: 'ğŸœ', labelKey: 'phase.tangzhong', bgColor: 'bg-pink-50', textColor: 'text-pink-700', borderColor: 'border-pink-200' },\n  preferment: { icon: 'ğŸ§ª', labelKey: 'phase.preferment', bgColor: 'bg-amber-50', textColor: 'text-amber-700', borderColor: 'border-amber-200' },\n  poolish: { icon: 'ğŸ§ª', labelKey: 'phase.poolish', bgColor: 'bg-amber-50', textColor: 'text-amber-700', borderColor: 'border-amber-200' },\n  biga: { icon: 'ğŸ§ª', labelKey: 'phase.biga', bgColor: 'bg-amber-50', textColor: 'text-amber-700', borderColor: 'border-amber-200' },\n  sponge: { icon: 'ğŸ§ª', labelKey: 'phase.sponge', bgColor: 'bg-amber-50', textColor: 'text-amber-700', borderColor: 'border-amber-200' },\n  levain: { icon: 'ğŸ¥–', labelKey: 'phase.levain', bgColor: 'bg-amber-50', textColor: 'text-amber-700', borderColor: 'border-amber-200' },\n  autolyse: { icon: 'â³', labelKey: 'phase.autolyse', bgColor: 'bg-purple-50', textColor: 'text-purple-700', borderColor: 'border-purple-200' },\n  main: { icon: 'ğŸ', labelKey: 'phase.mainDough', bgColor: 'bg-blue-50', textColor: 'text-blue-700', borderColor: 'border-blue-200' },\n  topping: { icon: 'âœ¨', labelKey: 'phase.topping', bgColor: 'bg-orange-50', textColor: 'text-orange-700', borderColor: 'border-orange-200' },\n  filling: { icon: 'ğŸ‚', labelKey: 'phase.filling', bgColor: 'bg-rose-50', textColor: 'text-rose-700', borderColor: 'border-rose-200' },\n  frosting: { icon: 'ğŸ°', labelKey: 'phase.frosting', bgColor: 'bg-indigo-50', textColor: 'text-indigo-700', borderColor: 'border-indigo-200' },\n  glaze: { icon: 'ğŸ’§', labelKey: 'phase.glaze', bgColor: 'bg-cyan-50', textColor: 'text-cyan-700', borderColor: 'border-cyan-200' },\n  other: { icon: 'ğŸ“¦', labelKey: 'ingredientCategory.other', bgColor: 'bg-gray-50', textColor: 'text-gray-700', borderColor: 'border-gray-200' },\n};\n\n// ë™ì  í¬ê¸° ê³„ì‚° (20-25ê°œ ì¬ë£Œ ê¸°ì¤€) - v2.2: ì»´íŒ©íŠ¸ ë²„ì „\nconst MAX_INGREDIENTS = 25;\nconst getDynamicStyles = (ingredientCount: number) => {\n  const count = Math.max(ingredientCount, 6);\n  const rowHeight = count > 15 ? 'py-0.5' : count > 10 ? 'py-1' : 'py-1';\n  const fontSize = count > 20 ? 'text-xs' : count > 15 ? 'text-xs' : 'text-sm';\n  return { rowHeight, fontSize };\n};\n\n// ============================================\n// ì ‘ì„ ìˆ˜ ìˆëŠ” ì„¹ì…˜ ì»´í¬ë„ŒíŠ¸\n// ============================================\n\ninterface CollapsibleSectionProps {\n  title: string;\n  icon: React.ReactNode;\n  defaultOpen?: boolean;\n  badge?: string;\n  badgeColor?: string;\n  onReset?: () => void;  // ì´ˆê¸°í™” ì½œë°±\n  children: React.ReactNode;\n}\n\nconst CollapsibleSection: React.FC<CollapsibleSectionProps> = ({\n  title, icon, defaultOpen = true, badge, badgeColor = 'bg-amber-100 text-amber-700', onReset, children\n}) => {\n  const [isOpen, setIsOpen] = useState(defaultOpen);\n\n  return (\n    <div className=\"border-b border-gray-200 last:border-b-0\">\n      <div className=\"flex items-center justify-between px-3 py-2 hover:bg-gray-50\">\n        <button\n          onClick={() => setIsOpen(!isOpen)}\n          className=\"flex-1 flex items-center gap-2 text-sm font-semibold text-gray-700 text-left\"\n        >\n          {icon}\n          <span>{title}</span>\n          {badge && (\n            <span className={`px-1.5 py-0.5 text-xs rounded ${badgeColor}`}>\n              {badge}\n            </span>\n          )}\n        </button>\n        <div className=\"flex items-center gap-1\">\n          {onReset && (\n            <button\n              onClick={(e) => { e.stopPropagation(); onReset(); }}\n              className=\"p-1 text-gray-400 hover:text-amber-600 hover:bg-amber-50 rounded transition-colors\"\n              title=\"ì´ˆê¸°í™”\"\n            >\n              <RotateCcw className=\"w-3.5 h-3.5\" />\n            </button>\n          )}\n          <button onClick={() => setIsOpen(!isOpen)} className=\"p-1\">\n            {isOpen ? <ChevronDown className=\"w-4 h-4 text-gray-400\" /> : <ChevronRight className=\"w-4 h-4 text-gray-400\" />}\n          </button>\n        </div>\n      </div>\n      {isOpen && <div className=\"px-3 pb-3\">{children}</div>}\n    </div>\n  );\n};\n\n// ============================================\n// ë©”ì¸ ì»´í¬ë„ŒíŠ¸\n// ============================================\n\nconst AdvancedDashboard: React.FC = () => {\n  const { t } = useTranslation();\n  const { translateIngredient, translateProcessStep, getLocalizedPanCategory, getLocalizedPanName, getLocalizedProductName } = useLocalization();\n  const { addRecipe, updateRecipe, currentRecipe, recipes } = useRecipeStore();\n  const { addToast } = useToastStore();\n  const { pan: panSettings, product: productSettings, method: methodSettings } = useSettingsStore();\n\n  // ì„¤ì •ì—ì„œ ë¹„ìš©ì  ë°ì´í„°ë¥¼ ë™ì ìœ¼ë¡œ ìƒì„± (ê¸°ë³¸ê°’ + ì˜¤ë²„ë¼ì´ë“œ)\n  const SPECIFIC_VOLUMES = useMemo(() => {\n    // ê¸°ë³¸ê°’ì„ ë³µì‚¬í•˜ê³  ì„¤ì • ìŠ¤í† ì–´ì˜ ì˜¤ë²„ë¼ì´ë“œ ì ìš©\n    return {\n      ...BREAD_SPECIFIC_VOLUMES,\n      ...CAKE_SPECIFIC_VOLUMES,  // ğŸ†• ì œê³¼ ë¹„ìš©ì  ì¶”ê°€\n      ...productSettings.breadVolumes,\n      // ì»¤ìŠ¤í…€ ì œí’ˆ ì¶”ê°€\n      ...productSettings.customProducts\n        .filter(p => p.category === 'bread' || p.category === 'pastry')\n        .reduce((acc, p) => ({ ...acc, [p.name]: p.specificVolume }), {} as Record<string, number>)\n    };\n  }, [productSettings.breadVolumes, productSettings.customProducts]);\n\n  // ì„¤ì •ì—ì„œ íŒ¬ ë°ì´í„°ë¥¼ ë™ì ìœ¼ë¡œ ìƒì„± (ì¹´í…Œê³ ë¦¬ë³„ ê·¸ë£¹í™”)\n  const PAN_DATA = useMemo(() => {\n    const grouped: Record<string, { name: string; volume: number }[]> = {};\n\n    // ì„¤ì •ì˜ ëª¨ë“  íŒ¬ì„ ì¹´í…Œê³ ë¦¬ë³„ë¡œ ê·¸ë£¹í™”\n    panSettings.myPans.forEach(pan => {\n      const category = pan.category || 'ê¸°íƒ€';\n      if (!grouped[category]) {\n        grouped[category] = [];\n      }\n      grouped[category].push({\n        name: pan.name,\n        volume: pan.volume\n      });\n    });\n\n    // ë¹ˆ ì¹´í…Œê³ ë¦¬ ë°©ì§€: ìµœì†Œ í•˜ë‚˜ì˜ ê¸°ë³¸ ì¹´í…Œê³ ë¦¬ ë³´ì¥\n    if (Object.keys(grouped).length === 0) {\n      grouped['ì‹ë¹µí‹€'] = [{ name: 'ê¸°ë³¸ ì‹ë¹µí‹€', volume: 2350 }];\n    }\n\n    return grouped;\n  }, [panSettings.myPans]);\n\n  // ë²ˆì—­ëœ ì¹´í…Œê³ ë¦¬ ë¼ë²¨ (ë™ì ìœ¼ë¡œ ìƒì„±)\n  const CATEGORY_LABELS = useMemo(() => ({\n    flour: t('dashboard.flour'),\n    liquid: t('dashboard.liquid'),\n    wetOther: t('dashboard.fat'),\n    other: t('dashboard.other'),\n  }), [t]);\n\n  // ë²ˆì—­ëœ ì œë²• ë¼ë²¨ (ë™ì ìœ¼ë¡œ ìƒì„±)\n  const METHOD_LABELS = useMemo(() => ({\n    straight: t('method.straight'),\n    sponge: t('method.sponge'),\n    poolish: t('method.poolish'),\n    biga: t('method.biga'),\n    tangzhong: t('method.tangzhong'),\n    autolyse: t('method.autolyse'),\n    levain: t('method.levain'),\n    coldFerment: t('method.coldFerment'),\n    retard: t('method.retard'),\n  }), [t]);\n\n  // íŒ¬ ì¹´í…Œê³ ë¦¬ ëª©ë¡ (ë™ì ìœ¼ë¡œ ìƒì„±)\n  const panCategories = useMemo(() => Object.keys(PAN_DATA), [PAN_DATA]);\n\n  // ê¸°ë³¸ ì¹´í…Œê³ ë¦¬ ë° íŒ¬ íƒ€ì…\n  const defaultCategory = panCategories[0] || 'ì‹ë¹µí‹€';\n  const defaultPanType = PAN_DATA[defaultCategory]?.[0]?.name || 'ì˜¥ìˆ˜ìˆ˜ ì‹ë¹µí‹€ (22.5cm)';\n  const defaultPanVolume = PAN_DATA[defaultCategory]?.[0]?.volume || 2350;\n\n  // íŒ¬ ì¹´í…Œê³ ë¦¬ ìœ íš¨ì„± ê²€ì¦ í—¬í¼ í•¨ìˆ˜ (ë™ì  PAN_DATA ì‚¬ìš©)\n  const getValidPanCategory = useCallback((category: string | undefined): string => {\n    if (category && panCategories.includes(category)) {\n      return category;\n    }\n    return defaultCategory;\n  }, [panCategories, defaultCategory]);\n\n  // íŒ¬ íƒ€ì… ìœ íš¨ì„± ê²€ì¦ í—¬í¼ í•¨ìˆ˜ (ë™ì  PAN_DATA ì‚¬ìš©)\n  const getValidPanType = useCallback((category: string, type: string | undefined): string => {\n    const panList = PAN_DATA[category];\n    if (panList && type) {\n      const found = panList.find((p: { name: string; volume: number }) => p.name === type);\n      if (found) return type;\n    }\n    return panList?.[0]?.name || defaultPanType;\n  }, [PAN_DATA, defaultPanType]);\n\n  // ë ˆì´ì•„ì›ƒ ì„¤ì • (localStorage ìë™ ì €ì¥)\n  const {\n    settings: layoutSettings,\n    setSidebarWidth,\n    setProcessPanelHeight,\n    setProcessItemSize,\n    getProcessItemSize,\n    resetSettings: resetLayoutSettings,\n  } = useLayoutSettings();\n\n  // ì œí’ˆ ì •ë³´\n  const [productName, setProductName] = useState(t('advDashboard.defaultRecipeName'));\n  const [productType, setProductType] = useState<'bread' | 'pastry'>('bread');\n\n  // ì¶œì²˜ ì •ë³´\n  const [source, setSource] = useState<{\n    name: string;\n    type: SourceType;\n    url?: string;\n    author?: string;\n  }>({\n    name: '',\n    type: 'personal',\n    url: '',\n    author: ''\n  });\n\n  // ì›ë˜ íŒ¬ ì„¤ì • (ë ˆì‹œí”¼ ì›ë³¸) - ë¹„ìš©ì ìœ¼ë¡œ ê³„ì‚°ëœ ì´ˆê¸°ê°’ ì‚¬ìš©\n  // ê¸°ë³¸ íŒ¬ ìš©ëŸ‰ ë° ë¬´ê²Œ ê³„ì‚° (ë™ì  ì„¤ì •ì—ì„œ ê°€ì ¸ì˜´)\n  const initialPanVolume = defaultPanVolume || 2350;\n  const defaultPanWeight = Math.round(initialPanVolume / 3.4);  // ë¹„ìš©ì  3.4 ê¸°ì¤€\n  const [originalPan, setOriginalPan] = useState({\n    mode: 'pan' as 'pan' | 'count',\n    category: defaultCategory, type: defaultPanType, quantity: 1, panWeight: defaultPanWeight,\n    divisionCount: 1, divisionWeight: defaultPanWeight,  // ë¶„í•  ì •ë³´\n    unitCount: 10, unitWeight: 50,  // ê°œìˆ˜ ëª¨ë“œìš©\n  });\n\n  // ë³€í™˜ íŒ¬ ì„¤ì • (ëª©í‘œ)\n  const [pans, setPans] = useState<PanEntry[]>([\n    { id: '1', mode: 'pan', category: defaultCategory, type: defaultPanType, quantity: 1, divisionCount: 1, panWeight: defaultPanWeight, divisionWeight: defaultPanWeight, unitCount: 10, unitWeight: 50 }\n  ]);\n\n  // ë¹„ìš©ì  ì„¤ì •\n  const [originalProduct, setOriginalProduct] = useState('ì‚°í˜•ì‹ë¹µ');\n  const [convertedProduct, setConvertedProduct] = useState('ì‚°í˜•ì‹ë¹µ');\n\n  // ì˜¤ë¸ ì„¤ì •\n  const [oven, setOven] = useState<OvenSettings>({\n    type: 'convection',\n    level: '',  // ë¹ˆ ê°’ìœ¼ë¡œ ì´ˆê¸°í™”\n    firstBake: { topTemp: 200, bottomTemp: 170, time: 24 },\n    secondBake: { topTemp: 0, bottomTemp: 0, time: 0 },\n  });\n\n  // ì œë²• ì„¤ì •\n  const [method, setMethod] = useState<MethodSettings>({\n    type: 'straight',\n    flourRatio: 0,\n    waterRatio: 0,\n    yeastAdjustment: 1.0,\n    prefermentYeastRatio: 0\n  });\n  const [usePreferment, setUsePreferment] = useState(false);\n\n  // ì¬ë£Œ (ê¸°ë³¸ ì˜ˆì‹œ: ì‹ë¹µ ë ˆì‹œí”¼)\n  const [ingredients, setIngredients] = useState<IngredientEntry[]>([\n    { id: '1', order: 1, category: 'flour', subCategory: 'ê°€ë£¨', name: 'ê°•ë ¥ë¶„', ratio: 100, amount: 500, note: '' },\n    { id: '2', order: 2, category: 'liquid', subCategory: 'ìˆ˜ë¶„', name: 'ë¬¼', ratio: 70, amount: 350, note: '' },\n    { id: '3', order: 3, category: 'other', subCategory: 'ê¸°íƒ€', name: 'ì†Œê¸ˆ', ratio: 2, amount: 10, note: '' },\n    { id: '4', order: 4, category: 'other', subCategory: 'ê¸°íƒ€', name: 'ì´ìŠ¤íŠ¸', ratio: 1, amount: 5, note: '' },\n    { id: '5', order: 5, category: 'other', subCategory: 'ê¸°íƒ€', name: 'ì„¤íƒ•', ratio: 6, amount: 30, note: '' },\n    { id: '6', order: 6, category: 'wetOther', subCategory: 'ìœ ì§€', name: 'ë²„í„°', ratio: 10, amount: 50, note: '' },\n  ]);\n\n  // ê³µì • (í”„ë¡œì„¸ìŠ¤)\n  const [processes, setProcesses] = useState<ProcessStep[]>([\n    { id: '1', order: 1, description: 'ì¬ë£Œ ê³„ëŸ‰', time: 10 },\n    { id: '2', order: 2, description: '1ì°¨ ë¯¹ì‹± (ì €ì† 3ë¶„ â†’ ì¤‘ì† 5ë¶„)', time: 8 },\n    { id: '3', order: 3, description: '1ì°¨ ë°œíš¨ (27Â°C, 75%)', time: 60, temp: 27 },\n    { id: '4', order: 4, description: 'ë¶„í•  ë° ë‘¥ê¸€ë¦¬ê¸°' },\n    { id: '5', order: 5, description: 'ì¤‘ê°„ ë°œíš¨', time: 15 },\n    { id: '6', order: 6, description: 'ì„±í˜• ë° íŒ¨ë‹' },\n    { id: '7', order: 7, description: '2ì°¨ ë°œíš¨ (35Â°C, 85%)', time: 50, temp: 35 },\n    { id: '8', order: 8, description: 'êµ½ê¸°', time: 24, temp: 200 },\n  ]);\n\n  // ë©”ëª¨\n  const [memo, setMemo] = useState('');\n\n  // í˜„ì¬ í¸ì§‘ ì¤‘ì¸ ê³µì • ID (í¸ì§‘ ì¤‘ì¼ ë•ŒëŠ” ì›ë³¸ í‘œì‹œ, ì•„ë‹ ë•ŒëŠ” ë²ˆì—­ í‘œì‹œ)\n  const [editingProcessId, setEditingProcessId] = useState<string | null>(null);\n\n  // ìˆ˜ìœ¨ ì˜ˆì¸¡ ê³µì • ì„ íƒ ìƒíƒœ\n  const [yieldStageSelection, setYieldStageSelection] = useState<ProcessStageSelection>({\n    ...DEFAULT_STAGE_SELECTION\n  });\n\n  // ì¤‘ë³µ ë¡œë“œ ë°©ì§€ë¥¼ ìœ„í•œ ref (ID + updatedAtìœ¼ë¡œ ë³€ê²½ ê°ì§€)\n  const lastLoadedRecipeKey = useRef<string | null>(null);\n\n  // ============================================\n  // currentRecipe ë¡œë“œ\n  // ============================================\n  useEffect(() => {\n    if (currentRecipe) {\n      // ID + updatedAtìœ¼ë¡œ ê³ ìœ  í‚¤ ìƒì„± (ì €ì¥ í›„ ë³€ê²½ì‚¬í•­ ë°˜ì˜)\n      const recipeKey = `${currentRecipe.id}-${currentRecipe.updatedAt?.toString() || ''}`;\n\n      if (recipeKey === lastLoadedRecipeKey.current) {\n        return; // ì´ë¯¸ ë¡œë“œëœ ë™ì¼í•œ ë ˆì‹œí”¼\n      }\n      lastLoadedRecipeKey.current = recipeKey;\n\n      // ë ˆì‹œí”¼ ì´ë¦„ ë¡œë“œ\n      setProductName(currentRecipe.name || t('advDashboard.defaultRecipeName'));\n\n      // ì œí’ˆ íƒ€ì… ë¡œë“œ (ê¸°ë³¸ê°’: bread)\n      setProductType((currentRecipe as any).productType || 'bread');\n\n      // ì¶œì²˜ ì •ë³´ ë¡œë“œ\n      if (currentRecipe.source) {\n        setSource({\n          name: currentRecipe.source.name || '',\n          type: currentRecipe.source.type || 'personal',\n          url: currentRecipe.source.url || '',\n          author: currentRecipe.source.author || ''\n        });\n      } else {\n        setSource({ name: '', type: 'personal', url: '', author: '' });\n      }\n\n      // ì¬ë£Œ ë¡œë“œ (phasesê°€ ìˆìœ¼ë©´ phasesì—ì„œ, ì—†ìœ¼ë©´ ingredientsì—ì„œ)\n      const loadedIngredients: IngredientEntry[] = [];\n\n      // phasesê°€ ìˆëŠ” ë ˆì‹œí”¼ (íƒ•ì¢…, ì‚¬ì „ë°˜ì£½ ë“±)\n      if (currentRecipe.phases && Array.isArray(currentRecipe.phases) && currentRecipe.phases.length > 0) {\n        let globalOrder = 1;\n        currentRecipe.phases.forEach((phase: any) => {\n          if (phase.ingredients && Array.isArray(phase.ingredients)) {\n            phase.ingredients.forEach((ing: any, ingIdx: number) => {\n              const cat = ing.category || 'other';\n              let dashboardCategory: 'flour' | 'liquid' | 'wetOther' | 'other' = 'other';\n              let subCat = 'ê¸°íƒ€';\n\n              if (cat === 'flour' || ing.isFlour) {\n                dashboardCategory = 'flour';\n                subCat = 'ê°€ë£¨';\n              } else if (cat === 'liquid') {\n                dashboardCategory = 'liquid';\n                subCat = 'ìˆ˜ë¶„';\n              } else if (cat === 'fat') {\n                dashboardCategory = 'wetOther';\n                subCat = 'ìœ ì§€';\n              }\n\n              loadedIngredients.push({\n                id: ing.id || `${Date.now()}-${phase.id}-${ingIdx}`,\n                order: globalOrder++,\n                category: dashboardCategory,\n                subCategory: subCat,\n                name: ing.name || '',\n                ratio: ing.percentage || 0,\n                amount: parseFloat(ing.amount) || 0,\n                note: ing.note || '',\n                moistureContent: ing.moistureContent,\n                phase: phase.type || phase.id || 'main',  // ë‹¨ê³„ íƒ€ì…\n                phaseOrder: phase.order || 0,  // ë‹¨ê³„ ìˆœì„œ\n              });\n            });\n          }\n        });\n      }\n      // phasesê°€ ì—†ëŠ” ë ˆì‹œí”¼ (ì¼ë°˜ ë ˆì‹œí”¼)\n      else if (currentRecipe.ingredients && Array.isArray(currentRecipe.ingredients)) {\n        currentRecipe.ingredients.forEach((ing: any, idx: number) => {\n          const cat = ing.category || ing.type || 'other';\n          let dashboardCategory: 'flour' | 'liquid' | 'wetOther' | 'other' = 'other';\n          let subCat = 'ê¸°íƒ€';\n\n          if (cat === 'flour' || ing.isFlour) {\n            dashboardCategory = 'flour';\n            subCat = 'ê°€ë£¨';\n          } else if (cat === 'liquid') {\n            dashboardCategory = 'liquid';\n            subCat = 'ìˆ˜ë¶„';\n          } else if (cat === 'fat') {\n            dashboardCategory = 'wetOther';\n            subCat = 'ìœ ì§€';\n          }\n\n          loadedIngredients.push({\n            id: ing.id || `${Date.now()}-${idx}`,\n            order: idx + 1,\n            category: dashboardCategory,\n            subCategory: subCat,\n            name: ing.name || '',\n            ratio: ing.percentage || 0,\n            amount: parseFloat(ing.amount) || 0,\n            note: ing.note || '',\n            moistureContent: ing.moistureContent,\n            phase: ing.phase || 'main',  // ì €ì¥ëœ phase ê°’ ë¡œë“œ, ì—†ìœ¼ë©´ ê¸°ë³¸ê°’: ë³¸ë°˜ì£½\n            phaseOrder: ing.phaseOrder || 0,\n          });\n        });\n      }\n\n      if (loadedIngredients.length > 0) {\n        setIngredients(loadedIngredients);\n      }\n\n      // ê³µì • ë¡œë“œ\n      if (currentRecipe.steps && Array.isArray(currentRecipe.steps)) {\n        const loadedProcesses: ProcessStep[] = currentRecipe.steps.map((step: any, idx: number) => ({\n          id: step.id || `${Date.now()}-${idx}`,\n          order: step.order || idx + 1,\n          description: step.instruction || step.action || step.description || '',\n          time: step.duration?.target || step.time,\n          temp: step.temperature?.target || step.temp,\n        }));\n        if (loadedProcesses.length > 0) {\n          setProcesses(loadedProcesses);\n        }\n      }\n\n      // ì˜¤ë¸ ì„¤ì • ë¡œë“œ\n      if (currentRecipe.ovenSettings) {\n        const ovenData = currentRecipe.ovenSettings as any;\n        const secondBakeData = ovenData.secondBake;\n        setOven({\n          type: ovenData.mode === 'deck' ? 'deck' :\n                ovenData.mode === 'airfryer' ? 'airfryer' : 'convection',\n          level: ovenData.deck || '',\n          firstBake: {\n            topTemp: ovenData.temperature || 200,\n            bottomTemp: ovenData.bottomTemperature || ovenData.temperature || 170,  // í•˜ë¶€ ì˜¨ë„ ë¡œë“œ\n            time: ovenData.duration || 24,  // ì €ì¥ëœ êµ½ê¸° ì‹œê°„ ë¡œë“œ\n          },\n          secondBake: secondBakeData ? {\n            topTemp: secondBakeData.topTemp || 0,\n            bottomTemp: secondBakeData.bottomTemp || 0,\n            time: secondBakeData.time || 0,\n          } : { topTemp: 0, bottomTemp: 0, time: 0 },\n        });\n      }\n\n      // ì œë²• ì„¤ì • ë¡œë“œ\n      if (currentRecipe.method) {\n        const methodData = currentRecipe.method as any;\n        let methodType = methodData.method || methodData.type || 'straight';\n        // sourdoughëŠ” levainìœ¼ë¡œ ë§¤í•‘ (ë™ì¼í•œ ê°œë…)\n        if (methodType === 'sourdough') methodType = 'levain';\n        // ìœ íš¨í•œ ì œë²• íƒ€ì…ìœ¼ë¡œ ì œí•œ\n        const validMethods = ['straight', 'sponge', 'poolish', 'biga', 'tangzhong', 'autolyse', 'levain', 'coldFerment', 'retard'];\n        if (!validMethods.includes(methodType)) methodType = 'straight';\n\n        // ì„¤ì • ìŠ¤í† ì–´ì—ì„œ í•´ë‹¹ ì œë²•ì˜ ì´ìŠ¤íŠ¸ ì¡°ì •ê°’ ê°€ì ¸ì˜¤ê¸° (ì—†ìœ¼ë©´ ë¡œì»¬ ê¸°ë³¸ê°’ ì‚¬ìš©)\n        const methodConfig = methodSettings?.methods?.[methodType];\n        const defaultYeast = DEFAULT_METHOD_YEAST[methodType] || { yeastAdjustment: 1.0, prefermentYeastRatio: 0 };\n        setMethod({\n          type: methodType as 'straight' | 'sponge' | 'poolish' | 'biga' | 'tangzhong' | 'autolyse' | 'levain' | 'coldFerment' | 'retard',\n          flourRatio: methodData.prefermentRatio || 0,\n          waterRatio: methodData.waterRatio || 0,\n          yeastAdjustment: methodConfig?.yeastAdjustment ?? defaultYeast.yeastAdjustment,\n          prefermentYeastRatio: methodConfig?.prefermentYeastRatio ?? defaultYeast.prefermentYeastRatio,\n        });\n        // ì¤‘ì¢…ë²•, í´ë¦¬ì‰¬ë²• ë“±ì´ë©´ ë°œíš¨ì¢… ì‚¬ìš© í™œì„±í™”\n        setUsePreferment(methodType !== 'straight');\n      }\n\n      // íŒ¬ ì„¤ì • ë¡œë“œ\n      if (currentRecipe.panConfig) {\n        const panData = currentRecipe.panConfig as any;\n        // ì¹´í…Œê³ ë¦¬ ìœ íš¨ì„± ê²€ì¦ - PAN_DATAì— ì—†ëŠ” ì¹´í…Œê³ ë¦¬ëŠ” ê¸°ë³¸ê°’ìœ¼ë¡œ fallback\n        const rawCategory = panData.name || panData.category || defaultCategory;\n        const panCategory = getValidPanCategory(rawCategory);\n        // íŒ¬ íƒ€ì… ìœ íš¨ì„± ê²€ì¦ - í•´ë‹¹ ì¹´í…Œê³ ë¦¬ì— ì—†ëŠ” íƒ€ì…ì€ ì²« ë²ˆì§¸ íŒ¬ìœ¼ë¡œ fallback\n        const rawType = panData.type || defaultPanType;\n        const panType = getValidPanType(panCategory, rawType);\n        const panQuantity = panData.quantity || 1;\n        const panMode = panData.mode || 'pan';\n\n        // ì €ì¥ëœ íŒ¬ ë¬´ê²Œê°€ ìˆìœ¼ë©´ ì‚¬ìš©, ì—†ìœ¼ë©´ ê³„ì‚°\n        let panWeight = panData.panWeight;\n        if (!panWeight) {\n          // íŒ¬ ë³¼ë¥¨ ì°¾ê¸°\n          let panVolume = defaultPanVolume; // ì„¤ì •ì˜ ê¸°ë³¸ íŒ¬ ë³¼ë¥¨\n          for (const [, panList] of Object.entries(PAN_DATA)) {\n            const found = (panList as any[]).find(p => p.name === panType);\n            if (found) {\n              panVolume = found.volume;\n              break;\n            }\n          }\n          // ë¹„ìš©ì  ê¸°ë°˜ íŒ¬ ë¬´ê²Œ ê³„ì‚° (ì‚°í˜•ì‹ë¹µ ê¸°ì¤€: 4.2)\n          const specificVolume = SPECIFIC_VOLUMES[convertedProduct] || 4.2;\n          panWeight = Math.round(panVolume / specificVolume);\n        }\n\n        // ì›ë˜ íŒ¬ ì„¤ì • (ì €ì¥ëœ originalPanì´ ìˆìœ¼ë©´ ì‚¬ìš©) + ìœ íš¨ì„± ê²€ì¦\n        if (panData.originalPan) {\n          const op = panData.originalPan;\n          const unitCount = Math.max(1, op.unitCount || 10);\n          const unitWeight = Math.max(1, op.unitWeight || 50);\n\n          // ì¹´í…Œê³ ë¦¬/íƒ€ì… ìœ íš¨ì„± ê²€ì¦\n          const opCategory = getValidPanCategory(op.category);\n          const opType = getValidPanType(opCategory, op.type);\n\n          // count ëª¨ë“œì¼ ë•Œ panWeightë¥¼ unitCount Ã— unitWeightë¡œ ì¬ê³„ì‚°\n          let calculatedPanWeight = Math.abs(op.panWeight || 500);\n          if (op.mode === 'count') {\n            calculatedPanWeight = unitCount * unitWeight;\n          }\n\n          setOriginalPan({\n            ...op,\n            category: opCategory,\n            type: opType,\n            panWeight: calculatedPanWeight,\n            quantity: Math.max(1, Math.abs(op.quantity || 1)),\n            divisionCount: Math.max(1, op.divisionCount || 1),\n            divisionWeight: Math.abs(op.divisionWeight || calculatedPanWeight || 500),\n            unitCount: unitCount,\n            unitWeight: unitWeight,\n          });\n        } else {\n          setOriginalPan(prev => ({\n            ...prev,\n            mode: panMode as 'pan' | 'count',\n            category: panCategory,\n            type: panType,\n            quantity: Math.max(1, panQuantity),\n            panWeight: Math.abs(panWeight || 500),\n            divisionWeight: Math.abs(panWeight || 500),\n          }));\n        }\n\n        // ë³€í™˜ íŒ¬ ì„¤ì • (ì €ì¥ëœ ì „ì²´ íŒ¬ ë°°ì—´ì´ ìˆìœ¼ë©´ ì‚¬ìš©)\n        if (panData.pans && Array.isArray(panData.pans) && panData.pans.length > 0) {\n          // ì €ì¥ëœ íŒ¬ ë°°ì—´ ë³µì› + ìœ íš¨ì„± ê²€ì¦ (ìŒìˆ˜ ë°©ì§€ + ì¹´í…Œê³ ë¦¬/íƒ€ì… ê²€ì¦)\n          const validatedPans = panData.pans.map((p: any) => {\n            const pUnitCount = Math.max(1, p.unitCount || 10);\n            const pUnitWeight = Math.max(1, p.unitWeight || 50);\n            // ì¹´í…Œê³ ë¦¬/íƒ€ì… ìœ íš¨ì„± ê²€ì¦\n            const pCategory = getValidPanCategory(p.category);\n            const pType = getValidPanType(pCategory, p.type);\n            // count ëª¨ë“œì¼ ë•Œ panWeightë¥¼ unitCount Ã— unitWeightë¡œ ì¬ê³„ì‚°\n            let pPanWeight = Math.abs(p.panWeight || 500);\n            if (p.mode === 'count') {\n              pPanWeight = pUnitCount * pUnitWeight;\n            }\n            return {\n              ...p,\n              category: pCategory,\n              type: pType,\n              panWeight: pPanWeight,\n              quantity: Math.max(1, Math.abs(p.quantity || 1)),\n              divisionCount: Math.max(1, p.divisionCount || 1),\n              divisionWeight: Math.abs(p.divisionWeight || pPanWeight || 500),\n              unitCount: pUnitCount,\n              unitWeight: pUnitWeight,\n            };\n          });\n          setPans(validatedPans);\n        } else {\n          // ì´ì „ í˜•ì‹ í˜¸í™˜: ë‹¨ì¼ íŒ¬ìœ¼ë¡œ ë³µì›\n          setPans([{\n            id: '1',\n            mode: panMode as 'pan' | 'count',\n            category: panCategory,\n            type: panType,\n            quantity: Math.max(1, panQuantity),\n            divisionCount: 1,\n            panWeight: Math.abs(panWeight || 500),\n            divisionWeight: Math.abs(panWeight || 500),\n            unitCount: 10,\n            unitWeight: 50,\n          }]);\n        }\n      }\n\n      // ë¹„ìš©ì  ì„¤ì • ë¡œë“œ\n      if (currentRecipe.specificVolume) {\n        const svData = currentRecipe.specificVolume as any;\n        if (svData.original) setOriginalProduct(svData.original);\n        if (svData.converted) setConvertedProduct(svData.converted);\n      } else if (currentRecipe.tags && Array.isArray(currentRecipe.tags)) {\n        // ì´ì „ í˜•ì‹: tagsì—ì„œ ë¹„ìš©ì  ì¶”ì¶œ ì‹œë„\n        const svFromTags = currentRecipe.tags.find((t: string) =>\n          SPECIFIC_VOLUMES[t] !== undefined\n        );\n        if (svFromTags) {\n          setOriginalProduct(svFromTags);\n          setConvertedProduct(svFromTags);\n        }\n      }\n\n      // ë°°ìˆ˜ ì„¤ì • ë¡œë“œ + ìœ íš¨ì„± ê²€ì¦ (ìŒìˆ˜/0 ë°©ì§€)\n      if (currentRecipe.multiplierConfig) {\n        const mcData = currentRecipe.multiplierConfig as any;\n        if (typeof mcData.multiplier === 'number') {\n          // ë°°ìˆ˜ëŠ” ìµœì†Œ 0.01 ì´ìƒ ë³´ì¥\n          setMultiplier(Math.max(0.01, Math.abs(mcData.multiplier) || 1));\n        }\n        if (typeof mcData.isPanLinked === 'boolean') setIsPanLinked(mcData.isPanLinked);\n      }\n\n      // ë©”ëª¨ ë¡œë“œ\n      if (currentRecipe.notes) {\n        setMemo(currentRecipe.notes);\n      }\n\n      // ìˆ˜ìœ¨ ì˜ˆì¸¡ ê³µì • ì„ íƒ ìƒíƒœ ë¡œë“œ\n      if ((currentRecipe as any).yieldStageSelection) {\n        setYieldStageSelection({\n          ...DEFAULT_STAGE_SELECTION,\n          ...(currentRecipe as any).yieldStageSelection\n        });\n      } else {\n        // ì €ì¥ëœ ìƒíƒœê°€ ì—†ìœ¼ë©´ ê¸°ë³¸ê°’ìœ¼ë¡œ ë¦¬ì…‹\n        setYieldStageSelection({ ...DEFAULT_STAGE_SELECTION });\n      }\n\n      // ë¡œë“œ ì™„ë£Œ ì•Œë¦¼\n      addToast({ type: 'success', message: t('advDashboard.recipeLoaded', { name: currentRecipe.name }) });\n    }\n  }, [currentRecipe]);\n\n  // ë°°ìˆ˜ ë° ì—°ë™ ì„¤ì •\n  const [multiplier, setMultiplier] = useState(1);\n  const [isPanLinked, setIsPanLinked] = useState(true); // íŒ¬-ë°°ìˆ˜ ì—°ë™ ì—¬ë¶€\n  const [multiplierInput, setMultiplierInput] = useState('1'); // ë°°ìˆ˜ ì…ë ¥ í•„ë“œ\n\n  /**\n   * ë°°ìˆ˜ ì…ë ¥ íŒŒì‹± (ë‹¤ì–‘í•œ í˜•ì‹ ì§€ì›)\n   * x2, 2x, 2ë°°, Ã—2, *2 â†’ 2\n   * /2, 1/2, Ã·2 â†’ 0.5\n   * 0.5, .5 â†’ 0.5\n   */\n  const parseMultiplierInput = useCallback((input: string): number | null => {\n    const trimmed = input.trim().toLowerCase();\n    if (!trimmed) return null;\n\n    // x2, 2x, Ã—2, *2, 2ë°° í˜•ì‹\n    let match = trimmed.match(/^[xÃ—*]?\\s*(\\d+\\.?\\d*)\\s*[xÃ—ë°°]?$/);\n    if (match) {\n      const val = parseFloat(match[1]);\n      if (!isNaN(val) && val > 0) return val;\n    }\n\n    // /2, Ã·2 í˜•ì‹ (ë‚˜ëˆ„ê¸°)\n    match = trimmed.match(/^[/Ã·]\\s*(\\d+\\.?\\d*)$/);\n    if (match) {\n      const val = parseFloat(match[1]);\n      if (!isNaN(val) && val > 0) return 1 / val;\n    }\n\n    // 1/2, 1/3 ë¶„ìˆ˜ í˜•ì‹\n    match = trimmed.match(/^(\\d+)\\s*[/Ã·]\\s*(\\d+)$/);\n    if (match) {\n      const num = parseFloat(match[1]);\n      const den = parseFloat(match[2]);\n      if (!isNaN(num) && !isNaN(den) && den > 0) return num / den;\n    }\n\n    // ìˆœìˆ˜ ìˆ«ì\n    const numVal = parseFloat(trimmed);\n    if (!isNaN(numVal) && numVal > 0) return numVal;\n\n    return null;\n  }, []);\n\n  // ë°°ìˆ˜ ì…ë ¥ ì²˜ë¦¬\n  const handleMultiplierInputChange = useCallback((value: string) => {\n    setMultiplierInput(value);\n  }, []);\n\n  // ë°°ìˆ˜ ì…ë ¥ í™•ì • (Enter ë˜ëŠ” blur)\n  const handleMultiplierInputConfirm = useCallback(() => {\n    const parsed = parseMultiplierInput(multiplierInput);\n    if (parsed !== null) {\n      const clamped = Math.max(0.01, Math.min(100, parsed));\n      setMultiplier(Math.round(clamped * 100) / 100);\n      setMultiplierInput(String(Math.round(clamped * 100) / 100));\n    } else {\n      // íŒŒì‹± ì‹¤íŒ¨ ì‹œ í˜„ì¬ ê°’ìœ¼ë¡œ ë³µì›\n      setMultiplierInput(String(multiplier));\n    }\n  }, [multiplierInput, multiplier, parseMultiplierInput]);\n\n  // ë¹ ë¥¸ ë°°ìˆ˜ í´ë¦­\n  const handleQuickMultiplier = useCallback((value: number) => {\n    setMultiplier(value);\n    setMultiplierInput(String(value));\n  }, []);\n\n  // ============================================\n  // ê³„ì‚° í•¨ìˆ˜\n  // ============================================\n\n  const flourTotal = useMemo(() =>\n    ingredients.filter(i => i.category === 'flour').reduce((sum, i) => sum + i.amount, 0),\n    [ingredients]\n  );\n\n  const liquidTotal = useMemo(() =>\n    ingredients.filter(i => i.category === 'liquid').reduce((sum, i) => sum + i.amount, 0),\n    [ingredients]\n  );\n\n  const wetOtherMoisture = useMemo(() =>\n    ingredients.filter(i => i.category === 'wetOther' && i.moistureContent)\n      .reduce((sum, i) => sum + (i.amount * (i.moistureContent || 0)), 0),\n    [ingredients]\n  );\n\n  const totalWeight = useMemo(() =>\n    ingredients.reduce((sum, i) => sum + i.amount, 0),\n    [ingredients]\n  );\n\n  // ì¬ë£Œë¥¼ ë‹¨ê³„(phase)ë³„ë¡œ ê·¸ë£¹í™” - êµ¬ë¶„ì„  í‘œì‹œìš©\n  const ingredientsByPhase = useMemo(() => {\n    // ë‹¨ê³„ ìˆœì„œ ì •ì˜ (ì‚¬ì „ë°˜ì£½ ê³„ì—´ ë¨¼ì €, ë³¸ë°˜ì£½, ê·¸ ë‹¤ìŒ í† í•‘ ë“±)\n    const phaseOrder: Record<string, number> = {\n      tangzhong: 0, preferment: 1, poolish: 1, biga: 1, sponge: 1, levain: 1, autolyse: 2,\n      main: 10, topping: 20, filling: 21, frosting: 22, glaze: 23, other: 99\n    };\n\n    // ì¹´í…Œê³ ë¦¬ ìˆœì„œ ì •ì˜ (ë°€ê°€ë£¨ â†’ ìˆ˜ë¶„ â†’ ìœ ì§€ â†’ ê¸°íƒ€)\n    const categoryOrder: Record<string, number> = {\n      flour: 0, liquid: 1, wetOther: 2, other: 3\n    };\n\n    // ì¬ë£Œë¥¼ ë‹¨ê³„ë³„ë¡œ ê·¸ë£¹í™”\n    const grouped = ingredients.reduce((acc, ing) => {\n      const phase = ing.phase || 'main';\n      if (!acc[phase]) {\n        acc[phase] = [];\n      }\n      acc[phase].push(ing);\n      return acc;\n    }, {} as Record<string, IngredientEntry[]>);\n\n    // ë‹¨ê³„ ìˆœì„œëŒ€ë¡œ ì •ë ¬í•˜ì—¬ ë°°ì—´ë¡œ ë³€í™˜ (ê° ë‹¨ê³„ ë‚´ì—ì„œ ì¹´í…Œê³ ë¦¬ë³„ ì •ë ¬)\n    const sortedPhases = Object.entries(grouped)\n      .sort(([a], [b]) => (phaseOrder[a] ?? 50) - (phaseOrder[b] ?? 50))\n      .map(([phase, items]) => ({\n        phase,\n        items: items.sort((a, b) =>\n          (categoryOrder[a.category] ?? 99) - (categoryOrder[b.category] ?? 99)\n        )\n      }));\n\n    return sortedPhases;\n  }, [ingredients]);\n\n  // ë‹¨ê³„ê°€ 2ê°œ ì´ìƒì¸ì§€ (êµ¬ë¶„ì„  í‘œì‹œ ì—¬ë¶€ ê²°ì •)\n  const hasMultiplePhases = ingredientsByPhase.length > 1;\n\n  const hydration = useMemo(() =>\n    flourTotal === 0 ? 0 : Math.round(((liquidTotal + wetOtherMoisture) / flourTotal) * 1000) / 10,\n    [flourTotal, liquidTotal, wetOtherMoisture]\n  );\n\n  // ì›ë˜ íŒ¬ í•©ê³„ (ë ˆì‹œí”¼ ì›ë³¸ ê¸°ì¤€) - ìŒìˆ˜ ë°©ì§€\n  const originalPanTotalWeight = useMemo(() => {\n    // count ëª¨ë“œì¼ ë•ŒëŠ” unitCount Ã— unitWeightë¡œ ì§ì ‘ ê³„ì‚°\n    if (originalPan.mode === 'count') {\n      return Math.max((originalPan.unitCount || 10) * (originalPan.unitWeight || 50), 1);\n    }\n    // íŒ¬ ëª¨ë“œì¼ ë•ŒëŠ” panWeight Ã— quantity\n    const weight = Math.abs(originalPan.panWeight || 500);\n    const qty = Math.max(1, Math.abs(originalPan.quantity || 1));\n    return Math.max(weight * qty, 1);  // ìµœì†Œ 1g\n  }, [originalPan.panWeight, originalPan.quantity, originalPan.mode, originalPan.unitCount, originalPan.unitWeight]);\n\n  // ë³€í™˜ íŒ¬ í•©ê³„ (ëª©í‘œ) - ìŒìˆ˜ ë°©ì§€\n  const panTotalWeight = useMemo(() => {\n    const total = pans.reduce((sum, p) => {\n      // count ëª¨ë“œì¼ ë•ŒëŠ” unitCount Ã— unitWeightë¡œ ì§ì ‘ ê³„ì‚°\n      if (p.mode === 'count') {\n        return sum + ((p.unitCount || 10) * (p.unitWeight || 50));\n      }\n      // íŒ¬ ëª¨ë“œì¼ ë•ŒëŠ” panWeight Ã— quantity\n      const weight = Math.abs(p.panWeight || 0);\n      const qty = Math.abs(p.quantity || 1);\n      return sum + (weight * qty);\n    }, 0);\n    return Math.max(total, 0);\n  }, [pans]);\n\n  // ìë™ ê³„ì‚°ëœ ë°°ìˆ˜ (íŒ¬ ì—°ë™ ì‹œ ì‚¬ìš©)\n  // í•µì‹¬: ì›ë˜íŒ¬ â†’ ë³€í™˜íŒ¬ì˜ ë¹„ìœ¨ì´ ë°°ìˆ˜ê°€ ë¨\n  // ì•ˆì „ì¥ì¹˜: ë°°ìˆ˜ëŠ” í•­ìƒ ì–‘ìˆ˜ (ìµœì†Œ 0.01)\n  const autoMultiplier = useMemo(() => {\n    // 0 ë˜ëŠ” ìŒìˆ˜ ë°©ì§€\n    const origWeight = Math.abs(originalPanTotalWeight) || 1;\n    const targetWeight = Math.abs(panTotalWeight) || 1;\n    if (origWeight === 0) return 1;\n    const ratio = targetWeight / origWeight;\n    // ìµœì†Œ 0.01, ìµœëŒ€ ì œí•œ ì—†ìŒ\n    return Math.max(0.01, Math.round(ratio * 100) / 100);\n  }, [panTotalWeight, originalPanTotalWeight]);\n\n  // ì‹¤ì œ ì‚¬ìš©í•  ë°°ìˆ˜: ì—°ë™ ì‹œ ìë™ê³„ì‚°, ë¹„ì—°ë™ ì‹œ ìˆ˜ë™ì…ë ¥\n  const effectiveMultiplier = isPanLinked ? autoMultiplier : multiplier;\n\n  // ë¹„ìš©ì (convertedProduct) ë³€ê²½ ì‹œ íŒ¬ ëª¨ë“œì¸ íŒ¬ë§Œ panWeight ì¬ê³„ì‚°\n  useEffect(() => {\n    setPans(prev => prev.map(pan => {\n      // ê°œìˆ˜ ëª¨ë“œëŠ” ë¹„ìš©ì  ì˜í–¥ ì—†ìŒ\n      if (pan.mode === 'count') return pan;\n\n      const panInfo = PAN_DATA[pan.category as keyof typeof PAN_DATA]?.find(p => p.name === pan.type);\n      if (panInfo) {\n        const newWeight = Math.round(panInfo.volume / (SPECIFIC_VOLUMES[convertedProduct] || 3.4));\n        return {\n          ...pan,\n          panWeight: newWeight,\n          divisionWeight: Math.round(newWeight / pan.divisionCount)\n        };\n      }\n      return pan;\n    }));\n  }, [convertedProduct]);\n\n  // ì›ë˜ íŒ¬ ë¹„ìš©ì (originalProduct) ë³€ê²½ ì‹œ originalPanì˜ panWeight ì¬ê³„ì‚°\n  useEffect(() => {\n    // ê°œìˆ˜ ëª¨ë“œëŠ” ë¹„ìš©ì  ì˜í–¥ ì—†ìŒ\n    if (originalPan.mode === 'count') return;\n\n    const panInfo = PAN_DATA[originalPan.category as keyof typeof PAN_DATA]?.find(p => p.name === originalPan.type);\n    if (panInfo) {\n      const newWeight = Math.round(panInfo.volume / (SPECIFIC_VOLUMES[originalProduct] || 3.4));\n      setOriginalPan(prev => ({\n        ...prev,\n        panWeight: newWeight,\n        divisionWeight: Math.round(newWeight / prev.divisionCount)\n      }));\n    }\n  }, [originalProduct, originalPan.mode, originalPan.category, originalPan.type]);\n\n  // ì›ë˜ íŒ¬ ëª¨ë“œ ë³€ê²½ ì‹œ ë³€í™˜ íŒ¬ë„ ê°™ì€ ëª¨ë“œë¡œ ë³€ê²½\n  useEffect(() => {\n    setPans(prev => prev.map(pan => {\n      if (pan.mode === originalPan.mode) return pan;\n\n      const updated = { ...pan, mode: originalPan.mode };\n\n      if (originalPan.mode === 'count') {\n        // ê°œìˆ˜ ëª¨ë“œë¡œ ë³€ê²½: unitCount * unitWeight\n        updated.panWeight = (updated.unitCount || 10) * (updated.unitWeight || 50);\n        updated.divisionCount = 1;\n        updated.divisionWeight = updated.panWeight;\n      } else {\n        // íŒ¬ ëª¨ë“œë¡œ ë³€ê²½: íŒ¬ ë³¼ë¥¨ / ë¹„ìš©ì \n        const panInfo = PAN_DATA[updated.category as keyof typeof PAN_DATA]?.find(p => p.name === updated.type);\n        if (panInfo) {\n          updated.panWeight = Math.round(panInfo.volume / (SPECIFIC_VOLUMES[convertedProduct] || 3.4));\n          updated.divisionWeight = Math.round(updated.panWeight / updated.divisionCount);\n        }\n      }\n\n      return updated;\n    }));\n  }, [originalPan.mode, convertedProduct]);\n\n  // ì œí’ˆ íƒ€ì… ë³€ê²½ ì‹œ ì›ì œí’ˆ/ë³€ê²½ì œí’ˆì„ í•´ë‹¹ ì¹´í…Œê³ ë¦¬ ê¸°ë³¸ê°’ìœ¼ë¡œ ì¬ì„¤ì •\n  useEffect(() => {\n    if (productType === 'bread') {\n      const breadProducts = Object.keys(BREAD_SPECIFIC_VOLUMES);\n      if (!breadProducts.includes(originalProduct)) {\n        setOriginalProduct(breadProducts[0] || 'ì‚°í˜•ì‹ë¹µ');\n      }\n      if (!breadProducts.includes(convertedProduct)) {\n        setConvertedProduct(breadProducts[0] || 'ì‚°í˜•ì‹ë¹µ');\n      }\n    } else {\n      const pastryProducts = Object.keys(CAKE_BATTER_SPECIFIC_GRAVITY);\n      if (!pastryProducts.includes(originalProduct)) {\n        setOriginalProduct(pastryProducts[0] || 'íŒŒìš´ë“œì¼€ì´í¬');\n      }\n      if (!pastryProducts.includes(convertedProduct)) {\n        setConvertedProduct(pastryProducts[0] || 'íŒŒìš´ë“œì¼€ì´í¬');\n      }\n    }\n  }, [productType]);\n\n  const convertedTotal = useMemo(() => Math.round(totalWeight * effectiveMultiplier), [totalWeight, effectiveMultiplier]);\n\n  // ì†ì‹¤ë¥  ê³„ì‚°\n  const lossRate = useMemo(() => {\n    if (convertedTotal === 0) return 0;\n    return Math.round((panTotalWeight / convertedTotal) * 1000) / 10;\n  }, [panTotalWeight, convertedTotal]);\n\n  // ë³€í™˜ëœ ì¬ë£Œ\n  const convertedIngredients = useMemo(() =>\n    ingredients.map(ing => ({\n      ...ing,\n      convertedAmount: Math.round(ing.amount * effectiveMultiplier * 10) / 10,\n    })),\n    [ingredients, effectiveMultiplier]\n  );\n\n  // ì‚¬ì „ë°˜ì£½ ì¬ë£Œ\n  // í•µì‹¬: ê° ë°€ê°€ë£¨ë¥¼ ê°œë³„ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ì—¬ ë¹„ìœ¨ëŒ€ë¡œ ë¶„ë°°\n  const prefermentIngredients = useMemo(() => {\n    if (!usePreferment || method.type === 'straight') return [];\n    const result: any[] = [];\n\n    // 1. ê° ë°€ê°€ë£¨ë¥¼ ê°œë³„ì ìœ¼ë¡œ ì²˜ë¦¬ (ê°•ë ¥ë¶„, ì˜¥ìˆ˜ìˆ˜ì „ë¶„ ë“± ê°ê°)\n    const flourItems = ingredients.filter(i => i.category === 'flour');\n\n    if (flourItems.length === 0) return [];\n\n    // 2. ê° ë°€ê°€ë£¨ì— flourRatio ì ìš©í•˜ì—¬ ì‚¬ì „ë°˜ì£½ ë°€ê°€ë£¨ ìƒì„±\n    flourItems.forEach(flour => {\n      const prefermentFlourAmount = Math.round(flour.amount * method.flourRatio * effectiveMultiplier * 10) / 10;\n      if (prefermentFlourAmount > 0) {\n        result.push({\n          id: `pref-${flour.id}`,\n          name: flour.name,\n          category: 'flour',\n          convertedAmount: prefermentFlourAmount,\n        });\n      }\n    });\n\n    // 3. ì‚¬ì „ë°˜ì£½ ìˆ˜ë¶„ = ì‚¬ì „ë°˜ì£½ ë°€ê°€ë£¨(ë°°ìˆ˜ì ìš©ì „) Ã— waterRatio (ë‹¨ì¼ í•­ëª©)\n    const totalFlour = flourItems.reduce((sum, flour) => sum + flour.amount, 0);\n    const prefermentFlourBase = totalFlour * method.flourRatio;\n    const prefermentWaterAmount = Math.round(prefermentFlourBase * method.waterRatio * effectiveMultiplier * 10) / 10;\n    if (prefermentWaterAmount > 0) {\n      result.push({\n        id: 'pref-water',\n        name: 'ë¬¼',\n        category: 'liquid',\n        convertedAmount: prefermentWaterAmount,\n      });\n    }\n\n    // 4. ì´ìŠ¤íŠ¸ - ì œë²•ë³„ ì„¤ì • ì‚¬ìš© (prefermentYeastRatio)\n    // - ì˜¤í† ë¦¬ì¦ˆ, íƒ•ì¢…, ë¥´ë°©: ì‚¬ì „ë°˜ì£½ì— ì´ìŠ¤íŠ¸ ì—†ìŒ (prefermentYeastRatio = 0)\n    // - ì¤‘ì¢…ë²•: ì „ëŸ‰(100%) ì‚¬ì „ë°˜ì£½ì— (prefermentYeastRatio = 1.0)\n    // - í´ë¦¬ì‰¬/ë¹„ê°€: ê·¹ì†ŒëŸ‰(10-15%) ì‚¬ì „ë°˜ì£½ì—\n    const totalYeast = ingredients\n      .filter(i => i.name.includes('ì´ìŠ¤íŠ¸'))\n      .reduce((sum, ing) => sum + ing.amount, 0);\n\n    // ì œë²•ë³„ ì‚¬ì „ë°˜ì£½ ì´ìŠ¤íŠ¸ ë¹„ìœ¨ (method.prefermentYeastRatio ì‚¬ìš©)\n    const prefermentYeastRatio = method.prefermentYeastRatio ?? 0;\n\n    if (totalYeast > 0 && prefermentYeastRatio > 0) {\n      const yeast = ingredients.find(i => i.name.includes('ì´ìŠ¤íŠ¸'));\n      // 1) ì „ì²´ ì´ìŠ¤íŠ¸ ì¡°ì • (yeastAdjustment ì ìš©)\n      const adjustedTotalYeast = totalYeast * (method.yeastAdjustment ?? 1.0);\n      // 2) ì‚¬ì „ë°˜ì£½ì— ë“¤ì–´ê°€ëŠ” ì–‘\n      const prefermentYeastAmount = adjustedTotalYeast * prefermentYeastRatio;\n\n      result.push({\n        id: 'pref-yeast',\n        name: yeast?.name || 'ì¸ìŠ¤í„´íŠ¸ ë“œë¼ì´ì´ìŠ¤íŠ¸',\n        category: 'other',\n        convertedAmount: Math.round(prefermentYeastAmount * effectiveMultiplier * 10) / 10,\n      });\n    }\n\n    return result;\n  }, [ingredients, method, usePreferment, effectiveMultiplier]);\n\n  // ë³¸ë°˜ì£½ ì¬ë£Œ\n  // í•µì‹¬: ê°™ì€ ì¹´í…Œê³ ë¦¬ ì¬ë£Œë¥¼ í•©ì‚° í›„ ì‚¬ì „ë°˜ì£½ ì°¨ê°ëŸ‰ ê³„ì‚° (ì¤‘ë³µ ë°©ì§€)\n  const mainDoughIngredients = useMemo(() => {\n    if (!usePreferment || method.type === 'straight') return convertedIngredients;\n\n    const result: any[] = [];\n\n    // 1. ì´ëŸ‰ ê³„ì‚°\n    const totalFlour = ingredients.filter(i => i.category === 'flour').reduce((sum, ing) => sum + ing.amount, 0);\n    const totalWater = ingredients.filter(i => i.category === 'liquid' && i.name === 'ë¬¼').reduce((sum, ing) => sum + ing.amount, 0);\n    const totalYeast = ingredients.filter(i => i.name.includes('ì´ìŠ¤íŠ¸')).reduce((sum, ing) => sum + ing.amount, 0);\n\n    // 2. ì‚¬ì „ë°˜ì£½ì— ë“¤ì–´ê°„ ì–‘ ê³„ì‚°\n    const prefermentFlour = totalFlour * method.flourRatio;\n    const prefermentWater = prefermentFlour * method.waterRatio;\n\n    // ì œë²•ë³„ ì´ìŠ¤íŠ¸ ì¡°ì • ì ìš©\n    const yeastAdjustment = method.yeastAdjustment ?? 1.0;\n    const prefermentYeastRatio = method.prefermentYeastRatio ?? 0;\n    // ì¡°ì •ëœ ì „ì²´ ì´ìŠ¤íŠ¸ëŸ‰\n    const adjustedTotalYeast = totalYeast * yeastAdjustment;\n    // ì‚¬ì „ë°˜ì£½ì— ë“¤ì–´ê°„ ì´ìŠ¤íŠ¸\n    const prefermentYeast = adjustedTotalYeast * prefermentYeastRatio;\n\n    // 3. ë³¸ë°˜ì£½ ë°€ê°€ë£¨ - ê° ë°€ê°€ë£¨ë¥¼ ê°œë³„ì ìœ¼ë¡œ ì²˜ë¦¬ (ê°•ë ¥ë¶„, ì˜¥ìˆ˜ìˆ˜ì „ë¶„ ë“±)\n    const flourItems = ingredients.filter(i => i.category === 'flour');\n    flourItems.forEach(flour => {\n      const prefermentAmount = flour.amount * method.flourRatio;\n      const mainFlourAmount = Math.round((flour.amount - prefermentAmount) * 10) / 10;\n      if (mainFlourAmount > 0) {\n        result.push({\n          id: `main-${flour.id}`,\n          name: flour.name,\n          category: 'flour',\n          amount: mainFlourAmount,\n          convertedAmount: Math.round(mainFlourAmount * effectiveMultiplier * 10) / 10,\n        });\n      }\n    });\n\n    // 4. ë³¸ë°˜ì£½ ë¬¼ (ì´ëŸ‰ - ì‚¬ì „ë°˜ì£½) = ë‹¨ì¼ í•­ëª©\n    const mainWaterAmount = Math.round((totalWater - Math.min(totalWater, prefermentWater)) * 10) / 10;\n    if (mainWaterAmount > 0) {\n      result.push({\n        id: 'main-water',\n        name: 'ë¬¼',\n        category: 'liquid',\n        amount: mainWaterAmount,\n        convertedAmount: Math.round(mainWaterAmount * effectiveMultiplier * 10) / 10,\n      });\n    }\n\n    // 5. ë‚˜ë¨¸ì§€ ìˆ˜ë¶„(ìš°ìœ  ë“±) - ê·¸ëŒ€ë¡œ í¬í•¨\n    ingredients.filter(i => i.category === 'liquid' && i.name !== 'ë¬¼').forEach(ing => {\n      result.push({\n        ...ing,\n        id: `main-${ing.id}`,\n        convertedAmount: Math.round(ing.amount * effectiveMultiplier * 10) / 10,\n      });\n    });\n\n    // 6. ë‚˜ë¨¸ì§€ ì¬ë£Œ (ë°€ê°€ë£¨, ë¬¼, ì´ìŠ¤íŠ¸ ì œì™¸)\n    ingredients.filter(i =>\n      i.category !== 'flour' &&\n      !(i.category === 'liquid' && i.name === 'ë¬¼') &&\n      !i.name.includes('ì´ìŠ¤íŠ¸')\n    ).filter(i => i.category !== 'liquid').forEach(ing => {\n      result.push({\n        ...ing,\n        id: `main-${ing.id}`,\n        convertedAmount: Math.round(ing.amount * effectiveMultiplier * 10) / 10,\n      });\n    });\n\n    // 7. ë³¸ë°˜ì£½ ì´ìŠ¤íŠ¸ = ì¡°ì •ëœ ì „ì²´ ì´ìŠ¤íŠ¸ - ì‚¬ì „ë°˜ì£½ ì´ìŠ¤íŠ¸\n    // ì˜ˆ: í´ë¦¬ì‰¬ (yeastAdjustment=0.55, prefermentYeastRatio=0.15)\n    //     â†’ ë³¸ë°˜ì£½ = ì›ë˜ì´ìŠ¤íŠ¸ Ã— 0.55 Ã— (1 - 0.15) = 46.75%\n    const mainYeastAmount = Math.round((adjustedTotalYeast - prefermentYeast) * 10) / 10;\n    if (mainYeastAmount > 0) {\n      const yeast = ingredients.find(i => i.name.includes('ì´ìŠ¤íŠ¸'));\n      result.push({\n        id: 'main-yeast',\n        name: yeast?.name || 'ì¸ìŠ¤í„´íŠ¸ ë“œë¼ì´ì´ìŠ¤íŠ¸',\n        category: 'other',\n        amount: mainYeastAmount,\n        convertedAmount: Math.round(mainYeastAmount * effectiveMultiplier * 10) / 10,\n      });\n    }\n\n    return result;\n  }, [ingredients, method, usePreferment, effectiveMultiplier, convertedIngredients]);\n\n  const prefermentTotal = useMemo(() =>\n    prefermentIngredients.reduce((sum, i) => sum + (i.convertedAmount || 0), 0),\n    [prefermentIngredients]\n  );\n\n  const mainDoughTotal = useMemo(() =>\n    mainDoughIngredients.reduce((sum, i) => sum + (i.convertedAmount || 0), 0),\n    [mainDoughIngredients]\n  );\n\n  // ì›ë³¸ ë ˆì‹œí”¼ì˜ ì œë²• íƒ€ì… ê°ì§€ (phase ì†ì„± ê¸°ë°˜)\n  const originalMethodType = useMemo(() => {\n    const prefermentPhases = ['tangzhong', 'poolish', 'biga', 'sponge', 'levain', 'autolyse', 'preferment'];\n    const foundPhase = ingredients.find(ing => ing.phase && prefermentPhases.includes(ing.phase));\n    return foundPhase?.phase || 'straight';\n  }, [ingredients]);\n\n  // ë ˆì‹œí”¼ì— ì—¬ëŸ¬ ë‹¨ê³„ê°€ ìˆëŠ”ì§€ í™•ì¸ (ì œë¹µ, ì œê³¼ ëª¨ë‘ í¬í•¨)\n  const hasMultipleIngredientPhases = useMemo(() => {\n    const phases = new Set(ingredients.map(ing => ing.phase || 'main'));\n    return phases.size > 1 || (phases.size === 1 && !phases.has('main'));\n  }, [ingredients]);\n\n  // ì›ë³¸ ì œë²•ê³¼ ì„ íƒ ì œë²•ì´ ê°™ì€ì§€ í™•ì¸\n  const isSameMethod = originalMethodType === method.type ||\n    (originalMethodType === 'straight' && method.type === 'straight');\n\n  // ë³€í™˜ ì¬ë£Œë¥¼ ë‹¨ê³„ë³„ë¡œ ê·¸ë£¹í™” (ì‚¬ì „ë°˜ì£½ + ë³¸ë°˜ì£½ì„ í•˜ë‚˜ì˜ í…Œì´ë¸”ì— í‘œì‹œ)\n  const convertedIngredientsByPhase = useMemo(() => {\n    const phaseOrder: Record<string, number> = {\n      tangzhong: 0, preferment: 1, poolish: 1, biga: 1, sponge: 1, levain: 1, autolyse: 2,\n      main: 10, topping: 20, filling: 21, frosting: 22, glaze: 23, other: 99\n    };\n\n    // ì¹´í…Œê³ ë¦¬ ìˆœì„œ ì •ì˜ (ë°€ê°€ë£¨ â†’ ìˆ˜ë¶„ â†’ ìœ ì§€ â†’ ê¸°íƒ€)\n    const categoryOrder: Record<string, number> = {\n      flour: 0, liquid: 1, wetOther: 2, other: 3\n    };\n\n    // â˜… ìš°ì„ ìˆœìœ„ 1: ì—¬ëŸ¬ ë‹¨ê³„ê°€ ìˆê³  ì‚¬ì „ë°˜ì£½ ë¯¸ì‚¬ìš© ì‹œ â†’ ì›ë³¸ ë‹¨ê³„ ìœ ì§€ (ì œë¹µ/ì œê³¼ ëª¨ë‘)\n    if (hasMultipleIngredientPhases && !usePreferment) {\n      const grouped = convertedIngredients.reduce((acc, ing) => {\n        const phase = ing.phase || 'main';\n        if (!acc[phase]) acc[phase] = [];\n        acc[phase].push(ing);\n        return acc;\n      }, {} as Record<string, typeof convertedIngredients>);\n\n      return Object.entries(grouped)\n        .sort(([a], [b]) => (phaseOrder[a] ?? 50) - (phaseOrder[b] ?? 50))\n        .map(([phase, items]) => ({\n          phase,\n          items: items.sort((a, b) =>\n            (categoryOrder[a.category] ?? 99) - (categoryOrder[b.category] ?? 99)\n          )\n        }));\n    }\n\n    // ìŠ¤íŠ¸ë ˆì´íŠ¸ë²•: ëª¨ë“  ì¬ë£Œë¥¼ í•©ì‚°í•˜ì—¬ 'main' í•˜ë‚˜ë¡œ í†µí•©\n    if (!usePreferment || method.type === 'straight') {\n      const combinedItems: any[] = [];\n\n      // ë°€ê°€ë£¨ ê°œë³„ í‘œì‹œ (í•©ì‚°í•˜ì§€ ì•ŠìŒ - ê°•ë ¥ë¶„, ì˜¥ìˆ˜ìˆ˜ì „ë¶„ ë“± ê°ê° í‘œì‹œ)\n      const flourItems = convertedIngredients.filter(i => i.category === 'flour');\n      flourItems.forEach(flour => {\n        if (flour.convertedAmount > 0) {\n          combinedItems.push({\n            id: `straight-${flour.id}`,\n            name: flour.name,\n            category: 'flour',\n            convertedAmount: Math.round(flour.convertedAmount * 10) / 10,\n          });\n        }\n      });\n\n      // ìˆ˜ë¶„ í•©ì‚° (ë¬¼ / ìš°ìœ  / ê¸°íƒ€ ê°ê°)\n      const liquidNames = [...new Set(convertedIngredients.filter(i => i.category === 'liquid').map(i => i.name))];\n      liquidNames.forEach(name => {\n        const total = convertedIngredients\n          .filter(i => i.category === 'liquid' && i.name === name)\n          .reduce((sum, ing) => sum + ing.convertedAmount, 0);\n        if (total > 0) {\n          combinedItems.push({\n            id: `straight-${name}`,\n            name,\n            category: 'liquid',\n            convertedAmount: Math.round(total * 10) / 10,\n          });\n        }\n      });\n\n      // ë‚˜ë¨¸ì§€ ì¬ë£Œ - ê°™ì€ ì´ë¦„ë¼ë¦¬ í•©ì‚°\n      const otherNames = [...new Set(convertedIngredients\n        .filter(i => i.category !== 'flour' && i.category !== 'liquid')\n        .map(i => i.name))];\n      otherNames.forEach(name => {\n        const items = convertedIngredients.filter(i => i.name === name && i.category !== 'flour' && i.category !== 'liquid');\n        const total = items.reduce((sum, ing) => sum + ing.convertedAmount, 0);\n        if (total > 0) {\n          combinedItems.push({\n            id: `straight-${name}`,\n            name,\n            category: items[0]?.category || 'other',\n            convertedAmount: Math.round(total * 10) / 10,\n          });\n        }\n      });\n\n      // ì¹´í…Œê³ ë¦¬ë³„ë¡œ ì •ë ¬\n      combinedItems.sort((a, b) =>\n        (categoryOrder[a.category] ?? 99) - (categoryOrder[b.category] ?? 99)\n      );\n\n      return [{ phase: 'main', items: combinedItems }];\n    }\n\n    // â˜… í•µì‹¬: ì›ë³¸ ì œë²•ê³¼ ì„ íƒ ì œë²•ì´ ê°™ìœ¼ë©´ ì›ë³¸ ê·¸ëŒ€ë¡œ ìœ ì§€\n    if (isSameMethod && originalMethodType !== 'straight') {\n      // convertedIngredientsë¥¼ ì›ë³¸ phase ê¸°ì¤€ìœ¼ë¡œ ê·¸ë£¹í™” (ê°’ì€ ì´ë¯¸ effectiveMultiplier ì ìš©ë¨)\n      const grouped = convertedIngredients.reduce((acc, ing) => {\n        const phase = ing.phase || 'main';\n        if (!acc[phase]) acc[phase] = [];\n        acc[phase].push(ing);\n        return acc;\n      }, {} as Record<string, typeof convertedIngredients>);\n\n      return Object.entries(grouped)\n        .sort(([a], [b]) => (phaseOrder[a] ?? 50) - (phaseOrder[b] ?? 50))\n        .map(([phase, items]) => ({\n          phase,\n          items: items.sort((a, b) =>\n            (categoryOrder[a.category] ?? 99) - (categoryOrder[b.category] ?? 99)\n          )\n        }));\n    }\n\n    // ì œë²•ì´ ë‹¤ë¥¼ ë•Œ: prefermentIngredients + mainDoughIngredients ì‚¬ìš©\n    const result: { phase: string; items: any[] }[] = [];\n\n    if (prefermentIngredients.length > 0) {\n      const sortedPreferment = [...prefermentIngredients].sort((a, b) =>\n        (categoryOrder[a.category] ?? 99) - (categoryOrder[b.category] ?? 99)\n      );\n      result.push({\n        phase: method.type,\n        items: sortedPreferment.map(ing => ({ ...ing, phase: method.type }))\n      });\n    }\n\n    const mainItems = mainDoughIngredients.filter(ing => (ing.convertedAmount || 0) > 0);\n    if (mainItems.length > 0) {\n      const sortedMain = mainItems.sort((a, b) =>\n        (categoryOrder[a.category] ?? 99) - (categoryOrder[b.category] ?? 99)\n      );\n      result.push({\n        phase: 'main',\n        items: sortedMain.map(ing => ({ ...ing, phase: 'main' }))\n      });\n    }\n\n    return result;\n  }, [convertedIngredients, prefermentIngredients, mainDoughIngredients, usePreferment, method.type, isSameMethod, originalMethodType, hasMultipleIngredientPhases]);\n\n  // ë³€í™˜ ì¬ë£Œì— ë‹¨ê³„ê°€ 2ê°œ ì´ìƒì¸ì§€\n  const convertedHasMultiplePhases = convertedIngredientsByPhase.length > 1;\n\n  // ë™ì  ìŠ¤íƒ€ì¼\n  const dynamicStyles = useMemo(() => getDynamicStyles(ingredients.length), [ingredients.length]);\n\n  // PhaseIngredientsViewìš© Recipe ê°ì²´ ìƒì„±\n  const recipeForPhaseView = useMemo(() => ({\n    id: currentRecipe?.id || 'temp',\n    name: productName,\n    ingredients: ingredients.map(ing => ({\n      id: ing.id,\n      name: ing.name,\n      category: ing.category === 'wetOther' ? 'fat' : ing.category,\n      amount: ing.amount,\n      unit: 'g' as const,\n      bakersPercentage: ing.ratio,\n      isFlour: ing.category === 'flour'\n    })),\n    // phasesê°€ ìˆìœ¼ë©´ currentRecipeì—ì„œ ê°€ì ¸ì˜´\n    phases: currentRecipe?.phases\n  }), [currentRecipe, productName, ingredients]);\n\n  // ============================================\n  // ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬\n  // ============================================\n\n  const handleMethodChange = useCallback((type: string) => {\n    const ratios = METHOD_RATIOS[type] || { flour: 0, water: 0 };\n    // ì„¤ì • ìŠ¤í† ì–´ì—ì„œ í•´ë‹¹ ì œë²•ì˜ ì´ìŠ¤íŠ¸ ì¡°ì •ê°’ ê°€ì ¸ì˜¤ê¸° (ì—†ìœ¼ë©´ ë¡œì»¬ ê¸°ë³¸ê°’ ì‚¬ìš©)\n    const methodConfig = methodSettings?.methods?.[type];\n    const defaultYeast = DEFAULT_METHOD_YEAST[type] || { yeastAdjustment: 1.0, prefermentYeastRatio: 0 };\n    const yeastAdjustment = methodConfig?.yeastAdjustment ?? defaultYeast.yeastAdjustment;\n    const prefermentYeastRatio = methodConfig?.prefermentYeastRatio ?? defaultYeast.prefermentYeastRatio;\n\n    setMethod({\n      type: type as any,\n      flourRatio: ratios.flour,\n      waterRatio: ratios.water,\n      yeastAdjustment,\n      prefermentYeastRatio\n    });\n    setUsePreferment(type !== 'straight');\n    // ì›ë³¸ ë ˆì‹œí”¼(ingredients)ëŠ” ìˆ˜ì •í•˜ì§€ ì•ŠìŒ\n    // ë³€í™˜ ë ˆì‹œí”¼ëŠ” prefermentIngredientsì™€ mainDoughIngredients useMemoì—ì„œ ìë™ ê³„ì‚°\n  }, [methodSettings]);\n\n  // ì›ë˜ íŒ¬ ì—…ë°ì´íŠ¸\n  const updateOriginalPan = useCallback((field: string, value: any) => {\n    setOriginalPan(prev => {\n      const updated = { ...prev, [field]: value };\n\n      // ëª¨ë“œ ë³€ê²½ ì‹œ panWeight ì¬ê³„ì‚°\n      if (field === 'mode') {\n        if (value === 'count') {\n          // ê°œìˆ˜ ëª¨ë“œ: unitCount * unitWeight\n          updated.panWeight = (updated.unitCount || 10) * (updated.unitWeight || 50);\n        } else {\n          // íŒ¬ ëª¨ë“œ: íŒ¬ ë³¼ë¥¨ / ë¹„ìš©ì \n          const panInfo = PAN_DATA[updated.category as keyof typeof PAN_DATA]?.find(pan => pan.name === updated.type);\n          if (panInfo) {\n            updated.panWeight = Math.round(panInfo.volume / (SPECIFIC_VOLUMES[originalProduct] || 3.4));\n          }\n        }\n      }\n\n      // íŒ¬ íƒ€ì… ë³€ê²½ ì‹œ panWeight ìë™ ê³„ì‚° (íŒ¬ ëª¨ë“œì¼ ë•Œë§Œ)\n      if (field === 'type' && updated.mode === 'pan') {\n        const panInfo = PAN_DATA[updated.category as keyof typeof PAN_DATA]?.find(pan => pan.name === value);\n        if (panInfo) {\n          updated.panWeight = Math.round(panInfo.volume / (SPECIFIC_VOLUMES[originalProduct] || 3.4));\n        }\n      }\n\n      // ì¹´í…Œê³ ë¦¬ ë³€ê²½ ì‹œ ì²« ë²ˆì§¸ íƒ€ì…ìœ¼ë¡œ ì„¤ì • (íŒ¬ ëª¨ë“œì¼ ë•Œë§Œ)\n      if (field === 'category' && updated.mode === 'pan') {\n        const types = PAN_DATA[value as keyof typeof PAN_DATA];\n        if (types?.length > 0) {\n          updated.type = types[0].name;\n          updated.panWeight = Math.round(types[0].volume / (SPECIFIC_VOLUMES[originalProduct] || 3.4));\n        }\n      }\n\n      // ê°œìˆ˜ ëª¨ë“œ: unitCount ë˜ëŠ” unitWeight ë³€ê²½ ì‹œ panWeight ì¬ê³„ì‚°\n      if (updated.mode === 'count' && (field === 'unitCount' || field === 'unitWeight')) {\n        updated.panWeight = (updated.unitCount || 0) * (updated.unitWeight || 0);\n      }\n\n      // íŒ¬ ëª¨ë“œ: divisionWeight ê³„ì‚° (panWeight / divisionCount)\n      if (updated.mode === 'pan' && updated.divisionCount > 0) {\n        updated.divisionWeight = Math.round(updated.panWeight / updated.divisionCount);\n      }\n\n      return updated;\n    });\n  }, [originalProduct]);\n\n  const addPan = useCallback(() => {\n    // ì„¤ì •ì˜ ì²« ë²ˆì§¸ íŒ¬ ë³¼ë¥¨ ì‚¬ìš©, ë³€í™˜ ëŒ€ìƒ ì œí’ˆ ë¹„ìš©ì ìœ¼ë¡œ ê³„ì‚°\n    const newPanVolume = PAN_DATA[defaultCategory]?.[0]?.volume || 2350;\n    const calculatedWeight = Math.round(newPanVolume / (SPECIFIC_VOLUMES[convertedProduct] || 3.4));\n\n    setPans(prev => [...prev, {\n      id: Date.now().toString(),\n      mode: 'pan',\n      category: defaultCategory, type: defaultPanType,\n      quantity: 1, divisionCount: 1, panWeight: calculatedWeight, divisionWeight: calculatedWeight,\n      unitCount: 10, unitWeight: 50,\n    }]);\n  }, [convertedProduct, defaultCategory, defaultPanType, PAN_DATA]);\n\n  const removePan = useCallback((id: string) => {\n    setPans(prev => prev.length > 1 ? prev.filter(p => p.id !== id) : prev);\n  }, []);\n\n  // ===== ì´ˆê¸°í™” í•¨ìˆ˜ë“¤ =====\n  // íŒ¬ ì„¤ì • ì´ˆê¸°í™”: ë³€í™˜ íŒ¬ì„ ì›ë˜ íŒ¬ê³¼ ë™ì¼í•˜ê²Œ\n  const resetPanSettings = useCallback(() => {\n    setPans([{\n      id: '1',\n      mode: originalPan.mode,\n      category: originalPan.category,\n      type: originalPan.type,\n      quantity: originalPan.quantity,\n      divisionCount: originalPan.divisionCount,\n      panWeight: originalPan.panWeight,\n      divisionWeight: originalPan.divisionWeight,\n      unitCount: originalPan.unitCount,\n      unitWeight: originalPan.unitWeight,\n    }]);\n    setIsPanLinked(true);\n  }, [originalPan]);\n\n  // ë¹„ìš©ì  ì´ˆê¸°í™”: ë³€í™˜ ë¹„ìš©ì ì„ ì›ë˜ ë¹„ìš©ì ê³¼ ë™ì¼í•˜ê²Œ\n  const resetSpecificVolume = useCallback(() => {\n    setConvertedProduct(originalProduct);\n  }, [originalProduct]);\n\n  // ì˜¤ë¸ ì´ˆê¸°í™”: ê¸°ë³¸ê°’ìœ¼ë¡œ\n  const resetOvenSettings = useCallback(() => {\n    setOven({\n      type: 'convection',\n      level: '',\n      firstBake: { topTemp: 200, bottomTemp: 170, time: 24 },\n      secondBake: { topTemp: 0, bottomTemp: 0, time: 0 },\n    });\n  }, []);\n\n  // ì „ì²´ ë³€í™˜ ì´ˆê¸°í™”\n  const resetAllConversion = useCallback(() => {\n    resetPanSettings();\n    resetSpecificVolume();\n    resetOvenSettings();\n    setMultiplier(1);\n  }, [resetPanSettings, resetSpecificVolume, resetOvenSettings]);\n\n  // ë ˆì‹œí”¼ ì €ì¥ (ì‹¤ì œ ì €ì¥ ë¡œì§)\n  const saveRecipeData = useCallback((overwriteId?: string) => {\n    // ì €ì¥í•  ì¬ë£Œ ë°ì´í„° - ì›ë˜ ë ˆì‹œí”¼ ê·¸ëŒ€ë¡œ ì €ì¥ (ë³€í™˜ê°’ ì•„ë‹˜!)\n    const ingredientsToSave = ingredients.map((ing, idx) => ({\n      id: ing.id || `ing-${Date.now()}-${idx}`,\n      name: ing.name,\n      amount: ing.amount,  // ì›ë˜ ë ˆì‹œí”¼ ì–‘ ì €ì¥ (convertedAmount ì•„ë‹˜!)\n      percentage: ing.ratio,  // ë² ì´ì»¤ìŠ¤ í¼ì„¼íŠ¸ ì €ì¥\n      unit: 'g',\n      category: ing.category === 'flour' ? 'flour' :\n                ing.category === 'liquid' ? 'liquid' :\n                ing.category === 'wetOther' ? 'fat' : 'other',\n      isFlour: ing.category === 'flour',\n      note: ing.note || '',  // ë©”ëª¨ ì €ì¥\n      moistureContent: ing.moistureContent,  // ìˆ˜ë¶„ í•¨ëŸ‰ ì €ì¥\n      phase: ing.phase || 'main',  // ê³µì • ë‹¨ê³„ ì €ì¥\n    }));\n\n    // ì €ì¥í•  ê³µì • ë°ì´í„° (ë¡œë“œ í˜•ì‹ê³¼ ì¼ì¹˜í•˜ë„ë¡)\n    const stepsToSave = processes.map((p, idx) => ({\n      id: p.id || `step-${Date.now()}-${idx}`,\n      order: p.order || idx + 1,\n      instruction: p.description,\n      time: p.time,\n      temp: p.temp,\n    }));\n\n    // ì €ì¥í•  ì˜¤ë¸ ì„¤ì • (ë¡œë“œ í˜•ì‹ê³¼ ì¼ì¹˜í•˜ë„ë¡)\n    const ovenSettingsToSave = {\n      temperature: oven.firstBake.topTemp,\n      bottomTemperature: oven.firstBake.bottomTemp,  // í•˜ë¶€ ì˜¨ë„ ì¶”ê°€\n      mode: oven.type === 'deck' ? 'deck' : oven.type === 'airfryer' ? 'airfryer' : 'conventional',\n      preheating: true,\n      deck: oven.level || 'middle',\n      duration: oven.firstBake.time,\n      // 2ì°¨ êµ½ê¸° ì„¤ì • ì¶”ê°€\n      secondBake: oven.secondBake.time > 0 ? {\n        topTemp: oven.secondBake.topTemp,\n        bottomTemp: oven.secondBake.bottomTemp,\n        time: oven.secondBake.time,\n      } : null,\n    };\n\n    const recipeData = {\n      name: productName || t('advDashboard.defaultRecipeName'),\n      nameKo: productName,\n      productType: productType,  // ğŸ†• ì œí’ˆ íƒ€ì… (ì œë¹µ/ì œê³¼)\n      category: 'bread' as const,\n      difficulty: 'intermediate' as const,\n      servings: pans.reduce((s, p) => s + p.quantity, 0),\n      prepTime: 30,\n      totalTime: 60 + oven.firstBake.time + oven.secondBake.time,\n      ingredients: ingredientsToSave,\n      steps: stepsToSave,\n      ovenSettings: ovenSettingsToSave,\n      method: {\n        method: method.type,\n        prefermentRatio: method.flourRatio,\n        waterRatio: method.waterRatio,  // ìˆ˜ë¶„ ë¹„ìœ¨ ì €ì¥ ì¶”ê°€\n      },\n      panConfig: {\n        type: pans[0]?.type || defaultPanType,\n        name: pans[0]?.category || defaultCategory,  // ì¹´í…Œê³ ë¦¬ ì €ì¥\n        quantity: pans.reduce((s, p) => s + p.quantity, 0),\n        panWeight: pans[0]?.panWeight,  // íŒ¬ ë¬´ê²Œ ì €ì¥\n        mode: pans[0]?.mode || 'pan',  // ëª¨ë“œ ì €ì¥ (pan/count)\n        originalPan: originalPan,  // ì›ë˜ íŒ¬ ì„¤ì • ì €ì¥\n        pans: pans,  // ì „ì²´ íŒ¬ ë°°ì—´ ì €ì¥ (ê°œë³„ íŒ¬ ìˆ˜ëŸ‰ ìœ ì§€)\n      },\n      // ë¹„ìš©ì  ì„¤ì • ì €ì¥\n      specificVolume: {\n        original: originalProduct,\n        converted: convertedProduct,\n      },\n      // ë°°ìˆ˜ ì„¤ì • ì €ì¥\n      multiplierConfig: {\n        multiplier: multiplier,\n        isPanLinked: isPanLinked,\n      },\n      // ì¶œì²˜ ì •ë³´\n      source: source.name ? {\n        name: source.name,\n        type: source.type,\n        url: source.url || undefined,\n        author: source.author || undefined,\n      } : undefined,\n      tags: [convertedProduct, METHOD_LABELS[method.type]].filter(Boolean),\n      notes: memo,\n      // ìˆ˜ìœ¨ ì˜ˆì¸¡ ê³µì • ì„ íƒ ìƒíƒœ\n      yieldStageSelection: yieldStageSelection,\n      updatedAt: new Date(),\n    };\n\n    // ë®ì–´ì“°ê¸° ë˜ëŠ” í˜„ì¬ ë ˆì‹œí”¼ ì—…ë°ì´íŠ¸\n    const targetId = overwriteId || currentRecipe?.id;\n    if (targetId) {\n      updateRecipe(targetId, recipeData as any);\n      addToast({ type: 'success', message: t('advDashboard.recipeUpdated', { name: productName }) });\n    } else {\n      const newRecipe = {\n        ...recipeData,\n        id: `recipe-${Date.now()}`,\n        createdAt: new Date(),\n      };\n      addRecipe(newRecipe as any);\n      addToast({ type: 'success', message: t('advDashboard.recipeSaved', { name: productName }) });\n    }\n  }, [productName, source, pans, oven, usePreferment, mainDoughIngredients, convertedIngredients, processes, memo, convertedProduct, method, yieldStageSelection, currentRecipe, addRecipe, updateRecipe, addToast]);\n\n  // ë ˆì‹œí”¼ ì €ì¥ (ì¤‘ë³µ ì´ë¦„ í™•ì¸)\n  const handleSaveRecipe = useCallback(() => {\n    const trimmedName = (productName || t('advDashboard.defaultRecipeName')).trim();\n\n    // ë™ì¼í•œ ì´ë¦„ì˜ ê¸°ì¡´ ë ˆì‹œí”¼ ì°¾ê¸° (í˜„ì¬ í¸ì§‘ ì¤‘ì¸ ë ˆì‹œí”¼ ì œì™¸)\n    const existingRecipe = recipes.find(\n      r => r.name?.trim() === trimmedName && r.id !== currentRecipe?.id\n    );\n\n    if (existingRecipe) {\n      // ì¤‘ë³µ ì´ë¦„ ë°œê²¬ - ì‚¬ìš©ìì—ê²Œ ì„ íƒì§€ ì œê³µ\n      const choice = window.confirm(\n        t('advDashboard.duplicateRecipeConfirm', { name: trimmedName })\n      );\n\n      if (choice) {\n        // ë®ì–´ì“°ê¸° ì„ íƒ\n        saveRecipeData(existingRecipe.id);\n      }\n      // ì·¨ì†Œ ì„ íƒ ì‹œ ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•ŠìŒ\n    } else {\n      // ì¤‘ë³µ ì—†ìŒ - ë°”ë¡œ ì €ì¥\n      saveRecipeData();\n    }\n  }, [productName, recipes, currentRecipe?.id, saveRecipeData]);\n\n  // ë ˆì‹œí”¼ ë‚´ë³´ë‚´ê¸° (JSON)\n  const handleExportRecipe = useCallback(() => {\n    const exportData = {\n      name: productName,\n      source: source.name ? source : undefined,\n      exportedAt: new Date().toISOString(),\n      version: '1.0',\n      settings: {\n        multiplier: effectiveMultiplier,\n        originalTotal: totalWeight,\n        convertedTotal,\n        panSettings: {\n          original: originalPan,\n          converted: pans,\n        },\n        oven,\n        method,\n        specificVolume: {\n          original: originalProduct,\n          converted: convertedProduct,\n        },\n      },\n      originalIngredients: ingredients.map(ing => ({\n        name: ing.name,\n        category: ing.category,\n        amount: ing.amount,\n        ratio: ing.ratio,\n      })),\n      convertedIngredients: (usePreferment ? mainDoughIngredients : convertedIngredients).map(ing => ({\n        name: ing.name,\n        category: ing.category,\n        amount: ing.convertedAmount,\n      })),\n      prefermentIngredients: usePreferment ? prefermentIngredients.map(ing => ({\n        name: ing.name,\n        amount: ing.convertedAmount,\n      })) : [],\n      processes: processes.map(p => ({\n        description: p.description,\n        time: p.time,\n        temp: p.temp,\n      })),\n      memo,\n    };\n\n    const blob = new Blob([JSON.stringify(exportData, null, 2)], { type: 'application/json' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `${productName || 'recipe'}_${new Date().toISOString().slice(0,10)}.json`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n\n    addToast({ type: 'success', message: t('advDashboard.recipeExported') });\n  }, [productName, source, effectiveMultiplier, totalWeight, convertedTotal, originalPan, pans, oven, method, originalProduct, convertedProduct, ingredients, usePreferment, mainDoughIngredients, convertedIngredients, prefermentIngredients, processes, memo, addToast]);\n\n  // í…ìŠ¤íŠ¸ë¡œ ë³µì‚¬ (ì¼ë°˜ ì‚¬ìš©ììš©)\n  const handleCopyAsText = useCallback(async () => {\n    const categoryNames: Record<string, string> = {\n      flour: t('ingredientCategory.flour'),\n      liquid: t('ingredientCategory.liquid'),\n      yeast: t('ingredientCategory.yeast'),\n      fat: t('ingredientCategory.fat'),\n      sugar: t('ingredientCategory.sugar'),\n      dairy: t('ingredientCategory.dairy'),\n      egg: t('ingredientCategory.egg'),\n      salt: t('ingredientCategory.salt'),\n      other: t('ingredientCategory.other')\n    };\n\n    const ingredientList = (usePreferment ? mainDoughIngredients : convertedIngredients);\n\n    let text = `ğŸ ${productName}\\n`;\n    text += `${'â”€'.repeat(30)}\\n\\n`;\n\n    // ê¸°ë³¸ ì •ë³´\n    text += `ğŸ“Š ${t('advDashboard.basicInfo')}\\n`;\n    text += `â€¢ ${t('advDashboard.multiplier')}: Ã—${effectiveMultiplier}\\n`;\n    text += `â€¢ ${t('advDashboard.original')}: ${totalWeight}g â†’ ${t('advDashboard.converted')}: ${convertedTotal}g\\n`;\n    text += `â€¢ ${t('advDashboard.pan')}: ${pans.map(p => `${p.type} ${p.quantity}`).join(', ')}\\n`;\n    text += `â€¢ ${t('advDashboard.method')}: ${METHOD_LABELS[method.type]}\\n\\n`;\n\n    // ì‚¬ì „ë°˜ì£½ (ìˆëŠ” ê²½ìš°)\n    if (usePreferment && prefermentIngredients.length > 0) {\n      text += `ğŸ¥£ ${t('advDashboard.prefermentIngredients')} (${METHOD_LABELS[method.type]})\\n`;\n      prefermentIngredients.forEach(ing => {\n        text += `â€¢ ${translateIngredient(ing.name)}: ${ing.convertedAmount}g\\n`;\n      });\n      text += `\\n`;\n    }\n\n    // ë³¸ë°˜ì£½ ì¬ë£Œ\n    text += usePreferment ? `ğŸ ${t('advDashboard.mainDoughIngredients')}\\n` : `ğŸ ${t('advDashboard.ingredients')}\\n`;\n    const categories = [...new Set(ingredientList.map(i => i.category))];\n    categories.forEach(cat => {\n      const items = ingredientList.filter(i => i.category === cat);\n      if (items.length > 0) {\n        text += `[${categoryNames[cat] || cat}]\\n`;\n        items.forEach(ing => {\n          text += `â€¢ ${translateIngredient(ing.name)}: ${ing.convertedAmount}g\\n`;\n        });\n      }\n    });\n    text += `\\n`;\n\n    // ì˜¤ë¸ ì„¤ì •\n    text += `ğŸ”¥ ${t('advDashboard.ovenSettings')}\\n`;\n    const ovenType = t(`advDashboard.ovenTypes.${oven.type}`);\n    if (oven.type === 'deck') {\n      text += `â€¢ ${ovenType}: ${t('advDashboard.topHeat')} ${oven.firstBake.topTemp}Â°C / ${t('advDashboard.bottomHeat')} ${oven.firstBake.bottomTemp}Â°C, ${oven.firstBake.time}${t('units.minute')}\\n`;\n    } else {\n      text += `â€¢ ${ovenType}: ${oven.firstBake.topTemp}Â°C, ${oven.firstBake.time}${t('units.minute')}\\n`;\n    }\n    if (oven.secondBake.time > 0) {\n      text += `â€¢ ${t('advDashboard.secondBake')}: ${oven.secondBake.topTemp}Â°C, ${oven.secondBake.time}${t('units.minute')}\\n`;\n    }\n    text += `\\n`;\n\n    // ê³µì •\n    text += `ğŸ“ ${t('advDashboard.processSteps')}\\n`;\n    processes.forEach((p, i) => {\n      let step = `${i + 1}. ${translateProcessStep(p.description)}`;\n      if (p.time) step += ` (${p.time}${t('units.minute')})`;\n      if (p.temp) step += ` [${p.temp}Â°C]`;\n      text += `${step}\\n`;\n    });\n\n    // ë©”ëª¨ (ìˆëŠ” ê²½ìš°)\n    if (memo) {\n      text += `\\nğŸ“Œ ${t('advDashboard.memo')}\\n${memo}\\n`;\n    }\n\n    text += `\\n${'â”€'.repeat(30)}\\n`;\n    text += `${t('advDashboard.createdDate')}: ${new Date().toLocaleDateString()}\\n`;\n\n    try {\n      await navigator.clipboard.writeText(text);\n      addToast({ type: 'success', message: t('advDashboard.recipeCopied') });\n    } catch (err) {\n      // í´ë¦½ë³´ë“œ ì‹¤íŒ¨ ì‹œ ë‹¤ìš´ë¡œë“œ\n      const blob = new Blob([text], { type: 'text/plain;charset=utf-8' });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `${productName || 'recipe'}_${new Date().toISOString().slice(0,10)}.txt`;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      URL.revokeObjectURL(url);\n      addToast({ type: 'success', message: t('advDashboard.recipeSavedAsText') });\n    }\n  }, [productName, effectiveMultiplier, totalWeight, convertedTotal, pans, method, usePreferment, prefermentIngredients, mainDoughIngredients, convertedIngredients, oven, processes, memo, addToast, translateIngredient, translateProcessStep, t]);\n\n  const updatePan = useCallback((id: string, field: keyof PanEntry, value: any) => {\n    setPans(prev => prev.map(p => {\n      if (p.id !== id) return p;\n      const updated = { ...p, [field]: value };\n\n      // ëª¨ë“œ ë³€ê²½ ì‹œ panWeight ì¬ê³„ì‚°\n      if (field === 'mode') {\n        if (value === 'count') {\n          // ê°œìˆ˜ ëª¨ë“œ: unitCount * unitWeight\n          updated.panWeight = (updated.unitCount || 10) * (updated.unitWeight || 50);\n          updated.divisionCount = 1;\n          updated.divisionWeight = updated.panWeight;\n        } else {\n          // íŒ¬ ëª¨ë“œ: íŒ¬ ë³¼ë¥¨ / ë¹„ìš©ì \n          const panInfo = PAN_DATA[updated.category as keyof typeof PAN_DATA]?.find(pan => pan.name === updated.type);\n          if (panInfo) {\n            updated.panWeight = Math.round(panInfo.volume / (SPECIFIC_VOLUMES[convertedProduct] || 3.4));\n          }\n        }\n      }\n\n      // íŒ¬ íƒ€ì… ë³€ê²½ ì‹œ panWeight ìë™ ê³„ì‚° (ë³€í™˜ ëŒ€ìƒ ë¹„ìš©ì  ì‚¬ìš©)\n      if (field === 'type' && updated.mode === 'pan') {\n        const panInfo = PAN_DATA[updated.category as keyof typeof PAN_DATA]?.find(pan => pan.name === value);\n        if (panInfo) {\n          updated.panWeight = Math.round(panInfo.volume / (SPECIFIC_VOLUMES[convertedProduct] || 3.4));\n        }\n      }\n\n      // ì¹´í…Œê³ ë¦¬ ë³€ê²½ ì‹œ ì²« ë²ˆì§¸ íƒ€ì…ìœ¼ë¡œ ì„¤ì •\n      if (field === 'category' && updated.mode === 'pan') {\n        const types = PAN_DATA[value as keyof typeof PAN_DATA];\n        if (types?.length > 0) {\n          updated.type = types[0].name;\n          updated.panWeight = Math.round(types[0].volume / (SPECIFIC_VOLUMES[convertedProduct] || 3.4));\n        }\n      }\n\n      // ê°œìˆ˜ ëª¨ë“œ: unitCount ë˜ëŠ” unitWeight ë³€ê²½ ì‹œ panWeight ì¬ê³„ì‚°\n      if (updated.mode === 'count' && (field === 'unitCount' || field === 'unitWeight')) {\n        updated.panWeight = (updated.unitCount || 0) * (updated.unitWeight || 0);\n        updated.divisionWeight = updated.panWeight;\n      }\n\n      // íŒ¬ ëª¨ë“œ: divisionWeightëŠ” í•­ìƒ panWeight / divisionCountë¡œ ê³„ì‚°\n      if (updated.mode === 'pan' && updated.divisionCount > 0) {\n        updated.divisionWeight = Math.round(updated.panWeight / updated.divisionCount);\n      }\n\n      return updated;\n    }));\n  }, [convertedProduct]);\n\n  // ì¼ê´„ ì…ë ¥ ëª¨ë‹¬ ìƒíƒœ\n  const [isBulkInputOpen, setIsBulkInputOpen] = useState(false);\n  const [viewMode, setViewMode] = useState<'table' | 'phase'>('table'); // ë·° ëª¨ë“œ: í…Œì´ë¸” vs ë‹¨ê³„\n\n  const addIngredient = useCallback(() => {\n    const newOrder = Math.max(...ingredients.map(i => i.order), 0) + 1;\n    setIngredients(prev => [...prev, {\n      id: `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,  // âœ… ê³ ìœ  ID ë³´ì¥ (íƒ€ì„ìŠ¤íƒ¬í”„ + ëœë¤)\n      order: newOrder, category: 'other', subCategory: 'ê¸°íƒ€',\n      name: '', ratio: 0, amount: 0, note: '',\n    }]);\n  }, [ingredients]);\n\n  // ì¼ê´„ ì…ë ¥ìœ¼ë¡œ ì¬ë£Œ ì¶”ê°€\n  const handleBulkImport = useCallback((importedIngredients: Array<{ name: string; amount: number; category: string }>) => {\n    const startOrder = Math.max(...ingredients.map(i => i.order), 0) + 1;\n    const newIngredients = importedIngredients.map((ing, idx) => ({\n      id: `bulk-${Date.now()}-${idx}`,\n      order: startOrder + idx,\n      category: ing.category as any,\n      subCategory: '',\n      name: ing.name,\n      ratio: 0,\n      amount: ing.amount,\n      note: ''\n    }));\n    setIngredients(prev => [...prev, ...newIngredients]);\n    addToast({ type: 'success', message: t('advDashboard.ingredientsAdded', { count: newIngredients.length }) });\n  }, [ingredients, addToast]);\n\n  const removeIngredient = useCallback((id: string) => {\n    setIngredients(prev => prev.filter(i => i.id !== id));\n  }, []);\n\n  const updateIngredient = useCallback((id: string, field: keyof IngredientEntry, value: any) => {\n    setIngredients(prev => prev.map(ing => {\n      if (ing.id !== id) return ing;\n      const updated = { ...ing, [field]: value };\n      if (field === 'category') updated.subCategory = CATEGORY_LABELS[value] || 'ê¸°íƒ€';\n      // ë¬´ê²Œ ë³€ê²½ ì‹œ ë¹„ìœ¨ ìë™ ê³„ì‚°\n      if (field === 'amount') {\n        const flour = prev.filter(i => i.category === 'flour').reduce((s, i) => s + (i.id === id ? value : i.amount), 0);\n        if (flour > 0 && ing.category !== 'flour') {\n          updated.ratio = Math.round((value / flour) * 1000) / 10;\n        }\n      }\n      return updated;\n    }));\n  }, []);\n\n  const addProcess = useCallback(() => {\n    const newOrder = Math.max(...processes.map(p => p.order), 0) + 1;\n    setProcesses(prev => [...prev, { id: Date.now().toString(), order: newOrder, description: '' }]);\n  }, [processes]);\n\n  const removeProcess = useCallback((id: string) => {\n    setProcesses(prev => prev.filter(p => p.id !== id));\n  }, []);\n\n  const updateProcess = useCallback((id: string, field: keyof ProcessStep, value: any) => {\n    setProcesses(prev => prev.map(p => p.id === id ? { ...p, [field]: value } : p));\n  }, []);\n\n  // ê³µì • ìˆœì„œ ì´ë™\n  const moveProcess = useCallback((id: string, direction: 'up' | 'down') => {\n    setProcesses(prev => {\n      const index = prev.findIndex(p => p.id === id);\n      if (index === -1) return prev;\n      if (direction === 'up' && index === 0) return prev;\n      if (direction === 'down' && index === prev.length - 1) return prev;\n\n      const newArr = [...prev];\n      const swapIndex = direction === 'up' ? index - 1 : index + 1;\n      [newArr[index], newArr[swapIndex]] = [newArr[swapIndex], newArr[index]];\n\n      // order ê°’ ì¬ì •ë ¬\n      return newArr.map((p, i) => ({ ...p, order: i + 1 }));\n    });\n  }, []);\n\n  // ============================================\n  // ë Œë”ë§\n  // ============================================\n\n  return (\n    <div className=\"h-screen flex flex-col bg-gray-100 text-sm\">\n      {/* ===== ìƒë‹¨ í—¤ë” ===== */}\n      <div className=\"bg-white border-b shadow-sm px-4 py-2 flex items-center justify-between gap-4 flex-shrink-0\">\n        {/* ì¢Œì¸¡: ì œí’ˆ ì •ë³´ + ì¶œì²˜ */}\n        <div className=\"flex items-center gap-3\">\n          <Cookie className=\"w-5 h-5 text-amber-600\" />\n          <input\n            type=\"text\"\n            value={productName}\n            onChange={(e) => setProductName(e.target.value)}\n            className=\"text-lg font-bold w-36 border-b border-transparent hover:border-gray-300 focus:border-amber-500 focus:outline-none\"\n            placeholder={t('advDashboard.productName')}\n          />\n          {/* ì œí’ˆ íƒ€ì… ì„ íƒ */}\n          <div className=\"flex items-center gap-1 border-l pl-3\">\n            <button\n              onClick={() => setProductType('bread')}\n              className={`px-3 py-1 text-xs rounded-l ${\n                productType === 'bread'\n                  ? 'bg-amber-500 text-white font-medium'\n                  : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\n              }`}\n              title={t('advDashboard.productTypeBread')}\n            >\n              {t('advDashboard.productTypeBread')}\n            </button>\n            <button\n              onClick={() => setProductType('pastry')}\n              className={`px-3 py-1 text-xs rounded-r ${\n                productType === 'pastry'\n                  ? 'bg-amber-500 text-white font-medium'\n                  : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\n              }`}\n              title={t('advDashboard.productTypePastry')}\n            >\n              {t('advDashboard.productTypePastry')}\n            </button>\n          </div>\n          <div className=\"flex items-center gap-1 text-xs border-l pl-3\">\n            <select\n              value={source.type}\n              onChange={(e) => setSource({ ...source, type: e.target.value as SourceType })}\n              className=\"bg-gray-50 border border-gray-200 rounded px-1.5 py-1 text-xs focus:outline-none focus:border-amber-400\"\n              title={t('advDashboard.sourceType')}\n            >\n              <option value=\"youtube\">ğŸ“º {t('advDashboard.sourceTypes.youtube')}</option>\n              <option value=\"blog\">ğŸŒ {t('advDashboard.sourceTypes.blog')}</option>\n              <option value=\"book\">ğŸ“– {t('advDashboard.sourceTypes.book')}</option>\n              <option value=\"website\">ğŸ”— {t('advDashboard.sourceTypes.website')}</option>\n              <option value=\"personal\">ğŸ‘¤ {t('advDashboard.sourceTypes.personal')}</option>\n              <option value=\"school\">ğŸ“ {t('advDashboard.sourceTypes.school')}</option>\n              <option value=\"other\">ğŸ“Œ {t('advDashboard.sourceTypes.other')}</option>\n            </select>\n            <input\n              type=\"text\"\n              value={source.name}\n              onChange={(e) => setSource({ ...source, name: e.target.value })}\n              className=\"w-24 bg-gray-50 border border-gray-200 rounded px-2 py-1 text-xs focus:outline-none focus:border-amber-400\"\n              placeholder={t('advDashboard.sourceName')}\n              title={t('advDashboard.sourceNamePlaceholder')}\n            />\n          </div>\n        </div>\n\n        {/* ì¤‘ì•™: ë°°ìˆ˜ ì¡°ì ˆ */}\n        <div className=\"flex items-center gap-3\">\n          <button\n            onClick={() => setIsPanLinked(!isPanLinked)}\n            className={`p-1.5 rounded flex items-center gap-1 ${isPanLinked ? 'bg-green-100 text-green-600' : 'bg-gray-100 text-gray-400'}`}\n            title={isPanLinked ? t('advDashboard.multiplierLinked') : t('advDashboard.multiplierUnlinked')}\n          >\n            {isPanLinked ? <Link className=\"w-4 h-4\" /> : <Unlink className=\"w-4 h-4\" />}\n            <span className=\"text-xs\">{isPanLinked ? t('advDashboard.auto') : t('advDashboard.manual')}</span>\n          </button>\n          <span className=\"text-xs text-gray-500\">{t('advDashboard.multiplier')}:</span>\n          {isPanLinked ? (\n            /* ì—°ë™ ëª¨ë“œ: ìë™ ê³„ì‚°ëœ ë°°ìˆ˜ í‘œì‹œ (ì½ê¸° ì „ìš©) */\n            <div className=\"flex items-center border border-green-300 rounded overflow-hidden bg-green-50\">\n              <div className=\"px-4 py-1 font-bold text-sm text-green-700 w-20 text-center\">\n                Ã—{effectiveMultiplier}\n              </div>\n            </div>\n          ) : (\n            /* ìˆ˜ë™ ëª¨ë“œ: ë°°ìˆ˜ ì…ë ¥ ê°€ëŠ¥ (x2, /2, 1/2 ë“± ë‹¤ì–‘í•œ í˜•ì‹) */\n            <div className=\"flex items-center border rounded overflow-hidden bg-white\">\n              <button onClick={() => handleQuickMultiplier(Math.max(0.1, multiplier - 0.5))} className=\"px-2 py-1 hover:bg-gray-100 border-r\">\n                <Minus className=\"w-4 h-4\" />\n              </button>\n              <input\n                type=\"text\"\n                value={multiplierInput}\n                onChange={(e) => handleMultiplierInputChange(e.target.value)}\n                onBlur={handleMultiplierInputConfirm}\n                onKeyDown={(e) => e.key === 'Enter' && handleMultiplierInputConfirm()}\n                className=\"w-20 text-center py-1 font-bold text-sm\"\n                placeholder={t('advDashboard.multiplierPlaceholder')}\n                title={t('advDashboard.multiplierHint')}\n              />\n              <button onClick={() => handleQuickMultiplier(Math.min(20, multiplier + 0.5))} className=\"px-2 py-1 hover:bg-gray-100 border-l\">\n                <Plus className=\"w-4 h-4\" />\n              </button>\n            </div>\n          )}\n          {!isPanLinked && (\n            <div className=\"flex gap-1 flex-wrap\">\n              {[0.25, 0.5, 1, 1.5, 2, 2.5, 3, 4, 5].map(m => (\n                <button\n                  key={m}\n                  onClick={() => handleQuickMultiplier(m)}\n                  className={`px-1.5 py-0.5 text-xs rounded transition-colors ${\n                    multiplier === m\n                      ? 'bg-amber-500 text-white'\n                      : 'bg-gray-100 hover:bg-gray-200 text-gray-700'\n                  }`}\n                >\n                  {m < 1 ? `1/${Math.round(1/m)}` : `Ã—${m}`}\n                </button>\n              ))}\n            </div>\n          )}\n        </div>\n\n        {/* ìš°ì¸¡: ìš”ì•½ + ì•¡ì…˜ */}\n        <div className=\"flex items-center gap-4\">\n          <div className=\"flex items-center gap-3 text-xs text-gray-500 bg-gray-50 px-3 py-1.5 rounded\">\n            <span>{t('advDashboard.original')}:<b className=\"text-gray-700 ml-1\">{totalWeight}g</b></span>\n            <span className=\"text-gray-300\">â†’</span>\n            <span>{t('advDashboard.converted')}:<b className=\"text-blue-600 ml-1\">{convertedTotal}g</b></span>\n            <span className=\"text-gray-300\">|</span>\n            <span>{t('advDashboard.hydration')}:<b className=\"ml-1\">{hydration}%</b></span>\n            <span className=\"text-gray-300\">|</span>\n            <span>{t('advDashboard.pan')}:<b className=\"ml-1\">{panTotalWeight}g</b></span>\n            <span className=\"text-gray-300\">|</span>\n            <span>{t('advDashboard.lossRate')}:<b className={`ml-1 ${lossRate > 100 ? 'text-red-500' : lossRate < 95 ? 'text-orange-500' : 'text-green-600'}`}>{lossRate}%</b></span>\n          </div>\n          <div className=\"flex gap-1.5\">\n            <button\n              onClick={resetAllConversion}\n              className=\"flex items-center gap-1 px-3 py-1.5 text-xs bg-gray-100 text-gray-600 rounded hover:bg-gray-200 border border-gray-300\"\n              title={t('advDashboard.resetConversion')}\n            >\n              <RotateCcw className=\"w-4 h-4\" />{t('advDashboard.reset')}\n            </button>\n            <button\n              onClick={handleSaveRecipe}\n              className=\"flex items-center gap-1 px-3 py-1.5 text-xs bg-amber-500 text-white rounded hover:bg-amber-600\"\n              title={t('advDashboard.saveRecipe')}\n            >\n              <Save className=\"w-4 h-4\" />{t('advDashboard.save')}\n            </button>\n            <button\n              onClick={handleCopyAsText}\n              className=\"flex items-center gap-1 px-3 py-1.5 text-xs bg-blue-500 text-white rounded hover:bg-blue-600\"\n              title={t('advDashboard.copyAsText')}\n            >\n              <Copy className=\"w-4 h-4\" />{t('advDashboard.copy')}\n            </button>\n            <button\n              onClick={handleExportRecipe}\n              className=\"flex items-center gap-1 px-3 py-1.5 text-xs bg-gray-200 rounded hover:bg-gray-300\"\n              title={t('advDashboard.exportJson')}\n            >\n              <FileText className=\"w-4 h-4\" />{t('advDashboard.json')}\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* ===== ë©”ì¸ ì½˜í…ì¸  ===== */}\n      <div className=\"flex-1 flex overflow-hidden\">\n        {/* ===== ì¢Œì¸¡ ì‚¬ì´ë“œë°” (ë¦¬ì‚¬ì´ì¦ˆ ê°€ëŠ¥) ===== */}\n        <div\n          className=\"bg-white border-r flex-shrink-0 overflow-y-auto\"\n          style={{ width: layoutSettings.sidebarWidth }}\n        >\n\n          {/* íŒ¬/í‹€ ì„¤ì • */}\n          <CollapsibleSection\n            title={t('advDashboard.panSettings')}\n            icon={<Layers className=\"w-4 h-4\" />}\n            badge={`${originalPan.quantity}${t('advDashboard.pan')}â†’${pans.reduce((s, p) => s + p.quantity, 0)}${t('advDashboard.pan')}`}\n            badgeColor=\"bg-blue-100 text-blue-700\"\n            onReset={resetPanSettings}\n          >\n            <div className=\"space-y-3\">\n              {/* ì›ë˜ íŒ¬ (ë ˆì‹œí”¼ ì›ë³¸) */}\n              <div className=\"bg-gray-100 rounded p-2\">\n                <div className=\"flex items-center justify-between mb-1.5\">\n                  <span className=\"text-xs font-medium text-gray-600\">ğŸ“‹ {t('advDashboard.originalPan')}</span>\n                  {/* íŒ¬/ê°œìˆ˜ ëª¨ë“œ í† ê¸€ */}\n                  <div className=\"flex text-xs\">\n                    <button\n                      onClick={() => updateOriginalPan('mode', 'pan')}\n                      className={`px-2 py-0.5 rounded-l border ${originalPan.mode === 'pan' ? 'bg-gray-500 text-white border-gray-500' : 'bg-white text-gray-600 border-gray-300'}`}\n                    >ğŸ {t('advDashboard.panMode')}</button>\n                    <button\n                      onClick={() => updateOriginalPan('mode', 'count')}\n                      className={`px-2 py-0.5 rounded-r border-l-0 border ${originalPan.mode === 'count' ? 'bg-green-500 text-white border-green-500' : 'bg-white text-gray-600 border-gray-300'}`}\n                    >ğŸ”¢ {t('advDashboard.countMode')}</button>\n                  </div>\n                </div>\n\n                {/* íŒ¬ ëª¨ë“œ */}\n                {originalPan.mode === 'pan' && (\n                  <>\n                    <div className=\"grid grid-cols-2 gap-1.5 mb-1.5\">\n                      <select value={originalPan.category} onChange={(e) => updateOriginalPan('category', e.target.value)}\n                        className=\"text-xs border rounded px-2 py-1 bg-white\">\n                        {Object.keys(PAN_DATA).map(cat => <option key={cat} value={cat}>{getLocalizedPanCategory(cat)}</option>)}\n                      </select>\n                      <select value={originalPan.type} onChange={(e) => updateOriginalPan('type', e.target.value)}\n                        className=\"text-xs border rounded px-2 py-1 bg-white\">\n                        {PAN_DATA[originalPan.category as keyof typeof PAN_DATA]?.map(p =>\n                          <option key={p.name} value={p.name}>{getLocalizedPanName(p)}</option>\n                        )}\n                      </select>\n                    </div>\n                    <div className=\"grid grid-cols-4 gap-1.5 text-xs\">\n                      <div>\n                        <label className=\"text-xs text-gray-500 block\">{t('advDashboard.quantity')}</label>\n                        <input type=\"number\" value={originalPan.quantity}\n                          onChange={(e) => updateOriginalPan('quantity', parseInt(e.target.value) || 1)}\n                          className=\"w-full border rounded px-1.5 py-1 text-center bg-white\" />\n                      </div>\n                      <div>\n                        <label className=\"text-xs text-gray-500 block\">{t('advDashboard.division')}</label>\n                        <input type=\"number\" value={originalPan.divisionCount}\n                          onChange={(e) => updateOriginalPan('divisionCount', parseInt(e.target.value) || 1)}\n                          className=\"w-full border rounded px-1.5 py-1 text-center bg-white\" />\n                      </div>\n                      <div>\n                        <label className=\"text-xs text-gray-500 block\">{t('advDashboard.panWeight')}</label>\n                        <input type=\"number\" value={originalPan.panWeight}\n                          onChange={(e) => updateOriginalPan('panWeight', parseInt(e.target.value) || 0)}\n                          className=\"w-full border rounded px-1.5 py-1 text-center bg-white\" />\n                      </div>\n                      <div>\n                        <label className=\"text-xs text-gray-500 block\">{t('advDashboard.divisionWeight')}</label>\n                        <div className=\"text-center py-1 font-mono bg-white rounded border\">{originalPan.divisionWeight}</div>\n                      </div>\n                    </div>\n                  </>\n                )}\n\n                {/* ê°œìˆ˜ ëª¨ë“œ */}\n                {originalPan.mode === 'count' && (\n                  <div className=\"grid grid-cols-3 gap-1.5 text-xs\">\n                    <div>\n                      <label className=\"text-xs text-gray-500 block\">{t('advDashboard.count')}</label>\n                      <input type=\"number\" value={originalPan.unitCount || 10}\n                        onChange={(e) => updateOriginalPan('unitCount', parseInt(e.target.value) || 0)}\n                        className=\"w-full border rounded px-1.5 py-1 text-center bg-white\" />\n                    </div>\n                    <div>\n                      <label className=\"text-xs text-gray-500 block\">{t('advDashboard.weightPerPiece')}</label>\n                      <input type=\"number\" value={originalPan.unitWeight || 50}\n                        onChange={(e) => updateOriginalPan('unitWeight', parseInt(e.target.value) || 0)}\n                        className=\"w-full border rounded px-1.5 py-1 text-center bg-white\" />\n                    </div>\n                    <div>\n                      <label className=\"text-xs text-gray-500 block\">{t('advDashboard.total')}</label>\n                      <div className=\"text-center py-1 font-mono bg-white rounded border font-semibold\">\n                        {(originalPan.unitCount || 10) * (originalPan.unitWeight || 50)}g\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                <div className=\"text-xs text-gray-500 mt-1 text-right\">\n                  {t('advDashboard.total')}: <b>{originalPan.mode === 'count'\n                    ? (originalPan.unitCount || 10) * (originalPan.unitWeight || 50)\n                    : originalPan.panWeight * originalPan.quantity}g</b>\n                </div>\n              </div>\n\n              {/* í™”ì‚´í‘œ */}\n              <div className=\"flex justify-center text-gray-400\">\n                <ChevronDown className=\"w-5 h-5\" />\n              </div>\n\n              {/* ë³€í™˜ íŒ¬ (ëª©í‘œ) */}\n              <div className=\"space-y-2\">\n                <div className=\"text-xs font-medium text-blue-600\">ğŸ¯ {t('advDashboard.convertedPan')}</div>\n                {pans.map((pan, idx) => (\n                  <div key={pan.id} className=\"bg-blue-50 rounded p-2 border border-blue-200\">\n                    <div className=\"flex items-center justify-between mb-1.5\">\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"text-xs font-medium text-blue-700\">{t('advDashboard.pan')} {idx + 1}</span>\n                        {/* íŒ¬/ê°œìˆ˜ ëª¨ë“œ í† ê¸€ */}\n                        <div className=\"flex text-xs\">\n                          <button\n                            onClick={() => updatePan(pan.id, 'mode', 'pan')}\n                            className={`px-2 py-0.5 rounded-l border ${pan.mode === 'pan' ? 'bg-blue-500 text-white border-blue-500' : 'bg-white text-gray-600 border-gray-300'}`}\n                          >ğŸ {t('advDashboard.panMode')}</button>\n                          <button\n                            onClick={() => updatePan(pan.id, 'mode', 'count')}\n                            className={`px-2 py-0.5 rounded-r border-l-0 border ${pan.mode === 'count' ? 'bg-green-500 text-white border-green-500' : 'bg-white text-gray-600 border-gray-300'}`}\n                          >ğŸ”¢ {t('advDashboard.countMode')}</button>\n                        </div>\n                      </div>\n                      {pans.length > 1 && (\n                        <button onClick={() => removePan(pan.id)} className=\"text-red-400 hover:text-red-600\">\n                          <X className=\"w-4 h-4\" />\n                        </button>\n                      )}\n                    </div>\n\n                    {/* íŒ¬ ëª¨ë“œ */}\n                    {pan.mode === 'pan' && (\n                      <>\n                        <div className=\"grid grid-cols-2 gap-1.5 mb-1.5\">\n                          <select value={pan.category} onChange={(e) => updatePan(pan.id, 'category', e.target.value)}\n                            className=\"text-xs border rounded px-2 py-1 bg-white\">\n                            {Object.keys(PAN_DATA).map(cat => <option key={cat} value={cat}>{getLocalizedPanCategory(cat)}</option>)}\n                          </select>\n                          <select value={pan.type} onChange={(e) => updatePan(pan.id, 'type', e.target.value)}\n                            className=\"text-xs border rounded px-2 py-1 bg-white\">\n                            {PAN_DATA[pan.category as keyof typeof PAN_DATA]?.map(p =>\n                              <option key={p.name} value={p.name}>{getLocalizedPanName(p)}</option>\n                            )}\n                          </select>\n                        </div>\n                        <div className=\"grid grid-cols-4 gap-1.5 text-xs\">\n                          <div>\n                            <label className=\"text-xs text-gray-500 block\">{t('advDashboard.quantity')}</label>\n                            <input type=\"number\" value={pan.quantity}\n                              onChange={(e) => updatePan(pan.id, 'quantity', parseFloat(e.target.value) || 0)}\n                              className=\"w-full border rounded px-1.5 py-1 text-center bg-white\" step=\"0.5\" />\n                          </div>\n                          <div>\n                            <label className=\"text-xs text-gray-500 block\">{t('advDashboard.division')}</label>\n                            <input type=\"number\" value={pan.divisionCount}\n                              onChange={(e) => updatePan(pan.id, 'divisionCount', parseInt(e.target.value) || 1)}\n                              className=\"w-full border rounded px-1.5 py-1 text-center bg-white\" />\n                          </div>\n                          <div>\n                            <label className=\"text-xs text-gray-500 block\">{t('advDashboard.panWeight')}</label>\n                            <input type=\"number\" value={pan.panWeight}\n                              onChange={(e) => updatePan(pan.id, 'panWeight', parseInt(e.target.value) || 0)}\n                              className=\"w-full border rounded px-1.5 py-1 text-center bg-white\" />\n                          </div>\n                          <div>\n                            <label className=\"text-xs text-gray-500 block\">{t('advDashboard.divisionWeight')}</label>\n                            <div className=\"text-center py-1 font-mono bg-white rounded border\">{pan.divisionWeight}</div>\n                          </div>\n                        </div>\n                      </>\n                    )}\n\n                    {/* ê°œìˆ˜ ëª¨ë“œ (ëª¨ë‹ë¹µ ë“±) */}\n                    {pan.mode === 'count' && (\n                      <div className=\"grid grid-cols-3 gap-1.5 text-xs\">\n                        <div>\n                          <label className=\"text-xs text-gray-500 block\">{t('advDashboard.count')}</label>\n                          <input type=\"number\" value={pan.unitCount || 10}\n                            onChange={(e) => updatePan(pan.id, 'unitCount', parseInt(e.target.value) || 0)}\n                            className=\"w-full border rounded px-1.5 py-1 text-center bg-white\" />\n                        </div>\n                        <div>\n                          <label className=\"text-xs text-gray-500 block\">{t('advDashboard.weightPerPiece')}</label>\n                          <input type=\"number\" value={pan.unitWeight || 50}\n                            onChange={(e) => updatePan(pan.id, 'unitWeight', parseInt(e.target.value) || 0)}\n                            className=\"w-full border rounded px-1.5 py-1 text-center bg-white\" />\n                        </div>\n                        <div>\n                          <label className=\"text-xs text-gray-500 block\">{t('advDashboard.total')}</label>\n                          <div className=\"text-center py-1 font-mono bg-white rounded border font-semibold\">\n                            {(pan.unitCount || 10) * (pan.unitWeight || 50)}g\n                          </div>\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                ))}\n                <button onClick={addPan} className=\"w-full text-xs text-blue-600 hover:text-blue-700 py-1.5 border border-dashed border-blue-300 rounded\">\n                  {t('advDashboard.addPan')}\n                </button>\n                <div className=\"text-xs text-blue-700 text-right\">\n                  {t('advDashboard.total')}: <b>{panTotalWeight}g</b>\n                </div>\n              </div>\n            </div>\n          </CollapsibleSection>\n\n          {/* ë¹„ìš©ì /ë¹„ì¤‘ ì„¤ì • - ì œë¹µ: ë¹„ìš©ì , ì œê³¼: ë¹„ì¤‘ */}\n          <CollapsibleSection\n            title={productType === 'bread' ? t('advDashboard.specificVolume') : t('advDashboard.specificGravity')}\n            icon={<Scale className=\"w-4 h-4\" />}\n            defaultOpen={false}\n            onReset={resetSpecificVolume}\n          >\n            <div className=\"grid grid-cols-2 gap-3\">\n              <div>\n                <label className=\"text-xs text-gray-500 block mb-1\">{t('advDashboard.originalProduct')}</label>\n                <select value={originalProduct} onChange={(e) => setOriginalProduct(e.target.value)}\n                  className=\"w-full text-xs border rounded px-2 py-1\">\n                  {productType === 'bread'\n                    ? Object.keys(BREAD_SPECIFIC_VOLUMES).map(p => <option key={p} value={p}>{getLocalizedProductName(p)}</option>)\n                    : Object.keys(CAKE_BATTER_SPECIFIC_GRAVITY).map(p => <option key={p} value={p}>{getLocalizedProductName(p)}</option>)\n                  }\n                </select>\n                <div className=\"text-xs text-gray-400 mt-1\">\n                  {productType === 'bread'\n                    ? `ë¹„ìš©ì : ${BREAD_SPECIFIC_VOLUMES[originalProduct] || SPECIFIC_VOLUMES[originalProduct]} cmÂ³/g`\n                    : `ë¹„ì¤‘: ${CAKE_BATTER_SPECIFIC_GRAVITY[originalProduct]}`\n                  }\n                </div>\n              </div>\n              <div>\n                <label className=\"text-xs text-gray-500 block mb-1\">{t('advDashboard.convertedProduct')}</label>\n                <select value={convertedProduct} onChange={(e) => setConvertedProduct(e.target.value)}\n                  className=\"w-full text-xs border rounded px-2 py-1\">\n                  {productType === 'bread'\n                    ? Object.keys(BREAD_SPECIFIC_VOLUMES).map(p => <option key={p} value={p}>{getLocalizedProductName(p)}</option>)\n                    : Object.keys(CAKE_BATTER_SPECIFIC_GRAVITY).map(p => <option key={p} value={p}>{getLocalizedProductName(p)}</option>)\n                  }\n                </select>\n                <div className=\"text-xs text-gray-400 mt-1\">\n                  {productType === 'bread'\n                    ? `ë¹„ìš©ì : ${BREAD_SPECIFIC_VOLUMES[convertedProduct] || SPECIFIC_VOLUMES[convertedProduct]} cmÂ³/g`\n                    : `ë¹„ì¤‘: ${CAKE_BATTER_SPECIFIC_GRAVITY[convertedProduct]}`\n                  }\n                </div>\n              </div>\n            </div>\n          </CollapsibleSection>\n\n          {/* ìˆ˜ìœ¨ ì†ì‹¤ ì˜ˆì¸¡ - ì œë¹µ ì „ìš© */}\n          {productType === 'bread' && (\n            <CollapsibleSection\n              title={t('advDashboard.yieldPrediction')}\n              icon={<TrendingDown className=\"w-4 h-4\" />}\n              defaultOpen={false}\n              badge={`${Math.round((1 - 0.19) * totalWeight)}g ${t('advDashboard.expectedYield')}`}\n            >\n              <YieldLossCalculator\n                inputWeight={totalWeight}\n                category={originalProduct === 'ì‰¬í°ì¼€ì´í¬' || originalProduct === 'ì œëˆ„ì™€ì¦ˆ' || originalProduct === 'íŒŒìš´ë“œì¼€ì´í¬' ? 'cake'\n                  : originalProduct === 'í¬ë£¨ì•„ìƒ' || originalProduct === 'ë°ë‹ˆì‰¬' ? 'pastry'\n                  : originalProduct === 'ì¿ í‚¤' ? 'cookie'\n                  : 'bread'}\n                productType={\n                  originalProduct === 'í’€ë¨¼ì‹ë¹µ' ? 'pullman'\n                  : originalProduct === 'ì‚°í˜•ì‹ë¹µ' ? 'mountain'\n                  : originalProduct === 'ë¸Œë¦¬ì˜¤ìŠˆ' ? 'brioche'\n                  : originalProduct === 'ì œëˆ„ì™€ì¦ˆ' ? 'genoise'\n                  : originalProduct === 'ì‰¬í°ì¼€ì´í¬' ? 'chiffon'\n                  : originalProduct === 'íŒŒìš´ë“œì¼€ì´í¬' ? 'pound'\n                  : originalProduct === 'í¬ë£¨ì•„ìƒ' ? 'croissant'\n                  : undefined\n                }\n                stageSelection={yieldStageSelection}\n                onStageSelectionChange={setYieldStageSelection}\n                compact={false}\n                className=\"border-0 shadow-none\"\n              />\n            </CollapsibleSection>\n          )}\n\n          {/* ì˜¤ë¸ ì„¤ì • */}\n          <CollapsibleSection\n            title={t('advDashboard.oven')}\n            icon={<Flame className=\"w-4 h-4\" />}\n            badge={(() => {\n              const typeLabel = t(`advDashboard.ovenTypes.${oven.type}`);\n              const levelInfo = oven.type === 'convection' && oven.level ? ` ${oven.level}${t('advDashboard.level')}` : '';\n              const tempInfo = oven.type === 'deck'\n                ? `${oven.firstBake.topTemp}/${oven.firstBake.bottomTemp}Â°C`\n                : `${oven.firstBake.topTemp}Â°C`;\n              const firstBake = `${tempInfo} ${oven.firstBake.time}${t('units.minute')}`;\n              // 2ì°¨ êµ½ê¸°ê°€ ìˆìœ¼ë©´ ì¶”ê°€ í‘œì‹œ\n              const secondBake = oven.secondBake.time > 0\n                ? oven.type === 'deck'\n                  ? ` â†’ ${oven.secondBake.topTemp}/${oven.secondBake.bottomTemp}Â°C ${oven.secondBake.time}${t('units.minute')}`\n                  : ` â†’ ${oven.secondBake.topTemp}Â°C ${oven.secondBake.time}${t('units.minute')}`\n                : '';\n              return `${typeLabel}${levelInfo} ${firstBake}${secondBake}`;\n            })()}\n            badgeColor=\"bg-orange-100 text-orange-700\"\n            onReset={resetOvenSettings}\n          >\n            <div className=\"space-y-2\">\n              <div className=\"flex gap-1.5\">\n                {(['convection', 'deck', 'airfryer'] as const).map(type => (\n                  <button key={type} onClick={() => setOven({ ...oven, type })}\n                    className={`flex-1 px-2 py-1 text-xs rounded ${oven.type === type ? 'bg-amber-500 text-white' : 'bg-gray-100'}`}>\n                    {t(`advDashboard.ovenTypes.${type}`)}\n                  </button>\n                ))}\n              </div>\n              {/* ì»¨ë²¡ì…˜ ì˜¤ë¸ì¼ ë•Œë§Œ ë‹¨ ì„ íƒ í‘œì‹œ */}\n              {oven.type === 'convection' && (\n                <div className=\"flex items-center gap-2 text-xs\">\n                  <span className=\"text-gray-500\">{t('advDashboard.levelSelect')}:</span>\n                  <div className=\"flex gap-1\">\n                    {[1, 2, 3, 4, 5].map(level => {\n                      const levels = oven.level ? oven.level.split(',').map(s => s.trim()) : [];\n                      const isSelected = levels.includes(String(level));\n                      return (\n                        <button\n                          key={level}\n                          onClick={() => {\n                            let newLevels: string[];\n                            if (isSelected) {\n                              newLevels = levels.filter(l => l !== String(level));\n                            } else {\n                              newLevels = [...levels, String(level)].sort((a, b) => Number(a) - Number(b));\n                            }\n                            setOven({ ...oven, level: newLevels.join(', ') });\n                          }}\n                          className={`w-6 h-6 rounded text-xs font-medium ${isSelected ? 'bg-amber-500 text-white' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'}`}\n                        >\n                          {level}\n                        </button>\n                      );\n                    })}\n                  </div>\n                  {oven.level && <span className=\"text-amber-600 font-medium\">{oven.level}{t('advDashboard.level')}</span>}\n                </div>\n              )}\n              <div className=\"bg-orange-50 rounded p-2\">\n                <div className=\"text-xs font-medium text-orange-700 mb-1.5\">{t('advDashboard.firstBake')}</div>\n                {oven.type === 'deck' ? (\n                  /* ë°í¬ ì˜¤ë¸: ìœ—ë¶ˆ/ì•„ë«ë¶ˆ ë¶„ë¦¬ */\n                  <div className=\"grid grid-cols-3 gap-1.5\">\n                    <div><label className=\"text-xs text-gray-500\">{t('advDashboard.topHeat')}</label>\n                      <input type=\"number\" value={oven.firstBake.topTemp}\n                        onChange={(e) => setOven({ ...oven, firstBake: { ...oven.firstBake, topTemp: parseInt(e.target.value) || 0 } })}\n                        className=\"w-full text-xs border rounded px-1.5 py-1 text-center\" /></div>\n                    <div><label className=\"text-xs text-gray-500\">{t('advDashboard.bottomHeat')}</label>\n                      <input type=\"number\" value={oven.firstBake.bottomTemp}\n                        onChange={(e) => setOven({ ...oven, firstBake: { ...oven.firstBake, bottomTemp: parseInt(e.target.value) || 0 } })}\n                        className=\"w-full text-xs border rounded px-1.5 py-1 text-center\" /></div>\n                    <div><label className=\"text-xs text-gray-500\">{t('advDashboard.timeMin')}</label>\n                      <input type=\"number\" value={oven.firstBake.time}\n                        onChange={(e) => setOven({ ...oven, firstBake: { ...oven.firstBake, time: parseInt(e.target.value) || 0 } })}\n                        className=\"w-full text-xs border rounded px-1.5 py-1 text-center\" /></div>\n                  </div>\n                ) : (\n                  /* ì»¨ë²¡ì…˜/ì—ì–´í”„ë¼ì´: ë‹¨ì¼ ì˜¨ë„ */\n                  <div className=\"grid grid-cols-2 gap-1.5\">\n                    <div><label className=\"text-xs text-gray-500\">{t('advDashboard.temperature')}</label>\n                      <input type=\"number\" value={oven.firstBake.topTemp}\n                        onChange={(e) => {\n                          const temp = parseInt(e.target.value) || 0;\n                          setOven({ ...oven, firstBake: { ...oven.firstBake, topTemp: temp, bottomTemp: temp } });\n                        }}\n                        className=\"w-full text-xs border rounded px-1.5 py-1 text-center\" /></div>\n                    <div><label className=\"text-xs text-gray-500\">{t('advDashboard.timeMin')}</label>\n                      <input type=\"number\" value={oven.firstBake.time}\n                        onChange={(e) => setOven({ ...oven, firstBake: { ...oven.firstBake, time: parseInt(e.target.value) || 0 } })}\n                        className=\"w-full text-xs border rounded px-1.5 py-1 text-center\" /></div>\n                  </div>\n                )}\n              </div>\n              <div className=\"bg-gray-50 rounded p-2\">\n                <div className=\"text-xs text-gray-500 mb-1.5\">{t('advDashboard.secondBake')}</div>\n                {oven.type === 'deck' ? (\n                  /* ë°í¬ ì˜¤ë¸: ìœ—ë¶ˆ/ì•„ë«ë¶ˆ ë¶„ë¦¬ */\n                  <div className=\"grid grid-cols-3 gap-1.5\">\n                    <input type=\"number\" value={oven.secondBake.topTemp || ''}\n                      onChange={(e) => setOven({ ...oven, secondBake: { ...oven.secondBake, topTemp: parseInt(e.target.value) || 0 } })}\n                      className=\"text-xs border rounded px-1.5 py-1 text-center\" placeholder={t('advDashboard.topHeat')} />\n                    <input type=\"number\" value={oven.secondBake.bottomTemp || ''}\n                      onChange={(e) => setOven({ ...oven, secondBake: { ...oven.secondBake, bottomTemp: parseInt(e.target.value) || 0 } })}\n                      className=\"text-xs border rounded px-1.5 py-1 text-center\" placeholder={t('advDashboard.bottomHeat')} />\n                    <input type=\"number\" value={oven.secondBake.time || ''}\n                      onChange={(e) => setOven({ ...oven, secondBake: { ...oven.secondBake, time: parseInt(e.target.value) || 0 } })}\n                      className=\"text-xs border rounded px-1.5 py-1 text-center\" placeholder={t('units.time')} />\n                  </div>\n                ) : (\n                  /* ì»¨ë²¡ì…˜/ì—ì–´í”„ë¼ì´: ë‹¨ì¼ ì˜¨ë„ */\n                  <div className=\"grid grid-cols-2 gap-1.5\">\n                    <input type=\"number\" value={oven.secondBake.topTemp || ''}\n                      onChange={(e) => {\n                        const temp = parseInt(e.target.value) || 0;\n                        setOven({ ...oven, secondBake: { ...oven.secondBake, topTemp: temp, bottomTemp: temp } });\n                      }}\n                      className=\"text-xs border rounded px-1.5 py-1 text-center\" placeholder={t('advDashboard.temperature')} />\n                    <input type=\"number\" value={oven.secondBake.time || ''}\n                      onChange={(e) => setOven({ ...oven, secondBake: { ...oven.secondBake, time: parseInt(e.target.value) || 0 } })}\n                      className=\"text-xs border rounded px-1.5 py-1 text-center\" placeholder={t('units.time')} />\n                  </div>\n                )}\n              </div>\n            </div>\n          </CollapsibleSection>\n\n          {/* ì œë²•/ì‚¬ì „ë°˜ì£½ - ì œë¹µ ì „ìš© */}\n          {productType === 'bread' && (\n            <CollapsibleSection\n              title={t('advDashboard.method')}\n              icon={<Wheat className=\"w-4 h-4\" />}\n              badge={t(METHOD_KEYS[method.type])}\n              badgeColor={method.type === 'straight' ? 'bg-gray-100 text-gray-600' : 'bg-amber-100 text-amber-700'}\n            >\n              <div className=\"space-y-2\">\n                <div className=\"grid grid-cols-5 gap-1\">\n                  {Object.entries(METHOD_KEYS).map(([key, labelKey]) => (\n                    <button key={key} onClick={() => handleMethodChange(key)}\n                      className={`px-1.5 py-1 text-xs rounded ${method.type === key ? 'bg-amber-500 text-white' : 'bg-gray-100 hover:bg-gray-200'}`}>\n                      {t(labelKey)}\n                    </button>\n                  ))}\n                </div>\n                {/* ì €ì˜¨ë°œíš¨/ì €ì˜¨ìˆ™ì„±: ì´ìŠ¤íŠ¸ ì¡°ì • ì •ë³´ í‘œì‹œ */}\n                {(method.type === 'coldFerment' || method.type === 'retard') && (\n                  <div className=\"bg-blue-50 rounded p-2\">\n                    <div className=\"text-xs font-medium text-blue-700 mb-1\">\n                      {method.type === 'coldFerment' ? `â„ï¸ ${t('advDashboard.coldFerment')}` : `ğŸŒ™ ${t('advDashboard.coldRetard')}`}\n                    </div>\n                    <div className=\"text-xs text-blue-600\">\n                      {method.type === 'coldFerment'\n                        ? t('advDashboard.coldFermentDesc', { percent: Math.round(method.yeastAdjustment * 100) })\n                        : t('advDashboard.coldRetardDesc')\n                      }\n                    </div>\n                  </div>\n                )}\n                {/* ì‚¬ì „ë°˜ì£½ì´ ìˆëŠ” ì œë²•ë§Œ ë¹„ìœ¨ ì¡°ì • í‘œì‹œ (coldFerment/retard ì œì™¸) */}\n                {method.type !== 'straight' && method.type !== 'coldFerment' && method.type !== 'retard' && (\n                  <div className=\"bg-amber-50 rounded p-2\">\n                    <div className=\"text-xs font-medium text-amber-700 mb-1.5\">{t('advDashboard.prefermentRatio')}</div>\n                    <div className=\"grid grid-cols-2 gap-2\">\n                      <div><label className=\"text-xs text-gray-500\">{t('advDashboard.flourPercent')}</label>\n                        <input type=\"number\" value={Math.round(method.flourRatio * 100)}\n                          onChange={(e) => setMethod({ ...method, flourRatio: (parseFloat(e.target.value) || 0) / 100 })}\n                          className=\"w-full text-xs border rounded px-1.5 py-1 text-center\" step=\"10\" /></div>\n                      <div><label className=\"text-xs text-gray-500\">{t('advDashboard.waterPercent')}</label>\n                        <input type=\"number\" value={Math.round(method.waterRatio * 100)}\n                          onChange={(e) => setMethod({ ...method, waterRatio: (parseFloat(e.target.value) || 0) / 100 })}\n                          className=\"w-full text-xs border rounded px-1.5 py-1 text-center\" step=\"10\" /></div>\n                    </div>\n                  </div>\n                )}\n              </div>\n            </CollapsibleSection>\n          )}\n\n          {/* ë ˆì´ì•„ì›ƒ ì´ˆê¸°í™” ë²„íŠ¼ */}\n          <div className=\"p-2 border-t\">\n            <button\n              onClick={resetLayoutSettings}\n              className=\"w-full flex items-center justify-center gap-1 text-xs text-gray-500 hover:text-gray-700 py-1\"\n              title={t('advDashboard.layoutReset')}\n            >\n              <RotateCcw className=\"w-3 h-3\" />\n              {t('advDashboard.layoutReset')}\n            </button>\n          </div>\n        </div>\n\n        {/* ì‚¬ì´ë“œë°” ë¦¬ì‚¬ì´ì¦ˆ í•¸ë“¤ */}\n        <ResizeHandle\n          direction=\"horizontal\"\n          onResize={(delta) => setSidebarWidth(layoutSettings.sidebarWidth + delta)}\n          className=\"hover:bg-blue-100\"\n        />\n\n        {/* ===== ì¤‘ì•™: ë ˆì‹œí”¼ í…Œì´ë¸” (ì»´íŒ©íŠ¸) ===== */}\n        <div className=\"flex-1 flex flex-col overflow-hidden min-h-0\">\n          <div className=\"flex-1 overflow-auto p-1 min-h-0\">\n            <div className=\"grid gap-1 h-full grid-cols-2\">\n\n              {/* ì›ë˜ ë ˆì‹œí”¼ */}\n              <div className=\"bg-white rounded shadow-sm border flex flex-col overflow-hidden min-w-0\">\n                <div className=\"bg-gray-50 border-b px-2 py-0.5 flex items-center justify-between flex-shrink-0\">\n                  <span className=\"font-semibold text-gray-700 flex items-center gap-1 text-[11px]\">\n                    <Droplets className=\"w-3 h-3\" />{t('advDashboard.originalRecipe')}\n                  </span>\n                  <div className=\"flex gap-2\">\n                    <button onClick={() => setIsBulkInputOpen(true)} className=\"text-[10px] text-blue-600 hover:text-blue-700 font-medium\">ğŸ“‹ {t('advDashboard.bulkInput')}</button>\n                    <button onClick={addIngredient} className=\"text-[10px] text-amber-600 hover:text-amber-700 font-medium\">{t('advDashboard.addIngredient')}</button>\n                  </div>\n                </div>\n                <div className=\"flex-1 overflow-auto\">\n                  <table className=\"w-full\">\n                    <thead className=\"bg-gray-50 sticky top-0\">\n                      <tr className={`text-gray-500 ${dynamicStyles.fontSize}`}>\n                        <th className=\"px-1.5 py-1 text-left w-16\">{t('advDashboard.category')}</th>\n                        <th className=\"px-1.5 py-1 text-left\">{t('advDashboard.ingredients')}</th>\n                        <th className=\"px-1.5 py-1 text-left w-20\">{t('advDashboard.process')}</th>\n                        <th className=\"px-1.5 py-1 text-right w-10\">{t('advDashboard.tableHeaderPercent')}</th>\n                        <th className=\"px-1.5 py-1 text-right w-14\">{t('advDashboard.tableHeaderGram')}</th>\n                        <th className=\"w-5\"></th>\n                      </tr>\n                    </thead>\n                    <tbody className={dynamicStyles.fontSize}>\n                      {ingredientsByPhase.map(({ phase, items }, phaseIndex) => {\n                        const phaseMeta = PHASE_META[phase] || PHASE_META.other;\n                        return (\n                          <React.Fragment key={phase}>\n                            {/* ë‹¨ê³„ êµ¬ë¶„ì„  (2ê°œ ì´ìƒ ë‹¨ê³„ê°€ ìˆì„ ë•Œë§Œ í‘œì‹œ) */}\n                            {hasMultiplePhases && (\n                              <tr className={`${phaseMeta.bgColor} ${phaseMeta.borderColor} border-y-2`}>\n                                <td colSpan={5} className={`px-2 py-1 ${phaseMeta.textColor} font-semibold text-xs`}>\n                                  <span className=\"flex items-center gap-1\">\n                                    <span>{phaseMeta.icon}</span>\n                                    <span>{t(phaseMeta.labelKey)}</span>\n                                    <span className=\"text-[10px] font-normal opacity-60\">({t('advDashboard.itemCount', { count: items.length })})</span>\n                                  </span>\n                                </td>\n                              </tr>\n                            )}\n                            {/* í•´ë‹¹ ë‹¨ê³„ì˜ ì¬ë£Œë“¤ */}\n                            {items.map(ing => {\n                              // ì œí’ˆ íƒ€ì…ì— ë”°ë¼ ì‚¬ìš© ê°€ëŠ¥í•œ phase ëª©ë¡ ê²°ì •\n                              const availablePhases = productType === 'bread'\n                                ? ['main', 'preferment', 'tangzhong', 'autolyse', 'topping', 'other']\n                                : ['main', 'filling', 'frosting', 'topping', 'glaze', 'other'];\n\n                              return (\n                                <tr key={ing.id} className={`border-b border-gray-100 hover:bg-gray-50 ${dynamicStyles.rowHeight}`}>\n                                  <td className=\"px-1.5\">\n                                    <select value={ing.category} onChange={(e) => updateIngredient(ing.id, 'category', e.target.value)}\n                                      className=\"w-full text-xs border-0 bg-transparent p-0 focus:outline-none appearance-none cursor-pointer\">\n                                      {Object.entries(CATEGORY_LABELS).map(([k, v]) => <option key={k} value={k}>{v}</option>)}\n                                    </select>\n                                  </td>\n                                  <td className=\"px-1.5\">\n                                    <AutocompleteInput\n                                      value={ing.name}\n                                      onChange={(value) => updateIngredient(ing.id, 'name', value)}\n                                      onSelect={(value) => {\n                                        // ì¬ë£Œ ì„ íƒ ì‹œ ì¹´í…Œê³ ë¦¬ë„ ìë™ ì„¤ì •\n                                        const info = findIngredientInfo(value);\n                                        if (info) {\n                                          updateIngredient(ing.id, 'name', value);\n                                          // ì¹´í…Œê³ ë¦¬ ë§¤í•‘\n                                          const categoryMap: Record<string, string> = {\n                                            flour: 'flour', liquid: 'liquid', fat: 'wetOther',\n                                            sugar: 'other', egg: 'wetOther', dairy: 'liquid',\n                                            leavening: 'other', salt: 'other', flavoring: 'other',\n                                            nut: 'other', fruit: 'other', chocolate: 'other', other: 'other'\n                                          };\n                                          updateIngredient(ing.id, 'category', categoryMap[info.category] || 'other');\n                                        }\n                                      }}\n                                      placeholder={t('advDashboard.name')}\n                                      className=\"!border-0 !p-0 !ring-0 text-sm bg-transparent\"\n                                      maxSuggestions={6}\n                                    />\n                                  </td>\n                                  <td className=\"px-1.5\">\n                                    <select\n                                      value={ing.phase || 'main'}\n                                      onChange={(e) => updateIngredient(ing.id, 'phase', e.target.value)}\n                                      className=\"w-full text-xs border-0 bg-transparent p-0 focus:outline-none appearance-none cursor-pointer\"\n                                    >\n                                      {availablePhases.map(phaseKey => {\n                                        const meta = PHASE_META[phaseKey];\n                                        return (\n                                          <option key={phaseKey} value={phaseKey}>\n                                            {meta.icon} {t(meta.labelKey)}\n                                          </option>\n                                        );\n                                      })}\n                                    </select>\n                                  </td>\n                                  <td className=\"px-1.5 text-right font-mono text-gray-400 text-xs\">{ing.ratio}</td>\n                                  <td className=\"px-1.5\">\n                                    <input type=\"number\" value={ing.amount} onChange={(e) => updateIngredient(ing.id, 'amount', parseFloat(e.target.value) || 0)}\n                                      className=\"w-full text-right font-mono bg-transparent border-0 p-0 focus:outline-none text-sm\" />\n                                  </td>\n                                  <td className=\"px-0.5\">\n                                    <button onClick={() => removeIngredient(ing.id)} className=\"text-red-300 hover:text-red-500\">\n                                      <X className=\"w-3.5 h-3.5\" />\n                                    </button>\n                                  </td>\n                                </tr>\n                              );\n                            })}\n                          </React.Fragment>\n                        );\n                      })}\n                    </tbody>\n                  </table>\n                </div>\n                <div className=\"bg-gray-50 border-t px-2 py-0.5 text-[11px] flex-shrink-0\">\n                  <span>{t('advDashboard.total')}: <b>{totalWeight}g</b></span>\n                </div>\n              </div>\n\n              {/* ë³€í™˜ ë ˆì‹œí”¼ (ë‹¨ê³„ë³„ êµ¬ë¶„ì„  í¬í•¨) */}\n              <div className=\"bg-white rounded shadow-sm border border-blue-200 flex flex-col overflow-hidden min-w-0\">\n                <div className=\"bg-blue-50 border-b border-blue-200 px-2 py-0.5 flex items-center justify-between flex-shrink-0\">\n                  <span className=\"font-semibold text-blue-700 flex items-center gap-1 text-[11px]\">\n                    <ThermometerSun className=\"w-3 h-3\" />{t('advDashboard.convertedRecipe')}\n                  </span>\n                  {effectiveMultiplier !== 1 && <span className=\"text-[9px] bg-blue-200 text-blue-700 px-1 py-0.5 rounded font-medium\">Ã—{effectiveMultiplier}</span>}\n                </div>\n                <div className=\"flex-1 overflow-auto\">\n                  <table className=\"w-full\">\n                    <thead className=\"bg-blue-50 sticky top-0\">\n                      <tr className={`text-blue-700 ${dynamicStyles.fontSize}`}>\n                        <th className=\"px-2 py-1 text-left\">{t('advDashboard.category')}</th>\n                        <th className=\"px-2 py-1 text-left\">{t('advDashboard.ingredients')}</th>\n                        <th className=\"px-2 py-1 text-right w-16\">{t('advDashboard.tableHeaderGram')}</th>\n                      </tr>\n                    </thead>\n                    <tbody className={dynamicStyles.fontSize}>\n                      {convertedIngredientsByPhase.map(({ phase, items }) => {\n                        const phaseMeta = PHASE_META[phase] || PHASE_META.other;\n                        return (\n                          <React.Fragment key={phase}>\n                            {/* ë‹¨ê³„ êµ¬ë¶„ì„  (2ê°œ ì´ìƒ ë‹¨ê³„ê°€ ìˆì„ ë•Œë§Œ í‘œì‹œ) */}\n                            {convertedHasMultiplePhases && (\n                              <tr className={`${phaseMeta.bgColor} ${phaseMeta.borderColor} border-y-2`}>\n                                <td colSpan={3} className={`px-2 py-1 ${phaseMeta.textColor} font-semibold text-xs`}>\n                                  <span className=\"flex items-center gap-1\">\n                                    <span>{phaseMeta.icon}</span>\n                                    <span>{t(phaseMeta.labelKey)}</span>\n                                    <span className=\"text-[10px] font-normal opacity-60\">({t('advDashboard.itemCount', { count: items.length })})</span>\n                                  </span>\n                                </td>\n                              </tr>\n                            )}\n                            {/* í•´ë‹¹ ë‹¨ê³„ì˜ ì¬ë£Œë“¤ */}\n                            {items.map((ing: any) => (\n                              <tr key={ing.id} className={`border-b border-blue-100 ${dynamicStyles.rowHeight}`}>\n                                <td className=\"px-2 text-blue-600\">{CATEGORY_LABELS[ing.category]}</td>\n                                <td className=\"px-2\">{translateIngredient(ing.name)}</td>\n                                <td className=\"px-2 text-right font-mono font-medium text-blue-700\">{ing.convertedAmount}</td>\n                              </tr>\n                            ))}\n                          </React.Fragment>\n                        );\n                      })}\n                    </tbody>\n                  </table>\n                </div>\n                <div className=\"bg-blue-50 border-t border-blue-200 px-2 py-0.5 text-[11px] flex-shrink-0\">\n                  <span className=\"text-blue-700\">{t('advDashboard.total')}: <b>{Math.round(prefermentTotal + mainDoughTotal)}g</b></span>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* ê³µì • íŒ¨ë„ ë¦¬ì‚¬ì´ì¦ˆ í•¸ë“¤ */}\n          <ResizeHandle\n            direction=\"vertical\"\n            onResize={(delta) => setProcessPanelHeight(layoutSettings.processPanelHeight - delta)}\n            className=\"hover:bg-blue-100\"\n          />\n\n          {/* ===== í•˜ë‹¨: ê³µì • íŒ¨ë„ (ë¦¬ì‚¬ì´ì¦ˆ ê°€ëŠ¥) ===== */}\n          <div\n            className=\"bg-white border-t flex-shrink-0 overflow-hidden flex flex-col\"\n            style={{ height: layoutSettings.processPanelHeight }}\n          >\n            <div className=\"bg-gray-50 border-b px-3 py-1 flex items-center justify-between flex-shrink-0\">\n              <span className=\"font-semibold text-gray-700 flex items-center gap-1.5 text-sm\">\n                <ListOrdered className=\"w-4 h-4\" />{t('advDashboard.processMemo')}\n                <span className=\"text-xs font-normal text-gray-500 ml-1\">\n                  {t('advDashboard.totalMinutes', { minutes: processes.reduce((s, p) => s + (p.time || 0), 0) })}\n                </span>\n              </span>\n              <button onClick={addProcess} className=\"text-xs text-amber-600 hover:text-amber-700 font-medium\">{t('advDashboard.addProcess')}</button>\n            </div>\n            <div className=\"flex-1 overflow-auto px-2 py-1.5\">\n              <div className=\"flex gap-1.5 flex-wrap items-start\">\n                {processes.map((proc, idx) => {\n                  const itemSize = getProcessItemSize(proc.id);\n                  const displayText = editingProcessId === proc.id ? proc.description : translateProcessStep(proc.description || '');\n                  return (\n                  <div\n                    key={proc.id}\n                    className=\"flex items-center gap-1 bg-gray-50 border rounded px-1.5 py-1 text-xs group hover:bg-gray-100 relative\"\n                    style={{ minWidth: itemSize.width || 200, maxWidth: '100%' }}\n                  >\n                    {/* ìˆœì„œ ë³€ê²½ ë²„íŠ¼ */}\n                    <div className=\"flex flex-col opacity-0 group-hover:opacity-100 flex-shrink-0\">\n                      <button\n                        onClick={() => moveProcess(proc.id, 'up')}\n                        className=\"text-gray-400 hover:text-gray-600 -mb-0.5\"\n                        disabled={idx === 0}\n                        title={t('advDashboard.moveUp')}\n                      >\n                        <ChevronUp className=\"w-3 h-3\" />\n                      </button>\n                      <button\n                        onClick={() => moveProcess(proc.id, 'down')}\n                        className=\"text-gray-400 hover:text-gray-600 -mt-0.5\"\n                        disabled={idx === processes.length - 1}\n                        title={t('advDashboard.moveDown')}\n                      >\n                        <ChevronDown className=\"w-3 h-3\" />\n                      </button>\n                    </div>\n                    <span className=\"text-gray-400 font-mono text-[11px] w-4 flex-shrink-0\">{idx + 1}.</span>\n                    {editingProcessId === proc.id ? (\n                      <textarea\n                        value={displayText}\n                        onChange={(e) => updateProcess(proc.id, 'description', e.target.value)}\n                        onBlur={() => setEditingProcessId(null)}\n                        autoFocus\n                        className=\"bg-transparent border-0 p-0 focus:outline-none text-xs flex-1 min-w-0 resize-none leading-relaxed\"\n                        placeholder={t('advDashboard.processPlaceholder')}\n                        rows={3}\n                      />\n                    ) : (\n                      <div\n                        onClick={() => setEditingProcessId(proc.id)}\n                        className=\"flex-1 min-w-0 cursor-text leading-relaxed whitespace-pre-wrap\"\n                      >\n                        {displayText || <span className=\"text-gray-400\">{t('advDashboard.processPlaceholder')}</span>}\n                      </div>\n                    )}\n                    {/* ì‹œê°„: ê°’ì´ ìˆì„ ë•Œ ë±ƒì§€ í‘œì‹œ + ì‚­ì œ ë²„íŠ¼ */}\n                    {proc.time ? (\n                      <div className=\"flex items-center gap-0.5 text-[11px] text-blue-600 bg-blue-50 px-1.5 py-0.5 rounded group/time\">\n                        <Clock className=\"w-3 h-3 flex-shrink-0\" />\n                        <input\n                          type=\"number\"\n                          value={proc.time}\n                          onChange={(e) => updateProcess(proc.id, 'time', parseInt(e.target.value) || 0)}\n                          className=\"w-8 bg-transparent border-0 p-0 text-center focus:outline-none\"\n                        />\n                        <span className=\"text-[10px] flex-shrink-0\">{t('units.minute')}</span>\n                        <button\n                          onClick={() => updateProcess(proc.id, 'time', undefined)}\n                          className=\"text-blue-400 hover:text-blue-600 opacity-0 group-hover/time:opacity-100 ml-0.5 flex-shrink-0\"\n                          title={t('advDashboard.deleteTime')}\n                        >\n                          <X className=\"w-2.5 h-2.5\" />\n                        </button>\n                      </div>\n                    ) : (\n                      <button\n                        onClick={() => updateProcess(proc.id, 'time', 1)}\n                        className=\"opacity-0 group-hover:opacity-60 hover:opacity-100 text-blue-400 bg-blue-50 px-1 py-0.5 rounded\"\n                        title={t('advDashboard.addTime')}\n                      >\n                        <Clock className=\"w-3 h-3\" />\n                      </button>\n                    )}\n                    {/* ì˜¨ë„: ê°’ì´ ìˆì„ ë•Œ ë±ƒì§€ í‘œì‹œ + ì‚­ì œ ë²„íŠ¼ */}\n                    {proc.temp ? (\n                      <div className=\"flex items-center gap-0.5 text-[11px] text-orange-600 bg-orange-50 px-1.5 py-0.5 rounded group/temp\">\n                        <ThermometerSun className=\"w-3 h-3 flex-shrink-0\" />\n                        <input\n                          type=\"number\"\n                          value={proc.temp}\n                          onChange={(e) => updateProcess(proc.id, 'temp', parseInt(e.target.value) || 0)}\n                          className=\"w-8 bg-transparent border-0 p-0 text-center focus:outline-none\"\n                        />\n                        <span className=\"text-[10px] flex-shrink-0\">{t('units.celsius')}</span>\n                        <button\n                          onClick={() => updateProcess(proc.id, 'temp', undefined)}\n                          className=\"text-orange-400 hover:text-orange-600 opacity-0 group-hover/temp:opacity-100 ml-0.5 flex-shrink-0\"\n                          title={t('advDashboard.deleteTemp')}\n                        >\n                          <X className=\"w-2.5 h-2.5\" />\n                        </button>\n                      </div>\n                    ) : (\n                      <button\n                        onClick={() => updateProcess(proc.id, 'temp', 27)}\n                        className=\"opacity-0 group-hover:opacity-60 hover:opacity-100 text-orange-400 bg-orange-50 px-1 py-0.5 rounded\"\n                        title={t('advDashboard.addTemp')}\n                      >\n                        <ThermometerSun className=\"w-3 h-3\" />\n                      </button>\n                    )}\n                    <button onClick={() => removeProcess(proc.id)} className=\"text-red-300 hover:text-red-500 opacity-0 group-hover:opacity-100\">\n                      <X className=\"w-3.5 h-3.5\" />\n                    </button>\n                    {/* ë„ˆë¹„ ì¡°ì ˆ í•¸ë“¤ */}\n                    <div\n                      className=\"absolute right-0 top-0 bottom-0 w-1 cursor-col-resize opacity-0 group-hover:opacity-100 hover:bg-blue-400 transition-colors\"\n                      onMouseDown={(e) => {\n                        e.preventDefault();\n                        const startX = e.clientX;\n                        const startWidth = itemSize.width || 120;\n\n                        const handleMouseMove = (moveE: MouseEvent) => {\n                          const delta = moveE.clientX - startX;\n                          const newWidth = Math.max(80, Math.min(400, startWidth + delta));\n                          setProcessItemSize(proc.id, { width: newWidth });\n                        };\n\n                        const handleMouseUp = () => {\n                          document.removeEventListener('mousemove', handleMouseMove);\n                          document.removeEventListener('mouseup', handleMouseUp);\n                          document.body.style.cursor = '';\n                          document.body.style.userSelect = '';\n                        };\n\n                        document.addEventListener('mousemove', handleMouseMove);\n                        document.addEventListener('mouseup', handleMouseUp);\n                        document.body.style.cursor = 'col-resize';\n                        document.body.style.userSelect = 'none';\n                      }}\n                      title={t('advDashboard.resizeWidth')}\n                    >\n                      <GripVertical className=\"w-2 h-full text-gray-300 group-hover:text-blue-400\" />\n                    </div>\n                  </div>\n                  );\n                })}\n              </div>\n              {/* ë©”ëª¨ ì…ë ¥ */}\n              <div className=\"mt-2 pt-2 border-t border-gray-200\">\n                <div className=\"flex items-center gap-2 mb-1\">\n                  <span className=\"text-xs font-medium text-gray-500\">ğŸ“Œ {t('advDashboard.memo')}</span>\n                  {memo && <span className=\"text-[10px] text-gray-400\">({t('advDashboard.memoCharCount', { count: memo.length })})</span>}\n                </div>\n                <textarea\n                  value={memo}\n                  onChange={(e) => setMemo(e.target.value)}\n                  placeholder={t('advDashboard.memoPlaceholder')}\n                  className=\"w-full text-xs border rounded px-2 py-1.5 resize-none focus:outline-none focus:ring-1 focus:ring-amber-500\"\n                  rows={2}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* ì¼ê´„ ì…ë ¥ ëª¨ë‹¬ */}\n      <BulkIngredientInput\n        isOpen={isBulkInputOpen}\n        onClose={() => setIsBulkInputOpen(false)}\n        onImport={handleBulkImport}\n      />\n    </div>\n  );\n};\n\nexport default AdvancedDashboard;\n"],"names":["ChevronRight","createLucideIcon","d","key","Cookie","FileText","Flame","GripVertical","cx","cy","r","Layers","Link","ListOrdered","Minus","ThermometerSun","Unlink","x1","x2","y1","y2","STORAGE_KEY","DEFAULT_SETTINGS","sidebarWidth","recipeContainerHeight","processRowHeight","processPanelHeight","processItems","ResizeHandle","direction","onResize","onResizeEnd","className","isDragging","useRef","startPos","handleMouseDown","useCallback","e","preventDefault","current","clientX","clientY","document","body","style","cursor","userSelect","useEffect","handleMouseMove","currentPos","delta","handleMouseUp","addEventListener","removeEventListener","baseClasses","jsx","onMouseDown","children","HANGUL_START","CHO_LIST","isHangul","char","code","charCodeAt","isChosung","includes","getChosung","choIndex","Math","floor","extractChosung","text","split","map","join","matchChosung","pattern","toLowerCase","textIdx","patternIdx","length","textChar","patternChar","AutocompleteInput","value","displayValue","onChange","onSelect","placeholder","suggestions","customSuggestions","maxSuggestions","disabled","autoFocus","t","useTranslation","resolvedPlaceholder","getAllIngredientNames","useSettingsStore","state","isOpen","setIsOpen","useState","isFocused","setIsFocused","highlightedIndex","setHighlightedIndex","recentIngredients","setRecentIngredients","inputRef","listRef","saved","localStorage","getItem","JSON","parse","saveRecentIngredient","ingredient","prev","filtered","filter","i","updated","slice","setItem","stringify","filteredSuggestions","useMemo","trim","ingredients","query","queryLower","sort","a","b","aLower","bLower","aStartsWith","startsWith","bStartsWith","aIncludes","bIncludes","sortByRelevance","textChosungs","queryChosungs","searchIngredients","handleSelect","selected","handleKeyDown","handleChange","target","handleFocus","handleBlur","setTimeout","item","scrollIntoView","block","getCategoryEmoji","name","info","findIngredientInfo","flour","liquid","fat","sugar","egg","dairy","leavening","salt","flavoring","nut","fruit","chocolate","other","category","shownValue","jsxs","ref","type","onKeyDown","onFocus","onBlur","autoComplete","index","onClick","CATEGORY_MAP","parseIngredientLine","line","trimmed","amountStr","parts","p","Boolean","match","unit","_a","String","parseFloat","amount","isValid","error","cleanAmount","replace","isNaN","BulkIngredientInput","onClose","onImport","inputText","setInputText","parsedIngredients","setParsedIngredients","isParsed","setIsParsed","handleParse","parsed","handleImport","validIngredients","ing","handleReset","handlePaste","__async","this","navigator","clipboard","readText","err","validCount","invalidCount","X","Upload","CheckCircle","count","AlertCircle","idx","DEFAULT_LOSS_RATES","bread","mixing","fermentation","dividing","shaping","baking","cooling","cake","pastry","cookie","PRODUCT_LOSS_ADJUSTMENTS","pullman","mountain","brioche","genoise","chiffon","pound","brownie","cheesecake","croissant","danish","puff_pastry","baguette","ciabatta","sourdough","scone","tart","DEFAULT_STAGE_SELECTION","calculateYieldLoss","inputWeight","productType","environment","enabledStages","baseLossRates","__spreadValues","Object","assign","envAdjustment","env","adjustment","humidity","temperature","max","min","calculateEnvironmentAdjustment","processLosses","remainingWeight","stages","stageSelection","stage","lossPercent","lossWeight","round","push","outputWeight","totalLossWeight","totalLossPercent","yieldPercent","tips","totalLoss","generateYieldTips","CATEGORY_KEYS","PRODUCT_TYPE_KEYS","STAGE_KEYS","translationKey","icon","YieldLossCalculator","externalInputWeight","externalCategory","externalProductType","externalEnvironment","externalStageSelection","onStageSelectionChange","compact","internalInputWeight","setInternalInputWeight","internalCategory","setInternalCategory","internalProductType","setInternalProductType","setHumidity","setTemperature","showDetails","setShowDetails","showEnvironment","setShowEnvironment","showStageSelection","setShowStageSelection","mode","setMode","targetOutput","setTargetOutput","internalStageSelection","setInternalStageSelection","handleStageToggle","stageKey","newSelection","__spreadProps","handleSelectAll","selectAll","selectedCount","values","result","requiredInput","yieldRate","ceil","calculateRequiredInput","getLossColor","percent","TrendingDown","toLocaleString","opt","ChevronUp","ChevronDown","Check","AlertTriangle","Fragment","parseInt","Scale","loss","width","Info","tip","BREAD_SPECIFIC_VOLUMES","CAKE_BATTER_SPECIFIC_GRAVITY","CAKE_SPECIFIC_VOLUMES","METHOD_RATIOS","straight","water","sponge","poolish","biga","tangzhong","autolyse","levain","coldFerment","retard","DEFAULT_METHOD_YEAST","yeastAdjustment","prefermentYeastRatio","METHOD_KEYS","PHASE_META","labelKey","bgColor","textColor","borderColor","preferment","main","topping","filling","frosting","glaze","CollapsibleSection","title","defaultOpen","badge","badgeColor","onReset","stopPropagation","RotateCcw","AdvancedDashboard","translateIngredient","translateProcessStep","getLocalizedPanCategory","getLocalizedPanName","getLocalizedProductName","useLocalization","addRecipe","updateRecipe","currentRecipe","recipes","useRecipeStore","addToast","useToastStore","pan","panSettings","product","productSettings","method","methodSettings","SPECIFIC_VOLUMES","breadVolumes","customProducts","reduce","acc","specificVolume","PAN_DATA","grouped","myPans","forEach","volume","keys","CATEGORY_LABELS","wetOther","METHOD_LABELS","panCategories","defaultCategory","defaultPanType","_b","defaultPanVolume","_d","_c","getValidPanCategory","getValidPanType","panList","find","settings","layoutSettings","setSidebarWidth","setProcessPanelHeight","setProcessItemSize","getProcessItemSize","resetSettings","resetLayoutSettings","setSettings","window","timer","clearTimeout","setRecipeContainerHeight","ratio","setProcessRowHeight","height","id","size","minHeight","_e","removeItem","useLayoutSettings","productName","setProductName","setProductType","source","setSource","url","author","initialPanVolume","defaultPanWeight","originalPan","setOriginalPan","quantity","panWeight","divisionCount","divisionWeight","unitCount","unitWeight","pans","setPans","originalProduct","setOriginalProduct","convertedProduct","setConvertedProduct","oven","setOven","level","firstBake","topTemp","bottomTemp","time","secondBake","setMethod","flourRatio","waterRatio","usePreferment","setUsePreferment","setIngredients","order","subCategory","note","processes","setProcesses","description","temp","memo","setMemo","editingProcessId","setEditingProcessId","yieldStageSelection","setYieldStageSelection","lastLoadedRecipeKey","recipeKey","updatedAt","toString","loadedIngredients","phases","Array","isArray","globalOrder","phase","ingIdx","cat","dashboardCategory","subCat","isFlour","Date","now","percentage","moistureContent","phaseOrder","steps","loadedProcesses","step","instruction","action","duration","ovenSettings","ovenData","secondBakeData","deck","bottomTemperature","methodData","methodType","methodConfig","methods","defaultYeast","prefermentRatio","panConfig","panData","rawCategory","panCategory","rawType","panType","panQuantity","panMode","panVolume","entries","found","op","opCategory","opType","calculatedPanWeight","abs","validatedPans","pUnitCount","pUnitWeight","pCategory","pType","pPanWeight","svData","original","converted","tags","svFromTags","multiplierConfig","mcData","multiplier","setMultiplier","isPanLinked","setIsPanLinked","notes","message","multiplierInput","setMultiplierInput","parseMultiplierInput","input","val","num","den","numVal","handleMultiplierInputChange","handleMultiplierInputConfirm","clamped","handleQuickMultiplier","flourTotal","sum","liquidTotal","wetOtherMoisture","totalWeight","ingredientsByPhase","categoryOrder","items","hasMultiplePhases","hydration","originalPanTotalWeight","weight","qty","panTotalWeight","total","autoMultiplier","origWeight","targetWeight","effectiveMultiplier","panInfo","newWeight","breadProducts","pastryProducts","convertedTotal","lossRate","convertedIngredients","convertedAmount","prefermentIngredients","flourItems","prefermentFlourAmount","prefermentFlourBase","prefermentWaterAmount","totalYeast","yeast","prefermentYeastAmount","mainDoughIngredients","totalFlour","totalWater","prefermentWater","adjustedTotalYeast","prefermentYeast","prefermentAmount","mainFlourAmount","mainWaterAmount","mainYeastAmount","prefermentTotal","mainDoughTotal","originalMethodType","prefermentPhases","foundPhase","hasMultipleIngredientPhases","Set","has","isSameMethod","convertedIngredientsByPhase","combinedItems","sortedPreferment","mainItems","sortedMain","convertedHasMultiplePhases","dynamicStyles","ingredientCount","rowHeight","fontSize","getDynamicStyles","bakersPercentage","handleMethodChange","ratios","updateOriginalPan","field","types","addPan","newPanVolume","calculatedWeight","removePan","resetPanSettings","resetSpecificVolume","resetOvenSettings","resetAllConversion","saveRecipeData","overwriteId","ingredientsToSave","stepsToSave","ovenSettingsToSave","preheating","recipeData","nameKo","difficulty","servings","s","prepTime","totalTime","targetId","newRecipe","createdAt","handleSaveRecipe","trimmedName","existingRecipe","confirm","handleExportRecipe","exportData","exportedAt","toISOString","version","originalTotal","originalIngredients","blob","Blob","URL","createObjectURL","createElement","href","download","appendChild","click","removeChild","revokeObjectURL","handleCopyAsText","categoryNames","ingredientList","repeat","ovenType","toLocaleDateString","writeText","updatePan","isBulkInputOpen","setIsBulkInputOpen","viewMode","setViewMode","addIngredient","newOrder","random","substr","handleBulkImport","importedIngredients","startOrder","newIngredients","removeIngredient","updateIngredient","addProcess","removeProcess","updateProcess","moveProcess","findIndex","newArr","swapIndex","Plus","m","Save","Copy","levels","isSelected","newLevels","l","Number","Wheat","Droplets","phaseIndex","phaseMeta","React","colSpan","availablePhases","k","v","categoryMap","phaseKey","meta","minutes","proc","itemSize","displayText","minWidth","maxWidth","rows","Clock","startX","startWidth","moveE","newWidth"],"mappings":";;;;;;GASA,MACMA,EAAeC,EAAiB,gBADnB,CAAC,CAAC,OAAQ,CAAEC,EAAG,gBAAiBC,IAAK,aCQlDC,EAASH,EAAiB,SARb,CACjB,CAAC,OAAQ,CAAEC,EAAG,sDAAuDC,IAAK,WAC1E,CAAC,OAAQ,CAAED,EAAG,eAAgBC,IAAK,WACnC,CAAC,OAAQ,CAAED,EAAG,eAAgBC,IAAK,WACnC,CAAC,OAAQ,CAAED,EAAG,aAAcC,IAAK,WACjC,CAAC,OAAQ,CAAED,EAAG,aAAcC,IAAK,WACjC,CAAC,OAAQ,CAAED,EAAG,YAAaC,IAAK,aCC5BE,EAAWJ,EAAiB,YAPf,CACjB,CAAC,OAAQ,CAAEC,EAAG,6DAA8DC,IAAK,WACjF,CAAC,OAAQ,CAAED,EAAG,0BAA2BC,IAAK,WAC9C,CAAC,OAAQ,CAAED,EAAG,UAAWC,IAAK,WAC9B,CAAC,OAAQ,CAAED,EAAG,WAAYC,IAAK,WAC/B,CAAC,OAAQ,CAAED,EAAG,WAAYC,IAAK,aCI3BG,EAAQL,EAAiB,QATZ,CACjB,CACE,OACA,CACEC,EAAG,4KACHC,IAAK,aCGLI,EAAeN,EAAiB,gBARnB,CACjB,CAAC,SAAU,CAAEO,GAAI,IAAKC,GAAI,KAAMC,EAAG,IAAKP,IAAK,WAC7C,CAAC,SAAU,CAAEK,GAAI,IAAKC,GAAI,IAAKC,EAAG,IAAKP,IAAK,WAC5C,CAAC,SAAU,CAAEK,GAAI,IAAKC,GAAI,KAAMC,EAAG,IAAKP,IAAK,WAC7C,CAAC,SAAU,CAAEK,GAAI,KAAMC,GAAI,KAAMC,EAAG,IAAKP,IAAK,WAC9C,CAAC,SAAU,CAAEK,GAAI,KAAMC,GAAI,IAAKC,EAAG,IAAKP,IAAK,WAC7C,CAAC,SAAU,CAAEK,GAAI,KAAMC,GAAI,KAAMC,EAAG,IAAKP,IAAK,aCiB1CQ,EAASV,EAAiB,SAvBb,CACjB,CACE,OACA,CACEC,EAAG,+GACHC,IAAK,UAGT,CACE,OACA,CACED,EAAG,4EACHC,IAAK,WAGT,CACE,OACA,CACED,EAAG,4EACHC,IAAK,aCfLS,EAAOX,EAAiB,OAJX,CACjB,CAAC,OAAQ,CAAEC,EAAG,8DAA+DC,IAAK,WAClF,CAAC,OAAQ,CAAED,EAAG,+DAAgEC,IAAK,aCM/EU,EAAcZ,EAAiB,eARlB,CACjB,CAAC,OAAQ,CAAEC,EAAG,YAAaC,IAAK,WAChC,CAAC,OAAQ,CAAED,EAAG,YAAaC,IAAK,WAChC,CAAC,OAAQ,CAAED,EAAG,WAAYC,IAAK,WAC/B,CAAC,OAAQ,CAAED,EAAG,UAAWC,IAAK,WAC9B,CAAC,OAAQ,CAAED,EAAG,WAAYC,IAAK,WAC/B,CAAC,OAAQ,CAAED,EAAG,iCAAkCC,IAAK,aCLjDW,EAAQb,EAAiB,QADZ,CAAC,CAAC,OAAQ,CAAEC,EAAG,WAAYC,IAAK,aCQ7CY,EAAiBd,EAAiB,kBARrB,CACjB,CAAC,OAAQ,CAAEC,EAAG,wBAAyBC,IAAK,WAC5C,CAAC,OAAQ,CAAED,EAAG,UAAWC,IAAK,WAC9B,CAAC,OAAQ,CAAED,EAAG,oBAAqBC,IAAK,WACxC,CAAC,OAAQ,CAAED,EAAG,6CAA8CC,IAAK,WACjE,CAAC,OAAQ,CAAED,EAAG,UAAWC,IAAK,WAC9B,CAAC,OAAQ,CAAED,EAAG,uBAAwBC,IAAK,aCcvCa,EAASf,EAAiB,SApBb,CACjB,CACE,OACA,CACEC,EAAG,6FACHC,IAAK,WAGT,CACE,OACA,CACED,EAAG,sFACHC,IAAK,WAGT,CAAC,OAAQ,CAAEc,GAAI,IAAKC,GAAI,IAAKC,GAAI,IAAKC,GAAI,IAAKjB,IAAK,WACpD,CAAC,OAAQ,CAAEc,GAAI,IAAKC,GAAI,IAAKC,GAAI,IAAKC,GAAI,IAAKjB,IAAK,WACpD,CAAC,OAAQ,CAAEc,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMjB,IAAK,WACxD,CAAC,OAAQ,CAAEc,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMjB,IAAK,aCfpDkB,EAAc,0BAedC,EAAmC,CACvCC,aAAc,IACdC,sBAAuB,GACvBC,iBAAkB,GAClBC,mBAAoB,IACpBC,aAAc,CAAA,GCnBT,MAAMC,EAA4C,EACvDC,YACAC,WACAC,cACAC,YAAY,OAEZ,MAAMC,EAAaC,EAAAA,QAAO,GACpBC,EAAWD,EAAAA,OAAO,GAElBE,EAAkBC,cAAaC,IACnCA,EAAEC,iBACFN,EAAWO,SAAU,EACrBL,EAASK,QAAwB,eAAdX,EAA6BS,EAAEG,QAAUH,EAAEI,QAC9DC,SAASC,KAAKC,MAAMC,OAAuB,eAAdjB,EAA6B,aAAe,aACzEc,SAASC,KAAKC,MAAME,WAAa,QAChC,CAAClB,IAEJmB,EAAAA,UAAU,KACR,MAAMC,EAAmBX,IACvB,IAAKL,EAAWO,QAAS,OAEzB,MAAMU,EAA2B,eAAdrB,EAA6BS,EAAEG,QAAUH,EAAEI,QACxDS,EAAQD,EAAaf,EAASK,QACpCL,EAASK,QAAUU,EACnBpB,EAASqB,IAGLC,EAAgB,KAChBnB,EAAWO,UACbP,EAAWO,SAAU,EACrBG,SAASC,KAAKC,MAAMC,OAAS,GAC7BH,SAASC,KAAKC,MAAME,WAAa,GACjC,MAAAhB,GAAAA,MAOJ,OAHAY,SAASU,iBAAiB,YAAaJ,GACvCN,SAASU,iBAAiB,UAAWD,GAE9B,KACLT,SAASW,oBAAoB,YAAaL,GAC1CN,SAASW,oBAAoB,UAAWF,KAEzC,CAACvB,EAAWC,EAAUC,IAEzB,MAAMwB,EAA4B,eAAd1B,EAChB,+EACA,+EAEJ,OACE2B,EAAAA,IAAC,MAAA,CACCxB,UAAW,GAAGuB,2DAAqEvB,IACnFyB,YAAarB,EAGZsB,SAAc,eAAd7B,EACC2B,EAAAA,IAAC,MAAA,CAAIxB,UAAU,oHAEfwB,EAAAA,IAAC,MAAA,CAAIxB,UAAU,uHCjEjB2B,EAAe,MAKfC,EAAW,CACf,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAC7C,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAMnC,SAASC,GAASC,GACvB,MAAMC,EAAOD,EAAKE,WAAW,GAC7B,OAAOD,GAAQJ,GAAgBI,GAdd,KAenB,CAKO,SAASE,GAAUH,GACxB,OAAOF,EAASM,SAASJ,EAC3B,CAKO,SAASK,GAAWL,GACzB,MAAMC,EAAOD,EAAKE,WAAW,GAC7B,GAAID,GAAQJ,GAAgBI,GA7BX,MA6B+B,CAC9C,MAAMK,EAAWC,KAAKC,OAAOP,EAAOJ,GA7BtB,KA8Bd,OAAOC,EAASQ,EAClB,CACA,OAAON,CACT,CAKO,SAASS,GAAeC,GAC7B,OAAOA,EAAKC,MAAM,IAAIC,IAAIP,IAAYQ,KAAK,GAC7C,CAMO,SAASC,GAAaJ,EAAcK,GACpBN,GAAeC,GACfK,EAAQC,cAE7B,IAAIC,EAAU,EACVC,EAAa,EAEjB,KAAOD,EAAUP,EAAKS,QAAUD,EAAaH,EAAQI,QAAQ,CAC3D,MAAMC,EAAWV,EAAKO,GAChBI,EAAcN,EAAQG,GAG5B,GAAIf,GAAUkB,GAAc,CAE1B,IAAItB,GAASqB,GAQX,OAAO,EAPP,GAAIf,GAAWe,KAAcC,EAI3B,OAAO,EAHPJ,IACAC,GAON,MAAA,GAESnB,GAASsB,GAAc,CAC9B,GAAID,EAASJ,gBAAkBK,EAAYL,cAIzC,OAAO,EAHPC,IACAC,GAIJ,KAEK,CACH,GAAIE,EAASJ,gBAAkBK,EAAYL,cAIzC,OAAO,EAHPC,IACAC,GAIJ,CACF,CAGA,OAAOA,IAAeH,EAAQI,MAChC,CC7EA,SAAwBG,IAAkBC,MACxCA,EAAAC,aACAA,EAAAC,SACAA,EAAAC,SACAA,EAAAC,YACAA,EAAAzD,UACAA,EAAY,GACZ0D,YAAaC,EAAAC,eACbA,EAAiB,EAAAC,SACjBA,GAAW,EAAAC,UACXA,GAAY,IAEZ,MAAMC,EAAEA,GAAMC,IACRC,EAAsB,MAAAR,EAAAA,EAAeM,EAAE,uCAEvCG,EAAwBC,EAAiBC,GAASA,EAAMF,uBACxDR,QAAcC,IAAqBO,KAClCG,EAAQC,GAAaC,EAAAA,UAAS,IAC9BC,EAAWC,GAAgBF,EAAAA,UAAS,IACpCG,EAAkBC,GAAuBJ,EAAAA,UAAS,IAClDK,EAAmBC,GAAwBN,EAAAA,SAAmB,IAE/DO,EAAW5E,EAAAA,OAAyB,MACpC6E,EAAU7E,EAAAA,OAAyB,MAGzCc,EAAAA,UAAU,KACR,MAAMgE,EAAQC,aAAaC,QAAQ,qBACnC,GAAIF,EACF,IACEH,EAAqBM,KAAKC,MAAMJ,GAClC,CAAA,MAAQ1E,GAER,GAED,IAGH,MAAM+E,EAAuBhF,cAAaiF,IACxCT,EAAqBU,IACnB,MAAMC,EAAWD,EAAKE,OAAOC,GAAKA,IAAMJ,GAClCK,EAAU,CAACL,KAAeE,GAAUI,MAAM,EAAG,IAEnD,OADAX,aAAaY,QAAQ,oBAAqBV,KAAKW,UAAUH,IAClDA,KAER,IAGGI,EAAsBC,EAAAA,QAAQ,KAClC,IAAK3C,EAAM4C,OAET,OAAOrB,EAAkBgB,MAAM,EAAGhC,GAMpC,OD8DG,SACLsC,EACAC,GAEA,MAAMC,EAAaD,EAAMrD,cAAcmD,OAEvC,MAAO,IAAIC,GAAaG,KAAK,CAACC,EAAGC,KAC/B,MAAMC,EAASF,EAAExD,cACX2D,EAASF,EAAEzD,cAGX4D,EAAcF,EAAOG,WAAWP,IAAexD,GAAa0D,EAAGH,GAC/DS,EAAcH,EAAOE,WAAWP,IAAexD,GAAa2D,EAAGJ,GAErE,GAAIO,IAAgBE,EAAa,OAAO,EACxC,IAAKF,GAAeE,EAAa,OAAO,EAGxC,MAAMC,EAAYL,EAAOtE,SAASkE,GAC5BU,EAAYL,EAAOvE,SAASkE,GAElC,OAAIS,IAAcC,GAAkB,GAC/BD,GAAaC,EAAkB,EAG7BR,EAAErD,OAASsD,EAAEtD,QAExB,CC1FmB8D,CD2BZ,SACLb,EACAC,GAEA,IAAKA,EAAMF,OAAQ,OAAOC,EAE1B,MAAME,EAAaD,EAAMrD,cAAcmD,OAEvC,OAAOC,EAAYT,OAAOH,IAIxB,GAHwBA,EAAWxC,cAGfZ,SAASkE,GAC3B,OAAO,EAIT,GAAIxD,GAAa0C,EAAYa,GAC3B,OAAO,EAIT,MAAMa,EAAezE,GAAe+C,GAC9B2B,EAAgB1E,GAAe4D,GACrC,QAAIa,EAAa9E,SAAS+E,IAM9B,CC1DqBC,CAAkBxD,EAAaL,GACPA,GAC3BuC,MAAM,EAAGhC,IACtB,CAACP,EAAOK,EAAakB,EAAmBhB,IAGrCuD,EAAe9G,cAAa+G,IAChC7D,EAAS6D,GACT,MAAA5D,GAAAA,EAAW4D,GACX/B,EAAqB+B,GACrB9C,GAAU,GACVK,GAAoB,IACnB,CAACpB,EAAUC,EAAU6B,IAGlBgC,EAAgBhH,cAAaC,IACjC,GAAK+D,GACW,cAAV/D,EAAEnC,KAAiC,YAAVmC,EAAEnC,IAMjC,OAAQmC,EAAEnC,KACR,IAAK,YACHmC,EAAEC,iBACFoE,KACEY,EAAOQ,EAAoB9C,OAAS,EAAIsC,EAAO,EAAI,GAErD,MACF,IAAK,UACHjF,EAAEC,iBACFoE,KACEY,EAAO,EAAIA,EAAO,EAAIQ,EAAoB9C,OAAS,GAErD,MACF,IAAK,QACH3C,EAAEC,iBACEmE,GAAoB,GAAKA,EAAmBqB,EAAoB9C,OAClEkE,EAAapB,EAAoBrB,IACxBqB,EAAoB9C,OAAS,GACtCkE,EAAapB,EAAoB,IAEnC,MACF,IAAK,SACHzB,GAAU,GACVK,GAAoB,GACpB,MACF,IAAK,MACCN,GAAUK,GAAoB,IAChCpE,EAAEC,iBACF4G,EAAapB,EAAoBrB,UAjCnCJ,GAAU,IAqCb,CAACD,EAAQK,EAAkBqB,EAAqBoB,IAG7CG,EAAejH,cAAaC,IAChCiD,EAASjD,EAAEiH,OAAOlE,OAClBiB,GAAU,GACVK,GAAoB,IACnB,CAACpB,IAGEiE,EAAcnH,EAAAA,YAAY,KAC9BiE,GAAU,GACVG,GAAa,IACZ,IAGGgD,EAAapH,EAAAA,YAAY,KAC7BqH,WAAW,KACTpD,GAAU,GACVG,GAAa,GACbE,GAAoB,IACnB,MACF,IAGH3D,EAAAA,UAAU,KACR,GAAI0D,GAAoB,GAAKK,EAAQvE,QAAS,CAC5C,MAAMmH,EAAO5C,EAAQvE,QAAQkB,SAASgD,GAClCiD,GACFA,EAAKC,eAAe,CAAEC,MAAO,WAEjC,GACC,CAACnD,IAGJ,MAAMoD,EAAoBC,IACxB,MAAMC,EAAOC,EAAmBF,GAChC,IAAKC,EAAM,MAAO,GAiBlB,MAfyC,CACvCE,MAAO,KACPC,OAAQ,KACRC,IAAK,KACLC,MAAO,KACPC,IAAK,KACLC,MAAO,KACPC,UAAW,KACXC,KAAM,KACNC,UAAW,KACXC,IAAK,KACLC,MAAO,KACPC,UAAW,KACXC,MAAO,MAEOd,EAAKe,WAAa,IAI9BC,EAAaxE,EAAYnB,EAAS,MAAAC,EAAAA,EAAgBD,EAExD,SACE4F,KAAC,MAAA,CAAIjJ,UAAU,WACb0B,SAAA,CAAAF,EAAAA,IAAC,QAAA,CACC0H,IAAKpE,EACLqE,KAAK,OACL9F,MAAO2F,EACPzF,SAAU+D,EACV8B,UAAW/B,EACXgC,QAAS7B,EACT8B,OAAQ7B,EACRhE,YAAaQ,EACbJ,WACAC,YACA9D,UAAW,iMAGPA,IACJuJ,aAAa,QAIdlF,GAAU0B,EAAoB9C,OAAS,GACtCgG,EAAAA,KAAC,KAAA,CACCC,IAAKnE,EACL/E,UAAU,uHAGT0B,SAAA,EAAC2B,EAAM4C,QAAUrB,EAAkB3B,OAAS,GAC3CzB,EAAAA,IAAC,KAAA,CAAGxB,UAAU,sDACX0B,SAAAqC,EAAE,0CAGNgC,EAAoBrD,IAAI,CAACiF,EAAM6B,IAC9BP,EAAAA,KAAC,KAAA,CAECQ,QAAS,IAAMtC,EAAaQ,GAC5B3H,UAAW,sEACPwJ,IAAU9E,EACR,8BACA,qBAGNhD,SAAA,CAAAF,MAAC,OAAA,CAAKxB,UAAU,UAAW0B,SAAAoG,EAAiBH,KAC5CnG,EAAAA,IAAC,OAAA,CAAKxB,UAAU,SAAU0B,SAAAiG,IACzB6B,IAAU9E,GACTlD,EAAAA,IAAC,OAAA,CAAKxB,UAAU,wBAAwB0B,SAAA,YAXrCiG,OAmBZtD,GAAUhB,EAAM4C,QAAyC,IAA/BF,EAAoB9C,cAC5C,MAAA,CAAIjD,UAAU,sHAEZ0B,SAAAqC,EAAE,kCAAmC,CAAEV,cAKlD,CChOA,MAAMqG,GAAuC,CAC3CxB,MAAO,QACPC,OAAQ,SACRC,IAAK,WACLC,MAAO,QACPC,IAAK,WACLC,MAAO,SACPC,UAAW,QACXC,KAAM,QACNC,UAAW,QACXC,IAAK,QACLC,MAAO,QACPC,UAAW,QACXC,MAAO,SAMT,SAASa,GAAoBC,SAC3B,MAAMC,EAAUD,EAAK3D,OACrB,IAAK4D,GAAWA,EAAQlD,WAAW,MAAQkD,EAAQlD,WAAW,MAC5D,OAAO,KAIT,IAAIoB,EAAO,GACP+B,EAAY,GAGhB,GAAID,EAAQ3H,SAAS,MAAO,CAC1B,MAAM6H,EAAQF,EAAQpH,MAAM,MAAMC,IAAIsH,GAAKA,EAAE/D,QAAQR,OAAOwE,SACxDF,EAAM9G,QAAU,IAClB8E,EAAOgC,EAAM,GACbD,EAAYC,EAAM,GAEtB,MAAA,GAESF,EAAQ3H,SAAS,KAAM,CAC9B,MAAM6H,EAAQF,EAAQpH,MAAM,KAAKC,IAAIsH,GAAKA,EAAE/D,QAAQR,OAAOwE,SACvDF,EAAM9G,QAAU,IAClB8E,EAAOgC,EAAM,GACbD,EAAYC,EAAM,GAEtB,KAEK,CACH,MAAMG,EAAQL,EAAQK,MAAM,2CAC5B,GAAIA,EAAO,CACTnC,EAAOmC,EAAM,GAAGjE,OAChB6D,EAAYI,EAAM,GAElB,MAAMC,EAAO,OAAAC,EAAAF,EAAM,SAAN,EAAAE,EAAUtH,eACV,OAATqH,GAEgB,MAATA,KADTL,EAAYO,OAA8B,IAAvBC,WAAWJ,EAAM,KAIxC,CACF,CAGA,IAAKnC,EACH,MAAO,CACLA,KAAM8B,EACNU,OAAQ,EACRxB,SAAU,QACVyB,SAAS,EACTC,MAAO,kBAKX,MAAMC,EAAcZ,EAAUa,QAAQ,UAAW,IAC3CJ,EAASD,WAAWI,GAE1B,GAAIE,MAAML,IAAWA,GAAU,EAC7B,MAAO,CACLxC,OACAwC,OAAQ,EACRxB,SAAU,QACVyB,SAAS,EACTC,MAAO,mBAAmBX,MAK9B,MAAM9B,EAAOC,EAAmBF,GAGhC,MAAO,CACLA,OACAwC,SACAxB,SALef,GAAO0B,GAAa1B,EAAKe,WAAuB,QAM/DyB,SAAS,EAEb,CAEA,SAAwBK,IAAoBxG,OAC1CA,EAAAyG,QACAA,EAAAC,SACAA,IAEA,MAAMhH,EAAEA,GAAMC,KACPgH,EAAWC,GAAgB1G,EAAAA,SAAS,KACpC2G,EAAmBC,GAAwB5G,EAAAA,SAA6B,KACxE6G,EAAUC,GAAe9G,EAAAA,UAAS,GAGnC+G,EAAcjL,EAAAA,YAAY,KAC9B,MACMkL,EADQP,EAAUvI,MAAM,MAE3BC,IAAIiH,IACJlE,OAAQkC,GAA4C,OAATA,GAE9CwD,EAAqBI,GACrBF,GAAY,IACX,CAACL,IAGEQ,EAAenL,EAAAA,YAAY,KAC/B,MAAMoL,EAAmBP,EACtBzF,OAAOiG,GAAOA,EAAIlB,SAClB9H,IAAIgJ,IAAA,CACH3D,KAAM2D,EAAI3D,KACVwC,OAAQmB,EAAInB,OACZxB,SAAU2C,EAAI3C,YAGd0C,EAAiBxI,OAAS,IAC5B8H,EAASU,GACTR,EAAa,IACbE,EAAqB,IACrBE,GAAY,GACZP,MAED,CAACI,EAAmBH,EAAUD,IAG3Ba,EAActL,EAAAA,YAAY,KAC9B4K,EAAa,IACbE,EAAqB,IACrBE,GAAY,IACX,IAGGO,EAAcvL,EAAAA,YAAY,IAAYwL,EAAAC,KAAA,KAAA,YAC1C,IACE,MAAMtJ,QAAauJ,UAAUC,UAAUC,WACvChB,EAAazI,GACb6I,GAAY,EACd,OAASa,GAET,CACF,GAAG,IAEH,IAAK7H,EAAQ,OAAO,KAEpB,MAAM8H,EAAajB,EAAkBzF,OAAOC,GAAKA,EAAE8E,SAASvH,OACtDmJ,EAAelB,EAAkBzF,WAAaC,EAAE8E,SAASvH,OAE/D,aACG,MAAA,CAAIjD,UAAU,kEACb0B,SAAAuH,EAAAA,KAAC,MAAA,CAAIjJ,UAAU,4EAEb0B,SAAA,GAAAuH,KAAC,MAAA,CAAIjJ,UAAU,uDACb0B,SAAA,GAAAuH,KAAC,KAAA,CAAGjJ,UAAU,gDACZ0B,SAAA,GAAAF,IAACnD,EAAA,CAAS2B,UAAU,2BACnB+D,EAAE,mCAELvC,IAAC,SAAA,CAAOiI,QAASqB,EAAS9K,UAAU,gCAClC0B,SAAAF,EAAAA,IAAC6K,EAAA,CAAErM,UAAU,mBAKjBiJ,KAAC,MAAA,CAAIjJ,UAAU,qCAEb0B,SAAA,GAAAuH,KAAC,MAAA,CAAIjJ,UAAU,kDACb0B,SAAA,CAAAF,MAAC,IAAA,CAAExB,UAAU,mBAAoB0B,SAAAqC,EAAE,6CACnCkF,KAAC,KAAA,CAAGjJ,UAAU,oCACZ0B,SAAA,CAAAuH,OAAC,KAAA,CAAGvH,SAAA,CAAA,KAAGqC,EAAE,iDACR,KAAA,CAAGrC,SAAA,CAAA,KAAGqC,EAAE,iDACR,KAAA,CAAGrC,SAAA,CAAA,KAAGqC,EAAE,uDAKZ,MAAA,CACCrC,SAAA,GAAAuH,KAAC,MAAA,CAAIjJ,UAAU,yCACb0B,SAAA,CAAAF,MAAC,QAAA,CAAMxB,UAAU,oCAAqC0B,SAAAqC,EAAE,yCACxDkF,EAAAA,KAAC,SAAA,CACCQ,QAASmC,EACT5L,UAAU,kFAEV0B,SAAA,GAAAF,IAAC8K,EAAA,CAAOtM,UAAU,YACjB+D,EAAE,mCAGPvC,EAAAA,IAAC,WAAA,CACC6B,MAAO2H,EACPzH,SAAWjD,IACT2K,EAAa3K,EAAEiH,OAAOlE,OACtBgI,GAAY,IAEd5H,YAAaM,EAAE,oCACf/D,UAAU,gIAKboL,GAAYF,EAAkBjI,OAAS,GACtCgG,EAAAA,KAAC,MAAA,CAAIjJ,UAAU,oCACb0B,SAAA,GAAAuH,KAAC,MAAA,CAAIjJ,UAAU,kEACb0B,SAAA,CAAAF,MAAC,OAAA,CAAKxB,UAAU,sBAAuB0B,SAAAqC,EAAE,wCACzCkF,KAAC,MAAA,CAAIjJ,UAAU,qBACZ0B,SAAA,CAAAyK,EAAa,GACZlD,OAAC,OAAA,CAAKjJ,UAAU,yCACd0B,SAAA,GAAAF,IAAC+K,EAAA,CAAYvM,UAAU,YACtB+D,EAAE,oCAAqC,CAAEyI,MAAOL,OAGpDC,EAAe,GACdnD,OAAC,OAAA,CAAKjJ,UAAU,uCACd0B,SAAA,GAAAF,IAACiL,EAAA,CAAYzM,UAAU,YACtB+D,EAAE,iCAAkC,CAAEyI,MAAOJ,mBAKrD,MAAA,CAAIpM,UAAU,yBACb0B,SAAAuH,EAAAA,KAAC,QAAA,CAAMjJ,UAAU,iBACf0B,SAAA,CAAAF,MAAC,QAAA,CAAMxB,UAAU,0BACf0B,SAAAuH,EAAAA,KAAC,KAAA,CACCvH,SAAA,CAAAF,MAAC,KAAA,CAAGxB,UAAU,oCAAqC0B,SAAAqC,EAAE,yBACpD,KAAA,CAAG/D,UAAU,oCAAqC0B,SAAAqC,EAAE,0CACpD,KAAA,CAAG/D,UAAU,qCAAsC0B,SAAAqC,EAAE,4CACrD,KAAA,CAAG/D,UAAU,oCAAqC0B,SAAAqC,EAAE,sBAGzDvC,MAAC,QAAA,CACEE,SAAAwJ,EAAkBxI,IAAI,CAACgJ,EAAKgB,MAC3BzD,KAAC,KAAA,CAAajJ,UAAW,aAAY0L,EAAIlB,QAAU,GAAK,aACtD9I,SAAA,CAAAF,MAAC,KAAA,CAAGxB,UAAU,cACX0B,SAAAgK,EAAIlB,QACHhJ,MAAC+K,EAAA,CAAYvM,UAAU,2BAEvBwB,EAAAA,IAACiL,EAAA,CAAYzM,UAAU,2BAG3BwB,EAAAA,IAAC,KAAA,CAAGxB,UAAU,cAAe0B,WAAIqG,OACjCvG,EAAAA,IAAC,MAAGxB,UAAU,mCACX0B,WAAI8I,QAAUkB,EAAInB,OAAS,QAE9B/I,IAAC,KAAA,CAAGxB,UAAU,oCACX0B,SAAAgK,EAAIjB,QAAUxC,EAAmByD,EAAI3D,MAAQhE,EAAE,kCAAoC,QAb/E2I,mBAyBvBzD,KAAC,MAAA,CAAIjJ,UAAU,kEACb0B,SAAA,CAAAF,EAAAA,IAAC,SAAA,CACCiI,QAASkC,EACT3L,UAAU,8DAET0B,WAAE,oBAELuH,KAAC,MAAA,CAAIjJ,UAAU,aACb0B,SAAA,CAAAF,EAAAA,IAAC,SAAA,CACCiI,QAASqB,EACT9K,UAAU,uDAET0B,WAAE,mBAEH0J,EASA5J,EAAAA,IAAC,SAAA,CACCiI,QAAS+B,EACT3H,SAAyB,IAAfsI,EACVnM,UAAU,yHAET0B,SAAAqC,EAAE,mCAAoC,CAAEyI,MAAOL,MAblD3K,EAAAA,IAAC,SAAA,CACCiI,QAAS6B,EACTzH,UAAWmH,EAAU/E,OACrBjG,UAAU,yHAET0B,WAAE,4BAgBnB,CCrTO,MAAMiL,GAAgE,CAC3EC,MAAO,CACLC,OAAQ,EACRC,aAAc,EACdC,SAAU,IACVC,QAAS,EACTC,OAAQ,GACRC,QAAS,GAEXC,KAAM,CACJN,OAAQ,EACRC,aAAc,EACdC,SAAU,EACVC,QAAS,EACTC,OAAQ,GACRC,QAAS,KAEXE,OAAQ,CACNP,OAAQ,IACRC,aAAc,GACdC,SAAU,EACVC,QAAS,EACTC,OAAQ,GACRC,QAAS,GAEXG,OAAQ,CACNR,OAAQ,IACRC,aAAc,EACdC,SAAU,EACVC,QAAS,IACTC,OAAQ,EACRC,QAAS,IAEXpE,MAAO,CACL+D,OAAQ,EACRC,aAAc,GACdC,SAAU,EACVC,QAAS,EACTC,OAAQ,GACRC,QAAS,MAOAI,GAAsE,CAEjFC,QAAS,CAAEN,OAAQ,IACnBO,SAAU,CAAEP,OAAQ,IACpBQ,QAAS,CAAER,OAAQ,GAAMJ,OAAQ,GAGjCa,QAAS,CAAET,OAAQ,GAAMJ,OAAQ,GACjCc,QAAS,CAAEV,OAAQ,GAAMJ,OAAQ,KACjCe,MAAO,CAAEX,OAAQ,GAAMJ,OAAQ,GAC/BgB,QAAS,CAAEZ,OAAQ,GACnBa,WAAY,CAAEb,OAAQ,GAGtBc,UAAW,CAAEd,OAAQ,GAAMD,QAAS,GACpCgB,OAAQ,CAAEf,OAAQ,GAAMD,QAAS,KACjCiB,YAAa,CAAEhB,OAAQ,IAGvBiB,SAAU,CAAEjB,OAAQ,GAAMD,QAAS,KACnCmB,SAAU,CAAElB,OAAQ,GAAMJ,OAAQ,GAClCuB,UAAW,CAAEnB,OAAQ,GAAMH,aAAc,GAGzCO,OAAQ,CAAEJ,OAAQ,GAClBoB,MAAO,CAAEpB,OAAQ,IACjBqB,KAAM,CAAErB,OAAQ,GAAMD,QAAS,IAwE1B,MAAMuB,GAAiD,CAC5D1B,QAAQ,EACRC,cAAc,EACdC,UAAU,EACVC,SAAS,EACTC,QAAQ,EACRC,SAAS,GAYJ,SAASsB,GACdC,EACA1F,EACA2F,EACAC,EACAC,GAGA,MAAMC,EAAgBC,EAAA,CAAA,EAAKnC,GAAmB5D,IAG1C2F,GAAepB,GAAyBoB,IAC1CK,OAAOC,OAAOH,EAAevB,GAAyBoB,IAIxD,MAAMO,EAAgBN,EA3FjB,SAAwCO,GAC7C,IAAIC,EAAa,OAII,IAAjBD,EAAIE,WAEND,GAAc,EAAoB,MADb,GAAKD,EAAIE,gBAMR,IAApBF,EAAIG,cAENF,GAAc,EAAgB,KADbD,EAAIG,YAAc,KAIrC,OAAOhN,KAAKiN,IAAI,GAAKjN,KAAKkN,IAAI,IAAKJ,GACrC,CA0EMK,CAA+Bb,GAC/B,EAGEc,EAAkD,GACxD,IAAIC,EAAkBjB,EAEtB,MAAMkB,EAA0D,CAC9D,CAAExR,IAAK,SAAU4J,KAAM,MACvB,CAAE5J,IAAK,eAAgB4J,KAAM,MAC7B,CAAE5J,IAAK,WAAY4J,KAAM,MACzB,CAAE5J,IAAK,UAAW4J,KAAM,MACxB,CAAE5J,IAAK,SAAU4J,KAAM,MACvB,CAAE5J,IAAK,UAAW4J,KAAM,OAIpB6H,EAAiBhB,GAAiBL,GAExC,IAAA,MAAWsB,KAASF,EAAQ,CAE1B,IAAKC,EAAeC,EAAM1R,KAAM,SAEhC,IAAI2R,EAAcjB,EAAcgB,EAAM1R,KAQtC,GALkB,WAAd0R,EAAM1R,MACR2R,GAAeb,GAIba,GAAe,EAAG,SAEtB,MAAMC,EAAa1N,KAAK2N,MAAMN,GAAmBI,EAAc,MAC/DJ,GAAmBK,EAEnBN,EAAcQ,KAAK,CACjBJ,MAAOA,EAAM9H,KACb+H,YAAazN,KAAK2N,MAAoB,GAAdF,GAAoB,GAC5CC,aACAL,mBAEJ,CAGA,MAAMQ,EAAeR,EACfS,EAAkB1B,EAAcyB,EAChCE,EAAmB/N,KAAK2N,MAAOG,EAAkB1B,EAAe,KAAQ,GACxE4B,EAAehO,KAAK2N,MAAOE,EAAezB,EAAe,KAAQ,GAGjE6B,EAgBR,SACEvH,EACA2F,EACA6B,EACA5B,GAEA,MAAM2B,EAAiB,GAGN,UAAbvH,GACFuH,EAAKL,KAAK,6BACVK,EAAKL,KAAK,sBACY,SAAblH,GACTuH,EAAKL,KAAK,0BACVK,EAAKL,KAAK,qBACY,WAAblH,IACTuH,EAAKL,KAAK,yBACVK,EAAKL,KAAK,yBAIQ,cAAhBvB,EACF4B,EAAKL,KAAK,4BACe,aAAhBvB,EACT4B,EAAKL,KAAK,2BACe,YAAhBvB,GACT4B,EAAKL,KAAK,4BAIkB,KAA1B,MAAAtB,OAAA,EAAAA,EAAaS,YACXT,EAAYS,SAAW,GACzBkB,EAAKL,KAAK,2BACDtB,EAAYS,SAAW,IAChCkB,EAAKL,KAAK,+BAImB,KAA7B,MAAAtB,OAAA,EAAAA,EAAaU,cACXV,EAAYU,YAAc,IAC5BiB,EAAKL,KAAK,uBAId,OAAOK,CACT,CA7DeE,CAAkBzH,EAAU2F,EAAa0B,EAAkBzB,GAExE,MAAO,CACLF,cACAyB,eACAE,mBACAD,kBACAE,eACAZ,gBACAa,OAEJ,CCjOA,MAAMG,GAA2D,CAC/D,CAAEpN,MAAO,QAASlF,IAAK,SACvB,CAAEkF,MAAO,OAAQlF,IAAK,QACtB,CAAEkF,MAAO,SAAUlF,IAAK,UACxB,CAAEkF,MAAO,SAAUlF,IAAK,UACxB,CAAEkF,MAAO,QAASlF,IAAK,UAInBuS,GAA+E,CACnF9D,MAAO,CACL,CAAEvJ,MAAO,GAAIlF,IAAK,iBAClB,CAAEkF,MAAO,UAAWlF,IAAK,WACzB,CAAEkF,MAAO,WAAYlF,IAAK,YAC1B,CAAEkF,MAAO,UAAWlF,IAAK,WACzB,CAAEkF,MAAO,WAAYlF,IAAK,YAC1B,CAAEkF,MAAO,WAAYlF,IAAK,YAC1B,CAAEkF,MAAO,YAAalF,IAAK,cAE7BgP,KAAM,CACJ,CAAE9J,MAAO,GAAIlF,IAAK,gBAClB,CAAEkF,MAAO,UAAWlF,IAAK,WACzB,CAAEkF,MAAO,UAAWlF,IAAK,WACzB,CAAEkF,MAAO,QAASlF,IAAK,SACvB,CAAEkF,MAAO,UAAWlF,IAAK,WACzB,CAAEkF,MAAO,aAAclF,IAAK,eAE9BiP,OAAQ,CACN,CAAE/J,MAAO,GAAIlF,IAAK,kBAClB,CAAEkF,MAAO,YAAalF,IAAK,aAC3B,CAAEkF,MAAO,SAAUlF,IAAK,UACxB,CAAEkF,MAAO,cAAelF,IAAK,gBAE/BkP,OAAQ,CACN,CAAEhK,MAAO,GAAIlF,IAAK,kBAClB,CAAEkF,MAAO,SAAUlF,IAAK,UACxB,CAAEkF,MAAO,QAASlF,IAAK,UAEzB2K,MAAO,CACL,CAAEzF,MAAO,GAAIlF,IAAK,iBAClB,CAAEkF,MAAO,OAAQlF,IAAK,UAKpBwS,GAA2F,CAC/F,CAAExS,IAAK,SAAUyS,eAAgB,SAAUC,KAAM,MACjD,CAAE1S,IAAK,eAAgByS,eAAgB,eAAgBC,KAAM,MAC7D,CAAE1S,IAAK,WAAYyS,eAAgB,WAAYC,KAAM,MACrD,CAAE1S,IAAK,UAAWyS,eAAgB,UAAWC,KAAM,MACnD,CAAE1S,IAAK,SAAUyS,eAAgB,SAAUC,KAAM,MACjD,CAAE1S,IAAK,UAAWyS,eAAgB,UAAWC,KAAM,OAGrD,SAAwBC,IACtBrC,YAAasC,EACbhI,SAAUiI,EACVtC,YAAauC,EACbtC,YAAauC,EACbtB,eAAgBuB,EAAAC,uBAChBA,EAAAC,QACAA,GAAU,EAAArR,UACVA,EAAY,WAEZ,MAAM+D,EAAEA,GAAMC,KAEPsN,EAAqBC,GAA0BhN,EAAAA,SAAS,MACxDiN,EAAkBC,GAAuBlN,EAAAA,SAA0B,UACnEmN,EAAqBC,GAA0BpN,EAAAA,SAAS,KACxD6K,EAAUwC,GAAerN,EAAAA,SAAS,KAClC8K,EAAawC,GAAkBtN,EAAAA,SAAS,KACxCuN,EAAaC,GAAkBxN,EAAAA,UAAU8M,IACzCW,EAAiBC,GAAsB1N,EAAAA,UAAS,IAChD2N,EAAoBC,GAAyB5N,EAAAA,UAAS,IACtD6N,EAAMC,GAAW9N,EAAAA,SAAgC,YACjD+N,EAAcC,GAAmBhO,EAAAA,SAAS,MAC1CiO,EAAwBC,GAA6BlO,EAAAA,SAAgCgK,IAGtFE,EAAc,MAAAsC,EAAAA,EAAuBO,EACrCvI,EAAW,MAAAiI,EAAAA,EAAoBQ,EAC/B9C,EAAc,MAAAuC,EAAAA,EAAuBS,EACrC/C,EAAc,MAAAuC,EAAAA,EAAuB,CAAE9B,WAAUC,eACjDO,EAAiB,MAAAuB,EAAAA,EAA0BqB,EAG3CE,EAAoBrS,cAAasS,IACrC,MAAMC,EAAeC,OAChBjD,GADgB,CAEnB+C,CAACA,IAAY/C,EAAe+C,KAG1BvB,EACFA,EAAuBwB,GAEvBH,EAA0BG,IAE3B,CAAChD,EAAgBwB,IAGd0B,EAAkBzS,cAAa0S,IACnC,MAAMH,EAAsC,CAC1C/F,OAAQkG,EACRjG,aAAciG,EACdhG,SAAUgG,EACV/F,QAAS+F,EACT9F,OAAQ8F,EACR7F,QAAS6F,GAGP3B,EACFA,EAAuBwB,GAEvBH,EAA0BG,IAE3B,CAACxB,IAGE4B,EAAgBhN,EAAAA,QAAQ,IACrB+I,OAAOkE,OAAOrD,GAAgBnK,OAAOwE,SAAShH,OACpD,CAAC2M,IAGEsD,EAASlN,EAAAA,QAAgC,IACzCyI,GAAe,EAAU,KACtBD,GAAmBC,EAAa1F,EAAU2F,QAAe,EAAWC,EAAaiB,GACvF,CAACnB,EAAa1F,EAAU2F,EAAaC,EAAaiB,IAG/CuD,EAAgBnN,EAAAA,QAAQ,IACxBsM,GAAgB,EAAU,ED4J3B,SACLA,EACAvJ,EACA2F,EACAC,EACAC,GAGA,MACMwE,EADe5E,GAAmB,IAAMzF,EAAU2F,EAAaC,EAAaC,GACnDyB,aAAe,IAG9C,OAAOhO,KAAKgR,KAAKf,EAAec,EAClC,CCxKWE,CAAuBhB,EAAcvJ,EAAU2F,QAAe,EAAWC,EAAaiB,GAC5F,CAAC0C,EAAcvJ,EAAU2F,EAAaC,EAAaiB,IAGhD2D,GAAgBC,GAChBA,GAAW,GAAW,eACtBA,GAAW,GAAW,kBACtBA,GAAW,EAAU,kBAClB,iBAIT,OAAInC,GAAW6B,EAEXjK,EAAAA,KAAC,MAAA,CAAIjJ,UAAW,mCAAmCA,IACjD0B,SAAA,GAAAF,IAACiS,EAAA,CAAazT,UAAU,mCACvB,OAAA,CACE0B,SAAA,CAAAqC,EAAE,uCAAuC,OAAEkF,KAAC,IAAA,CAAEjJ,UAAU,gBAAiB0B,SAAA,CAAAwR,EAAOhD,aAAawD,iBAAiB,OAC/GzK,EAAAA,KAAC,QAAKjJ,UAAW,QAAQuT,GAAaL,EAAO9C,oBAAqB1O,SAAA,CAAA,KAC7DwR,EAAO9C,iBAAiB,QAE5B4C,EAAgB,GACf/J,OAAC,OAAA,CAAKjJ,UAAU,6BAA6B0B,SAAA,CAAA,IAAEsR,EAAejP,EAAE,kCAAkC,aAQ1GkF,EAAAA,KAAC,MAAA,CAAIjJ,UAAW,wCAAwCA,IAEtD0B,SAAA,GAAAuH,KAAC,MAAA,CAAIjJ,UAAU,6FACb0B,SAAA,GAAAuH,KAAC,MAAA,CAAIjJ,UAAU,0BACb0B,SAAA,GAAAF,IAACiS,EAAA,CAAazT,UAAU,kCACvB,KAAA,CAAGA,UAAU,8BAA+B0B,SAAAqC,EAAE,qCAEjDkF,KAAC,MAAA,CAAIjJ,UAAU,aACb0B,SAAA,CAAAF,EAAAA,IAAC,SAAA,CACCiI,QAAS,IAAM4I,EAAQ,WACvBrS,UAAW,8BAAsC,YAAToS,EAAqB,2BAA6B,6BAEzF1Q,WAAE,wCAELF,EAAAA,IAAC,SAAA,CACCiI,QAAS,IAAM4I,EAAQ,WACvBrS,UAAW,8BAAsC,YAAToS,EAAqB,2BAA6B,6BAEzF1Q,WAAE,gDAMTuH,KAAC,MAAA,CAAIjJ,UAAU,gBAEZ0B,SAAA,EAACsP,GACA/H,EAAAA,KAAC,MAAA,CAAIjJ,UAAU,yBACb0B,SAAA,CAAAuH,OAAC,MAAA,CACCvH,SAAA,CAAAF,MAAC,QAAA,CAAMxB,UAAU,mCAAoC0B,SAAAqC,EAAE,sCACvDvC,EAAAA,IAAC,SAAA,CACC6B,MAAOmO,EACPjO,SAAWjD,IACTmR,EAAoBnR,EAAEiH,OAAOlE,OAC7BsO,EAAuB,KAEzB3R,UAAU,4CAET0B,YAAcgB,IAAIiR,GACjBnS,EAAAA,IAAC,SAAA,CAAuB6B,MAAOsQ,EAAItQ,MAAQ3B,SAAAqC,EAAE,mCAAmC4P,EAAIxV,QAAvEwV,EAAItQ,oBAItB,MAAA,CACC3B,SAAA,CAAAF,MAAC,QAAA,CAAMxB,UAAU,mCAAoC0B,SAAAqC,EAAE,wCACvDvC,EAAAA,IAAC,SAAA,CACC6B,MAAOqO,EACPnO,SAAWjD,GAAMqR,EAAuBrR,EAAEiH,OAAOlE,OACjDrD,UAAU,4CAET0B,YAAkB8P,GAAkB9O,IAAIiR,GACvCnS,EAAAA,IAAC,UAAuB6B,MAAOsQ,EAAItQ,MAAQ3B,SAAAqC,EAAE,iCAAiC4P,EAAIxV,QAArEwV,EAAItQ,uBAQ1B,MAAA,CACC3B,SAAA,CAAAuH,EAAAA,KAAC,SAAA,CACCQ,QAAS,IAAM0I,GAAuBD,GACtClS,UAAU,yEAET0B,SAAA,CAAAwQ,EAAqB1Q,EAAAA,IAACoS,GAAU5T,UAAU,cAAewB,IAACqS,EAAA,CAAY7T,UAAU,kBAChF,OAAA,CAAKA,UAAU,cAAe0B,SAAAqC,EAAE,6CACjCkF,KAAC,OAAA,CAAKjJ,UAAU,gBAAgB0B,SAAA,CAAA,IAAEsR,EAAc,MAAIjP,EAAE,0CAA0C,UAGjGmO,GACCjJ,EAAAA,KAAC,MAAA,CAAIjJ,UAAU,mCACb0B,SAAA,GAAAuH,KAAC,MAAA,CAAIjJ,UAAU,yCACb0B,SAAA,CAAAF,MAAC,OAAA,CAAKxB,UAAU,wBAAyB0B,SAAAqC,EAAE,mDAC3CkF,KAAC,MAAA,CAAIjJ,UAAU,aACb0B,SAAA,CAAAF,EAAAA,IAAC,SAAA,CACCiI,QAAS,IAAMqJ,GAAgB,GAC/B9S,UAAU,0EAET0B,WAAE,oCAELF,EAAAA,IAAC,SAAA,CACCiI,QAAS,IAAMqJ,GAAgB,GAC/B9S,UAAU,0EAET0B,WAAE,kDAIR,MAAA,CAAI1B,UAAU,yBACZ0B,SAAAiP,GAAWjO,IAAImN,GACd5G,EAAAA,KAAC,SAAA,CAECQ,QAAS,IAAMiJ,EAAkB7C,EAAM1R,KACvC6B,UAAW,0EACT4P,EAAeC,EAAM1R,KACjB,yDACA,8DAGNuD,SAAA,GAAAF,IAAC,OAAA,CAAME,WAAMmP,aACZ,OAAA,CAAMnP,SAAAqC,EAAE,+BAA+B8L,EAAMe,oBAC7ChB,EAAeC,EAAM1R,MACpBqD,EAAAA,IAACsS,EAAA,CAAM9T,UAAU,sBAXd6P,EAAM1R,QAgBhB6U,EAAgB,GACf/J,OAAC,MAAA,CAAIjJ,UAAU,kDACb0B,SAAA,GAAAF,IAACuS,EAAA,CAAc/T,UAAU,YACxB+D,EAAE,yCAA0C,CAAEyI,MAAO,EAAIwG,mBAQnE,MAAA,CAAIhT,UAAU,0BACZ0B,SAAS,YAAT0Q,EACCnJ,EAAAA,KAAA+K,EAAAA,SAAA,CAEEtS,SAAA,GAAAuH,KAAC,MAAA,CAAIjJ,UAAU,SACb0B,SAAA,GAAAuH,KAAC,QAAA,CAAMjJ,UAAU,mCAAoC0B,SAAA,CAAAqC,EAAE,oCAAoC,UAC3FvC,EAAAA,IAAC,QAAA,CACC2H,KAAK,SACL9F,MAAO,MAAA0N,EAAAA,EAAuBO,EAC9B/N,SAAWjD,IAAOyQ,GAAuBQ,EAAuB0C,SAAS3T,EAAEiH,OAAOlE,QAAU,GAC5FQ,WAAYkN,EACZ/Q,UAAU,wEAGdwB,IAAC,OAAIxB,UAAU,yBACb0B,eAAC,OAAA,CAAK1B,UAAU,gBAAgB0B,SAAA,UAElCuH,KAAC,MAAA,CAAIjJ,UAAU,SACb0B,SAAA,GAAAuH,KAAC,QAAA,CAAMjJ,UAAU,mCACd0B,SAAA,CAAAqC,EAAE,uCAAuC,OACzCiP,EAAgB,GAAK/J,OAAC,OAAA,CAAKjJ,UAAU,uBAAuB0B,SAAA,CAAA,IAAEsR,EAAejP,EAAE,wCAElFvC,MAAC,OAAIxB,UAAU,iHACZ0B,mCAAQwO,aAAawD,oBAAoB,YAKhDzK,EAAAA,KAAA+K,EAAAA,SAAA,CAEEtS,SAAA,GAAAuH,KAAC,MAAA,CAAIjJ,UAAU,SACb0B,SAAA,GAAAuH,KAAC,QAAA,CAAMjJ,UAAU,mCAAoC0B,SAAA,CAAAqC,EAAE,qCAAqC,UAC5FvC,EAAAA,IAAC,QAAA,CACC2H,KAAK,SACL9F,MAAOiP,EACP/O,SAAWjD,GAAMiS,EAAgB0B,SAAS3T,EAAEiH,OAAOlE,QAAU,GAC7DrD,UAAU,wEAGdwB,IAAC,OAAIxB,UAAU,yBACb0B,eAAC,OAAA,CAAK1B,UAAU,gBAAgB0B,SAAA,UAElCuH,KAAC,MAAA,CAAIjJ,UAAU,SACb0B,SAAA,GAAAuH,KAAC,QAAA,CAAMjJ,UAAU,mCAAoC0B,SAAA,CAAAqC,EAAE,sCAAsC,gBAC5F,MAAA,CAAI/D,UAAU,oHACZ0B,SAAAyR,EAAcO,2BAQf,YAATtB,GAAsBc,GACrBjK,EAAAA,KAAC,MAAA,CAAIjJ,UAAU,iEACb0B,SAAA,GAAAuH,KAAC,MAAA,CAAIjJ,UAAU,0BACb0B,SAAA,GAAAF,IAAC0S,EAAA,CAAMlU,UAAU,gCAChB,OAAA,CAAKA,UAAU,wBAAyB0B,SAAAqC,EAAE,qCAE7CkF,KAAC,MAAA,CAAIjJ,UAAU,0BACb0B,SAAA,GAAAuH,KAAC,OAAA,CAAKjJ,UAAU,kCAAmC0B,SAAA,CAAAwR,EAAO7C,aAAa,OACvEpH,EAAAA,KAAC,QAAKjJ,UAAW,WAAWuT,GAAaL,EAAO9C,oBAAqB1O,SAAA,CAAA,IACjEqC,EAAE,6BAA6B,IAAEmP,EAAO9C,iBAAiB,OAAK8C,EAAO/C,gBAAgBuD,iBAAiB,eAO9GxC,GACAjI,EAAAA,KAAC,SAAA,CACCQ,QAAS,IAAMwI,GAAoBD,GACnChS,UAAU,oEAET0B,SAAA,CAAAsQ,EAAkBxQ,EAAAA,IAACoS,GAAU5T,UAAU,cAAewB,IAACqS,EAAA,CAAY7T,UAAU,YAC7E+D,EAAE,uCAKNiO,IAAoBd,GACnBjI,EAAAA,KAAC,MAAA,CAAIjJ,UAAU,gDACb0B,SAAA,CAAAuH,OAAC,MAAA,CACCvH,SAAA,GAAAuH,KAAC,QAAA,CAAMjJ,UAAU,mCAAoC0B,SAAA,CAAAqC,EAAE,iCAAiC,UACxFvC,EAAAA,IAAC,QAAA,CACC2H,KAAK,SACL9F,MAAO+L,EACP7L,SAAWjD,GAAMsR,EAAYqC,SAAS3T,EAAEiH,OAAOlE,QAAU,IACzDkM,IAAK,GACLD,IAAK,GACLtP,UAAU,iEAGb,MAAA,CACC0B,SAAA,GAAAuH,KAAC,QAAA,CAAMjJ,UAAU,mCAAoC0B,SAAA,CAAAqC,EAAE,iCAAiC,WACxFvC,EAAAA,IAAC,QAAA,CACC2H,KAAK,SACL9F,MAAOgM,EACP9L,SAAWjD,GAAMuR,EAAeoC,SAAS3T,EAAEiH,OAAOlE,QAAU,IAC5DkM,IAAK,GACLD,IAAK,GACLtP,UAAU,2DAGC,KAAboP,GAAmC,KAAhBC,IACnBpG,OAAC,MAAA,CAAIjJ,UAAU,4DACb0B,SAAA,GAAAF,IAACuS,EAAA,CAAc/T,UAAU,iCACzBwB,EAAAA,IAAC,OAAA,CAAME,SAAAqC,EAAE,wCAOP,YAATqO,GAAsBc,GACrBjK,EAAAA,KAAC,SAAA,CACCQ,QAAS,IAAMsI,GAAgBD,GAC/B9R,UAAU,oEAET0B,SAAA,CAAAoQ,EAActQ,EAAAA,IAACoS,GAAU5T,UAAU,cAAewB,IAACqS,EAAA,CAAY7T,UAAU,YACzE+D,EAAE,0CAKN+N,GAAwB,YAATM,GAAsBc,GACpCjK,EAAAA,KAAC,MAAA,CAAIjJ,UAAU,YACb0B,SAAA,CAAAF,MAAC,MAAA,CAAIxB,UAAU,6BAA8B0B,SAAAqC,EAAE,6CAC9CmP,EAAOzD,cAAc/M,IAAI,CAACyR,EAAMzH,IAC/BzD,EAAAA,KAAC,MAAA,CAAcjJ,UAAU,4BACvB0B,SAAA,CAAAF,EAAAA,IAAC,MAAA,CAAIxB,UAAU,qBAAsB0B,SAAAyS,EAAKtE,cACzC,MAAA,CAAI7P,UAAU,cACb0B,SAAAF,MAAC,MAAA,CAAIxB,UAAU,0CACb0B,SAAAF,EAAAA,IAAC,MAAA,CACCxB,UAAW,WAAUmU,EAAKrE,aAAe,GAAK,aAAeqE,EAAKrE,aAAe,EAAI,gBAAkB,iBACvGjP,MAAO,CAAEuT,MAAO,GAAG/R,KAAKkN,IAAuB,EAAnB4E,EAAKrE,YAAiB,iBAIxD7G,KAAC,MAAA,CAAIjJ,UAAU,gCAAgC0B,SAAA,CAAA,IAAEyS,EAAKrE,YAAY,SAClE7G,KAAC,MAAA,CAAIjJ,UAAU,0CAA0C0B,SAAA,CAAA,IAAEyS,EAAKpE,WAAW,SAC3E9G,KAAC,MAAA,CAAIjJ,UAAU,0CAA0C0B,SAAA,CAAA,KAAGyS,EAAKzE,gBAAgBgE,iBAAiB,SAZ1FhH,OAmBfwG,GAAUA,EAAO5C,KAAKrN,OAAS,GAC9BgG,OAAC,MAAA,CAAIjJ,UAAU,iCACb0B,SAAA,GAAAuH,KAAC,MAAA,CAAIjJ,UAAU,yDACb0B,SAAA,GAAAF,IAAC6S,EAAA,CAAKrU,UAAU,YACf+D,EAAE,kDAEJ,KAAA,CAAG/D,UAAU,kDACX0B,SAAAwR,EAAO5C,KAAK1K,MAAM,EAAG,GAAGlD,IAAI,CAAC4R,EAAK5H,IACjClL,MAAC,MAAcE,SAAA4S,GAAN5H,cAQzB,CC9XA,MAAM6H,GAAiD,CACrD,OAAQ,IACR,OAAQ,IACR,QAAS,EACT,QAAS,IACT,OAAQ,EACR,MAAO,IACP,MAAO,IACP,OAAQ,IACR,OAAQ,EACR,MAAO,KAKHC,GAAuD,CAC3D,SAAU,IACV,SAAU,IACV,SAAU,IACV,QAAS,IACT,UAAW,GACX,QAAS,IAKLC,GAAgD,CACpD,SAAU,IACV,SAAU,IACV,SAAU,IACV,QAAS,IACT,UAAW,IACX,QAAS,KAgBLC,GAAkE,CACtEC,SAAU,CAAEzM,MAAO,EAAG0M,MAAO,GAC7BC,OAAQ,CAAE3M,MAAO,GAAK0M,MAAO,IAC7BE,QAAS,CAAE5M,MAAO,GAAK0M,MAAO,GAC9BG,KAAM,CAAE7M,MAAO,GAAK0M,MAAO,KAC3BI,UAAW,CAAE9M,MAAO,GAAK0M,MAAO,GAChCK,SAAU,CAAE/M,MAAO,EAAK0M,MAAO,KAC/BM,OAAQ,CAAEhN,MAAO,GAAK0M,MAAO,GAC7BO,YAAa,CAAEjN,MAAO,EAAG0M,MAAO,GAChCQ,OAAQ,CAAElN,MAAO,EAAG0M,MAAO,IAMvBS,GAAkG,CACtGV,SAAU,CAAEW,gBAAiB,EAAKC,qBAAsB,GACxDV,OAAQ,CAAES,gBAAiB,IAAMC,qBAAsB,GACvDT,QAAS,CAAEQ,gBAAiB,IAAMC,qBAAsB,KACxDR,KAAM,CAAEO,gBAAiB,GAAMC,qBAAsB,IACrDP,UAAW,CAAEM,gBAAiB,EAAKC,qBAAsB,GACzDN,SAAU,CAAEK,gBAAiB,EAAKC,qBAAsB,GACxDL,OAAQ,CAAEI,gBAAiB,EAAGC,qBAAsB,GACpDJ,YAAa,CAAEG,gBAAiB,GAAKC,qBAAsB,GAC3DH,OAAQ,CAAEE,gBAAiB,EAAKC,qBAAsB,IAIlDC,GAAsC,CAC1Cb,SAAU,kBAAmBE,OAAQ,gBAAiBC,QAAS,iBAC/DC,KAAM,cAAeC,UAAW,mBAAoBC,SAAU,kBAAmBC,OAAQ,gBACzFC,YAAa,qBAAsBC,OAAQ,iBASvCK,GAA0H,CAC9HT,UAAW,CAAEnE,KAAM,KAAM6E,SAAU,kBAAmBC,QAAS,aAAcC,UAAW,gBAAiBC,YAAa,mBACtHC,WAAY,CAAEjF,KAAM,KAAM6E,SAAU,mBAAoBC,QAAS,cAAeC,UAAW,iBAAkBC,YAAa,oBAC1Hf,QAAS,CAAEjE,KAAM,KAAM6E,SAAU,gBAAiBC,QAAS,cAAeC,UAAW,iBAAkBC,YAAa,oBACpHd,KAAM,CAAElE,KAAM,KAAM6E,SAAU,aAAcC,QAAS,cAAeC,UAAW,iBAAkBC,YAAa,oBAC9GhB,OAAQ,CAAEhE,KAAM,KAAM6E,SAAU,eAAgBC,QAAS,cAAeC,UAAW,iBAAkBC,YAAa,oBAClHX,OAAQ,CAAErE,KAAM,KAAM6E,SAAU,eAAgBC,QAAS,cAAeC,UAAW,iBAAkBC,YAAa,oBAClHZ,SAAU,CAAEpE,KAAM,IAAK6E,SAAU,iBAAkBC,QAAS,eAAgBC,UAAW,kBAAmBC,YAAa,qBACvHE,KAAM,CAAElF,KAAM,KAAM6E,SAAU,kBAAmBC,QAAS,aAAcC,UAAW,gBAAiBC,YAAa,mBACjHG,QAAS,CAAEnF,KAAM,IAAK6E,SAAU,gBAAiBC,QAAS,eAAgBC,UAAW,kBAAmBC,YAAa,qBACrHI,QAAS,CAAEpF,KAAM,KAAM6E,SAAU,gBAAiBC,QAAS,aAAcC,UAAW,gBAAiBC,YAAa,mBAClHK,SAAU,CAAErF,KAAM,KAAM6E,SAAU,iBAAkBC,QAAS,eAAgBC,UAAW,kBAAmBC,YAAa,qBACxHM,MAAO,CAAEtF,KAAM,KAAM6E,SAAU,cAAeC,QAAS,aAAcC,UAAW,gBAAiBC,YAAa,mBAC9G/M,MAAO,CAAE+H,KAAM,KAAM6E,SAAU,2BAA4BC,QAAS,aAAcC,UAAW,gBAAiBC,YAAa,oBA0BvHO,GAAwD,EAC5DC,QAAOxF,OAAMyF,eAAc,EAAMC,QAAOC,aAAa,8BAA+BC,UAAS/U,eAE7F,MAAO2C,EAAQC,GAAaC,EAAAA,SAAS+R,GAErC,SACErN,KAAC,MAAA,CAAIjJ,UAAU,2CACb0B,SAAA,GAAAuH,KAAC,MAAA,CAAIjJ,UAAU,+DACb0B,SAAA,CAAAuH,EAAAA,KAAC,SAAA,CACCQ,QAAS,IAAMnF,GAAWD,GAC1BrE,UAAU,+EAET0B,SAAA,CAAAmP,IACDrP,IAAC,QAAME,SAAA2U,IACNE,GACC/U,EAAAA,IAAC,OAAA,CAAKxB,UAAW,iCAAiCwW,IAC/C9U,SAAA6U,SAIPtN,KAAC,MAAA,CAAIjJ,UAAU,0BACZ0B,SAAA,CAAA+U,GACCjV,EAAAA,IAAC,SAAA,CACCiI,QAAUnJ,IAAQA,EAAEoW,kBAAmBD,KACvCzW,UAAU,qFACVqW,MAAM,MAEN3U,SAAAF,EAAAA,IAACmV,EAAA,CAAU3W,UAAU,kBAGzBwB,MAAC,UAAOiI,QAAS,IAAMnF,GAAWD,GAASrE,UAAU,MAClD0B,WAASF,EAAAA,IAACqS,EAAA,CAAY7T,UAAU,gCAA8BhC,EAAA,CAAagC,UAAU,kCAI3FqE,KAAU7C,IAAC,MAAA,CAAIxB,UAAU,YAAa0B,iBASvCkV,GAA8B,mBAClC,MAAM7S,EAAEA,GAAMC,KACR6S,oBAAEA,EAAAC,qBAAqBA,EAAAC,wBAAsBA,sBAAyBC,EAAAC,wBAAqBA,GAA4BC,KACvHC,UAAEA,EAAAC,aAAWA,EAAAC,cAAcA,EAAAC,QAAeA,GAAYC,KACtDC,SAAEA,GAAaC,KACbC,IAAKC,EAAaC,QAASC,GAAiBC,OAAQC,IAAmB5T,IAGzE6T,GAAmBhS,EAAAA,QAAQ,IAExB8I,EAAAA,EAAAA,EAAAA,EAAA,CAAA,EACFyF,IACAE,IACAoD,GAAgBI,cAEhBJ,GAAgBK,eAChBzS,OAAOuE,GAAoB,UAAfA,EAAEjB,UAAuC,WAAfiB,EAAEjB,UACxCoP,OAAO,CAACC,EAAKpO,IAAO6I,EAAA/D,EAAA,CAAA,EAAKsJ,GAAL,CAAU,CAACpO,EAAEjC,MAAOiC,EAAEqO,iBAAmB,CAAA,IAEjE,CAACR,GAAgBI,aAAcJ,GAAgBK,iBAG5CI,GAAWtS,EAAAA,QAAQ,KACvB,MAAMuS,EAA8D,CAAA,EAmBpE,OAhBAZ,EAAYa,OAAOC,QAAQf,IACzB,MAAM3O,EAAW2O,EAAI3O,UAAY,KAC5BwP,EAAQxP,KACXwP,EAAQxP,GAAY,IAEtBwP,EAAQxP,GAAUkH,KAAK,CACrBlI,KAAM2P,EAAI3P,KACV2Q,OAAQhB,EAAIgB,WAKoB,IAAhC3J,OAAO4J,KAAKJ,GAAStV,SACvBsV,EAAQ,OAAS,CAAC,CAAExQ,KAAM,SAAU2Q,OAAQ,QAGvCH,GACN,CAACZ,EAAYa,SAGVI,GAAkB5S,EAAAA,QAAQ,KAAA,CAC9BkC,MAAOnE,EAAE,mBACToE,OAAQpE,EAAE,oBACV8U,SAAU9U,EAAE,iBACZ+E,MAAO/E,EAAE,qBACP,CAACA,IAGC+U,GAAgB9S,EAAAA,QAAQ,KAAA,CAC5B2O,SAAU5Q,EAAE,mBACZ8Q,OAAQ9Q,EAAE,iBACV+Q,QAAS/Q,EAAE,kBACXgR,KAAMhR,EAAE,eACRiR,UAAWjR,EAAE,oBACbkR,SAAUlR,EAAE,mBACZmR,OAAQnR,EAAE,iBACVoR,YAAapR,EAAE,sBACfqR,OAAQrR,EAAE,mBACR,CAACA,IAGCgV,GAAgB/S,EAAAA,QAAQ,IAAM+I,OAAO4J,KAAKL,IAAW,CAACA,KAGtDU,GAAkBD,GAAc,IAAM,MACtCE,IAAiB,OAAAC,EAAA,OAAA9O,EAAAkO,GAASU,UAAT,EAAA5O,EAA4B,aAAIrC,OAAQ,mBACzDoR,IAAmB,OAAAC,EAAA,OAAAC,EAAAf,GAASU,UAAT,EAAAK,EAA4B,aAAIX,SAAU,KAG7DY,GAAsBjZ,cAAa0I,GACnCA,GAAYgQ,GAAc7W,SAAS6G,GAC9BA,EAEFiQ,GACN,CAACD,GAAeC,KAGbO,GAAkBlZ,EAAAA,YAAY,CAAC0I,EAAkBI,WACrD,MAAMqQ,EAAUlB,GAASvP,GACzB,GAAIyQ,GAAWrQ,EAAM,CAEnB,GADcqQ,EAAQC,KAAMzP,GAAwCA,EAAEjC,OAASoB,GACpE,OAAOA,CACpB,CACA,OAAO,OAAAiB,EAAA,MAAAoP,OAAA,EAAAA,EAAU,SAAV,EAAApP,EAAcrC,OAAQkR,IAC5B,CAACX,GAAUW,MAIZS,SAAUC,GAAAC,gBACVA,GAAAC,sBACAA,GAAAC,mBACAA,GAAAC,mBACAA,GACAC,cAAeC,IPjVZ,WACL,MAAOP,EAAUQ,GAAe3V,EAAAA,SAAyB,KAEvD,GAAsB,oBAAX4V,OACT,IACE,MAAMnV,EAAQC,aAAaC,QAAQ7F,GACnC,GAAI2F,EAAO,CACT,MAAMuG,EAASpG,KAAKC,MAAMJ,GAC1B,OAAO8J,OAAKxP,GAAqBiM,EACnC,CACF,OAASjL,GAET,CAEF,OAAOhB,IAIT0B,EAAAA,UAAU,KACR,MAAMoZ,EAAQ1S,WAAW,KACvB,IACEzC,aAAaY,QAAQxG,EAAa8F,KAAKW,UAAU4T,GACnD,OAASpZ,GAET,GACC,KAEH,MAAO,IAAM+Z,aAAaD,IACzB,CAACV,IAGJ,MAAME,EAAkBvZ,cAAa+T,IACnC8F,EAAY3U,GAASsN,EAAA/D,EAAA,CAAA,EAChBvJ,GADgB,CAEnBhG,aAAc8C,KAAKiN,IAAI,IAAKjN,KAAKkN,IAAI,IAAK6E,QAE3C,IAGGkG,EAA2Bja,cAAaka,IAC5CL,EAAY3U,GAASsN,EAAA/D,EAAA,CAAA,EAChBvJ,GADgB,CAEnB/F,sBAAuB6C,KAAKiN,IAAI,GAAKjN,KAAKkN,IAAI,GAAKgL,QAEpD,IAGGC,EAAsBna,cAAaoa,IACvCP,EAAY3U,GAASsN,EAAA/D,EAAA,CAAA,EAChBvJ,GADgB,CAEnB9F,iBAAkB4C,KAAKiN,IAAI,GAAIjN,KAAKkN,IAAI,GAAIkL,QAE7C,IAGGZ,EAAwBxZ,cAAaoa,IACzCP,EAAY3U,GAASsN,EAAA/D,EAAA,CAAA,EAChBvJ,GADgB,CAEnB7F,mBAAoB2C,KAAKiN,IAAI,IAAKjN,KAAKkN,IAAI,IAAKkL,QAEjD,IAGGX,EAAqBzZ,EAAAA,YAAY,CAACqa,EAAYC,KAClDT,EAAY3U,kBAAS,OAAAsN,EAAA/D,EAAA,CAAA,EAChBvJ,GADgB,CAEnB5F,aAAckT,EAAA/D,EAAA,CAAA,EACTvJ,EAAK5F,cADI,CAEZ+a,CAACA,GAAK7H,OACDtN,EAAK5F,aAAa+a,IADjB,CAEJtG,MAAO,OAAAiF,EAAA,OAAAH,EAAAyB,EAAKvG,OAAL8E,EAAc,OAAA9O,EAAA7E,EAAK5F,aAAa+a,SAAlB,EAAAtQ,EAAuBgK,OAArCiF,EAA8C,IACrDuB,UAAW,OAAAC,IAAKD,WAALC,EAAkB,OAAAzB,IAAKzZ,aAAa+a,SAAlB,EAAAtB,EAAuBwB,mBAIzD,IAGGb,EAAqB1Z,cAAaqa,GAC/BhB,EAAS/Z,aAAa+a,IAAO,CAAEtG,MAAO,KAC5C,CAACsF,EAAS/Z,eAGPqa,EAAgB3Z,EAAAA,YAAY,KAChC6Z,EAAY5a,GACZ2F,aAAa6V,WAAWzb,IACvB,IAEH,MAAO,CACLqa,WACAE,kBACAU,2BACAE,sBACAX,wBACAC,qBACAC,qBACAC,gBAEJ,COgPMe,IAGGC,GAAaC,IAAkB1W,EAAAA,SAASR,EAAE,oCAC1C2K,GAAawM,IAAkB3W,EAAAA,SAA6B,UAG5D4W,GAAQC,IAAa7W,WAKzB,CACDwD,KAAM,GACNoB,KAAM,WACNkS,IAAK,GACLC,OAAQ,KAKJC,GAAmBpC,GACnBqC,GAAmBnZ,KAAK2N,MAAMuL,GAAmB,MAChDE,GAAaC,IAAkBnX,WAAS,CAC7C6N,KAAM,MACNrJ,SAAUiQ,GAAiB7P,KAAM8P,GAAgB0C,SAAU,EAAGC,UAAWJ,GACzEK,cAAe,EAAGC,eAAgBN,GAClCO,UAAW,GAAIC,WAAY,MAItBC,GAAMC,IAAW3X,WAAqB,CAC3C,CAAEmW,GAAI,IAAKtI,KAAM,MAAOrJ,SAAUiQ,GAAiB7P,KAAM8P,GAAgB0C,SAAU,EAAGE,cAAe,EAAGD,UAAWJ,GAAkBM,eAAgBN,GAAkBO,UAAW,GAAIC,WAAY,OAI7LG,GAAiBC,IAAsB7X,EAAAA,SAAS,SAChD8X,GAAkBC,IAAuB/X,EAAAA,SAAS,SAGlDgY,GAAMC,IAAWjY,WAAuB,CAC7C4E,KAAM,aACNsT,MAAO,GACPC,UAAW,CAAEC,QAAS,IAAKC,WAAY,IAAKC,KAAM,IAClDC,WAAY,CAAEH,QAAS,EAAGC,WAAY,EAAGC,KAAM,MAI1C/E,GAAQiF,IAAaxY,WAAyB,CACnD4E,KAAM,WACN6T,WAAY,EACZC,WAAY,EACZ3H,gBAAiB,EACjBC,qBAAsB,KAEjB2H,GAAeC,IAAoB5Y,EAAAA,UAAS,IAG5C2B,GAAakX,IAAkB7Y,WAA4B,CAChE,CAAEmW,GAAI,IAAK2C,MAAO,EAAGtU,SAAU,QAASuU,YAAa,KAAMvV,KAAM,MAAOwS,MAAO,IAAKhQ,OAAQ,IAAKgT,KAAM,IACvG,CAAE7C,GAAI,IAAK2C,MAAO,EAAGtU,SAAU,SAAUuU,YAAa,KAAMvV,KAAM,IAAKwS,MAAO,GAAIhQ,OAAQ,IAAKgT,KAAM,IACrG,CAAE7C,GAAI,IAAK2C,MAAO,EAAGtU,SAAU,QAASuU,YAAa,KAAMvV,KAAM,KAAMwS,MAAO,EAAGhQ,OAAQ,GAAIgT,KAAM,IACnG,CAAE7C,GAAI,IAAK2C,MAAO,EAAGtU,SAAU,QAASuU,YAAa,KAAMvV,KAAM,MAAOwS,MAAO,EAAGhQ,OAAQ,EAAGgT,KAAM,IACnG,CAAE7C,GAAI,IAAK2C,MAAO,EAAGtU,SAAU,QAASuU,YAAa,KAAMvV,KAAM,KAAMwS,MAAO,EAAGhQ,OAAQ,GAAIgT,KAAM,IACnG,CAAE7C,GAAI,IAAK2C,MAAO,EAAGtU,SAAU,WAAYuU,YAAa,KAAMvV,KAAM,KAAMwS,MAAO,GAAIhQ,OAAQ,GAAIgT,KAAM,OAIlGC,GAAWC,IAAgBlZ,WAAwB,CACxD,CAAEmW,GAAI,IAAK2C,MAAO,EAAGK,YAAa,QAASb,KAAM,IACjD,CAAEnC,GAAI,IAAK2C,MAAO,EAAGK,YAAa,wBAAyBb,KAAM,GACjE,CAAEnC,GAAI,IAAK2C,MAAO,EAAGK,YAAa,oBAAqBb,KAAM,GAAIc,KAAM,IACvE,CAAEjD,GAAI,IAAK2C,MAAO,EAAGK,YAAa,aAClC,CAAEhD,GAAI,IAAK2C,MAAO,EAAGK,YAAa,QAASb,KAAM,IACjD,CAAEnC,GAAI,IAAK2C,MAAO,EAAGK,YAAa,WAClC,CAAEhD,GAAI,IAAK2C,MAAO,EAAGK,YAAa,oBAAqBb,KAAM,GAAIc,KAAM,IACvE,CAAEjD,GAAI,IAAK2C,MAAO,EAAGK,YAAa,KAAMb,KAAM,GAAIc,KAAM,QAInDC,GAAMC,IAAWtZ,EAAAA,SAAS,KAG1BuZ,GAAkBC,IAAuBxZ,EAAAA,SAAwB,OAGjEyZ,GAAqBC,IAA0B1Z,WAAgCuK,KACjFP,KAIC2P,GAAsBhe,EAAAA,OAAsB,MAKlDc,EAAAA,UAAU,iBACR,GAAIqW,EAAe,CAEjB,MAAM8G,EAAY,GAAG9G,EAAcqD,OAAM,OAAAtQ,EAAAiN,EAAc+G,gBAAd,EAAAhU,EAAyBiU,aAAc,KAEhF,GAAIF,IAAcD,GAAoB1d,QACpC,OAEF0d,GAAoB1d,QAAU2d,EAG9BlD,GAAe5D,EAActP,MAAQhE,EAAE,mCAGvCmX,GAAgB7D,EAAsB3I,aAAe,SAGjD2I,EAAc8D,OAChBC,GAAU,CACRrT,KAAMsP,EAAc8D,OAAOpT,MAAQ,GACnCoB,KAAMkO,EAAc8D,OAAOhS,MAAQ,WACnCkS,IAAKhE,EAAc8D,OAAOE,KAAO,GACjCC,OAAQjE,EAAc8D,OAAOG,QAAU,KAGzCF,GAAU,CAAErT,KAAM,GAAIoB,KAAM,WAAYkS,IAAK,GAAIC,OAAQ,KAI3D,MAAMgD,EAAuC,GAG7C,GAAIjH,EAAckH,QAAUC,MAAMC,QAAQpH,EAAckH,SAAWlH,EAAckH,OAAOtb,OAAS,EAAG,CAClG,IAAIyb,EAAc,EAClBrH,EAAckH,OAAO9F,QAASkG,IACxBA,EAAMzY,aAAesY,MAAMC,QAAQE,EAAMzY,cAC3CyY,EAAMzY,YAAYuS,QAAQ,CAAC/M,EAAUkT,KACnC,MAAMC,EAAMnT,EAAI3C,UAAY,QAC5B,IAAI+V,EAA+D,QAC/DC,EAAS,KAED,UAARF,GAAmBnT,EAAIsT,SACzBF,EAAoB,QACpBC,EAAS,MACQ,WAARF,GACTC,EAAoB,SACpBC,EAAS,MACQ,QAARF,IACTC,EAAoB,WACpBC,EAAS,MAGXT,EAAkBrO,KAAK,CACrByK,GAAIhP,EAAIgP,IAAM,GAAGuE,KAAKC,SAASP,EAAMjE,MAAMkE,IAC3CvB,MAAOqB,IACP3V,SAAU+V,EACVxB,YAAayB,EACbhX,KAAM2D,EAAI3D,MAAQ,GAClBwS,MAAO7O,EAAIyT,YAAc,EACzB5U,OAAQD,WAAWoB,EAAInB,SAAW,EAClCgT,KAAM7R,EAAI6R,MAAQ,GAClB6B,gBAAiB1T,EAAI0T,gBACrBT,MAAOA,EAAMxV,MAAQwV,EAAMjE,IAAM,OACjC2E,WAAYV,EAAMtB,OAAS,OAKrC,MAEShG,EAAcnR,aAAesY,MAAMC,QAAQpH,EAAcnR,cAChEmR,EAAcnR,YAAYuS,QAAQ,CAAC/M,EAAUgB,KAC3C,MAAMmS,EAAMnT,EAAI3C,UAAY2C,EAAIvC,MAAQ,QACxC,IAAI2V,EAA+D,QAC/DC,EAAS,KAED,UAARF,GAAmBnT,EAAIsT,SACzBF,EAAoB,QACpBC,EAAS,MACQ,WAARF,GACTC,EAAoB,SACpBC,EAAS,MACQ,QAARF,IACTC,EAAoB,WACpBC,EAAS,MAGXT,EAAkBrO,KAAK,CACrByK,GAAIhP,EAAIgP,IAAM,GAAGuE,KAAKC,SAASxS,IAC/B2Q,MAAO3Q,EAAM,EACb3D,SAAU+V,EACVxB,YAAayB,EACbhX,KAAM2D,EAAI3D,MAAQ,GAClBwS,MAAO7O,EAAIyT,YAAc,EACzB5U,OAAQD,WAAWoB,EAAInB,SAAW,EAClCgT,KAAM7R,EAAI6R,MAAQ,GAClB6B,gBAAiB1T,EAAI0T,gBACrBT,MAAOjT,EAAIiT,OAAS,OACpBU,WAAY3T,EAAI2T,YAAc,MAUpC,GALIf,EAAkBrb,OAAS,GAC7Bma,GAAekB,GAIbjH,EAAciI,OAASd,MAAMC,QAAQpH,EAAciI,OAAQ,CAC7D,MAAMC,EAAiClI,EAAciI,MAAM5c,IAAI,CAAC8c,EAAW9S,aAAiB,MAAA,CAC1FgO,GAAI8E,EAAK9E,IAAM,GAAGuE,KAAKC,SAASxS,IAChC2Q,MAAOmC,EAAKnC,OAAS3Q,EAAM,EAC3BgR,YAAa8B,EAAKC,aAAeD,EAAKE,QAAUF,EAAK9B,aAAe,GACpEb,MAAM,OAAAzS,EAAAoV,EAAKG,eAAL,EAAAvV,EAAe7C,SAAUiY,EAAK3C,KACpCc,MAAM,OAAAzE,EAAAsG,EAAKnQ,kBAAL,EAAA6J,EAAkB3R,SAAUiY,EAAK7B,QAErC4B,EAAgBtc,OAAS,GAC3Bwa,GAAa8B,EAEjB,CAGA,GAAIlI,EAAcuI,aAAc,CAC9B,MAAMC,EAAWxI,EAAcuI,aACzBE,EAAiBD,EAAS/C,WAChCN,GAAQ,CACNrT,KAAwB,SAAlB0W,EAASzN,KAAkB,OACT,aAAlByN,EAASzN,KAAsB,WAAa,aAClDqK,MAAOoD,EAASE,MAAQ,GACxBrD,UAAW,CACTC,QAASkD,EAASxQ,aAAe,IACjCuN,WAAYiD,EAASG,mBAAqBH,EAASxQ,aAAe,IAClEwN,KAAMgD,EAASF,UAAY,IAE7B7C,WAAYgD,EAAiB,CAC3BnD,QAASmD,EAAenD,SAAW,EACnCC,WAAYkD,EAAelD,YAAc,EACzCC,KAAMiD,EAAejD,MAAQ,GAC3B,CAAEF,QAAS,EAAGC,WAAY,EAAGC,KAAM,IAE3C,CAGA,GAAIxF,EAAcS,OAAQ,CACxB,MAAMmI,EAAa5I,EAAcS,OACjC,IAAIoI,EAAaD,EAAWnI,QAAUmI,EAAW9W,MAAQ,WAEtC,cAAf+W,IAA4BA,EAAa,UAExB,CAAC,WAAY,SAAU,UAAW,OAAQ,YAAa,WAAY,SAAU,cAAe,UAC/Fhe,SAASge,KAAaA,EAAa,YAGrD,MAAMC,EAAe,OAAAjH,EAAA,MAAAnB,QAAA,EAAAA,GAAgBqI,gBAAhBlH,EAA0BgH,GACzCG,EAAehL,GAAqB6K,IAAe,CAAE5K,gBAAiB,EAAKC,qBAAsB,GACvGwH,GAAU,CACR5T,KAAM+W,EACNlD,WAAYiD,EAAWK,iBAAmB,EAC1CrD,WAAYgD,EAAWhD,YAAc,EACrC3H,gBAAiB,OAAA+D,EAAA,MAAA8G,OAAA,EAAAA,EAAc7K,iBAAd+D,EAAiCgH,EAAa/K,gBAC/DC,qBAAsB,OAAA6D,EAAA,MAAA+G,OAAA,EAAAA,EAAc5K,sBAAd6D,EAAsCiH,EAAa9K,uBAG3E4H,GAAgC,aAAf+C,EACnB,CAGA,GAAI7I,EAAckJ,UAAW,CAC3B,MAAMC,EAAUnJ,EAAckJ,UAExBE,EAAcD,EAAQzY,MAAQyY,EAAQzX,UAAYiQ,GAClD0H,EAAcpH,GAAoBmH,GAElCE,EAAUH,EAAQrX,MAAQ8P,GAC1B2H,EAAUrH,GAAgBmH,EAAaC,GACvCE,EAAcL,EAAQ7E,UAAY,EAClCmF,EAAUN,EAAQpO,MAAQ,MAGhC,IAAIwJ,EAAY4E,EAAQ5E,UACxB,IAAKA,EAAW,CAEd,IAAImF,EAAY5H,GAChB,IAAA,MAAW,CAAGK,KAAYzK,OAAOiS,QAAQ1I,IAAW,CAClD,MAAM2I,EAASzH,EAAkBC,KAAKzP,GAAKA,EAAEjC,OAAS6Y,GACtD,GAAIK,EAAO,CACTF,EAAYE,EAAMvI,OAClB,KACF,CACF,CAEA,MAAML,EAAiBL,GAAiBqE,KAAqB,IAC7DT,EAAYvZ,KAAK2N,MAAM+Q,EAAY1I,EACrC,CAGA,GAAImI,EAAQ/E,YAAa,CACvB,MAAMyF,EAAKV,EAAQ/E,YACbM,EAAY1Z,KAAKiN,IAAI,EAAG4R,EAAGnF,WAAa,IACxCC,EAAa3Z,KAAKiN,IAAI,EAAG4R,EAAGlF,YAAc,IAG1CmF,EAAa7H,GAAoB4H,EAAGnY,UACpCqY,EAAS7H,GAAgB4H,EAAYD,EAAG/X,MAG9C,IAAIkY,EAAsBhf,KAAKif,IAAIJ,EAAGtF,WAAa,KACnC,UAAZsF,EAAG9O,OACLiP,EAAsBtF,EAAYC,GAGpCN,GAAe7I,OACVqO,GADU,CAEbnY,SAAUoY,EACVhY,KAAMiY,EACNxF,UAAWyF,EACX1F,SAAUtZ,KAAKiN,IAAI,EAAGjN,KAAKif,IAAIJ,EAAGvF,UAAY,IAC9CE,cAAexZ,KAAKiN,IAAI,EAAG4R,EAAGrF,eAAiB,GAC/CC,eAAgBzZ,KAAKif,IAAIJ,EAAGpF,gBAAkBuF,GAAuB,KACrEtF,YACAC,eAEJ,MACEN,GAAenW,GAASsN,EAAA/D,EAAA,CAAA,EACnBvJ,GADmB,CAEtB6M,KAAM0O,EACN/X,SAAU2X,EACVvX,KAAMyX,EACNjF,SAAUtZ,KAAKiN,IAAI,EAAGuR,GACtBjF,UAAWvZ,KAAKif,IAAI1F,GAAa,KACjCE,eAAgBzZ,KAAKif,IAAI1F,GAAa,QAK1C,GAAI4E,EAAQvE,MAAQuC,MAAMC,QAAQ+B,EAAQvE,OAASuE,EAAQvE,KAAKhZ,OAAS,EAAG,CAE1E,MAAMse,EAAgBf,EAAQvE,KAAKvZ,IAAKsH,IACtC,MAAMwX,EAAanf,KAAKiN,IAAI,EAAGtF,EAAE+R,WAAa,IACxC0F,EAAcpf,KAAKiN,IAAI,EAAGtF,EAAEgS,YAAc,IAE1C0F,EAAYpI,GAAoBtP,EAAEjB,UAClC4Y,EAAQpI,GAAgBmI,EAAW1X,EAAEb,MAE3C,IAAIyY,EAAavf,KAAKif,IAAItX,EAAE4R,WAAa,KAIzC,MAHe,UAAX5R,EAAEoI,OACJwP,EAAaJ,EAAaC,GAErB5O,OACF7I,GADE,CAELjB,SAAU2Y,EACVvY,KAAMwY,EACN/F,UAAWgG,EACXjG,SAAUtZ,KAAKiN,IAAI,EAAGjN,KAAKif,IAAItX,EAAE2R,UAAY,IAC7CE,cAAexZ,KAAKiN,IAAI,EAAGtF,EAAE6R,eAAiB,GAC9CC,eAAgBzZ,KAAKif,IAAItX,EAAE8R,gBAAkB8F,GAAc,KAC3D7F,UAAWyF,EACXxF,WAAYyF,MAGhBvF,GAAQqF,EACV,MAEErF,GAAQ,CAAC,CACPxB,GAAI,IACJtI,KAAM0O,EACN/X,SAAU2X,EACVvX,KAAMyX,EACNjF,SAAUtZ,KAAKiN,IAAI,EAAGuR,GACtBhF,cAAe,EACfD,UAAWvZ,KAAKif,IAAI1F,GAAa,KACjCE,eAAgBzZ,KAAKif,IAAI1F,GAAa,KACtCG,UAAW,GACXC,WAAY,KAGlB,CAGA,GAAI3E,EAAcgB,eAAgB,CAChC,MAAMwJ,EAASxK,EAAcgB,eACzBwJ,EAAOC,UAAU1F,GAAmByF,EAAOC,UAC3CD,EAAOE,WAAWzF,GAAoBuF,EAAOE,UACnD,SAAW1K,EAAc2K,MAAQxD,MAAMC,QAAQpH,EAAc2K,MAAO,CAElE,MAAMC,EAAa5K,EAAc2K,KAAKvI,KAAM1V,QAClB,IAAxBiU,GAAiBjU,IAEfke,IACF7F,GAAmB6F,GACnB3F,GAAoB2F,GAExB,CAGA,GAAI5K,EAAc6K,iBAAkB,CAClC,MAAMC,EAAS9K,EAAc6K,iBACI,iBAAtBC,EAAOC,YAEhBC,GAAchgB,KAAKiN,IAAI,IAAMjN,KAAKif,IAAIa,EAAOC,aAAe,IAE5B,kBAAvBD,EAAOG,aAA2BC,GAAeJ,EAAOG,YACrE,CAGIjL,EAAcmL,OAChB3E,GAAQxG,EAAcmL,OAInBnL,EAAsB2G,oBACzBC,GAAuBnP,EAAAA,EAAA,CAAA,EAClBP,IACC8I,EAAsB2G,sBAI5BC,GAAuBnP,KAAKP,KAI9BiJ,EAAS,CAAErO,KAAM,UAAWsZ,QAAS1e,EAAE,4BAA6B,CAAEgE,KAAMsP,EAActP,QAC5F,GACC,CAACsP,IAGJ,MAAO+K,GAAYC,IAAiB9d,EAAAA,SAAS,IACtC+d,GAAaC,IAAkBhe,EAAAA,UAAS,IACxCme,GAAiBC,IAAsBpe,EAAAA,SAAS,KAQjDqe,GAAuBviB,cAAawiB,IACxC,MAAMhZ,EAAUgZ,EAAM5c,OAAOnD,cAC7B,IAAK+G,EAAS,OAAO,KAGrB,IAAIK,EAAQL,EAAQK,MAAM,mCAC1B,GAAIA,EAAO,CACT,MAAM4Y,EAAMxY,WAAWJ,EAAM,IAC7B,IAAKU,MAAMkY,IAAQA,EAAM,EAAG,OAAOA,CACrC,CAIA,GADA5Y,EAAQL,EAAQK,MAAM,wBAClBA,EAAO,CACT,MAAM4Y,EAAMxY,WAAWJ,EAAM,IAC7B,IAAKU,MAAMkY,IAAQA,EAAM,SAAU,EAAIA,CACzC,CAIA,GADA5Y,EAAQL,EAAQK,MAAM,0BAClBA,EAAO,CACT,MAAM6Y,EAAMzY,WAAWJ,EAAM,IACvB8Y,EAAM1Y,WAAWJ,EAAM,IAC7B,IAAKU,MAAMmY,KAASnY,MAAMoY,IAAQA,EAAM,EAAG,OAAOD,EAAMC,CAC1D,CAGA,MAAMC,EAAS3Y,WAAWT,GAC1B,OAAKe,MAAMqY,IAAWA,EAAS,EAAUA,EAElC,MACN,IAGGC,GAA8B7iB,cAAagD,IAC/Csf,GAAmBtf,IAClB,IAGG8f,GAA+B9iB,EAAAA,YAAY,KAC/C,MAAMkL,EAASqX,GAAqBF,IACpC,GAAe,OAAXnX,EAAiB,CACnB,MAAM6X,EAAU/gB,KAAKiN,IAAI,IAAMjN,KAAKkN,IAAI,IAAKhE,IAC7C8W,GAAchgB,KAAK2N,MAAgB,IAAVoT,GAAiB,KAC1CT,GAAmBtY,OAAOhI,KAAK2N,MAAgB,IAAVoT,GAAiB,KACxD,MAEET,GAAmBtY,OAAO+X,MAE3B,CAACM,GAAiBN,GAAYQ,KAG3BS,GAAwBhjB,cAAagD,IACzCgf,GAAchf,GACdsf,GAAmBtY,OAAOhH,KACzB,IAMGigB,GAAatd,EAAAA,QAAQ,IACzBE,GAAYT,OAAOC,GAAoB,UAAfA,EAAEqD,UAAsBoP,OAAO,CAACoL,EAAK7d,IAAM6d,EAAM7d,EAAE6E,OAAQ,GACnF,CAACrE,KAGGsd,GAAcxd,EAAAA,QAAQ,IAC1BE,GAAYT,OAAOC,GAAoB,WAAfA,EAAEqD,UAAuBoP,OAAO,CAACoL,EAAK7d,IAAM6d,EAAM7d,EAAE6E,OAAQ,GACpF,CAACrE,KAGGud,GAAmBzd,EAAAA,QAAQ,IAC/BE,GAAYT,OAAOC,GAAoB,aAAfA,EAAEqD,UAA2BrD,EAAE0Z,iBACpDjH,OAAO,CAACoL,EAAK7d,IAAM6d,EAAO7d,EAAE6E,QAAU7E,EAAE0Z,iBAAmB,GAAK,GACnE,CAAClZ,KAGGwd,GAAc1d,EAAAA,QAAQ,IAC1BE,GAAYiS,OAAO,CAACoL,EAAK7d,IAAM6d,EAAM7d,EAAE6E,OAAQ,GAC/C,CAACrE,KAIGyd,GAAqB3d,EAAAA,QAAQ,KAEjC,MAAMqZ,EAAqC,CACzCrK,UAAW,EAAGc,WAAY,EAAGhB,QAAS,EAAGC,KAAM,EAAGF,OAAQ,EAAGK,OAAQ,EAAGD,SAAU,EAClFc,KAAM,GAAIC,QAAS,GAAIC,QAAS,GAAIC,SAAU,GAAIC,MAAO,GAAIrN,MAAO,IAIhE8a,EAAwC,CAC5C1b,MAAO,EAAGC,OAAQ,EAAG0Q,SAAU,EAAG/P,MAAO,GAIrCyP,EAAUrS,GAAYiS,OAAO,CAACC,EAAK1M,KACvC,MAAMiT,EAAQjT,EAAIiT,OAAS,OAK3B,OAJKvG,EAAIuG,KACPvG,EAAIuG,GAAS,IAEfvG,EAAIuG,GAAO1O,KAAKvE,GACT0M,GACN,CAAA,GAYH,OATqBrJ,OAAOiS,QAAQzI,GACjClS,KAAK,EAAEC,IAAKC,cAAQ,OAAA,OAAA6D,EAAAiV,EAAW/Y,IAAX8D,EAAiB,KAAO,OAAA8O,EAAAmG,EAAW9Y,IAAX2S,EAAiB,MAC7DxW,IAAI,EAAEic,EAAOkF,MAAK,CACjBlF,QACAkF,MAAOA,EAAMxd,KAAK,CAACC,EAAGC,aACnB,OAAA,OAAA6D,EAAAwZ,EAActd,EAAEyC,WAAhBqB,EAA6B,KAAO,OAAA8O,EAAA0K,EAAcrd,EAAEwC,WAAhBmQ,EAA6B,UAKvE,CAAChT,KAGE4d,GAAoBH,GAAmB1gB,OAAS,EAEhD8gB,GAAY/d,EAAAA,QAAQ,IACT,IAAfsd,GAAmB,EAAIjhB,KAAK2N,OAAQwT,GAAcC,IAAoBH,GAAc,KAAQ,GAC5F,CAACA,GAAYE,GAAaC,KAItBO,GAAyBhe,EAAAA,QAAQ,KAErC,GAAyB,UAArByV,GAAYrJ,KACd,OAAO/P,KAAKiN,KAAKmM,GAAYM,WAAa,KAAON,GAAYO,YAAc,IAAK,GAGlF,MAAMiI,EAAS5hB,KAAKif,IAAI7F,GAAYG,WAAa,KAC3CsI,EAAM7hB,KAAKiN,IAAI,EAAGjN,KAAKif,IAAI7F,GAAYE,UAAY,IACzD,OAAOtZ,KAAKiN,IAAI2U,EAASC,EAAK,IAC7B,CAACzI,GAAYG,UAAWH,GAAYE,SAAUF,GAAYrJ,KAAMqJ,GAAYM,UAAWN,GAAYO,aAGhGmI,GAAiBne,EAAAA,QAAQ,KAC7B,MAAMoe,EAAQnI,GAAK9D,OAAO,CAACoL,EAAKvZ,KAE9B,GAAe,UAAXA,EAAEoI,KACJ,OAAOmR,GAAQvZ,EAAE+R,WAAa,KAAO/R,EAAEgS,YAAc,IAKvD,OAAOuH,EAFQlhB,KAAKif,IAAItX,EAAE4R,WAAa,GAC3BvZ,KAAKif,IAAItX,EAAE2R,UAAY,IAElC,GACH,OAAOtZ,KAAKiN,IAAI8U,EAAO,IACtB,CAACnI,KAKEoI,GAAiBre,EAAAA,QAAQ,KAE7B,MAAMse,EAAajiB,KAAKif,IAAI0C,KAA2B,EACjDO,EAAeliB,KAAKif,IAAI6C,KAAmB,EACjD,GAAmB,IAAfG,EAAkB,OAAO,EAC7B,MAAM/J,EAAQgK,EAAeD,EAE7B,OAAOjiB,KAAKiN,IAAI,IAAMjN,KAAK2N,MAAc,IAARuK,GAAe,MAC/C,CAAC4J,GAAgBH,KAGdQ,GAAsBlC,GAAc+B,GAAiBjC,GAG3DphB,EAAAA,UAAU,KACRkb,GAAQ3W,GAAQA,EAAK7C,IAAIgV,UAEvB,GAAiB,UAAbA,EAAItF,KAAkB,OAAOsF,EAEjC,MAAM+M,EAAU,OAAAra,EAAAkO,GAASZ,EAAI3O,gBAAb,EAAAqB,EAAiDqP,KAAKzP,GAAKA,EAAEjC,OAAS2P,EAAIvO,MAC1F,GAAIsb,EAAS,CACX,MAAMC,EAAYriB,KAAK2N,MAAMyU,EAAQ/L,QAAUV,GAAiBqE,KAAqB,MACrF,OAAOxJ,OACF6E,GADE,CAELkE,UAAW8I,EACX5I,eAAgBzZ,KAAK2N,MAAM0U,EAAYhN,EAAImE,gBAE/C,CACA,OAAOnE,MAER,CAAC2E,KAGJrb,EAAAA,UAAU,WAER,GAAyB,UAArBya,GAAYrJ,KAAkB,OAElC,MAAMqS,EAAU,OAAAra,EAAAkO,GAASmD,GAAY1S,gBAArB,EAAAqB,EAAyDqP,KAAKzP,GAAKA,EAAEjC,OAAS0T,GAAYtS,MAC1G,GAAIsb,EAAS,CACX,MAAMC,EAAYriB,KAAK2N,MAAMyU,EAAQ/L,QAAUV,GAAiBmE,KAAoB,MACpFT,GAAenW,GAASsN,EAAA/D,EAAA,CAAA,EACnBvJ,GADmB,CAEtBqW,UAAW8I,EACX5I,eAAgBzZ,KAAK2N,MAAM0U,EAAYnf,EAAKsW,iBAEhD,GACC,CAACM,GAAiBV,GAAYrJ,KAAMqJ,GAAY1S,SAAU0S,GAAYtS,OAGzEnI,EAAAA,UAAU,KACRkb,GAAQ3W,GAAQA,EAAK7C,IAAIgV,UACvB,GAAIA,EAAItF,OAASqJ,GAAYrJ,KAAM,OAAOsF,EAE1C,MAAM/R,EAAUkN,EAAA/D,EAAA,CAAA,EAAK4I,GAAL,CAAUtF,KAAMqJ,GAAYrJ,OAE5C,GAAyB,UAArBqJ,GAAYrJ,KAEdzM,EAAQiW,WAAajW,EAAQoW,WAAa,KAAOpW,EAAQqW,YAAc,IACvErW,EAAQkW,cAAgB,EACxBlW,EAAQmW,eAAiBnW,EAAQiW,cAC5B,CAEL,MAAM6I,EAAU,OAAAra,EAAAkO,GAAS3S,EAAQoD,gBAAjB,EAAAqB,EAAqDqP,KAAKzP,GAAKA,EAAEjC,OAASpC,EAAQwD,MAC9Fsb,IACF9e,EAAQiW,UAAYvZ,KAAK2N,MAAMyU,EAAQ/L,QAAUV,GAAiBqE,KAAqB,MACvF1W,EAAQmW,eAAiBzZ,KAAK2N,MAAMrK,EAAQiW,UAAYjW,EAAQkW,eAEpE,CAEA,OAAOlW,MAER,CAAC8V,GAAYrJ,KAAMiK,KAGtBrb,EAAAA,UAAU,KACR,GAAoB,UAAhB0N,GAAyB,CAC3B,MAAMiW,EAAgB5V,OAAO4J,KAAKpE,IAC7BoQ,EAAcziB,SAASia,KAC1BC,GAAmBuI,EAAc,IAAM,QAEpCA,EAAcziB,SAASma,KAC1BC,GAAoBqI,EAAc,IAAM,OAE5C,KAAO,CACL,MAAMC,EAAiB7V,OAAO4J,KAAKnE,IAC9BoQ,EAAe1iB,SAASia,KAC3BC,GAAmBwI,EAAe,IAAM,UAErCA,EAAe1iB,SAASma,KAC3BC,GAAoBsI,EAAe,IAAM,SAE7C,GACC,CAAClW,KAEJ,MAAMmW,GAAiB7e,EAAAA,QAAQ,IAAM3D,KAAK2N,MAAM0T,GAAcc,IAAsB,CAACd,GAAac,KAG5FM,GAAW9e,EAAAA,QAAQ,IACA,IAAnB6e,GAA6B,EAC1BxiB,KAAK2N,MAAOmU,GAAiBU,GAAkB,KAAQ,GAC7D,CAACV,GAAgBU,KAGdE,GAAuB/e,EAAAA,QAAQ,IACnCE,GAAYxD,IAAIgJ,GAAQmH,OACnBnH,GADmB,CAEtBsZ,gBAAiB3iB,KAAK2N,MAAMtE,EAAInB,OAASia,GAAsB,IAAM,MAEvE,CAACte,GAAase,KAKVS,GAAwBjf,EAAAA,QAAQ,aACpC,IAAKkX,IAAiC,aAAhBpF,GAAO3O,WAA4B,GACzD,MAAM+J,EAAgB,GAGhBgS,EAAahf,GAAYT,OAAOC,GAAoB,UAAfA,EAAEqD,UAE7C,GAA0B,IAAtBmc,EAAWjiB,OAAc,MAAO,GAGpCiiB,EAAWzM,QAAQvQ,IACjB,MAAMid,EAAwB9iB,KAAK2N,MAAM9H,EAAMqC,OAASuN,GAAOkF,WAAawH,GAAsB,IAAM,GACpGW,EAAwB,GAC1BjS,EAAOjD,KAAK,CACVyK,GAAI,QAAQxS,EAAMwS,KAClB3S,KAAMG,EAAMH,KACZgB,SAAU,QACVic,gBAAiBG,MAMvB,MACMC,EADaF,EAAW/M,OAAO,CAACoL,EAAKrb,IAAUqb,EAAMrb,EAAMqC,OAAQ,GAChCuN,GAAOkF,WAC1CqI,EAAwBhjB,KAAK2N,MAAMoV,EAAsBtN,GAAOmF,WAAauH,GAAsB,IAAM,GAC3Ga,EAAwB,GAC1BnS,EAAOjD,KAAK,CACVyK,GAAI,aACJ3S,KAAM,IACNgB,SAAU,SACVic,gBAAiBK,IAQrB,MAAMC,EAAapf,GAChBT,OAAOC,GAAKA,EAAEqC,KAAK7F,SAAS,QAC5BiW,OAAO,CAACoL,EAAK7X,IAAQ6X,EAAM7X,EAAInB,OAAQ,GAGpCgL,EAAuB,OAAAnL,EAAA0N,GAAOvC,sBAAPnL,EAA+B,EAE5D,GAAIkb,EAAa,GAAK/P,EAAuB,EAAG,CAC9C,MAAMgQ,EAAQrf,GAAYuT,KAAK/T,GAAKA,EAAEqC,KAAK7F,SAAS,QAI9CsjB,EAFqBF,GAAc,OAAApM,EAAApB,GAAOxC,iBAAP4D,EAA0B,GAEhB3D,EAEnDrC,EAAOjD,KAAK,CACVyK,GAAI,aACJ3S,YAAMwd,WAAOxd,OAAQ,cACrBgB,SAAU,QACVic,gBAAiB3iB,KAAK2N,MAAMwV,EAAwBhB,GAAsB,IAAM,IAEpF,CAEA,OAAOtR,GACN,CAAChN,GAAa4R,GAAQoF,GAAesH,KAIlCiB,GAAuBzf,EAAAA,QAAQ,aACnC,IAAKkX,IAAiC,aAAhBpF,GAAO3O,KAAqB,OAAO4b,GAEzD,MAAM7R,EAAgB,GAGhBwS,EAAaxf,GAAYT,OAAOC,GAAoB,UAAfA,EAAEqD,UAAsBoP,OAAO,CAACoL,EAAK7X,IAAQ6X,EAAM7X,EAAInB,OAAQ,GACpGob,EAAazf,GAAYT,UAA2B,WAAfC,EAAEqD,UAAoC,MAAXrD,EAAEqC,MAAcoQ,OAAO,CAACoL,EAAK7X,IAAQ6X,EAAM7X,EAAInB,OAAQ,GACvH+a,EAAapf,GAAYT,OAAOC,GAAKA,EAAEqC,KAAK7F,SAAS,QAAQiW,OAAO,CAACoL,EAAK7X,IAAQ6X,EAAM7X,EAAInB,OAAQ,GAIpGqb,EADkBF,EAAa5N,GAAOkF,WACFlF,GAAOmF,WAM3C4I,EAAqBP,GAHH,OAAAlb,EAAA0N,GAAOxC,iBAAPlL,EAA0B,GAK5C0b,EAAkBD,GAJK,OAAA3M,EAAApB,GAAOvC,sBAAP2D,EAA+B,GAOzChT,GAAYT,OAAOC,GAAoB,UAAfA,EAAEqD,UAClC0P,QAAQvQ,IACjB,MAAM6d,EAAmB7d,EAAMqC,OAASuN,GAAOkF,WACzCgJ,EAAkB3jB,KAAK2N,MAA0C,IAAnC9H,EAAMqC,OAASwb,IAA0B,GACzEC,EAAkB,GACpB9S,EAAOjD,KAAK,CACVyK,GAAI,QAAQxS,EAAMwS,KAClB3S,KAAMG,EAAMH,KACZgB,SAAU,QACVwB,OAAQyb,EACRhB,gBAAiB3iB,KAAK2N,MAAMgW,EAAkBxB,GAAsB,IAAM,OAMhF,MAAMyB,EAAkB5jB,KAAK2N,MAA6D,IAAtD2V,EAAatjB,KAAKkN,IAAIoW,EAAYC,KAA0B,GAC5FK,EAAkB,GACpB/S,EAAOjD,KAAK,CACVyK,GAAI,aACJ3S,KAAM,IACNgB,SAAU,SACVwB,OAAQ0b,EACRjB,gBAAiB3iB,KAAK2N,MAAMiW,EAAkBzB,GAAsB,IAAM,KAK9Ete,GAAYT,OAAOC,GAAoB,WAAfA,EAAEqD,UAAoC,MAAXrD,EAAEqC,MAAc0Q,QAAQ/M,IACzEwH,EAAOjD,KAAK4C,OACPnH,GADO,CAEVgP,GAAI,QAAQhP,EAAIgP,KAChBsK,gBAAiB3iB,KAAK2N,MAAMtE,EAAInB,OAASia,GAAsB,IAAM,QAKzEte,GAAYT,OAAOC,KACF,UAAfA,EAAEqD,UACe,WAAfrD,EAAEqD,UAAoC,MAAXrD,EAAEqC,MAC9BrC,EAAEqC,KAAK7F,SAAS,SACjBuD,OAAOC,GAAoB,WAAfA,EAAEqD,UAAuB0P,QAAQ/M,IAC7CwH,EAAOjD,KAAK4C,OACPnH,GADO,CAEVgP,GAAI,QAAQhP,EAAIgP,KAChBsK,gBAAiB3iB,KAAK2N,MAAMtE,EAAInB,OAASia,GAAsB,IAAM,QAOzE,MAAM0B,EAAkB7jB,KAAK2N,MAA+C,IAAxC6V,EAAqBC,IAAyB,GAClF,GAAII,EAAkB,EAAG,CACvB,MAAMX,EAAQrf,GAAYuT,KAAK/T,GAAKA,EAAEqC,KAAK7F,SAAS,QACpDgR,EAAOjD,KAAK,CACVyK,GAAI,aACJ3S,YAAMwd,WAAOxd,OAAQ,cACrBgB,SAAU,QACVwB,OAAQ2b,EACRlB,gBAAiB3iB,KAAK2N,MAAMkW,EAAkB1B,GAAsB,IAAM,IAE9E,CAEA,OAAOtR,GACN,CAAChN,GAAa4R,GAAQoF,GAAesH,GAAqBO,KAEvDoB,GAAkBngB,EAAAA,QAAQ,IAC9Bif,GAAsB9M,OAAO,CAACoL,EAAK7d,IAAM6d,GAAO7d,EAAEsf,iBAAmB,GAAI,GACzE,CAACC,KAGGmB,GAAiBpgB,EAAAA,QAAQ,IAC7Byf,GAAqBtN,OAAO,CAACoL,EAAK7d,IAAM6d,GAAO7d,EAAEsf,iBAAmB,GAAI,GACxE,CAACS,KAIGY,GAAqBrgB,EAAAA,QAAQ,KACjC,MAAMsgB,EAAmB,CAAC,YAAa,UAAW,OAAQ,SAAU,SAAU,WAAY,cACpFC,EAAargB,GAAYuT,KAAK/N,GAAOA,EAAIiT,OAAS2H,EAAiBpkB,SAASwJ,EAAIiT,QACtF,aAAO4H,WAAY5H,QAAS,YAC3B,CAACzY,KAGEsgB,GAA8BxgB,EAAAA,QAAQ,KAC1C,MAAMuY,EAAS,IAAIkI,IAAIvgB,GAAYxD,IAAIgJ,GAAOA,EAAIiT,OAAS,SAC3D,OAAOJ,EAAO5D,KAAO,GAAsB,IAAhB4D,EAAO5D,OAAe4D,EAAOmI,IAAI,SAC3D,CAACxgB,KAGEygB,GAAeN,KAAuBvO,GAAO3O,MACzB,aAAvBkd,IAAqD,aAAhBvO,GAAO3O,KAGzCyd,GAA8B5gB,EAAAA,QAAQ,KAC1C,MAAMqZ,EAAqC,CACzCrK,UAAW,EAAGc,WAAY,EAAGhB,QAAS,EAAGC,KAAM,EAAGF,OAAQ,EAAGK,OAAQ,EAAGD,SAAU,EAClFc,KAAM,GAAIC,QAAS,GAAIC,QAAS,GAAIC,SAAU,GAAIC,MAAO,GAAIrN,MAAO,IAIhE8a,EAAwC,CAC5C1b,MAAO,EAAGC,OAAQ,EAAG0Q,SAAU,EAAG/P,MAAO,GAI3C,GAAI0d,KAAgCtJ,GAAe,CACjD,MAAM3E,EAAUwM,GAAqB5M,OAAO,CAACC,EAAK1M,KAChD,MAAMiT,EAAQjT,EAAIiT,OAAS,OAG3B,OAFKvG,EAAIuG,KAAQvG,EAAIuG,GAAS,IAC9BvG,EAAIuG,GAAO1O,KAAKvE,GACT0M,GACN,CAAA,GAEH,OAAOrJ,OAAOiS,QAAQzI,GACnBlS,KAAK,EAAEC,IAAKC,cAAQ,OAAA,OAAA6D,EAAAiV,EAAW/Y,IAAX8D,EAAiB,KAAO,OAAA8O,EAAAmG,EAAW9Y,IAAX2S,EAAiB,MAC7DxW,IAAI,EAAEic,EAAOkF,MAAK,CACjBlF,QACAkF,MAAOA,EAAMxd,KAAK,CAACC,EAAGC,aACnB,OAAA,OAAA6D,EAAAwZ,EAActd,EAAEyC,WAAhBqB,EAA6B,KAAO,OAAA8O,EAAA0K,EAAcrd,EAAEwC,WAAhBmQ,EAA6B,QAG1E,CAGA,IAAKgE,IAAiC,aAAhBpF,GAAO3O,KAAqB,CAChD,MAAM0d,EAAuB,GAGV9B,GAAqBtf,OAAOC,GAAoB,UAAfA,EAAEqD,UAC3C0P,QAAQvQ,IACbA,EAAM8c,gBAAkB,GAC1B6B,EAAc5W,KAAK,CACjByK,GAAI,YAAYxS,EAAMwS,KACtB3S,KAAMG,EAAMH,KACZgB,SAAU,QACVic,gBAAiB3iB,KAAK2N,MAA8B,GAAxB9H,EAAM8c,iBAAwB,OAM5C,IAAI,IAAIyB,IAAI1B,GAAqBtf,OAAOC,GAAoB,WAAfA,EAAEqD,UAAuBrG,OAASgD,EAAEqC,QACzF0Q,QAAQ1Q,IAClB,MAAMqc,EAAQW,GACXtf,UAA2B,WAAfC,EAAEqD,UAAyBrD,EAAEqC,OAASA,GAClDoQ,OAAO,CAACoL,EAAK7X,IAAQ6X,EAAM7X,EAAIsZ,gBAAiB,GAC/CZ,EAAQ,GACVyC,EAAc5W,KAAK,CACjByK,GAAI,YAAY3S,IAChBA,OACAgB,SAAU,SACVic,gBAAiB3iB,KAAK2N,MAAc,GAARoU,GAAc,OA2BhD,MArBmB,IAAI,IAAIqC,IAAI1B,GAC5Btf,UAA2B,UAAfC,EAAEqD,UAAuC,WAAfrD,EAAEqD,UACxCrG,OAASgD,EAAEqC,QACH0Q,QAAQ1Q,UACjB,MAAM8b,EAAQkB,GAAqBtf,OAAOC,GAAKA,EAAEqC,OAASA,GAAuB,UAAfrC,EAAEqD,UAAuC,WAAfrD,EAAEqD,UACxFqb,EAAQP,EAAM1L,OAAO,CAACoL,EAAK7X,IAAQ6X,EAAM7X,EAAIsZ,gBAAiB,GAChEZ,EAAQ,GACVyC,EAAc5W,KAAK,CACjByK,GAAI,YAAY3S,IAChBA,OACAgB,UAAU,OAAAqB,EAAAyZ,EAAM,SAAN,EAAAzZ,EAAUrB,WAAY,QAChCic,gBAAiB3iB,KAAK2N,MAAc,GAARoU,GAAc,OAMhDyC,EAAcxgB,KAAK,CAACC,EAAGC,aACpB,OAAA,OAAA6D,EAAAwZ,EAActd,EAAEyC,WAAhBqB,EAA6B,KAAO,OAAA8O,EAAA0K,EAAcrd,EAAEwC,WAAhBmQ,EAA6B,MAG7D,CAAC,CAAEyF,MAAO,OAAQkF,MAAOgD,GAClC,CAGA,GAAIF,IAAuC,aAAvBN,GAAmC,CAErD,MAAM9N,EAAUwM,GAAqB5M,OAAO,CAACC,EAAK1M,KAChD,MAAMiT,EAAQjT,EAAIiT,OAAS,OAG3B,OAFKvG,EAAIuG,KAAQvG,EAAIuG,GAAS,IAC9BvG,EAAIuG,GAAO1O,KAAKvE,GACT0M,GACN,CAAA,GAEH,OAAOrJ,OAAOiS,QAAQzI,GACnBlS,KAAK,EAAEC,IAAKC,cAAQ,OAAA,OAAA6D,EAAAiV,EAAW/Y,IAAX8D,EAAiB,KAAO,OAAA8O,EAAAmG,EAAW9Y,IAAX2S,EAAiB,MAC7DxW,IAAI,EAAEic,EAAOkF,MAAK,CACjBlF,QACAkF,MAAOA,EAAMxd,KAAK,CAACC,EAAGC,aACnB,OAAA,OAAA6D,EAAAwZ,EAActd,EAAEyC,WAAhBqB,EAA6B,KAAO,OAAA8O,EAAA0K,EAAcrd,EAAEwC,WAAhBmQ,EAA6B,QAG1E,CAGA,MAAMhG,EAA4C,GAElD,GAAI+R,GAAsBhiB,OAAS,EAAG,CACpC,MAAM6jB,EAAmB,IAAI7B,IAAuB5e,KAAK,CAACC,EAAGC,aAC1D,OAAA,OAAA6D,EAAAwZ,EAActd,EAAEyC,WAAhBqB,EAA6B,KAAO,OAAA8O,EAAA0K,EAAcrd,EAAEwC,WAAhBmQ,EAA6B,MAEpEhG,EAAOjD,KAAK,CACV0O,MAAO7G,GAAO3O,KACd0a,MAAOiD,EAAiBpkB,IAAIgJ,GAAQmH,EAAA/D,EAAA,CAAA,EAAKpD,GAAL,CAAUiT,MAAO7G,GAAO3O,SAEhE,CAEA,MAAM4d,EAAYtB,GAAqBhgB,WAAeiG,EAAIsZ,iBAAmB,GAAK,GAClF,GAAI+B,EAAU9jB,OAAS,EAAG,CACxB,MAAM+jB,EAAaD,EAAU1gB,KAAK,CAACC,EAAGC,aACnC,OAAA,OAAA6D,EAAAwZ,EAActd,EAAEyC,WAAhBqB,EAA6B,KAAO,OAAA8O,EAAA0K,EAAcrd,EAAEwC,WAAhBmQ,EAA6B,MAEpEhG,EAAOjD,KAAK,CACV0O,MAAO,OACPkF,MAAOmD,EAAWtkB,IAAIgJ,GAAQmH,OAAKnH,GAAL,CAAUiT,MAAO,WAEnD,CAEA,OAAOzL,GACN,CAAC6R,GAAsBE,GAAuBQ,GAAsBvI,GAAepF,GAAO3O,KAAMwd,GAAcN,GAAoBG,KAG/HS,GAA6BL,GAA4B3jB,OAAS,EAGlEikB,GAAgBlhB,UAAQ,IArqCP,CAACmhB,IACxB,MAAM3a,EAAQnK,KAAKiN,IAAI6X,EAAiB,GAGxC,MAAO,CAAEC,UAFS5a,EAAQ,GAAK,SAAwB,OAEnC6a,SADH7a,EAAQ,IAAiBA,EAAQ,GAApB,UAAqC,YAkqC/B8a,CAAiBphB,GAAYjD,QAAS,CAACiD,GAAYjD,SAG5D+C,EAAAA,QAAQ,KAAA,CACjC0U,UAAIrD,WAAeqD,KAAM,OACzB3S,KAAMiT,GACN9U,YAAaA,GAAYxD,IAAIgJ,IAAA,CAC3BgP,GAAIhP,EAAIgP,GACR3S,KAAM2D,EAAI3D,KACVgB,SAA2B,aAAjB2C,EAAI3C,SAA0B,MAAQ2C,EAAI3C,SACpDwB,OAAQmB,EAAInB,OACZJ,KAAM,IACNod,iBAAkB7b,EAAI6O,MACtByE,QAA0B,UAAjBtT,EAAI3C,YAGfwV,OAAQ,MAAAlH,OAAA,EAAAA,EAAekH,SACrB,CAAClH,EAAe2D,GAAa9U,KAMjC,MAAMshB,GAAqBnnB,cAAa8I,cACtC,MAAMse,EAAS/S,GAAcvL,IAAS,CAAEjB,MAAO,EAAG0M,MAAO,GAEnDuL,EAAe,OAAA/V,EAAA,MAAA2N,QAAA,EAAAA,GAAgBqI,gBAAhBhW,EAA0BjB,GACzCkX,EAAehL,GAAqBlM,IAAS,CAAEmM,gBAAiB,EAAKC,qBAAsB,GAC3FD,EAAkB,OAAA4D,EAAA,MAAAiH,OAAA,EAAAA,EAAc7K,iBAAd4D,EAAiCmH,EAAa/K,gBAChEC,EAAuB,OAAA8D,EAAA,MAAA8G,OAAA,EAAAA,EAAc5K,sBAAd8D,EAAsCgH,EAAa9K,qBAEhFwH,GAAU,CACR5T,OACA6T,WAAYyK,EAAOvf,MACnB+U,WAAYwK,EAAO7S,MACnBU,kBACAC,yBAEF4H,GAA0B,aAAThU,IAGhB,CAAC4O,KAGE2P,GAAoBrnB,EAAAA,YAAY,CAACsnB,EAAetkB,KACpDqY,GAAenW,YACb,MAAMI,EAAUkN,EAAA/D,EAAA,CAAA,EAAKvJ,GAAL,CAAWoiB,CAACA,GAAQtkB,IAGpC,GAAc,SAAVskB,EACF,GAAc,UAAVtkB,EAEFsC,EAAQiW,WAAajW,EAAQoW,WAAa,KAAOpW,EAAQqW,YAAc,QAClE,CAEL,MAAMyI,EAAU,OAAAra,EAAAkO,GAAS3S,EAAQoD,gBAAjB,EAAAqB,EAAqDqP,KAAK/B,GAAOA,EAAI3P,OAASpC,EAAQwD,MAClGsb,IACF9e,EAAQiW,UAAYvZ,KAAK2N,MAAMyU,EAAQ/L,QAAUV,GAAiBmE,KAAoB,MAE1F,CAIF,GAAc,SAAVwL,GAAqC,QAAjBhiB,EAAQyM,KAAgB,CAC9C,MAAMqS,EAAU,OAAAvL,EAAAZ,GAAS3S,EAAQoD,gBAAjB,EAAAmQ,EAAqDO,KAAK/B,GAAOA,EAAI3P,OAAS1E,GAC1FohB,IACF9e,EAAQiW,UAAYvZ,KAAK2N,MAAMyU,EAAQ/L,QAAUV,GAAiBmE,KAAoB,MAE1F,CAGA,GAAc,aAAVwL,GAAyC,QAAjBhiB,EAAQyM,KAAgB,CAClD,MAAMwV,EAAQtP,GAASjV,IACnB,MAAAukB,OAAA,EAAAA,EAAO3kB,QAAS,IAClB0C,EAAQwD,KAAOye,EAAM,GAAG7f,KACxBpC,EAAQiW,UAAYvZ,KAAK2N,MAAM4X,EAAM,GAAGlP,QAAUV,GAAiBmE,KAAoB,MAE3F,CAYA,MATqB,UAAjBxW,EAAQyM,MAA+B,cAAVuV,GAAmC,eAAVA,IACxDhiB,EAAQiW,WAAajW,EAAQoW,WAAa,IAAMpW,EAAQqW,YAAc,IAInD,QAAjBrW,EAAQyM,MAAkBzM,EAAQkW,cAAgB,IACpDlW,EAAQmW,eAAiBzZ,KAAK2N,MAAMrK,EAAQiW,UAAYjW,EAAQkW,gBAG3DlW,KAER,CAACwW,KAEE0L,GAASxnB,EAAAA,YAAY,aAEzB,MAAMynB,GAAe,OAAA5O,EAAA,OAAA9O,EAAAkO,GAASU,UAAT,EAAA5O,EAA4B,SAA5B,EAAA8O,EAAgCR,SAAU,KACzDqP,EAAmB1lB,KAAK2N,MAAM8X,GAAgB9P,GAAiBqE,KAAqB,MAE1FH,GAAQ3W,GAAQ,IAAIA,EAAM,CACxBmV,GAAIuE,KAAKC,MAAMb,WACfjM,KAAM,MACNrJ,SAAUiQ,GAAiB7P,KAAM8P,GACjC0C,SAAU,EAAGE,cAAe,EAAGD,UAAWmM,EAAkBjM,eAAgBiM,EAC5EhM,UAAW,GAAIC,WAAY,OAE5B,CAACK,GAAkBrD,GAAiBC,GAAgBX,KAEjD0P,GAAY3nB,cAAaqa,IAC7BwB,GAAQ3W,GAAQA,EAAKtC,OAAS,EAAIsC,EAAKE,OAAOuE,GAAKA,EAAE0Q,KAAOA,GAAMnV,IACjE,IAIG0iB,GAAmB5nB,EAAAA,YAAY,KACnC6b,GAAQ,CAAC,CACPxB,GAAI,IACJtI,KAAMqJ,GAAYrJ,KAClBrJ,SAAU0S,GAAY1S,SACtBI,KAAMsS,GAAYtS,KAClBwS,SAAUF,GAAYE,SACtBE,cAAeJ,GAAYI,cAC3BD,UAAWH,GAAYG,UACvBE,eAAgBL,GAAYK,eAC5BC,UAAWN,GAAYM,UACvBC,WAAYP,GAAYO,cAE1BuG,IAAe,IACd,CAAC9G,KAGEyM,GAAsB7nB,EAAAA,YAAY,KACtCic,GAAoBH,KACnB,CAACA,KAGEgM,GAAoB9nB,EAAAA,YAAY,KACpCmc,GAAQ,CACNrT,KAAM,aACNsT,MAAO,GACPC,UAAW,CAAEC,QAAS,IAAKC,WAAY,IAAKC,KAAM,IAClDC,WAAY,CAAEH,QAAS,EAAGC,WAAY,EAAGC,KAAM,MAEhD,IAGGuL,GAAqB/nB,EAAAA,YAAY,KACrC4nB,KACAC,KACAC,KACA9F,GAAc,IACb,CAAC4F,GAAkBC,GAAqBC,KAGrCE,GAAiBhoB,cAAaioB,gBAElC,MAAMC,EAAoBriB,GAAYxD,IAAI,CAACgJ,EAAKgB,KAAA,CAC9CgO,GAAIhP,EAAIgP,IAAM,OAAOuE,KAAKC,SAASxS,IACnC3E,KAAM2D,EAAI3D,KACVwC,OAAQmB,EAAInB,OACZ4U,WAAYzT,EAAI6O,MAChBpQ,KAAM,IACNpB,SAA2B,UAAjB2C,EAAI3C,SAAuB,QACV,WAAjB2C,EAAI3C,SAAwB,SACX,aAAjB2C,EAAI3C,SAA0B,MAAQ,QAChDiW,QAA0B,UAAjBtT,EAAI3C,SACbwU,KAAM7R,EAAI6R,MAAQ,GAClB6B,gBAAiB1T,EAAI0T,gBACrBT,MAAOjT,EAAIiT,OAAS,UAIhB6J,EAAchL,GAAU9a,IAAI,CAACsH,EAAG0C,KAAA,CACpCgO,GAAI1Q,EAAE0Q,IAAM,QAAQuE,KAAKC,SAASxS,IAClC2Q,MAAOrT,EAAEqT,OAAS3Q,EAAM,EACxB+S,YAAazV,EAAE0T,YACfb,KAAM7S,EAAE6S,KACRc,KAAM3T,EAAE2T,QAIJ8K,EAAqB,CACzBpZ,YAAakN,GAAKG,UAAUC,QAC5BqD,kBAAmBzD,GAAKG,UAAUE,WAClCxK,KAAoB,SAAdmK,GAAKpT,KAAkB,OAAuB,aAAdoT,GAAKpT,KAAsB,WAAa,eAC9Euf,YAAY,EACZ3I,KAAMxD,GAAKE,OAAS,SACpBkD,SAAUpD,GAAKG,UAAUG,KAEzBC,WAAYP,GAAKO,WAAWD,KAAO,EAAI,CACrCF,QAASJ,GAAKO,WAAWH,QACzBC,WAAYL,GAAKO,WAAWF,WAC5BC,KAAMN,GAAKO,WAAWD,MACpB,MAGA8L,EAAa,CACjB5gB,KAAMiT,IAAejX,EAAE,kCACvB6kB,OAAQ5N,GACRtM,eACA3F,SAAU,QACV8f,WAAY,eACZC,SAAU7M,GAAK9D,OAAO,CAAC4Q,EAAG/e,IAAM+e,EAAI/e,EAAE2R,SAAU,GAChDqN,SAAU,GACVC,UAAW,GAAK1M,GAAKG,UAAUG,KAAON,GAAKO,WAAWD,KACtD3W,YAAaqiB,EACbjJ,MAAOkJ,EACP5I,aAAc6I,EACd3Q,OAAQ,CACNA,OAAQA,GAAO3O,KACfmX,gBAAiBxI,GAAOkF,WACxBC,WAAYnF,GAAOmF,YAErBsD,UAAW,CACTpX,MAAM,OAAAiB,EAAA6R,GAAK,SAAL,EAAA7R,EAASjB,OAAQ8P,GACvBlR,MAAM,OAAAmR,EAAA+C,GAAK,SAAL,EAAA/C,EAASnQ,WAAYiQ,GAC3B2C,SAAUM,GAAK9D,OAAO,CAAC4Q,EAAG/e,IAAM+e,EAAI/e,EAAE2R,SAAU,GAChDC,UAAW,OAAAvC,EAAA4C,GAAK,WAAL5C,EAASuC,UACpBxJ,MAAM,OAAAgH,EAAA6C,GAAK,SAAL,EAAA7C,EAAShH,OAAQ,MACvBqJ,eACAQ,SAGF5D,eAAgB,CACdyJ,SAAU3F,GACV4F,UAAW1F,IAGb6F,iBAAkB,CAChBE,cACAE,gBAGFnH,OAAQA,GAAOpT,KAAO,CACpBA,KAAMoT,GAAOpT,KACboB,KAAMgS,GAAOhS,KACbkS,IAAKF,GAAOE,UAAO,EACnBC,OAAQH,GAAOG,aAAU,QACvB,EACJ0G,KAAM,CAAC3F,GAAkBvD,GAAchB,GAAO3O,OAAO1D,OAAOwE,SAC5DuY,MAAO5E,GAEPI,uBACAI,cAAea,MAIXiK,EAAWZ,IAAe,MAAAjR,OAAA,EAAAA,EAAeqD,IAC/C,GAAIwO,EACF9R,EAAa8R,EAAUP,GACvBnR,EAAS,CAAErO,KAAM,UAAWsZ,QAAS1e,EAAE,6BAA8B,CAAEgE,KAAMiT,WACxE,CACL,MAAMmO,EAAYtW,OACb8V,GADa,CAEhBjO,GAAI,UAAUuE,KAAKC,QACnBkK,cAAenK,OAEjB9H,EAAUgS,GACV3R,EAAS,CAAErO,KAAM,UAAWsZ,QAAS1e,EAAE,2BAA4B,CAAEgE,KAAMiT,MAC7E,GACC,CAACA,GAAaG,GAAQc,GAAMM,GAAMW,GAAeuI,GAAsBV,GAAsBvH,GAAWI,GAAMvB,GAAkBvE,GAAQkG,GAAqB3G,EAAeF,EAAWC,EAAcI,IAGlM6R,GAAmBhpB,EAAAA,YAAY,KACnC,MAAMipB,GAAetO,IAAejX,EAAE,mCAAmCkC,OAGnEsjB,EAAiBjS,EAAQmC,KAC7B/a,UAAK,OAAA,OAAA0L,EAAA1L,EAAEqJ,WAAF,EAAAqC,EAAQnE,UAAWqjB,GAAe5qB,EAAEgc,MAAO,MAAArD,OAAA,EAAAA,EAAeqD,MAGjE,GAAI6O,EAAgB,CAEHpP,OAAOqP,QACpBzlB,EAAE,sCAAuC,CAAEgE,KAAMuhB,MAKjDjB,GAAekB,EAAe7O,GAGlC,MAEE2N,MAED,CAACrN,GAAa1D,EAAS,MAAAD,OAAA,EAAAA,EAAeqD,GAAI2N,KAGvCoB,GAAqBppB,EAAAA,YAAY,KACrC,MAAMqpB,EAAa,CACjB3hB,KAAMiT,GACNG,OAAQA,GAAOpT,KAAOoT,QAAS,EAC/BwO,YAAA,IAAgB1K,MAAO2K,cACvBC,QAAS,MACTnQ,SAAU,CACR0I,WAAYoC,GACZsF,cAAepG,GACfmB,kBACAlN,YAAa,CACXmK,SAAUrG,GACVsG,UAAW9F,IAEbM,QACAzE,UACAO,eAAgB,CACdyJ,SAAU3F,GACV4F,UAAW1F,KAGf0N,oBAAqB7jB,GAAYxD,IAAIgJ,IAAA,CACnC3D,KAAM2D,EAAI3D,KACVgB,SAAU2C,EAAI3C,SACdwB,OAAQmB,EAAInB,OACZgQ,MAAO7O,EAAI6O,SAEbwK,sBAAuB7H,GAAgBuI,GAAuBV,IAAsBriB,IAAIgJ,IAAA,CACtF3D,KAAM2D,EAAI3D,KACVgB,SAAU2C,EAAI3C,SACdwB,OAAQmB,EAAIsZ,mBAEdC,sBAAuB/H,GAAgB+H,GAAsBviB,IAAIgJ,IAAA,CAC/D3D,KAAM2D,EAAI3D,KACVwC,OAAQmB,EAAIsZ,mBACR,GACNxH,UAAWA,GAAU9a,IAAIsH,IAAA,CACvB0T,YAAa1T,EAAE0T,YACfb,KAAM7S,EAAE6S,KACRc,KAAM3T,EAAE2T,QAEVC,SAGIoM,EAAO,IAAIC,KAAK,CAAC9kB,KAAKW,UAAU4jB,EAAY,KAAM,IAAK,CAAEvgB,KAAM,qBAC/DkS,EAAM6O,IAAIC,gBAAgBH,GAC1B1jB,EAAI3F,SAASypB,cAAc,KACjC9jB,EAAE+jB,KAAOhP,EACT/U,EAAEgkB,SAAW,GAAGtP,IAAe,aAAQ,IAAQiE,MAAO2K,cAAchkB,MAAM,EAAE,WAC5EjF,SAASC,KAAK2pB,YAAYjkB,GAC1BA,EAAEkkB,QACF7pB,SAASC,KAAK6pB,YAAYnkB,GAC1B4jB,IAAIQ,gBAAgBrP,GAEpB7D,EAAS,CAAErO,KAAM,UAAWsZ,QAAS1e,EAAE,kCACtC,CAACiX,GAAaG,GAAQqJ,GAAqBd,GAAamB,GAAgBpJ,GAAaQ,GAAMM,GAAMzE,GAAQqE,GAAiBE,GAAkBnW,GAAagX,GAAeuI,GAAsBV,GAAsBE,GAAuBzH,GAAWI,GAAMpG,IAGzPmT,GAAmBtqB,EAAAA,YAAY,IAAYwL,OAAA,EAAA,KAAA,YAC/C,MAAM+e,EAAwC,CAC5C1iB,MAAOnE,EAAE,4BACToE,OAAQpE,EAAE,6BACVwhB,MAAOxhB,EAAE,4BACTqE,IAAKrE,EAAE,0BACPsE,MAAOtE,EAAE,4BACTwE,MAAOxE,EAAE,4BACTuE,IAAKvE,EAAE,0BACP0E,KAAM1E,EAAE,2BACR+E,MAAO/E,EAAE,6BAGL8mB,EAAkB3N,GAAgBuI,GAAuBV,GAE/D,IAAIviB,EAAO,MAAMwY,OACjBxY,GAAQ,GAAG,IAAIsoB,OAAO,UAGtBtoB,GAAQ,MAAMuB,EAAE,8BAChBvB,GAAQ,KAAKuB,EAAE,gCAAgCygB,OAC/ChiB,GAAQ,KAAKuB,EAAE,6BAA6B2f,SAAkB3f,EAAE,8BAA8B8gB,QAC9FriB,GAAQ,KAAKuB,EAAE,wBAAwBkY,GAAKvZ,IAAIsH,GAAK,GAAGA,EAAEb,QAAQa,EAAE2R,YAAYhZ,KAAK,UACrFH,GAAQ,KAAKuB,EAAE,2BAA2B+U,GAAchB,GAAO3O,YAG3D+T,IAAiB+H,GAAsBhiB,OAAS,IAClDT,GAAQ,MAAMuB,EAAE,0CAA0C+U,GAAchB,GAAO3O,WAC/E8b,GAAsBxM,QAAQ/M,IAC5BlJ,GAAQ,KAAKqU,EAAoBnL,EAAI3D,UAAU2D,EAAIsZ,uBAErDxiB,GAAQ,MAIVA,GAAQ0a,GAAgB,MAAMnZ,EAAE,yCAA2C,MAAMA,EAAE,gCAChE,IAAI,IAAI0iB,IAAIoE,EAAenoB,IAAIgD,GAAKA,EAAEqD,YAC9C0P,QAAQoG,IACjB,MAAMgF,EAAQgH,EAAeplB,OAAOC,GAAKA,EAAEqD,WAAa8V,GACpDgF,EAAM5gB,OAAS,IACjBT,GAAQ,IAAIooB,EAAc/L,IAAQA,OAClCgF,EAAMpL,QAAQ/M,IACZlJ,GAAQ,KAAKqU,EAAoBnL,EAAI3D,UAAU2D,EAAIsZ,0BAIzDxiB,GAAQ,KAGRA,GAAQ,MAAMuB,EAAE,iCAChB,MAAMgnB,EAAWhnB,EAAE,0BAA0BwY,GAAKpT,QAChC,SAAdoT,GAAKpT,KACP3G,GAAQ,KAAKuoB,MAAahnB,EAAE,2BAA2BwY,GAAKG,UAAUC,eAAe5Y,EAAE,8BAA8BwY,GAAKG,UAAUE,iBAAiBL,GAAKG,UAAUG,OAAO9Y,EAAE,oBAE7KvB,GAAQ,KAAKuoB,MAAaxO,GAAKG,UAAUC,cAAcJ,GAAKG,UAAUG,OAAO9Y,EAAE,oBAE7EwY,GAAKO,WAAWD,KAAO,IACzBra,GAAQ,KAAKuB,EAAE,+BAA+BwY,GAAKO,WAAWH,cAAcJ,GAAKO,WAAWD,OAAO9Y,EAAE,qBAEvGvB,GAAQ,KAGRA,GAAQ,MAAMuB,EAAE,iCAChByZ,GAAU/E,QAAQ,CAACzO,EAAGtE,KACpB,IAAI8Z,EAAO,GAAG9Z,EAAI,MAAMoR,EAAqB9M,EAAE0T,eAC3C1T,EAAE6S,OAAM2C,GAAQ,KAAKxV,EAAE6S,OAAO9Y,EAAE,oBAChCiG,EAAE2T,OAAM6B,GAAQ,KAAKxV,EAAE2T,WAC3Bnb,GAAQ,GAAGgd,QAIT5B,KACFpb,GAAQ,QAAQuB,EAAE,yBAAyB6Z,QAG7Cpb,GAAQ,KAAK,IAAIsoB,OAAO,QACxBtoB,GAAQ,GAAGuB,EAAE,qCAAoCkb,MAAO+L,yBAExD,UACQjf,UAAUC,UAAUif,UAAUzoB,GACpCgV,EAAS,CAAErO,KAAM,UAAWsZ,QAAS1e,EAAE,8BACzC,OAASmI,GAEP,MAAM8d,EAAO,IAAIC,KAAK,CAACznB,GAAO,CAAE2G,KAAM,6BAChCkS,EAAM6O,IAAIC,gBAAgBH,GAC1B1jB,EAAI3F,SAASypB,cAAc,KACjC9jB,EAAE+jB,KAAOhP,EACT/U,EAAEgkB,SAAW,GAAGtP,IAAe,aAAQ,IAAQiE,MAAO2K,cAAchkB,MAAM,EAAE,UAC5EjF,SAASC,KAAK2pB,YAAYjkB,GAC1BA,EAAEkkB,QACF7pB,SAASC,KAAK6pB,YAAYnkB,GAC1B4jB,IAAIQ,gBAAgBrP,GACpB7D,EAAS,CAAErO,KAAM,UAAWsZ,QAAS1e,EAAE,mCACzC,CACF,GAAG,CAACiX,GAAawJ,GAAqBd,GAAamB,GAAgB5I,GAAMnE,GAAQoF,GAAe+H,GAAuBQ,GAAsBV,GAAsBxI,GAAMiB,GAAWI,GAAMpG,EAAUX,EAAqBC,EAAsB/S,IAEzOmnB,GAAY7qB,EAAAA,YAAY,CAACqa,EAAYiN,EAAuBtkB,KAChE6Y,GAAQ3W,GAAQA,EAAK7C,IAAIsH,YACvB,GAAIA,EAAE0Q,KAAOA,EAAI,OAAO1Q,EACxB,MAAMrE,EAAUkN,EAAA/D,EAAA,CAAA,EAAK9E,GAAL,CAAQ2d,CAACA,GAAQtkB,IAGjC,GAAc,SAAVskB,EACF,GAAc,UAAVtkB,EAEFsC,EAAQiW,WAAajW,EAAQoW,WAAa,KAAOpW,EAAQqW,YAAc,IACvErW,EAAQkW,cAAgB,EACxBlW,EAAQmW,eAAiBnW,EAAQiW,cAC5B,CAEL,MAAM6I,EAAU,OAAAra,EAAAkO,GAAS3S,EAAQoD,gBAAjB,EAAAqB,EAAqDqP,KAAK/B,GAAOA,EAAI3P,OAASpC,EAAQwD,MAClGsb,IACF9e,EAAQiW,UAAYvZ,KAAK2N,MAAMyU,EAAQ/L,QAAUV,GAAiBqE,KAAqB,MAE3F,CAIF,GAAc,SAAVsL,GAAqC,QAAjBhiB,EAAQyM,KAAgB,CAC9C,MAAMqS,EAAU,OAAAvL,EAAAZ,GAAS3S,EAAQoD,gBAAjB,EAAAmQ,EAAqDO,KAAK/B,GAAOA,EAAI3P,OAAS1E,GAC1FohB,IACF9e,EAAQiW,UAAYvZ,KAAK2N,MAAMyU,EAAQ/L,QAAUV,GAAiBqE,KAAqB,MAE3F,CAGA,GAAc,aAAVsL,GAAyC,QAAjBhiB,EAAQyM,KAAgB,CAClD,MAAMwV,EAAQtP,GAASjV,IACnB,MAAAukB,OAAA,EAAAA,EAAO3kB,QAAS,IAClB0C,EAAQwD,KAAOye,EAAM,GAAG7f,KACxBpC,EAAQiW,UAAYvZ,KAAK2N,MAAM4X,EAAM,GAAGlP,QAAUV,GAAiBqE,KAAqB,MAE5F,CAaA,MAVqB,UAAjB1W,EAAQyM,MAA+B,cAAVuV,GAAmC,eAAVA,IACxDhiB,EAAQiW,WAAajW,EAAQoW,WAAa,IAAMpW,EAAQqW,YAAc,GACtErW,EAAQmW,eAAiBnW,EAAQiW,WAId,QAAjBjW,EAAQyM,MAAkBzM,EAAQkW,cAAgB,IACpDlW,EAAQmW,eAAiBzZ,KAAK2N,MAAMrK,EAAQiW,UAAYjW,EAAQkW,gBAG3DlW,MAER,CAAC0W,MAGG8O,GAAiBC,IAAsB7mB,EAAAA,UAAS,IAChD8mB,GAAUC,IAAe/mB,EAAAA,SAA4B,SAEtDgnB,GAAgBlrB,EAAAA,YAAY,KAChC,MAAMmrB,EAAWnpB,KAAKiN,OAAOpJ,GAAYxD,IAAIgD,GAAKA,EAAE2X,OAAQ,GAAK,EACjED,GAAe7X,GAAQ,IAAIA,EAAM,CAC/BmV,GAAI,GAAGuE,KAAKC,SAAS7c,KAAKopB,SAASpN,SAAS,IAAIqN,OAAO,EAAG,KAC1DrO,MAAOmO,EAAUziB,SAAU,QAASuU,YAAa,KACjDvV,KAAM,GAAIwS,MAAO,EAAGhQ,OAAQ,EAAGgT,KAAM,OAEtC,CAACrX,KAGEylB,GAAmBtrB,cAAaurB,IACpC,MAAMC,EAAaxpB,KAAKiN,OAAOpJ,GAAYxD,IAAIgD,GAAKA,EAAE2X,OAAQ,GAAK,EAC7DyO,EAAiBF,EAAoBlpB,IAAI,CAACgJ,EAAKgB,KAAA,CACnDgO,GAAI,QAAQuE,KAAKC,SAASxS,IAC1B2Q,MAAOwO,EAAanf,EACpB3D,SAAU2C,EAAI3C,SACduU,YAAa,GACbvV,KAAM2D,EAAI3D,KACVwS,MAAO,EACPhQ,OAAQmB,EAAInB,OACZgT,KAAM,MAERH,MAAuB,IAAI7X,KAASumB,IACpCtU,EAAS,CAAErO,KAAM,UAAWsZ,QAAS1e,EAAE,gCAAiC,CAAEyI,MAAOsf,EAAe7oB,YAC/F,CAACiD,GAAasR,IAEXuU,GAAmB1rB,cAAaqa,IACpC0C,MAAuB7X,EAAKE,UAAYC,EAAEgV,KAAOA,KAChD,IAEGsR,GAAmB3rB,EAAAA,YAAY,CAACqa,EAAYiN,EAA8BtkB,KAC9E+Z,GAAe7X,GAAQA,EAAK7C,IAAIgJ,IAC9B,GAAIA,EAAIgP,KAAOA,EAAI,OAAOhP,EAC1B,MAAM/F,EAAUkN,EAAA/D,EAAA,CAAA,EAAKpD,GAAL,CAAUic,CAACA,GAAQtkB,IAGnC,GAFc,aAAVskB,IAAsBhiB,EAAQ2X,YAAc1E,GAAgBvV,IAAU,MAE5D,WAAVskB,EAAoB,CACtB,MAAMzf,EAAQ3C,EAAKE,UAA2B,UAAfC,EAAEqD,UAAsBoP,OAAO,CAAC4Q,EAAGrjB,IAAMqjB,GAAKrjB,EAAEgV,KAAOA,EAAKrX,EAAQqC,EAAE6E,QAAS,GAC1GrC,EAAQ,GAAsB,UAAjBwD,EAAI3C,WACnBpD,EAAQ4U,MAAQlY,KAAK2N,MAAO3M,EAAQ6E,EAAS,KAAQ,GAEzD,CACA,OAAOvC,MAER,IAEGsmB,GAAa5rB,EAAAA,YAAY,KAC7B,MAAMmrB,EAAWnpB,KAAKiN,OAAOkO,GAAU9a,IAAIsH,GAAKA,EAAEqT,OAAQ,GAAK,EAC/DI,MAAqB,IAAIlY,EAAM,CAAEmV,GAAIuE,KAAKC,MAAMb,WAAYhB,MAAOmO,EAAU9N,YAAa,OACzF,CAACF,KAEE0O,GAAgB7rB,cAAaqa,IACjC+C,MAAqBlY,EAAKE,UAAYuE,EAAE0Q,KAAOA,KAC9C,IAEGyR,GAAgB9rB,EAAAA,YAAY,CAACqa,EAAYiN,EAA0BtkB,KACvEoa,MAAqBlY,EAAK7C,IAAIsH,GAAKA,EAAE0Q,KAAOA,EAAK7H,EAAA/D,EAAA,CAAA,EAAK9E,GAAL,CAAQ2d,CAACA,GAAQtkB,IAAU2G,KAC3E,IAGGoiB,GAAc/rB,EAAAA,YAAY,CAACqa,EAAY7a,KAC3C4d,GAAalY,IACX,MAAMiE,EAAQjE,EAAK8mB,UAAUriB,GAAKA,EAAE0Q,KAAOA,GAC3C,QAAIlR,EAAc,OAAOjE,EACzB,GAAkB,OAAd1F,GAAgC,IAAV2J,EAAa,OAAOjE,EAC9C,GAAkB,SAAd1F,GAAwB2J,IAAUjE,EAAKtC,OAAS,EAAG,OAAOsC,EAE9D,MAAM+mB,EAAS,IAAI/mB,GACbgnB,EAA0B,OAAd1sB,EAAqB2J,EAAQ,EAAIA,EAAQ,EAI3D,OAHC8iB,EAAO9iB,GAAQ8iB,EAAOC,IAAc,CAACD,EAAOC,GAAYD,EAAO9iB,IAGzD8iB,EAAO5pB,IAAI,CAACsH,EAAGtE,IAAOmN,EAAA/D,EAAA,CAAA,EAAK9E,GAAL,CAAQqT,MAAO3X,EAAI,QAEjD,IAMH,SACEuD,KAAC,MAAA,CAAIjJ,UAAU,6CAEb0B,SAAA,GAAAuH,KAAC,MAAA,CAAIjJ,UAAU,8FAEb0B,SAAA,GAAAuH,KAAC,MAAA,CAAIjJ,UAAU,0BACb0B,SAAA,GAAAF,IAACpD,EAAA,CAAO4B,UAAU,2BAClBwB,EAAAA,IAAC,QAAA,CACC2H,KAAK,OACL9F,MAAO2X,GACPzX,SAAWjD,GAAM2a,GAAe3a,EAAEiH,OAAOlE,OACzCrD,UAAU,qHACVyD,YAAaM,EAAE,gCAGjBkF,KAAC,MAAA,CAAIjJ,UAAU,wCACb0B,SAAA,CAAAF,EAAAA,IAAC,SAAA,CACCiI,QAAS,IAAMyR,GAAe,SAC9Blb,UAAW,gCACO,UAAhB0O,GACI,sCACA,+CAEN2H,MAAOtS,EAAE,iCAERrC,WAAE,mCAELF,EAAAA,IAAC,SAAA,CACCiI,QAAS,IAAMyR,GAAe,UAC9Blb,UAAW,gCACO,WAAhB0O,GACI,sCACA,+CAEN2H,MAAOtS,EAAE,kCAERrC,WAAE,yCAGPuH,KAAC,MAAA,CAAIjJ,UAAU,gDACb0B,SAAA,CAAAuH,EAAAA,KAAC,SAAA,CACC5F,MAAO8X,GAAOhS,KACd5F,SAAWjD,GAAM8a,GAAUvI,EAAA/D,EAAA,CAAA,EAAKqM,IAAL,CAAahS,KAAM7I,EAAEiH,OAAOlE,SACvDrD,UAAU,0GACVqW,MAAOtS,EAAE,2BAETrC,SAAA,GAAAuH,KAAC,SAAA,CAAO5F,MAAM,UAAU3B,SAAA,CAAA,MAAIqC,EAAE,yCAC9BkF,KAAC,SAAA,CAAO5F,MAAM,OAAO3B,SAAA,CAAA,MAAIqC,EAAE,sCAC3BkF,KAAC,SAAA,CAAO5F,MAAM,OAAO3B,SAAA,CAAA,MAAIqC,EAAE,sCAC3BkF,KAAC,SAAA,CAAO5F,MAAM,UAAU3B,SAAA,CAAA,MAAIqC,EAAE,yCAC9BkF,KAAC,SAAA,CAAO5F,MAAM,WAAW3B,SAAA,CAAA,MAAIqC,EAAE,0CAC/BkF,KAAC,SAAA,CAAO5F,MAAM,SAAS3B,SAAA,CAAA,MAAIqC,EAAE,wCAC7BkF,KAAC,SAAA,CAAO5F,MAAM,QAAQ3B,SAAA,CAAA,MAAIqC,EAAE,wCAE9BvC,EAAAA,IAAC,QAAA,CACC2H,KAAK,OACL9F,MAAO8X,GAAOpT,KACdxE,SAAWjD,GAAM8a,GAAUvI,EAAA/D,EAAA,CAAA,EAAKqM,IAAL,CAAapT,KAAMzH,EAAEiH,OAAOlE,SACvDrD,UAAU,6GACVyD,YAAaM,EAAE,2BACfsS,MAAOtS,EAAE,gDAMfkF,KAAC,MAAA,CAAIjJ,UAAU,0BACb0B,SAAA,CAAAuH,EAAAA,KAAC,SAAA,CACCQ,QAAS,IAAM8Y,IAAgBD,IAC/BtiB,UAAW,0CAAyCsiB,GAAc,8BAAgC,6BAClGjM,MAAqBtS,EAAdue,GAAgB,gCAAqC,mCAE3D5gB,SAAA,CAAA4gB,GAAc9gB,EAAAA,IAAC5C,GAAKoB,UAAU,cAAewB,IAACxC,EAAA,CAAOgB,UAAU,YAChEwB,EAAAA,IAAC,OAAA,CAAKxB,UAAU,UAAW0B,SAAcqC,EAAdue,GAAgB,oBAAyB,8BAEtErZ,KAAC,OAAA,CAAKjJ,UAAU,wBAAyB0B,SAAA,CAAAqC,EAAE,2BAA2B,OACrEue,SAEE,MAAA,CAAItiB,UAAU,gFACb0B,SAAAuH,EAAAA,KAAC,MAAA,CAAIjJ,UAAU,8DAA8D0B,SAAA,CAAA,IACzE8iB,UAKNvb,KAAC,MAAA,CAAIjJ,UAAU,4DACb0B,SAAA,CAAAF,MAAC,UAAOiI,QAAS,IAAM4Z,GAAsBhhB,KAAKiN,IAAI,GAAK8S,GAAa,KAAOpiB,UAAU,uCACvF0B,eAAC5C,EAAA,CAAMkB,UAAU,cAEnBwB,EAAAA,IAAC,QAAA,CACC2H,KAAK,OACL9F,MAAOqf,GACPnf,SAAWjD,GAAM4iB,GAA4B5iB,EAAEiH,OAAOlE,OACtDiG,OAAQ6Z,GACR/Z,UAAY9I,GAAgB,UAAVA,EAAEnC,KAAmBglB,KACvCnjB,UAAU,0CACVyD,YAAaM,EAAE,sCACfsS,MAAOtS,EAAE,uCAEV,SAAA,CAAO0F,QAAS,IAAM4Z,GAAsBhhB,KAAKkN,IAAI,GAAI6S,GAAa,KAAOpiB,UAAU,uCACtF0B,eAAC8qB,EAAA,CAAKxsB,UAAU,kBAIpBsiB,IACA9gB,EAAAA,IAAC,OAAIxB,UAAU,uBACZ0B,UAAC,IAAM,GAAK,EAAG,IAAK,EAAG,IAAK,EAAG,EAAG,GAAGgB,IAAI+pB,GACxCjrB,EAAAA,IAAC,SAAA,CAECiI,QAAS,IAAM4Z,GAAsBoJ,GACrCzsB,UAAW,oDACToiB,KAAeqK,EACX,0BACA,+CAGL/qB,SAAA+qB,EAAI,EAAI,KAAKpqB,KAAK2N,MAAM,EAAEyc,KAAO,IAAIA,KARjCA,WAgBfxjB,KAAC,MAAA,CAAIjJ,UAAU,0BACb0B,SAAA,GAAAuH,KAAC,MAAA,CAAIjJ,UAAU,+EACb0B,SAAA,CAAAuH,OAAC,OAAA,CAAMvH,SAAA,CAAAqC,EAAE,yBAAyB,MAACkF,KAAC,IAAA,CAAEjJ,UAAU,qBAAsB0B,SAAA,CAAAgiB,GAAY,UAClFliB,EAAAA,IAAC,OAAA,CAAKxB,UAAU,gBAAgB0B,SAAA,aAC/B,OAAA,CAAMA,SAAA,CAAAqC,EAAE,0BAA0B,MAACkF,KAAC,IAAA,CAAEjJ,UAAU,qBAAsB0B,SAAA,CAAAmjB,GAAe,UACtFrjB,EAAAA,IAAC,OAAA,CAAKxB,UAAU,gBAAgB0B,SAAA,aAC/B,OAAA,CAAMA,SAAA,CAAAqC,EAAE,0BAA0B,MAACkF,KAAC,IAAA,CAAEjJ,UAAU,OAAQ0B,SAAA,CAAAqiB,GAAU,UACnEviB,EAAAA,IAAC,OAAA,CAAKxB,UAAU,gBAAgB0B,SAAA,aAC/B,OAAA,CAAMA,SAAA,CAAAqC,EAAE,oBAAoB,MAACkF,KAAC,IAAA,CAAEjJ,UAAU,OAAQ0B,SAAA,CAAAyiB,GAAe,UAClE3iB,EAAAA,IAAC,OAAA,CAAKxB,UAAU,gBAAgB0B,SAAA,aAC/B,OAAA,CAAMA,SAAA,CAAAqC,EAAE,yBAAyB,IAACkF,EAAAA,KAAC,IAAA,CAAEjJ,UAAW,SAAQ8kB,GAAW,IAAM,eAAiBA,GAAW,GAAK,kBAAoB,kBAAqBpjB,SAAA,CAAAojB,GAAS,eAE/J7b,KAAC,MAAA,CAAIjJ,UAAU,eACb0B,SAAA,CAAAuH,EAAAA,KAAC,SAAA,CACCQ,QAAS2e,GACTpoB,UAAU,yHACVqW,MAAOtS,EAAE,gCAETrC,SAAA,GAAAF,IAACmV,EAAA,CAAU3W,UAAU,YAAa+D,EAAE,yBAEtCkF,EAAAA,KAAC,SAAA,CACCQ,QAAS4f,GACTrpB,UAAU,iGACVqW,MAAOtS,EAAE,2BAETrC,SAAA,GAAAF,IAACkrB,EAAA,CAAK1sB,UAAU,YAAa+D,EAAE,wBAEjCkF,EAAAA,KAAC,SAAA,CACCQ,QAASkhB,GACT3qB,UAAU,+FACVqW,MAAOtS,EAAE,2BAETrC,SAAA,GAAAF,IAACmrB,EAAA,CAAK3sB,UAAU,YAAa+D,EAAE,wBAEjCkF,EAAAA,KAAC,SAAA,CACCQ,QAASggB,GACTzpB,UAAU,oFACVqW,MAAOtS,EAAE,2BAETrC,SAAA,GAAAF,IAACnD,EAAA,CAAS2B,UAAU,YAAa+D,EAAE,mCAO3CkF,KAAC,MAAA,CAAIjJ,UAAU,8BAEb0B,SAAA,CAAAuH,EAAAA,KAAC,MAAA,CACCjJ,UAAU,kDACVa,MAAO,CAAEuT,MAAOuF,GAAepa,cAI/BmC,SAAA,CAAAF,EAAAA,IAAC4U,GAAA,CACCC,MAAOtS,EAAE,4BACT8M,KAAMrP,EAAAA,IAAC7C,EAAA,CAAOqB,UAAU,YACxBuW,MAAO,GAAGkF,GAAYE,WAAW5X,EAAE,uBAAuBkY,GAAK9D,OAAO,CAAC4Q,EAAG/e,IAAM+e,EAAI/e,EAAE2R,SAAU,KAAK5X,EAAE,sBACvGyS,WAAW,4BACXC,QAASwR,GAETvmB,SAAAuH,EAAAA,KAAC,MAAA,CAAIjJ,UAAU,YAEb0B,SAAA,GAAAuH,KAAC,MAAA,CAAIjJ,UAAU,0BACb0B,SAAA,GAAAuH,KAAC,MAAA,CAAIjJ,UAAU,2CACb0B,SAAA,GAAAuH,KAAC,OAAA,CAAKjJ,UAAU,oCAAoC0B,SAAA,CAAA,MAAIqC,EAAE,iCAE1DkF,KAAC,MAAA,CAAIjJ,UAAU,eACb0B,SAAA,CAAAuH,EAAAA,KAAC,SAAA,CACCQ,QAAS,IAAMie,GAAkB,OAAQ,OACzC1nB,UAAW,iCAAqD,QAArByb,GAAYrJ,KAAiB,yCAA2C,0CACpH1Q,SAAA,CAAA,MAAIqC,EAAE,2BACPkF,EAAAA,KAAC,SAAA,CACCQ,QAAS,IAAMie,GAAkB,OAAQ,SACzC1nB,UAAW,4CAAgE,UAArByb,GAAYrJ,KAAmB,2CAA6C,0CACnI1Q,SAAA,CAAA,MAAIqC,EAAE,mCAKW,QAArB0X,GAAYrJ,MACXnJ,EAAAA,KAAA+K,EAAAA,SAAA,CACEtS,SAAA,GAAAuH,KAAC,MAAA,CAAIjJ,UAAU,kCACb0B,SAAA,CAAAF,EAAAA,IAAC,SAAA,CAAO6B,MAAOoY,GAAY1S,SAAUxF,SAAWjD,GAAMonB,GAAkB,WAAYpnB,EAAEiH,OAAOlE,OAC3FrD,UAAU,4CACT0B,SAAAqN,OAAO4J,KAAKL,IAAU5V,IAAImc,GAAOrd,EAAAA,IAAC,SAAA,CAAiB6B,MAAOwb,EAAMnd,SAAAqV,EAAwB8H,IAA1CA,MAEjDrd,EAAAA,IAAC,SAAA,CAAO6B,MAAOoY,GAAYtS,KAAM5F,SAAWjD,GAAMonB,GAAkB,OAAQpnB,EAAEiH,OAAOlE,OACnFrD,UAAU,4CACT0B,SAAA,OAAAmZ,EAAAvC,GAASmD,GAAY1S,gBAArB,EAAA8R,EAAyDnY,IAAIsH,GAC5DxI,EAAAA,IAAC,SAAA,CAAoB6B,MAAO2G,EAAEjC,KAAOrG,SAAAsV,EAAoBhN,IAA5CA,EAAEjC,cAIrBkB,KAAC,MAAA,CAAIjJ,UAAU,mCACb0B,SAAA,CAAAuH,OAAC,MAAA,CACCvH,SAAA,CAAAF,MAAC,QAAA,CAAMxB,UAAU,8BAA+B0B,SAAAqC,EAAE,2BAClDvC,EAAAA,IAAC,QAAA,CAAM2H,KAAK,SAAS9F,MAAOoY,GAAYE,SACtCpY,SAAWjD,GAAMonB,GAAkB,WAAYzT,SAAS3T,EAAEiH,OAAOlE,QAAU,GAC3ErD,UAAU,qEAEb,MAAA,CACC0B,SAAA,CAAAF,MAAC,QAAA,CAAMxB,UAAU,8BAA+B0B,SAAAqC,EAAE,2BAClDvC,EAAAA,IAAC,QAAA,CAAM2H,KAAK,SAAS9F,MAAOoY,GAAYI,cACtCtY,SAAWjD,GAAMonB,GAAkB,gBAAiBzT,SAAS3T,EAAEiH,OAAOlE,QAAU,GAChFrD,UAAU,qEAEb,MAAA,CACC0B,SAAA,CAAAF,MAAC,QAAA,CAAMxB,UAAU,8BAA+B0B,SAAAqC,EAAE,4BAClDvC,EAAAA,IAAC,QAAA,CAAM2H,KAAK,SAAS9F,MAAOoY,GAAYG,UACtCrY,SAAWjD,GAAMonB,GAAkB,YAAazT,SAAS3T,EAAEiH,OAAOlE,QAAU,GAC5ErD,UAAU,qEAEb,MAAA,CACC0B,SAAA,CAAAF,MAAC,QAAA,CAAMxB,UAAU,8BAA+B0B,SAAAqC,EAAE,iCAClDvC,EAAAA,IAAC,MAAA,CAAIxB,UAAU,qDAAsD0B,YAAYoa,0BAOnE,UAArBL,GAAYrJ,MACXnJ,EAAAA,KAAC,MAAA,CAAIjJ,UAAU,mCACb0B,SAAA,CAAAuH,OAAC,MAAA,CACCvH,SAAA,CAAAF,MAAC,QAAA,CAAMxB,UAAU,8BAA+B0B,SAAAqC,EAAE,wBAClDvC,EAAAA,IAAC,QAAA,CAAM2H,KAAK,SAAS9F,MAAOoY,GAAYM,WAAa,GACnDxY,SAAWjD,GAAMonB,GAAkB,YAAazT,SAAS3T,EAAEiH,OAAOlE,QAAU,GAC5ErD,UAAU,qEAEb,MAAA,CACC0B,SAAA,CAAAF,MAAC,QAAA,CAAMxB,UAAU,8BAA+B0B,SAAAqC,EAAE,iCAClDvC,EAAAA,IAAC,QAAA,CAAM2H,KAAK,SAAS9F,MAAOoY,GAAYO,YAAc,GACpDzY,SAAWjD,GAAMonB,GAAkB,aAAczT,SAAS3T,EAAEiH,OAAOlE,QAAU,GAC7ErD,UAAU,qEAEb,MAAA,CACC0B,SAAA,CAAAF,MAAC,QAAA,CAAMxB,UAAU,8BAA+B0B,SAAAqC,EAAE,0BAClDkF,KAAC,MAAA,CAAIjJ,UAAU,mEACX0B,SAAA,EAAA+Z,GAAYM,WAAa,KAAON,GAAYO,YAAc,IAAI,eAMxE/S,KAAC,MAAA,CAAIjJ,UAAU,wCACZ0B,SAAA,CAAAqC,EAAE,sBAAsB,YAAG,IAAA,CAAGrC,SAAA,CAAqB,UAArB+Z,GAAYrJ,MACtCqJ,GAAYM,WAAa,KAAON,GAAYO,YAAc,IAC3DP,GAAYG,UAAYH,GAAYE,SAAS,aAKrDna,EAAAA,IAAC,OAAIxB,UAAU,oCACb0B,eAACmS,EAAA,CAAY7T,UAAU,gBAIzBiJ,KAAC,MAAA,CAAIjJ,UAAU,YACb0B,SAAA,GAAAuH,KAAC,MAAA,CAAIjJ,UAAU,oCAAoC0B,SAAA,CAAA,MAAIqC,EAAE,gCACxDkY,GAAKvZ,IAAI,CAACgV,EAAKhL,WACdzD,OAAAA,OAAC,MAAA,CAAiBjJ,UAAU,gDAC1B0B,SAAA,GAAAuH,KAAC,MAAA,CAAIjJ,UAAU,2CACb0B,SAAA,GAAAuH,KAAC,MAAA,CAAIjJ,UAAU,0BACb0B,SAAA,GAAAuH,KAAC,OAAA,CAAKjJ,UAAU,oCAAqC0B,SAAA,CAAAqC,EAAE,oBAAoB,IAAE2I,EAAM,OAEnFzD,KAAC,MAAA,CAAIjJ,UAAU,eACb0B,SAAA,CAAAuH,EAAAA,KAAC,SAAA,CACCQ,QAAS,IAAMyhB,GAAUxT,EAAIgD,GAAI,OAAQ,OACzC1a,UAAW,iCAA6C,QAAb0X,EAAItF,KAAiB,yCAA2C,0CAC5G1Q,SAAA,CAAA,MAAIqC,EAAE,2BACPkF,EAAAA,KAAC,SAAA,CACCQ,QAAS,IAAMyhB,GAAUxT,EAAIgD,GAAI,OAAQ,SACzC1a,UAAW,4CAAwD,UAAb0X,EAAItF,KAAmB,2CAA6C,0CAC3H1Q,SAAA,CAAA,MAAIqC,EAAE,mCAGVkY,GAAKhZ,OAAS,GACbzB,EAAAA,IAAC,SAAA,CAAOiI,QAAS,IAAMue,GAAUtQ,EAAIgD,IAAK1a,UAAU,kCAClD0B,eAAC2K,EAAA,CAAErM,UAAU,iBAML,QAAb0X,EAAItF,MACHnJ,EAAAA,KAAA+K,EAAAA,SAAA,CACEtS,SAAA,GAAAuH,KAAC,MAAA,CAAIjJ,UAAU,kCACb0B,SAAA,CAAAF,EAAAA,IAAC,SAAA,CAAO6B,MAAOqU,EAAI3O,SAAUxF,SAAWjD,GAAM4qB,GAAUxT,EAAIgD,GAAI,WAAYpa,EAAEiH,OAAOlE,OACnFrD,UAAU,4CACT0B,SAAAqN,OAAO4J,KAAKL,IAAU5V,IAAImc,GAAOrd,EAAAA,IAAC,SAAA,CAAiB6B,MAAOwb,EAAMnd,SAAAqV,EAAwB8H,IAA1CA,MAEjDrd,EAAAA,IAAC,SAAA,CAAO6B,MAAOqU,EAAIvO,KAAM5F,SAAWjD,GAAM4qB,GAAUxT,EAAIgD,GAAI,OAAQpa,EAAEiH,OAAOlE,OAC3ErD,UAAU,4CACT0B,SAAA,OAAA0I,EAAAkO,GAASZ,EAAI3O,kBAAbqB,EAAiD1H,IAAIsH,GACpDxI,EAAAA,IAAC,SAAA,CAAoB6B,MAAO2G,EAAEjC,KAAOrG,SAAAsV,EAAoBhN,IAA5CA,EAAEjC,cAIrBkB,KAAC,MAAA,CAAIjJ,UAAU,mCACb0B,SAAA,CAAAuH,OAAC,MAAA,CACCvH,SAAA,CAAAF,MAAC,QAAA,CAAMxB,UAAU,8BAA+B0B,SAAAqC,EAAE,2BAClDvC,EAAAA,IAAC,QAAA,CAAM2H,KAAK,SAAS9F,MAAOqU,EAAIiE,SAC9BpY,SAAWjD,GAAM4qB,GAAUxT,EAAIgD,GAAI,WAAYpQ,WAAWhK,EAAEiH,OAAOlE,QAAU,GAC7ErD,UAAU,yDAAyDwf,KAAK,kBAE3E,MAAA,CACC9d,SAAA,CAAAF,MAAC,QAAA,CAAMxB,UAAU,8BAA+B0B,SAAAqC,EAAE,2BAClDvC,EAAAA,IAAC,QAAA,CAAM2H,KAAK,SAAS9F,MAAOqU,EAAImE,cAC9BtY,SAAWjD,GAAM4qB,GAAUxT,EAAIgD,GAAI,gBAAiBzG,SAAS3T,EAAEiH,OAAOlE,QAAU,GAChFrD,UAAU,qEAEb,MAAA,CACC0B,SAAA,CAAAF,MAAC,QAAA,CAAMxB,UAAU,8BAA+B0B,SAAAqC,EAAE,4BAClDvC,EAAAA,IAAC,QAAA,CAAM2H,KAAK,SAAS9F,MAAOqU,EAAIkE,UAC9BrY,SAAWjD,GAAM4qB,GAAUxT,EAAIgD,GAAI,YAAazG,SAAS3T,EAAEiH,OAAOlE,QAAU,GAC5ErD,UAAU,qEAEb,MAAA,CACC0B,SAAA,CAAAF,MAAC,QAAA,CAAMxB,UAAU,8BAA+B0B,SAAAqC,EAAE,iCAClDvC,EAAAA,IAAC,MAAA,CAAIxB,UAAU,qDAAsD0B,WAAIoa,0BAOnE,UAAbpE,EAAItF,MACHnJ,EAAAA,KAAC,MAAA,CAAIjJ,UAAU,mCACb0B,SAAA,CAAAuH,OAAC,MAAA,CACCvH,SAAA,CAAAF,MAAC,QAAA,CAAMxB,UAAU,8BAA+B0B,SAAAqC,EAAE,wBAClDvC,EAAAA,IAAC,QAAA,CAAM2H,KAAK,SAAS9F,MAAOqU,EAAIqE,WAAa,GAC3CxY,SAAWjD,GAAM4qB,GAAUxT,EAAIgD,GAAI,YAAazG,SAAS3T,EAAEiH,OAAOlE,QAAU,GAC5ErD,UAAU,qEAEb,MAAA,CACC0B,SAAA,CAAAF,MAAC,QAAA,CAAMxB,UAAU,8BAA+B0B,SAAAqC,EAAE,iCAClDvC,EAAAA,IAAC,QAAA,CAAM2H,KAAK,SAAS9F,MAAOqU,EAAIsE,YAAc,GAC5CzY,SAAWjD,GAAM4qB,GAAUxT,EAAIgD,GAAI,aAAczG,SAAS3T,EAAEiH,OAAOlE,QAAU,GAC7ErD,UAAU,qEAEb,MAAA,CACC0B,SAAA,CAAAF,MAAC,QAAA,CAAMxB,UAAU,8BAA+B0B,SAAAqC,EAAE,0BAClDkF,KAAC,MAAA,CAAIjJ,UAAU,mEACX0B,SAAA,EAAAgW,EAAIqE,WAAa,KAAOrE,EAAIsE,YAAc,IAAI,eAnFhDtE,EAAIgD,MA0FhBlZ,EAAAA,IAAC,UAAOiI,QAASoe,GAAQ7nB,UAAU,uGAChC0B,SAAAqC,EAAE,2BAELkF,KAAC,MAAA,CAAIjJ,UAAU,mCACZ0B,SAAA,CAAAqC,EAAE,sBAAsB,YAAG,IAAA,CAAGrC,SAAA,CAAAyiB,GAAe,kBAOtD3iB,EAAAA,IAAC4U,GAAA,CACCC,MAAiCtS,EAAV,UAAhB2K,GAA4B,8BAAmC,gCACtEmC,KAAMrP,EAAAA,IAAC0S,EAAA,CAAMlU,UAAU,YACvBsW,aAAa,EACbG,QAASyR,GAETxmB,SAAAuH,EAAAA,KAAC,MAAA,CAAIjJ,UAAU,yBACb0B,SAAA,CAAAuH,OAAC,MAAA,CACCvH,SAAA,CAAAF,MAAC,QAAA,CAAMxB,UAAU,mCAAoC0B,SAAAqC,EAAE,kCACvDvC,EAAAA,IAAC,SAAA,CAAO6B,MAAO8Y,GAAiB5Y,SAAWjD,GAAM8b,GAAmB9b,EAAEiH,OAAOlE,OAC3ErD,UAAU,0CACT0B,SAAgB,UAAhBgN,GACGK,OAAO4J,KAAKpE,IAAwB7R,IAAIsH,GAAKxI,EAAAA,IAAC,SAAA,CAAe6B,MAAO2G,EAAItI,SAAAuV,EAAwBjN,IAAtCA,IAC1D+E,OAAO4J,KAAKnE,IAA8B9R,IAAIsH,GAAKxI,EAAAA,IAAC,SAAA,CAAe6B,MAAO2G,EAAItI,SAAAuV,EAAwBjN,IAAtCA,YAGrE,MAAA,CAAIhK,UAAU,6BACZ0B,SAAgB,UAAhBgN,GACG,QAAQ6F,GAAuB4H,KAAoBnE,GAAiBmE,YACpE,OAAO3H,GAA6B2H,kBAI3C,MAAA,CACCza,SAAA,CAAAF,MAAC,QAAA,CAAMxB,UAAU,mCAAoC0B,SAAAqC,EAAE,mCACvDvC,EAAAA,IAAC,SAAA,CAAO6B,MAAOgZ,GAAkB9Y,SAAWjD,GAAMgc,GAAoBhc,EAAEiH,OAAOlE,OAC7ErD,UAAU,0CACT0B,SAAgB,UAAhBgN,GACGK,OAAO4J,KAAKpE,IAAwB7R,IAAIsH,GAAKxI,EAAAA,IAAC,SAAA,CAAe6B,MAAO2G,EAAItI,SAAAuV,EAAwBjN,IAAtCA,IAC1D+E,OAAO4J,KAAKnE,IAA8B9R,IAAIsH,GAAKxI,EAAAA,IAAC,SAAA,CAAe6B,MAAO2G,EAAItI,SAAAuV,EAAwBjN,IAAtCA,YAGrE,MAAA,CAAIhK,UAAU,6BACZ0B,SAAgB,UAAhBgN,GACG,QAAQ6F,GAAuB8H,KAAqBrE,GAAiBqE,YACrE,OAAO7H,GAA6B6H,gBAQ/B,UAAhB3N,IACClN,EAAAA,IAAC4U,GAAA,CACCC,MAAOtS,EAAE,gCACT8M,KAAMrP,EAAAA,IAACiS,EAAA,CAAazT,UAAU,YAC9BsW,aAAa,EACbC,MAAO,GAAGlU,KAAK2N,MAAA,IAAmB0T,QAAiB3f,EAAE,gCAErDrC,SAAAF,EAAAA,IAACsP,GAAA,CACCrC,YAAaiV,GACb3a,SAA8B,UAApBoT,IAAmD,SAApBA,IAAkD,WAApBA,GAA+B,OAC9E,SAApBA,IAAkD,QAApBA,GAA4B,SACtC,OAApBA,GAA2B,SAC3B,QACJzN,YACsB,SAApByN,GAA6B,UACP,SAApBA,GAA6B,WACT,SAApBA,GAA6B,UACT,SAApBA,GAA6B,UACT,UAApBA,GAA8B,UACV,WAApBA,GAA+B,QACX,SAApBA,GAA6B,iBAC7B,EAEJvM,eAAgBoO,GAChB5M,uBAAwB6M,GACxB5M,SAAS,EACTrR,UAAU,2BAMhBwB,EAAAA,IAAC4U,GAAA,CACCC,MAAOtS,EAAE,qBACT8M,KAAMrP,EAAAA,IAAClD,EAAA,CAAM0B,UAAU,YACvBuW,MAaS,GAZWxS,EAAE,0BAA0BwY,GAAKpT,UACnB,eAAdoT,GAAKpT,MAAyBoT,GAAKE,MAAQ,IAAIF,GAAKE,QAAQ1Y,EAAE,wBAA0B,MAC3E,SAAdwY,GAAKpT,KAClB,GAAGoT,GAAKG,UAAUC,WAAWJ,GAAKG,UAAUE,eAC5C,GAAGL,GAAKG,UAAUC,eACWJ,GAAKG,UAAUG,OAAO9Y,EAAE,kBAEtCwY,GAAKO,WAAWD,KAAO,EACxB,SAAdN,GAAKpT,KACH,MAAMoT,GAAKO,WAAWH,WAAWJ,GAAKO,WAAWF,gBAAgBL,GAAKO,WAAWD,OAAO9Y,EAAE,kBAC1F,MAAMwY,GAAKO,WAAWH,aAAaJ,GAAKO,WAAWD,OAAO9Y,EAAE,kBAC9D,KAGNyS,WAAW,gCACXC,QAAS0R,GAETzmB,SAAAuH,EAAAA,KAAC,MAAA,CAAIjJ,UAAU,YACb0B,SAAA,CAAAF,EAAAA,IAAC,MAAA,CAAIxB,UAAU,eACX0B,SAAA,CAAC,aAAc,OAAQ,YAAsBgB,IAAIyG,GACjD3H,EAAAA,IAAC,SAAA,CAAkBiI,QAAS,IAAM+S,GAAQ3J,OAAK0J,IAAL,CAAWpT,UACnDnJ,UAAW,qCAAoCuc,GAAKpT,OAASA,EAAO,0BAA4B,eAC/FzH,SAAAqC,EAAE,0BAA0BoF,MAFlBA,MAOF,eAAdoT,GAAKpT,MACJF,EAAAA,KAAC,MAAA,CAAIjJ,UAAU,kCACb0B,SAAA,GAAAuH,KAAC,OAAA,CAAKjJ,UAAU,gBAAiB0B,SAAA,CAAAqC,EAAE,4BAA4B,SAC/DvC,IAAC,MAAA,CAAIxB,UAAU,aACZ0B,SAAA,CAAC,EAAG,EAAG,EAAG,EAAG,GAAGgB,IAAI+Z,IACnB,MAAMmQ,EAASrQ,GAAKE,MAAQF,GAAKE,MAAMha,MAAM,KAAKC,IAAIqmB,GAAKA,EAAE9iB,QAAU,GACjE4mB,EAAaD,EAAO1qB,SAASmI,OAAOoS,IAC1C,OACEjb,EAAAA,IAAC,SAAA,CAECiI,QAAS,KACP,IAAIqjB,EAEFA,EADED,EACUD,EAAOnnB,OAAOsnB,GAAKA,IAAM1iB,OAAOoS,IAEhC,IAAImQ,EAAQviB,OAAOoS,IAAQpW,KAAK,CAACC,EAAGC,IAAMymB,OAAO1mB,GAAK0mB,OAAOzmB,IAE3EiW,GAAQ3J,EAAA/D,EAAA,CAAA,EAAKyN,IAAL,CAAWE,MAAOqQ,EAAUnqB,KAAK,UAE3C3C,UAAW,wCAAuC6sB,EAAa,0BAA4B,+CAE1FnrB,SAAA+a,GAZIA,OAiBZF,GAAKE,OAASxT,OAAC,OAAA,CAAKjJ,UAAU,6BAA8B0B,SAAA,CAAA6a,GAAKE,MAAO1Y,EAAE,8BAG/EkF,KAAC,MAAA,CAAIjJ,UAAU,2BACb0B,SAAA,CAAAF,MAAC,MAAA,CAAIxB,UAAU,6CAA8C0B,SAAAqC,EAAE,4BAChD,SAAdwY,GAAKpT,OAEJF,KAAC,MAAA,CAAIjJ,UAAU,2BACb0B,SAAA,CAAAuH,OAAC,MAAA,CAAIvH,SAAA,CAAAF,MAAC,QAAA,CAAMxB,UAAU,wBAAyB0B,SAAAqC,EAAE,0BAC/CvC,EAAAA,IAAC,QAAA,CAAM2H,KAAK,SAAS9F,MAAOkZ,GAAKG,UAAUC,QACzCpZ,SAAWjD,GAAMkc,GAAQ3J,OAAK0J,IAAL,CAAWG,UAAW7J,EAAA/D,EAAA,CAAA,EAAKyN,GAAKG,WAAV,CAAqBC,QAAS1I,SAAS3T,EAAEiH,OAAOlE,QAAU,OACzGrD,UAAU,oEACb,MAAA,CAAI0B,SAAA,CAAAF,MAAC,QAAA,CAAMxB,UAAU,wBAAyB0B,SAAAqC,EAAE,6BAC/CvC,EAAAA,IAAC,QAAA,CAAM2H,KAAK,SAAS9F,MAAOkZ,GAAKG,UAAUE,WACzCrZ,SAAWjD,GAAMkc,GAAQ3J,OAAK0J,IAAL,CAAWG,UAAW7J,EAAA/D,EAAA,CAAA,EAAKyN,GAAKG,WAAV,CAAqBE,WAAY3I,SAAS3T,EAAEiH,OAAOlE,QAAU,OAC5GrD,UAAU,oEACb,MAAA,CAAI0B,SAAA,CAAAF,MAAC,QAAA,CAAMxB,UAAU,wBAAyB0B,SAAAqC,EAAE,0BAC/CvC,EAAAA,IAAC,QAAA,CAAM2H,KAAK,SAAS9F,MAAOkZ,GAAKG,UAAUG,KACzCtZ,SAAWjD,GAAMkc,GAAQ3J,OAAK0J,IAAL,CAAWG,UAAW7J,EAAA/D,EAAA,CAAA,EAAKyN,GAAKG,WAAV,CAAqBG,KAAM5I,SAAS3T,EAAEiH,OAAOlE,QAAU,OACtGrD,UAAU,kEAIhBiJ,KAAC,MAAA,CAAIjJ,UAAU,2BACb0B,SAAA,CAAAuH,OAAC,MAAA,CAAIvH,SAAA,CAAAF,MAAC,QAAA,CAAMxB,UAAU,wBAAyB0B,SAAAqC,EAAE,8BAC/CvC,EAAAA,IAAC,QAAA,CAAM2H,KAAK,SAAS9F,MAAOkZ,GAAKG,UAAUC,QACzCpZ,SAAWjD,IACT,MAAMqd,EAAO1J,SAAS3T,EAAEiH,OAAOlE,QAAU,EACzCmZ,GAAQ3J,EAAA/D,EAAA,CAAA,EAAKyN,IAAL,CAAWG,UAAW7J,EAAA/D,EAAA,CAAA,EAAKyN,GAAKG,WAAV,CAAqBC,QAASgB,EAAMf,WAAYe,QAEhF3d,UAAU,oEACb,MAAA,CAAI0B,SAAA,CAAAF,MAAC,QAAA,CAAMxB,UAAU,wBAAyB0B,SAAAqC,EAAE,0BAC/CvC,EAAAA,IAAC,QAAA,CAAM2H,KAAK,SAAS9F,MAAOkZ,GAAKG,UAAUG,KACzCtZ,SAAWjD,GAAMkc,GAAQ3J,OAAK0J,IAAL,CAAWG,UAAW7J,EAAA/D,EAAA,CAAA,EAAKyN,GAAKG,WAAV,CAAqBG,KAAM5I,SAAS3T,EAAEiH,OAAOlE,QAAU,OACtGrD,UAAU,qEAIpBiJ,KAAC,MAAA,CAAIjJ,UAAU,yBACb0B,SAAA,CAAAF,MAAC,MAAA,CAAIxB,UAAU,+BAAgC0B,SAAAqC,EAAE,6BAClC,SAAdwY,GAAKpT,OAEJF,KAAC,MAAA,CAAIjJ,UAAU,2BACb0B,SAAA,CAAAF,EAAAA,IAAC,QAAA,CAAM2H,KAAK,SAAS9F,MAAOkZ,GAAKO,WAAWH,SAAW,GACrDpZ,SAAWjD,GAAMkc,GAAQ3J,OAAK0J,IAAL,CAAWO,WAAYjK,EAAA/D,EAAA,CAAA,EAAKyN,GAAKO,YAAV,CAAsBH,QAAS1I,SAAS3T,EAAEiH,OAAOlE,QAAU,OAC3GrD,UAAU,iDAAiDyD,YAAaM,EAAE,0BAC5EvC,EAAAA,IAAC,QAAA,CAAM2H,KAAK,SAAS9F,MAAOkZ,GAAKO,WAAWF,YAAc,GACxDrZ,SAAWjD,GAAMkc,GAAQ3J,OAAK0J,IAAL,CAAWO,WAAYjK,EAAA/D,EAAA,CAAA,EAAKyN,GAAKO,YAAV,CAAsBF,WAAY3I,SAAS3T,EAAEiH,OAAOlE,QAAU,OAC9GrD,UAAU,iDAAiDyD,YAAaM,EAAE,6BAC5EvC,EAAAA,IAAC,QAAA,CAAM2H,KAAK,SAAS9F,MAAOkZ,GAAKO,WAAWD,MAAQ,GAClDtZ,SAAWjD,GAAMkc,GAAQ3J,OAAK0J,IAAL,CAAWO,WAAYjK,EAAA/D,EAAA,CAAA,EAAKyN,GAAKO,YAAV,CAAsBD,KAAM5I,SAAS3T,EAAEiH,OAAOlE,QAAU,OACxGrD,UAAU,iDAAiDyD,YAAaM,EAAE,qBAI9EkF,KAAC,MAAA,CAAIjJ,UAAU,2BACb0B,SAAA,CAAAF,EAAAA,IAAC,QAAA,CAAM2H,KAAK,SAAS9F,MAAOkZ,GAAKO,WAAWH,SAAW,GACrDpZ,SAAWjD,IACT,MAAMqd,EAAO1J,SAAS3T,EAAEiH,OAAOlE,QAAU,EACzCmZ,GAAQ3J,EAAA/D,EAAA,CAAA,EAAKyN,IAAL,CAAWO,WAAYjK,EAAA/D,EAAA,CAAA,EAAKyN,GAAKO,YAAV,CAAsBH,QAASgB,EAAMf,WAAYe,QAElF3d,UAAU,iDAAiDyD,YAAaM,EAAE,8BAC5EvC,EAAAA,IAAC,QAAA,CAAM2H,KAAK,SAAS9F,MAAOkZ,GAAKO,WAAWD,MAAQ,GAClDtZ,SAAWjD,GAAMkc,GAAQ3J,OAAK0J,IAAL,CAAWO,WAAYjK,EAAA/D,EAAA,CAAA,EAAKyN,GAAKO,YAAV,CAAsBD,KAAM5I,SAAS3T,EAAEiH,OAAOlE,QAAU,OACxGrD,UAAU,iDAAiDyD,YAAaM,EAAE,2BAQrE,UAAhB2K,IACClN,EAAAA,IAAC4U,GAAA,CACCC,MAAOtS,EAAE,uBACT8M,KAAMrP,EAAAA,IAACyrB,EAAA,CAAMjtB,UAAU,YACvBuW,MAAOxS,EAAEyR,GAAYsC,GAAO3O,OAC5BqN,WAA4B,aAAhBsB,GAAO3O,KAAsB,4BAA8B,8BAEvEzH,SAAAuH,EAAAA,KAAC,MAAA,CAAIjJ,UAAU,YACb0B,SAAA,GAAAF,IAAC,MAAA,CAAIxB,UAAU,yBACZ0B,SAAAqN,OAAOiS,QAAQxL,IAAa9S,IAAI,EAAEvE,EAAKuX,KACtClU,EAAAA,IAAC,SAAA,CAAiBiI,QAAS,IAAM+d,GAAmBrpB,GAClD6B,UAAW,gCAA+B8X,GAAO3O,OAAShL,EAAM,0BAA4B,iCAC3FuD,WAAEgU,IAFQvX,OAOC,gBAAhB2Z,GAAO3O,MAA0C,WAAhB2O,GAAO3O,OACxCF,EAAAA,KAAC,MAAA,CAAIjJ,UAAU,yBACb0B,SAAA,CAAAF,MAAC,MAAA,CAAIxB,UAAU,yCACZ0B,SAAgB,gBAAhBoW,GAAO3O,KAAyB,MAAMpF,EAAE,8BAAgC,MAAMA,EAAE,+BAEnFvC,MAAC,OAAIxB,UAAU,wBACZ0B,SAAgB,mBAATyH,KACJpF,EAAE,+BAAgC,CAAEyP,QAASnR,KAAK2N,MAA+B,IAAzB8H,GAAOxC,mBAC/DvR,EAAE,oCAMK,aAAhB+T,GAAO3O,MAAuC,gBAAhB2O,GAAO3O,MAA0C,WAAhB2O,GAAO3O,QACrEF,KAAC,MAAA,CAAIjJ,UAAU,0BACb0B,SAAA,CAAAF,MAAC,MAAA,CAAIxB,UAAU,4CAA6C0B,SAAAqC,EAAE,oCAC9DkF,KAAC,MAAA,CAAIjJ,UAAU,yBACb0B,SAAA,CAAAuH,OAAC,MAAA,CAAIvH,SAAA,CAAAF,MAAC,QAAA,CAAMxB,UAAU,wBAAyB0B,SAAAqC,EAAE,+BAC/CvC,EAAAA,IAAC,QAAA,CAAM2H,KAAK,SAAS9F,MAAOhB,KAAK2N,MAA0B,IAApB8H,GAAOkF,YAC5CzZ,SAAWjD,GAAMyc,GAAUlK,OAAKiF,IAAL,CAAakF,YAAa1S,WAAWhK,EAAEiH,OAAOlE,QAAU,GAAK,OACxFrD,UAAU,wDAAwDwf,KAAK,iBAC1E,MAAA,CAAI9d,SAAA,CAAAF,MAAC,QAAA,CAAMxB,UAAU,wBAAyB0B,SAAAqC,EAAE,+BAC/CvC,EAAAA,IAAC,QAAA,CAAM2H,KAAK,SAAS9F,MAAOhB,KAAK2N,MAA0B,IAApB8H,GAAOmF,YAC5C1Z,SAAWjD,GAAMyc,GAAUlK,OAAKiF,IAAL,CAAamF,YAAa3S,WAAWhK,EAAEiH,OAAOlE,QAAU,GAAK,OACxFrD,UAAU,wDAAwDwf,KAAK,uBASvFhe,IAAC,MAAA,CAAIxB,UAAU,eACb0B,SAAAuH,EAAAA,KAAC,SAAA,CACCQ,QAASwQ,GACTja,UAAU,+FACVqW,MAAOtS,EAAE,4BAETrC,SAAA,GAAAF,IAACmV,EAAA,CAAU3W,UAAU,YACpB+D,EAAE,oCAMTvC,EAAAA,IAAC5B,EAAA,CACCC,UAAU,aACVC,SAAWqB,GAAUyY,GAAgBD,GAAepa,aAAe4B,GACnEnB,UAAU,wBAIZiJ,KAAC,MAAA,CAAIjJ,UAAU,+CACb0B,SAAA,CAAAF,EAAAA,IAAC,OAAIxB,UAAU,mCACb0B,SAAAuH,EAAAA,KAAC,MAAA,CAAIjJ,UAAU,gCAGb0B,SAAA,GAAAuH,KAAC,MAAA,CAAIjJ,UAAU,0EACb0B,SAAA,GAAAuH,KAAC,MAAA,CAAIjJ,UAAU,kFACb0B,SAAA,GAAAuH,KAAC,OAAA,CAAKjJ,UAAU,kEACd0B,SAAA,GAAAF,IAAC0rB,EAAA,CAASltB,UAAU,YAAa+D,EAAE,oCAErCkF,KAAC,MAAA,CAAIjJ,UAAU,aACb0B,SAAA,CAAAuH,OAAC,UAAOQ,QAAS,IAAM2hB,IAAmB,GAAOprB,UAAU,4DAA4D0B,SAAA,CAAA,MAAIqC,EAAE,6BAC7HvC,MAAC,UAAOiI,QAAS8hB,GAAevrB,UAAU,8DAA+D0B,SAAAqC,EAAE,4CAG9G,MAAA,CAAI/D,UAAU,uBACb0B,SAAAuH,EAAAA,KAAC,QAAA,CAAMjJ,UAAU,SACf0B,SAAA,GAAAF,IAAC,QAAA,CAAMxB,UAAU,0BACf0B,SAAAuH,EAAAA,KAAC,MAAGjJ,UAAW,iBAAiBknB,GAAcG,WAC5C3lB,SAAA,CAAAF,MAAC,KAAA,CAAGxB,UAAU,6BAA8B0B,SAAAqC,EAAE,iCAC7C,KAAA,CAAG/D,UAAU,wBAAyB0B,SAAAqC,EAAE,oCACxC,KAAA,CAAG/D,UAAU,6BAA8B0B,SAAAqC,EAAE,gCAC7C,KAAA,CAAG/D,UAAU,8BAA+B0B,SAAAqC,EAAE,2CAC9C,KAAA,CAAG/D,UAAU,8BAA+B0B,SAAAqC,EAAE,oCAC/CvC,IAAC,KAAA,CAAGxB,UAAU,aAGlBwB,EAAAA,IAAC,QAAA,CAAMxB,UAAWknB,GAAcG,SAC7B3lB,SAAAiiB,GAAmBjhB,IAAI,EAAGic,QAAOkF,SAASsJ,KACzC,MAAMC,EAAY3X,GAAWkJ,IAAUlJ,GAAW3M,MAClD,OACEG,OAACokB,EAAMrZ,SAAN,CAEEtS,SAAA,CAAAoiB,IACCtiB,EAAAA,IAAC,MAAGxB,UAAW,GAAGotB,EAAUzX,WAAWyX,EAAUvX,yBAC/CnU,SAAAF,EAAAA,IAAC,MAAG8rB,QAAS,EAAGttB,UAAW,aAAaotB,EAAUxX,kCAChDlU,SAAAuH,EAAAA,KAAC,OAAA,CAAKjJ,UAAU,0BACd0B,SAAA,GAAAF,IAAC,OAAA,CAAME,WAAUmP,OACjBrP,EAAAA,IAAC,OAAA,CAAME,SAAAqC,EAAEqpB,EAAU1X,cACnBzM,KAAC,OAAA,CAAKjJ,UAAU,qCAAqC0B,SAAA,CAAA,IAAEqC,EAAE,yBAA0B,CAAEyI,MAAOqX,EAAM5gB,SAAU,cAMnH4gB,EAAMnhB,IAAIgJ,IAET,MAAM6hB,EAAkC,UAAhB7e,GACpB,CAAC,OAAQ,aAAc,YAAa,WAAY,UAAW,SAC3D,CAAC,OAAQ,UAAW,WAAY,UAAW,QAAS,SAExD,cACG,KAAA,CAAgB1O,UAAW,6CAA6CknB,GAAcE,YACrF1lB,SAAA,GAAAF,IAAC,KAAA,CAAGxB,UAAU,SACZ0B,SAAAF,EAAAA,IAAC,SAAA,CAAO6B,MAAOqI,EAAI3C,SAAUxF,SAAWjD,GAAM0rB,GAAiBtgB,EAAIgP,GAAI,WAAYpa,EAAEiH,OAAOlE,OAC1FrD,UAAU,+FACT0B,gBAAOsf,QAAQpI,IAAiBlW,IAAI,EAAE8qB,EAAGC,WAAQ,SAAA,CAAepqB,MAAOmqB,EAAI9rB,SAAA+rB,GAAdD,UAGlEhsB,IAAC,KAAA,CAAGxB,UAAU,SACZ0B,SAAAF,EAAAA,IAAC4B,GAAA,CACCC,MAAOqI,EAAI3D,KACXxE,SAAWF,GAAU2oB,GAAiBtgB,EAAIgP,GAAI,OAAQrX,GACtDG,SAAWH,IAET,MAAM2E,EAAOC,EAAmB5E,GAChC,GAAI2E,EAAM,CACRgkB,GAAiBtgB,EAAIgP,GAAI,OAAQrX,GAEjC,MAAMqqB,EAAsC,CAC1CxlB,MAAO,QAASC,OAAQ,SAAUC,IAAK,WACvCC,MAAO,QAASC,IAAK,WAAYC,MAAO,SACxCC,UAAW,QAASC,KAAM,QAASC,UAAW,QAC9CC,IAAK,QAASC,MAAO,QAASC,UAAW,QAASC,MAAO,SAE3DkjB,GAAiBtgB,EAAIgP,GAAI,WAAYgT,EAAY1lB,EAAKe,WAAa,QACrE,GAEFtF,YAAaM,EAAE,qBACf/D,UAAU,gDACV4D,eAAgB,QAGpBpC,IAAC,KAAA,CAAGxB,UAAU,SACZ0B,SAAAF,EAAAA,IAAC,SAAA,CACC6B,MAAOqI,EAAIiT,OAAS,OACpBpb,SAAWjD,GAAM0rB,GAAiBtgB,EAAIgP,GAAI,QAASpa,EAAEiH,OAAOlE,OAC5DrD,UAAU,+FAET0B,SAAA6rB,EAAgB7qB,IAAIirB,IACnB,MAAMC,EAAOnY,GAAWkY,GACxB,SACE1kB,KAAC,SAAA,CAAsB5F,MAAOsqB,EAC3BjsB,SAAA,CAAAksB,EAAK/c,KAAK,IAAE9M,EAAE6pB,EAAKlY,YADTiY,SAOrBnsB,EAAAA,IAAC,KAAA,CAAGxB,UAAU,oDAAqD0B,WAAI6Y,UACvE/Y,IAAC,KAAA,CAAGxB,UAAU,SACZ0B,SAAAF,EAAAA,IAAC,QAAA,CAAM2H,KAAK,SAAS9F,MAAOqI,EAAInB,OAAQhH,SAAWjD,GAAM0rB,GAAiBtgB,EAAIgP,GAAI,SAAUpQ,WAAWhK,EAAEiH,OAAOlE,QAAU,GACxHrD,UAAU,+FAEb,KAAA,CAAGA,UAAU,SACZ0B,SAAAF,EAAAA,IAAC,SAAA,CAAOiI,QAAS,IAAMsiB,GAAiBrgB,EAAIgP,IAAK1a,UAAU,kCACzD0B,SAAAF,EAAAA,IAAC6K,GAAErM,UAAU,sBAtDV0L,EAAIgP,QArBEiE,YAuF/Bnd,MAAC,MAAA,CAAIxB,UAAU,4DACb0B,gBAAC,OAAA,CAAMA,SAAA,CAAAqC,EAAE,sBAAsB,YAAG,IAAA,CAAGrC,SAAA,CAAAgiB,GAAY,iBAKrDza,KAAC,MAAA,CAAIjJ,UAAU,0FACb0B,SAAA,GAAAuH,KAAC,MAAA,CAAIjJ,UAAU,kGACb0B,SAAA,GAAAuH,KAAC,OAAA,CAAKjJ,UAAU,kEACd0B,SAAA,GAAAF,IAACzC,EAAA,CAAeiB,UAAU,YAAa+D,EAAE,mCAElB,IAAxBygB,IAA6Bvb,OAAC,OAAA,CAAKjJ,UAAU,uEAAuE0B,SAAA,CAAA,IAAE8iB,eAExH,MAAA,CAAIxkB,UAAU,uBACb0B,SAAAuH,EAAAA,KAAC,QAAA,CAAMjJ,UAAU,SACf0B,SAAA,GAAAF,IAAC,QAAA,CAAMxB,UAAU,0BACf0B,SAAAuH,EAAAA,KAAC,MAAGjJ,UAAW,iBAAiBknB,GAAcG,WAC5C3lB,SAAA,CAAAF,MAAC,KAAA,CAAGxB,UAAU,sBAAuB0B,SAAAqC,EAAE,iCACtC,KAAA,CAAG/D,UAAU,sBAAuB0B,SAAAqC,EAAE,oCACtC,KAAA,CAAG/D,UAAU,4BAA6B0B,SAAAqC,EAAE,uCAGjDvC,EAAAA,IAAC,QAAA,CAAMxB,UAAWknB,GAAcG,SAC7B3lB,SAAAklB,GAA4BlkB,IAAI,EAAGic,QAAOkF,YACzC,MAAMuJ,EAAY3X,GAAWkJ,IAAUlJ,GAAW3M,MAClD,OACEG,OAACokB,EAAMrZ,SAAN,CAEEtS,SAAA,CAAAulB,IACCzlB,EAAAA,IAAC,MAAGxB,UAAW,GAAGotB,EAAUzX,WAAWyX,EAAUvX,yBAC/CnU,SAAAF,EAAAA,IAAC,MAAG8rB,QAAS,EAAGttB,UAAW,aAAaotB,EAAUxX,kCAChDlU,SAAAuH,EAAAA,KAAC,OAAA,CAAKjJ,UAAU,0BACd0B,SAAA,GAAAF,IAAC,OAAA,CAAME,WAAUmP,OACjBrP,EAAAA,IAAC,OAAA,CAAME,SAAAqC,EAAEqpB,EAAU1X,cACnBzM,KAAC,OAAA,CAAKjJ,UAAU,qCAAqC0B,SAAA,CAAA,IAAEqC,EAAE,yBAA0B,CAAEyI,MAAOqX,EAAM5gB,SAAU,cAMnH4gB,EAAMnhB,IAAKgJ,GACVzC,EAAAA,KAAC,MAAgBjJ,UAAW,4BAA4BknB,GAAcE,YACpE1lB,SAAA,CAAAF,MAAC,MAAGxB,UAAU,qBAAsB0B,SAAAkX,GAAgBlN,EAAI3C,kBACvD,KAAA,CAAG/I,UAAU,OAAQ0B,SAAAmV,EAAoBnL,EAAI3D,QAC9CvG,EAAAA,IAAC,KAAA,CAAGxB,UAAU,sDAAuD0B,WAAIsjB,oBAHlEtZ,EAAIgP,OAfIiE,kBA2B9B,MAAA,CAAI3e,UAAU,4EACb0B,SAAAuH,EAAAA,KAAC,OAAA,CAAKjJ,UAAU,gBAAiB0B,SAAA,CAAAqC,EAAE,sBAAsB,YAAG,IAAA,CAAGrC,SAAA,CAAAW,KAAK2N,MAAMmW,GAAkBC,IAAgB,oBAOpH5kB,EAAAA,IAAC5B,EAAA,CACCC,UAAU,WACVC,SAAWqB,GAAU0Y,GAAsBF,GAAeja,mBAAqByB,GAC/EnB,UAAU,sBAIZiJ,EAAAA,KAAC,MAAA,CACCjJ,UAAU,gEACVa,MAAO,CAAE4Z,OAAQd,GAAeja,oBAEhCgC,SAAA,GAAAuH,KAAC,MAAA,CAAIjJ,UAAU,gFACb0B,SAAA,GAAAuH,KAAC,OAAA,CAAKjJ,UAAU,gEACd0B,SAAA,GAAAF,IAAC3C,EAAA,CAAYmB,UAAU,YAAa+D,EAAE,4BACtCvC,MAAC,QAAKxB,UAAU,yCACb0B,WAAE,4BAA6B,CAAEmsB,QAASrQ,GAAUrF,OAAO,CAAC4Q,EAAG/e,IAAM+e,GAAK/e,EAAE6S,MAAQ,GAAI,UAG7Frb,MAAC,UAAOiI,QAASwiB,GAAYjsB,UAAU,0DAA2D0B,SAAAqC,EAAE,kCAEtGkF,KAAC,MAAA,CAAIjJ,UAAU,mCACb0B,SAAA,CAAAF,MAAC,OAAIxB,UAAU,qCACZ0B,YAAUgB,IAAI,CAACorB,EAAMphB,KACpB,MAAMqhB,EAAWhU,GAAmB+T,EAAKpT,IACnCsT,EAAclQ,KAAqBgQ,EAAKpT,GAAKoT,EAAKpQ,YAAc5G,EAAqBgX,EAAKpQ,aAAe,IAC/G,OACAzU,EAAAA,KAAC,MAAA,CAECjJ,UAAU,yGACVa,MAAO,CAAEotB,SAAUF,EAAS3Z,OAAS,IAAK8Z,SAAU,QAGpDxsB,SAAA,GAAAuH,KAAC,MAAA,CAAIjJ,UAAU,gEACb0B,SAAA,CAAAF,EAAAA,IAAC,SAAA,CACCiI,QAAS,IAAM2iB,GAAY0B,EAAKpT,GAAI,MACpC1a,UAAU,4CACV6D,SAAkB,IAAR6I,EACV2J,MAAOtS,EAAE,uBAETrC,SAAAF,EAAAA,IAACoS,EAAA,CAAU5T,UAAU,cAEvBwB,EAAAA,IAAC,SAAA,CACCiI,QAAS,IAAM2iB,GAAY0B,EAAKpT,GAAI,QACpC1a,UAAU,4CACV6D,SAAU6I,IAAQ8Q,GAAUva,OAAS,EACrCoT,MAAOtS,EAAE,yBAETrC,SAAAF,EAAAA,IAACqS,EAAA,CAAY7T,UAAU,mBAG3BiJ,KAAC,OAAA,CAAKjJ,UAAU,wDAAyD0B,SAAA,CAAAgL,EAAM,EAAE,OAChFoR,KAAqBgQ,EAAKpT,GACzBlZ,EAAAA,IAAC,WAAA,CACC6B,MAAO2qB,EACPzqB,SAAWjD,GAAM6rB,GAAc2B,EAAKpT,GAAI,cAAepa,EAAEiH,OAAOlE,OAChEiG,OAAQ,IAAMyU,GAAoB,MAClCja,WAAS,EACT9D,UAAU,oGACVyD,YAAaM,EAAE,mCACfoqB,KAAM,IAGR3sB,EAAAA,IAAC,MAAA,CACCiI,QAAS,IAAMsU,GAAoB+P,EAAKpT,IACxC1a,UAAU,iEAET0B,YAAeF,EAAAA,IAAC,OAAA,CAAKxB,UAAU,gBAAiB0B,SAAAqC,EAAE,uCAItD+pB,EAAKjR,KACJ5T,OAAC,MAAA,CAAIjJ,UAAU,kGACb0B,SAAA,GAAAF,IAAC4sB,EAAA,CAAMpuB,UAAU,0BACjBwB,EAAAA,IAAC,QAAA,CACC2H,KAAK,SACL9F,MAAOyqB,EAAKjR,KACZtZ,SAAWjD,GAAM6rB,GAAc2B,EAAKpT,GAAI,OAAQzG,SAAS3T,EAAEiH,OAAOlE,QAAU,GAC5ErD,UAAU,yEAEX,OAAA,CAAKA,UAAU,4BAA6B0B,SAAAqC,EAAE,kBAC/CvC,EAAAA,IAAC,SAAA,CACCiI,QAAS,IAAM0iB,GAAc2B,EAAKpT,GAAI,YAAQ,GAC9C1a,UAAU,gGACVqW,MAAOtS,EAAE,2BAETrC,SAAAF,EAAAA,IAAC6K,EAAA,CAAErM,UAAU,qBAIjBwB,EAAAA,IAAC,SAAA,CACCiI,QAAS,IAAM0iB,GAAc2B,EAAKpT,GAAI,OAAQ,GAC9C1a,UAAU,kGACVqW,MAAOtS,EAAE,wBAETrC,SAAAF,EAAAA,IAAC4sB,EAAA,CAAMpuB,UAAU,cAIpB8tB,EAAKnQ,KACJ1U,OAAC,MAAA,CAAIjJ,UAAU,sGACb0B,SAAA,GAAAF,IAACzC,EAAA,CAAeiB,UAAU,0BAC1BwB,EAAAA,IAAC,QAAA,CACC2H,KAAK,SACL9F,MAAOyqB,EAAKnQ,KACZpa,SAAWjD,GAAM6rB,GAAc2B,EAAKpT,GAAI,OAAQzG,SAAS3T,EAAEiH,OAAOlE,QAAU,GAC5ErD,UAAU,yEAEX,OAAA,CAAKA,UAAU,4BAA6B0B,SAAAqC,EAAE,mBAC/CvC,EAAAA,IAAC,SAAA,CACCiI,QAAS,IAAM0iB,GAAc2B,EAAKpT,GAAI,YAAQ,GAC9C1a,UAAU,oGACVqW,MAAOtS,EAAE,2BAETrC,SAAAF,EAAAA,IAAC6K,EAAA,CAAErM,UAAU,qBAIjBwB,EAAAA,IAAC,SAAA,CACCiI,QAAS,IAAM0iB,GAAc2B,EAAKpT,GAAI,OAAQ,IAC9C1a,UAAU,sGACVqW,MAAOtS,EAAE,wBAETrC,SAAAF,EAAAA,IAACzC,EAAA,CAAeiB,UAAU,cAG9BwB,EAAAA,IAAC,SAAA,CAAOiI,QAAS,IAAMyiB,GAAc4B,EAAKpT,IAAK1a,UAAU,oEACvD0B,WAAAF,IAAC6K,EAAA,CAAErM,UAAU,kBAGfwB,EAAAA,IAAC,MAAA,CACCxB,UAAU,8HACVyB,YAAcnB,IACZA,EAAEC,iBACF,MAAM8tB,EAAS/tB,EAAEG,QACX6tB,EAAaP,EAAS3Z,OAAS,IAE/BnT,EAAmBstB,IACvB,MAAMptB,EAAQotB,EAAM9tB,QAAU4tB,EACxBG,EAAWnsB,KAAKiN,IAAI,GAAIjN,KAAKkN,IAAI,IAAK+e,EAAantB,IACzD2Y,GAAmBgU,EAAKpT,GAAI,CAAEtG,MAAOoa,KAGjCptB,EAAgB,KACpBT,SAASW,oBAAoB,YAAaL,GAC1CN,SAASW,oBAAoB,UAAWF,GACxCT,SAASC,KAAKC,MAAMC,OAAS,GAC7BH,SAASC,KAAKC,MAAME,WAAa,IAGnCJ,SAASU,iBAAiB,YAAaJ,GACvCN,SAASU,iBAAiB,UAAWD,GACrCT,SAASC,KAAKC,MAAMC,OAAS,aAC7BH,SAASC,KAAKC,MAAME,WAAa,QAEnCsV,MAAOtS,EAAE,4BAETrC,SAAAF,EAAAA,IAACjD,EAAA,CAAayB,UAAU,2DAjIrB8tB,EAAKpT,UAwIhBzR,KAAC,MAAA,CAAIjJ,UAAU,qCACb0B,SAAA,GAAAuH,KAAC,MAAA,CAAIjJ,UAAU,+BACb0B,SAAA,GAAAuH,KAAC,OAAA,CAAKjJ,UAAU,oCAAoC0B,SAAA,CAAA,MAAIqC,EAAE,wBACzD6Z,IAAQ3U,EAAAA,KAAC,OAAA,CAAKjJ,UAAU,4BAA4B0B,SAAA,CAAA,IAAEqC,EAAE,6BAA8B,CAAEyI,MAAOoR,GAAK3a,SAAU,UAEjHzB,EAAAA,IAAC,WAAA,CACC6B,MAAOua,GACPra,SAAWjD,GAAMud,GAAQvd,EAAEiH,OAAOlE,OAClCI,YAAaM,EAAE,gCACf/D,UAAU,6GACVmuB,KAAM,mBASlB3sB,EAAAA,IAACqJ,GAAA,CACCxG,OAAQ8mB,GACRrgB,QAAS,IAAMsgB,IAAmB,GAClCrgB,SAAU4gB","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10]}