var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,s=(t,n,i)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[n]=i,o=(e,t)=>{for(var n in t||(t={}))r.call(t,n)&&s(e,n,t[n]);if(i)for(var n of i(t))a.call(t,n)&&s(e,n,t[n]);return e},l=(e,i)=>t(e,n(i));import{u as d,R as c,j as m,n as u,r as p,o as g,t as h}from"./index-lWmqd8iX.js";const y="flour",x="liquid",b="fat",v="sugar",f="yeast",j="egg",_="dairy",E={BREAD_FLOUR:{id:"bread_flour",name:"강력분",type:y,protein:12.5,moisture:14,density:.52,alternatives:["all_purpose_flour"],conversionRatio:{all_purpose_flour:1.05}},ALL_PURPOSE_FLOUR:{id:"all_purpose_flour",name:"중력분",type:y,protein:10.5,moisture:14,density:.52,alternatives:["bread_flour","cake_flour"],conversionRatio:{bread_flour:.95,cake_flour:1.1}},CAKE_FLOUR:{id:"cake_flour",name:"박력분",type:y,protein:8.5,moisture:14,density:.48,alternatives:["all_purpose_flour"],conversionRatio:{all_purpose_flour:.9}},WHOLE_WHEAT_FLOUR:{id:"whole_wheat_flour",name:"통밀가루",type:y,protein:13.5,moisture:14,density:.48,absorption:1.3,maxSubstitution:.5},RYE_FLOUR:{id:"rye_flour",name:"호밀가루",type:y,protein:9,moisture:14,density:.5,absorption:1.2,maxSubstitution:.4},WATER:{id:"water",name:"물",type:x,density:1,freezingPoint:0,boilingPoint:100},MILK:{id:"milk",name:"우유",type:x,density:1.03,fat:3.5,protein:3.2,alternatives:["water","soy_milk"],conversionRatio:{water:.87,soy_milk:1}},BUTTER:{id:"butter",name:"버터",type:b,fat:82,water:16,meltingPoint:32,alternatives:["margarine","oil"],conversionRatio:{margarine:1,oil:.8}},OIL:{id:"oil",name:"식용유",type:b,fat:100,density:.92,alternatives:["butter","margarine"],conversionRatio:{butter:1.25,margarine:1.25}},GRANULATED_SUGAR:{id:"granulated_sugar",name:"설탕",type:v,sweetness:100,density:.85,alternatives:["brown_sugar","honey"],conversionRatio:{brown_sugar:1,honey:.75}},BROWN_SUGAR:{id:"brown_sugar",name:"황설탕",type:v,sweetness:97,moisture:3.5,density:.72,alternatives:["granulated_sugar"],conversionRatio:{granulated_sugar:1}},HONEY:{id:"honey",name:"꿀",type:v,sweetness:130,moisture:17,density:1.42,liquidAdjustment:.2},INSTANT_YEAST:{id:"instant_yeast",name:"인스턴트 이스트",type:f,activity:100,alternatives:["active_dry_yeast","fresh_yeast"],conversionRatio:{active_dry_yeast:1.25,fresh_yeast:3}},ACTIVE_DRY_YEAST:{id:"active_dry_yeast",name:"활성 건조 이스트",type:f,activity:80,needsActivation:!0,alternatives:["instant_yeast","fresh_yeast"],conversionRatio:{instant_yeast:.8,fresh_yeast:2.5}},FRESH_YEAST:{id:"fresh_yeast",name:"생이스트",type:f,activity:33,moisture:70,shelfLife:14,alternatives:["instant_yeast","active_dry_yeast"],conversionRatio:{instant_yeast:.33,active_dry_yeast:.4}},WHOLE_EGG:{id:"whole_egg",name:"전란",type:j,averageWeight:50,components:{white:30,yolk:20},protein:12.5,fat:10.5},EGG_WHITE:{id:"egg_white",name:"난백",type:j,averageWeight:30,protein:10.5,foam:!0},EGG_YOLK:{id:"egg_yolk",name:"난황",type:j,averageWeight:20,fat:32,lecithin:!0},SALT:{id:"salt",name:"소금",type:"salt",density:1.2,iodized:!0,strengthenGluten:!0},HEAVY_CREAM:{id:"heavy_cream",name:"생크림",type:_,fat:35,whippable:!0,density:.98},CREAM_CHEESE:{id:"cream_cheese",name:"크림치즈",type:_,fat:33,moisture:55,density:1.1}};function N({ingredients:e=[],onChange:t}){const{t:n}=d();c.useEffect(()=>{0===e.length&&t([{name:"",amount:"",unit:"g",type:"flour"}])},[]);const i=(n,i,r)=>{const a=[...e];a[n]=l(o({},a[n]),{[i]:r}),t(a)},r=(n,i,r)=>{const a="Enter"===n.key,s="Tab"===n.key;if(!a&&!s)return;n.preventDefault();const d=["name","amount","unit","type"],c=d.indexOf(r);let m=i,u=r;if(s?c<d.length-1?u=d[c+1]:(u=d[0],m=i+1):a&&(u=r,m=i+1),m>=e.length){const n=e[e.length-1]||{name:"",amount:"",unit:"g",type:"flour"},i=l(o({},n),{name:"",amount:""});return t([...e,i]),void setTimeout(()=>{const t=document.querySelector(`[data-cell="${e.length}:${u}"]`);t&&t.focus()},0)}const p=document.querySelector(`[data-cell="${m}:${u}"]`);p&&p.focus()},a=t=>{const n=e.filter(e=>"flour"===e.type).reduce((e,t)=>e+(parseFloat(t.amount)||0),0);return 0===n?0:(t/n*100).toFixed(1)};return m.jsxs("div",{children:[m.jsx("datalist",{id:"ingredient-names",children:Object.values(E).map(e=>m.jsx("option",{value:e.name},e.id))}),m.jsxs("table",{className:"w-full text-sm",children:[m.jsx("thead",{children:m.jsxs("tr",{className:"border-b border-bread-300",children:[m.jsx("th",{className:"text-left py-1",children:n("ingredientTable.ingredientName")}),m.jsx("th",{className:"text-left py-1",children:n("ingredientTable.amount")}),m.jsx("th",{className:"text-left py-1",children:n("ingredientTable.unit")}),m.jsx("th",{className:"text-left py-1",children:n("ingredientTable.type")}),m.jsx("th",{className:"text-center py-1",children:"BP%"}),m.jsx("th",{})]})}),m.jsx("tbody",{children:e.map((s,o)=>m.jsxs("tr",{className:"border-b border-bread-100",children:[m.jsx("td",{className:"py-1 pr-2",children:m.jsx("input",{type:"text",value:s.name,onChange:e=>i(o,"name",e.target.value),className:"w-full px-2 py-1 border border-bread-200 rounded text-sm",placeholder:n("ingredientTable.placeholder"),"data-cell":`${o}:name`,onKeyDown:e=>r(e,o,"name"),list:"ingredient-names","aria-label":`${o+1} ${n("ingredientTable.ingredientName")}`})}),m.jsx("td",{className:"py-1 pr-2",children:m.jsx("input",{type:"number",value:s.amount,onChange:e=>i(o,"amount",e.target.value),className:"w-full px-2 py-1 border border-bread-200 rounded text-sm",placeholder:"0","data-cell":`${o}:amount`,onKeyDown:e=>r(e,o,"amount"),"aria-label":`${o+1} ${n("ingredientTable.amount")}`})}),m.jsx("td",{className:"py-1 pr-2",children:m.jsxs("select",{value:s.unit,onChange:e=>i(o,"unit",e.target.value),className:"w-full px-2 py-1 border border-bread-200 rounded text-sm","data-cell":`${o}:unit`,onKeyDown:e=>r(e,o,"unit"),"aria-label":`${o+1} ${n("ingredientTable.unit")}`,children:[m.jsx("option",{value:"g",children:"g"}),m.jsx("option",{value:"ml",children:"ml"}),m.jsx("option",{value:"개",children:n("ingredientTable.piece")}),m.jsx("option",{value:"큰술",children:n("ingredientTable.tbsp")}),m.jsx("option",{value:"작은술",children:n("ingredientTable.tsp")})]})}),m.jsx("td",{className:"py-1 pr-2",children:m.jsxs("select",{value:s.type,onChange:e=>i(o,"type",e.target.value),className:"w-full px-2 py-1 border border-bread-200 rounded text-sm","data-cell":`${o}:type`,onKeyDown:e=>r(e,o,"type"),"aria-label":`${o+1} ${n("ingredientTable.type")}`,children:[m.jsx("option",{value:"flour",children:n("ingredientCategory.flour")}),m.jsx("option",{value:"liquid",children:n("ingredientCategory.liquid")}),m.jsx("option",{value:"fat",children:n("ingredientCategory.fat")}),m.jsx("option",{value:"sugar",children:n("ingredientCategory.sugar")}),m.jsx("option",{value:"salt",children:n("ingredientCategory.salt")}),m.jsx("option",{value:"yeast",children:n("ingredientCategory.yeast")}),m.jsx("option",{value:"egg",children:n("ingredientCategory.egg")}),m.jsx("option",{value:"other",children:n("ingredientCategory.other")})]})}),m.jsxs("td",{className:"py-1 text-center text-bread-600 text-sm",children:[a(parseFloat(s.amount)||0),"%"]}),m.jsx("td",{className:"py-1",children:m.jsx(u,{variant:"danger",size:"small",onClick:()=>(n=>{t(e.filter((e,t)=>t!==n))})(o),children:n("ingredientTable.delete")})})]},o))})]}),m.jsx("div",{className:"mt-2",children:m.jsx(u,{variant:"secondary",size:"small",onClick:()=>{t([...e,{name:"",amount:"",unit:"g",type:"flour"}])},children:n("ingredientTable.addIngredient")})}),m.jsx("div",{className:"mt-2 p-2 bg-bread-100 rounded",children:m.jsxs("div",{className:"text-xs text-bread-700",children:[m.jsxs("p",{children:[m.jsxs("strong",{children:[n("ingredientTable.totalWeight"),":"]})," ",e.reduce((e,t)=>e+(parseFloat(t.amount)||0),0).toFixed(1),"g"]}),m.jsxs("p",{children:[m.jsxs("strong",{children:[n("ingredientTable.flourTotal"),":"]})," ",e.filter(e=>"flour"===e.type).reduce((e,t)=>e+(parseFloat(t.amount)||0),0).toFixed(1),"g"]}),m.jsxs("p",{children:[m.jsxs("strong",{children:[n("ingredientTable.hydration"),":"]})," ",(()=>{const t=e.filter(e=>"flour"===e.type).reduce((e,t)=>e+(parseFloat(t.amount)||0),0),n=e.filter(e=>"liquid"===e.type).reduce((e,t)=>e+(parseFloat(t.amount)||0),0);return t>0?(n/t*100).toFixed(1):0})(),"%"]})]})})]})}function w({recipe:e,onSave:t,onCancel:n}){const{t:i}=d(),[r,a]=p.useState({name:"",description:"",category:"bread",method:"straight",servings:1,ingredients:[],instructions:[],notes:""});p.useEffect(()=>{e&&a(e)},[e]);const s=(e,t)=>{a(n=>l(o({},n),{[e]:t}))};return m.jsxs("div",{className:"max-w-5xl mx-auto",children:[m.jsxs("div",{className:"card mb-3",children:[m.jsx("h2",{className:"text-base font-semibold mb-2",children:i("components.recipeEditor.recipeInfo")}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[m.jsx(g,{label:i("components.recipeEditor.recipeName"),value:r.name,onChange:e=>s("name",e.target.value),placeholder:i("components.recipeEditor.recipeNamePlaceholder"),required:!0}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:i("components.recipeEditor.category")}),m.jsxs("select",{value:r.category,onChange:e=>s("category",e.target.value),className:"w-full px-3 py-2 border border-bread-300 rounded-md focus:outline-none focus:ring-2 focus:ring-bread-400",children:[m.jsx("option",{value:"bread",children:i("components.recipeEditor.categories.bread")}),m.jsx("option",{value:"cake",children:i("components.recipeEditor.categories.cake")}),m.jsx("option",{value:"cookie",children:i("components.recipeEditor.categories.cookie")}),m.jsx("option",{value:"pastry",children:i("components.recipeEditor.categories.pastry")})]})]})]}),m.jsxs("div",{className:"mt-3",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:i("components.recipeEditor.method")}),m.jsxs("select",{value:r.method,onChange:e=>s("method",e.target.value),className:"w-full px-3 py-2 border border-bread-300 rounded-md focus:outline-none focus:ring-2 focus:ring-bread-400",children:[m.jsx("option",{value:"straight",children:i("components.recipeEditor.methods.straight")}),m.jsx("option",{value:"sponge",children:i("components.recipeEditor.methods.sponge")}),m.jsx("option",{value:"poolish",children:i("components.recipeEditor.methods.poolish")}),m.jsx("option",{value:"biga",children:i("components.recipeEditor.methods.biga")}),m.jsx("option",{value:"coldFermentation",children:i("components.recipeEditor.methods.coldFermentation")}),m.jsx("option",{value:"noTime",children:i("components.recipeEditor.methods.noTime")})]})]}),m.jsxs("div",{className:"mt-3",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:i("components.recipeEditor.description")}),m.jsx("textarea",{value:r.description,onChange:e=>s("description",e.target.value),rows:2,className:"w-full px-3 py-2 border border-bread-300 rounded-md focus:outline-none focus:ring-2 focus:ring-bread-400",placeholder:i("components.recipeEditor.descriptionPlaceholder")})]})]}),m.jsxs("div",{className:"card mb-3",children:[m.jsx("h3",{className:"text-base font-semibold mb-2",children:i("components.recipeEditor.ingredients")}),m.jsx(N,{ingredients:r.ingredients,onChange:e=>{a(t=>l(o({},t),{ingredients:e}))}})]}),m.jsxs("div",{className:"card mb-3",children:[m.jsx("h3",{className:"text-base font-semibold mb-2",children:i("components.recipeEditor.instructions")}),m.jsxs("div",{className:"space-y-2",children:[r.instructions.map((e,t)=>m.jsxs("div",{className:"flex gap-2",children:[m.jsxs("span",{className:"text-bread-600 font-medium",children:[t+1,"."]}),m.jsx("input",{value:e,onChange:e=>{const n=[...r.instructions];n[t]=e.target.value,s("instructions",n)},className:"flex-1 px-3 py-2 border border-bread-300 rounded-md focus:outline-none focus:ring-2 focus:ring-bread-400"}),m.jsx(u,{variant:"danger",size:"small",onClick:()=>{const e=r.instructions.filter((e,n)=>n!==t);s("instructions",e)},children:i("common.delete")})]},t)),m.jsx(u,{variant:"secondary",size:"small",onClick:()=>{s("instructions",[...r.instructions,""])},children:i("components.recipeEditor.addStep")})]})]}),m.jsxs("div",{className:"card mb-3",children:[m.jsx("h3",{className:"text-base font-semibold mb-2",children:i("components.recipeEditor.notes")}),m.jsx("textarea",{value:r.notes,onChange:e=>s("notes",e.target.value),rows:3,className:"w-full px-3 py-2 border border-bread-300 rounded-md focus:outline-none focus:ring-2 focus:ring-bread-400",placeholder:i("components.recipeEditor.notesPlaceholder")})]}),m.jsxs("div",{className:"flex justify-end gap-3",children:[m.jsx(u,{size:"small",variant:"secondary",onClick:()=>{h.warning(i("components.recipeEditor.toast.unsavedWarning"),{duration:5e3,action:{label:i("components.recipeEditor.toast.continue"),onClick:()=>{n()}}})},children:i("common.cancel")}),m.jsx(u,{size:"small",onClick:()=>{if(!r.name||""===r.name.trim())return void h.warning(i("components.recipeEditor.toast.nameRequired"));if(!r.ingredients||0===r.ingredients.length)return void h.warning(i("components.recipeEditor.toast.ingredientRequired"));const n=r.ingredients.filter(e=>e.name&&""!==e.name.trim()&&e.amount&&parseFloat(e.amount)>0);if(0===n.length)return void h.warning(i("components.recipeEditor.toast.validIngredientRequired"));const a=l(o({},r),{ingredients:n,id:(null==e?void 0:e.id)||Date.now().toString(),updatedAt:(new Date).toISOString()});t(a),h.success(i("components.recipeEditor.toast.saved"))},children:i("common.save")})]})]})}export{w as default};
//# sourceMappingURL=RecipeEditor.jsx-t4rvM_rh.js.map
