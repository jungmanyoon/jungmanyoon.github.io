var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,i=(t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,l=(e,t)=>{for(var s in t||(t={}))r.call(t,s)&&i(e,s,t[s]);if(a)for(var s of a(t))n.call(t,s)&&i(e,s,t[s]);return e},o=(e,a)=>t(e,s(a)),c=(e,t,s)=>new Promise((a,r)=>{var n=e=>{try{l(s.next(e))}catch(t){r(t)}},i=e=>{try{l(s.throw(e))}catch(t){r(t)}},l=e=>e.done?a(e.value):Promise.resolve(e.value).then(n,i);l((s=s.apply(e,t)).next())});import{c as d,u as m,e as u,r as x,D as g,j as h,P as p,l as b,X as y,h as f,k as j,T as v,p as N,I as w,C as k,q as C,v as F,w as K,R as S,x as P,y as T,S as L,a as D,z as R,t as I,A as M,E as q,F as $,G as O,H as _,L as A,U as V,J as z,K as E}from"./index-BJn_NRde.js";import{C as U,c as H,D as W,a as Z,R as B,T as G,b as J,U as Y}from"./chunk-CzME99Jf.js";import{C as Q}from"./chunk-BQxlp0g-.js";import{F as X}from"./chunk-Ck0dx51x.js";import{A as ee,S as te}from"./chunk-EJJNtOiY.js";
/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=d("apple",[["path",{d:"M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z",key:"3s7exb"}],["path",{d:"M10 2c1 .5 2 2 2 5",key:"fcco2y"}]]),ae=d("beaker",[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]]),re=d("box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),ne=d("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),ie=d("coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]),le=d("cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]),oe=d("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ce=d("flask-conical",[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]]),de=d("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),me=d("hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]),ue=d("hard-drive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),xe=d("leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]),ge=d("mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]]),he=d("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),pe=d("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),be=d("settings-2",[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]),ye=d("snowflake",[["path",{d:"m10 20-1.25-2.5L6 18",key:"18frcb"}],["path",{d:"M10 4 8.75 6.5 6 6",key:"7mghy3"}],["path",{d:"m14 20 1.25-2.5L18 18",key:"1chtki"}],["path",{d:"m14 4 1.25 2.5L18 6",key:"1b4wsy"}],["path",{d:"m17 21-3-6h-4",key:"15hhxa"}],["path",{d:"m17 3-3 6 1.5 3",key:"11697g"}],["path",{d:"M2 12h6.5L10 9",key:"kv9z4n"}],["path",{d:"m20 10-1.5 2 1.5 2",key:"1swlpi"}],["path",{d:"M22 12h-6.5L14 15",key:"1mxi28"}],["path",{d:"m4 10 1.5 2L4 14",key:"k9enpj"}],["path",{d:"m7 21 3-6-1.5-3",key:"j8hb9u"}],["path",{d:"m7 3 3 6h4",key:"1otusx"}]]),fe=d("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),je=d("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),ve=d("thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]),Ne=d("timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),we=d("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);class ke{static calculateRoundPanVolume(e,t){const s=e/2;return Math.PI*s*s*t}static calculateSquarePanVolume(e,t,s){return e*t*s}static calculateLoafPanVolume(e,t,s,a){return(e+t)/2*s*a}static calculateChiffonPanVolume(e,t,s){return this.calculateRoundPanVolume(e,s)-this.calculateRoundPanVolume(t,s)}static calculatePanVolume(e){const{type:t,dimensions:s}=e;switch(t){case"round":return this.calculateRoundPanVolume(s.diameter,s.height);case"square":case"rectangular":return this.calculateSquarePanVolume(s.length,s.width,s.height);case"loaf":return this.calculateLoafPanVolume(s.topLength,s.bottomLength,s.width,s.height);case"chiffon":return this.calculateChiffonPanVolume(s.outerDiameter,s.innerDiameter,s.height);default:throw new Error(`ì•Œ ìˆ˜ ì—†ëŠ” íŒ¬ íƒ€ìž…: ${t}`)}}static weightToVolume(e,t=.55){return e/t}static volumeToWeight(e,t=.55){return e*t}}const Ce=[{value:"ì¼€ì´í¬íŒ¬",labelKey:"cakePan"},{value:"ë¬´ìŠ¤í‹€",labelKey:"mousseRing"},{value:"ì‹ë¹µí‹€",labelKey:"breadPan"},{value:"í’€ë¨¼í‹€",labelKey:"pullmanPan"},{value:"íŒŒìš´ë“œí‹€",labelKey:"poundPan"},{value:"ì‰¬í°í‹€",labelKey:"chiffonPan"},{value:"íƒ€ë¥´íŠ¸í‹€",labelKey:"tartPan"},{value:"ë¨¸í•€í‹€",labelKey:"muffinPan"},{value:"ë¡¤ì¼€ì´í¬íŒ¬",labelKey:"rollCakePan"},{value:"ì‹œíŠ¸íŒ¬",labelKey:"sheetPan"},{value:"íŠ¹ìˆ˜í‹€",labelKey:"specialPan"},{value:"ë¹µí‹€",labelKey:"loafPan"}],Fe={"ì¼€ì´í¬íŒ¬":[{value:"round",labelKey:"round"},{value:"square",labelKey:"square"},{value:"springform",labelKey:"springform"},{value:"custom",labelKey:"custom"}],"ë¬´ìŠ¤í‹€":[{value:"round",labelKey:"mousseRing"},{value:"square",labelKey:"squareMousse"},{value:"custom",labelKey:"custom"}],"ì‹ë¹µí‹€":[{value:"loaf",labelKey:"loaf"},{value:"mini_loaf",labelKey:"miniLoaf"},{value:"custom",labelKey:"custom"}],"í’€ë¨¼í‹€":[{value:"square",labelKey:"pullman"},{value:"custom",labelKey:"custom"}],"íŒŒìš´ë“œí‹€":[{value:"loaf",labelKey:"pound"},{value:"custom",labelKey:"custom"}],"ì‰¬í°í‹€":[{value:"chiffon",labelKey:"chiffon"},{value:"custom",labelKey:"custom"}],"íƒ€ë¥´íŠ¸í‹€":[{value:"round",labelKey:"roundTart"},{value:"square",labelKey:"squareTart"},{value:"custom",labelKey:"custom"}],"ë¨¸í•€í‹€":[{value:"round",labelKey:"muffin"},{value:"mini",labelKey:"miniMuffin"},{value:"custom",labelKey:"custom"}],"ë¡¤ì¼€ì´í¬íŒ¬":[{value:"square",labelKey:"rollCake"},{value:"custom",labelKey:"custom"}],"ì‹œíŠ¸íŒ¬":[{value:"square",labelKey:"sheet"},{value:"custom",labelKey:"custom"}],"íŠ¹ìˆ˜í‹€":[{value:"round",labelKey:"madeleine"},{value:"square",labelKey:"financier"},{value:"custom",labelKey:"custom"}],"ë¹µí‹€":[{value:"loaf",labelKey:"baguette"},{value:"round",labelKey:"brioche"},{value:"custom",labelKey:"custom"}]},Ke={name:"",category:"ì¼€ì´í¬íŒ¬",type:"round",dimensions:{length:void 0,width:void 0,height:void 0,diameter:void 0,innerDiameter:void 0},fillRatio:void 0,notes:"",isFavorite:!1};function Se({className:e=""}){const{t:t}=m(),{pan:s,addPan:a,updatePan:r,deletePan:n,togglePanFavorite:i}=u(),c=x.useCallback(e=>{const s=Ce.find(t=>t.value===e);return s?t(`settings.pan.categories.${s.labelKey}`):e},[t]),d=x.useCallback(e=>{if(g.includes(e.id)){return t(`settings.pan.panNames.${e.id}`,{defaultValue:""})||e.name}return e.name},[t]);x.useCallback((e,s)=>{const a=(Fe[e]||[]).find(e=>e.value===s);return a?t(`settings.pan.types.${a.labelKey}`):s},[t]);const[N,w]=x.useState(!1),[k,C]=x.useState(null),[F,K]=x.useState(Ke),[S,P]=x.useState(""),[T,L]=x.useState(null),[D,R]=x.useState(!1),[I,M]=x.useState(null),q=x.useMemo(()=>s.myPans.filter(e=>{if(S){const t=S.toLowerCase(),s=e.name.toLowerCase().includes(t),a=e.category.toLowerCase().includes(t),r=e.type.toLowerCase().includes(t);if(!s&&!a&&!r)return!1}return(!T||e.category===T)&&!(D&&!e.isFavorite)}),[s.myPans,S,T,D]),$=x.useCallback(e=>{const{dimensions:t,category:s,type:a}=e,r=["ì¼€ì´í¬íŒ¬","ë¬´ìŠ¤í‹€","íƒ€ë¥´íŠ¸í‹€","ë¨¸í•€í‹€"],n=["ì‰¬í°í‹€"],i=["ì‹ë¹µí‹€","í’€ë¨¼í‹€","íŒŒìš´ë“œí‹€","ë¡¤ì¼€ì´í¬íŒ¬","ì‹œíŠ¸íŒ¬","íŠ¹ìˆ˜í‹€","ë¹µí‹€"];try{if("chiffon"===a||n.includes(s)){if(t.diameter&&t.innerDiameter&&t.height)return ke.calculateChiffonPanVolume(t.diameter,t.innerDiameter,t.height)}else if("round"===a||r.includes(s)&&t.diameter){if(t.diameter&&t.height)return ke.calculateRoundPanVolume(t.diameter,t.height)}else if(("loaf"===a||"square"===a||i.includes(s))&&t.length&&t.width&&t.height)return ke.calculateSquarePanVolume(t.length,t.width,t.height)}catch(l){}return null},[t]),O=x.useMemo(()=>$(F),[F,$]),_=x.useCallback(()=>{K(Ke),C(null),w(!1)},[]),A=x.useCallback(e=>{var t,s,a,r,n;K({name:e.name,category:e.category,type:e.type,dimensions:{length:null==(t=e.dimensions)?void 0:t.length,width:null==(s=e.dimensions)?void 0:s.width,height:null==(a=e.dimensions)?void 0:a.height,diameter:null==(r=e.dimensions)?void 0:r.diameter,innerDiameter:null==(n=e.dimensions)?void 0:n.innerDiameter},fillRatio:e.fillRatio,notes:e.notes||"",isFavorite:e.isFavorite}),C(e.id),w(!0)},[]),V=x.useCallback(()=>{const e=$(F);if(!e)return void alert(t("settings.pan.dimensionError"));const s={name:F.name||`${F.category} ${F.type}`,category:F.category,type:F.type,volume:e,dimensions:F.dimensions,fillRatio:F.fillRatio,notes:F.notes||void 0,isFavorite:F.isFavorite};k?r(k,s):a(s),_()},[F,k,$,r,a,_,t]),z=x.useCallback(e=>{a({name:`${d(e)} ${t("settings.pan.copyText")}`,category:e.category,type:e.type,volume:e.volume,dimensions:e.dimensions,fillRatio:e.fillRatio,notes:e.notes,isFavorite:!1})},[a,t,d]),E=x.useCallback(e=>{const t=Fe[e]||Fe.other;K(s=>{var a;return o(l({},s),{category:e,type:(null==(a=t[0])?void 0:a.value)||"custom",dimensions:{length:void 0,width:void 0,height:void 0,diameter:void 0,innerDiameter:void 0}})})},[]),W=()=>{const{category:e,dimensions:s,type:a}=F,r="round"===a||["ì¼€ì´í¬íŒ¬","ë¬´ìŠ¤í‹€","íƒ€ë¥´íŠ¸í‹€","ë¨¸í•€í‹€"].includes(e),n="chiffon"===a||"ì‰¬í°í‹€"===e;return h.jsx("div",{className:"grid grid-cols-3 gap-2",children:r||n?h.jsxs(h.Fragment,{children:[h.jsxs("div",{children:[h.jsxs("label",{className:"block text-xs text-gray-500 mb-1",children:[t(n?"settings.pan.outerDiameter":"settings.pan.diameter")," (cm)"]}),h.jsx("input",{type:"number",value:s.diameter||"",onChange:e=>K(t=>o(l({},t),{dimensions:o(l({},t.dimensions),{diameter:parseFloat(e.target.value)||void 0})})),className:"w-full px-2 py-1.5 text-sm border rounded",placeholder:"15",step:"0.5"})]}),n&&h.jsxs("div",{children:[h.jsxs("label",{className:"block text-xs text-gray-500 mb-1",children:[t("settings.pan.innerDiameter")," (cm)"]}),h.jsx("input",{type:"number",value:s.innerDiameter||"",onChange:e=>K(t=>o(l({},t),{dimensions:o(l({},t.dimensions),{innerDiameter:parseFloat(e.target.value)||void 0})})),className:"w-full px-2 py-1.5 text-sm border rounded",placeholder:"5",step:"0.5"})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"block text-xs text-gray-500 mb-1",children:[t("settings.pan.height")," (cm)"]}),h.jsx("input",{type:"number",value:s.height||"",onChange:e=>K(t=>o(l({},t),{dimensions:o(l({},t.dimensions),{height:parseFloat(e.target.value)||void 0})})),className:"w-full px-2 py-1.5 text-sm border rounded",placeholder:"7",step:"0.5"})]})]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{children:[h.jsxs("label",{className:"block text-xs text-gray-500 mb-1",children:[t("settings.pan.length")," (cm)"]}),h.jsx("input",{type:"number",value:s.length||"",onChange:e=>K(t=>o(l({},t),{dimensions:o(l({},t.dimensions),{length:parseFloat(e.target.value)||void 0})})),className:"w-full px-2 py-1.5 text-sm border rounded",placeholder:"20",step:"0.5"})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"block text-xs text-gray-500 mb-1",children:[t("settings.pan.width")," (cm)"]}),h.jsx("input",{type:"number",value:s.width||"",onChange:e=>K(t=>o(l({},t),{dimensions:o(l({},t.dimensions),{width:parseFloat(e.target.value)||void 0})})),className:"w-full px-2 py-1.5 text-sm border rounded",placeholder:"10",step:"0.5"})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"block text-xs text-gray-500 mb-1",children:[t("settings.pan.height")," (cm)"]}),h.jsx("input",{type:"number",value:s.height||"",onChange:e=>K(t=>o(l({},t),{dimensions:o(l({},t.dimensions),{height:parseFloat(e.target.value)||void 0})})),className:"w-full px-2 py-1.5 text-sm border rounded",placeholder:"10",step:"0.5"})]})]})})};return h.jsxs("div",{className:`space-y-4 ${e}`,children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t("settings.pan.title")}),h.jsx("p",{className:"text-sm text-gray-500",children:t("settings.pan.titleDesc")})]}),h.jsxs("button",{onClick:()=>{_(),w(!0)},className:"flex items-center gap-1 px-3 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors",children:[h.jsx(p,{className:"w-4 h-4"}),t("settings.pan.addPan")]})]}),h.jsxs("div",{className:"flex flex-wrap gap-2",children:[h.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[h.jsx(b,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),h.jsx("input",{type:"text",value:S,onChange:e=>P(e.target.value),placeholder:t("settings.pan.searchPlaceholder"),className:"w-full pl-8 pr-3 py-2 text-sm border rounded-lg"})]}),h.jsxs("select",{value:T||"",onChange:e=>L(e.target.value||null),className:"px-3 py-2 text-sm border rounded-lg",children:[h.jsx("option",{value:"",children:t("settings.pan.allTypes")}),Ce.map(e=>h.jsx("option",{value:e.value,children:t(`settings.pan.categories.${e.labelKey}`)},e.value))]}),h.jsxs("button",{onClick:()=>R(!D),className:"flex items-center gap-1 px-3 py-2 text-sm border rounded-lg transition-colors "+(D?"bg-yellow-50 border-yellow-300 text-yellow-700":"hover:bg-gray-50"),children:[h.jsx(fe,{className:"w-4 h-4 "+(D?"fill-current":"")}),t("settings.pan.favorites")]})]}),N&&!k&&h.jsxs("div",{className:"p-4 border border-orange-200 bg-orange-50/50 rounded-lg",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h4",{className:"font-medium text-gray-800",children:t(k?"settings.pan.editPan":"settings.pan.newPan")}),h.jsx("button",{onClick:_,className:"p-1 hover:bg-gray-100 rounded",children:h.jsx(y,{className:"w-4 h-4 text-gray-500"})})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("settings.pan.nameOptional")}),h.jsx("input",{type:"text",value:F.name,onChange:e=>K(t=>o(l({},t),{name:e.target.value})),placeholder:t("settings.pan.namePlaceholder"),className:"w-full px-3 py-2 text-sm border rounded-lg"})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("settings.pan.category")}),h.jsx("select",{value:F.category,onChange:e=>E(e.target.value),className:"w-full px-3 py-2 text-sm border rounded-lg",children:Ce.map(e=>h.jsx("option",{value:e.value,children:t(`settings.pan.categories.${e.labelKey}`)},e.value))})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("settings.pan.subType")}),h.jsx("select",{value:F.type,onChange:e=>K(t=>o(l({},t),{type:e.target.value})),className:"w-full px-3 py-2 text-sm border rounded-lg",children:(Fe[F.category]||Fe["ì¼€ì´í¬íŒ¬"]).map(e=>h.jsx("option",{value:e.value,children:t(`settings.pan.types.${e.labelKey}`)},e.value))})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("settings.pan.dimensions")}),W()]}),h.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-50 rounded-lg",children:[h.jsx(re,{className:"w-5 h-5 text-blue-600"}),h.jsxs("div",{children:[h.jsxs("div",{className:"text-sm text-blue-700",children:[t("settings.pan.calculatedVolume"),": "," ",h.jsx("span",{className:"font-mono font-bold",children:O?`${Math.round(O).toLocaleString()} ml`:t("settings.pan.enterDimensions")})]}),!O&&h.jsxs("div",{className:"text-xs text-blue-500 flex items-center gap-1 mt-0.5",children:[h.jsx(f,{className:"w-3 h-3"}),t("settings.pan.dimensionsRequired")]})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("settings.pan.fillRatioOptional")}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("input",{type:"range",min:"30",max:"95",step:"5",value:100*(F.fillRatio||.7),onChange:e=>K(t=>o(l({},t),{fillRatio:parseInt(e.target.value)/100})),className:"flex-1"}),h.jsx("span",{className:"w-12 text-sm text-gray-600 font-mono",children:F.fillRatio?`${(100*F.fillRatio).toFixed(0)}%`:"70%"})]}),h.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t("settings.pan.fillRatioDesc")})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("settings.pan.notesOptional")}),h.jsx("textarea",{value:F.notes,onChange:e=>K(t=>o(l({},t),{notes:e.target.value})),placeholder:t("settings.pan.notesPlaceholder"),rows:2,className:"w-full px-3 py-2 text-sm border rounded-lg resize-none"})]}),h.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[h.jsx("input",{type:"checkbox",checked:F.isFavorite,onChange:e=>K(t=>o(l({},t),{isFavorite:e.target.checked})),className:"rounded border-gray-300"}),h.jsx(fe,{className:"w-4 h-4 "+(F.isFavorite?"text-yellow-500 fill-yellow-500":"text-gray-400")}),h.jsx("span",{className:"text-sm text-gray-700",children:t("settings.pan.addToFavorites")})]}),h.jsxs("div",{className:"flex gap-2 pt-2",children:[h.jsxs("button",{onClick:V,disabled:!O,className:"flex items-center gap-1 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:[h.jsx(j,{className:"w-4 h-4"}),t(k?"common.save":"common.add")]}),h.jsx("button",{onClick:_,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:t("common.cancel")})]})]})]}),h.jsx("div",{className:"space-y-2",children:0===q.length?h.jsx("div",{className:"p-8 text-center text-gray-500 border border-dashed rounded-lg",children:0===s.myPans.length?h.jsxs(h.Fragment,{children:[h.jsx(re,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),h.jsx("p",{className:"font-medium",children:t("settings.pan.noPans")}),h.jsx("p",{className:"text-sm mt-1",children:t("settings.pan.noPansDesc")})]}):h.jsxs(h.Fragment,{children:[h.jsx(b,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),h.jsx("p",{className:"font-medium",children:t("settings.pan.noResults")}),h.jsx("p",{className:"text-sm mt-1",children:t("settings.pan.noResultsDesc")})]})}):q.map(e=>{const s=I===e.id,a=(e=>{const t=e.dimensions;return t?t.diameter?t.innerDiameter?`Ã¸${t.diameter}/${t.innerDiameter}Ã—${t.height}cm`:`Ã¸${t.diameter}Ã—${t.height}cm`:t.length&&t.width?`${t.length}Ã—${t.width}Ã—${t.height}cm`:"":""})(e);return h.jsxs("div",{className:"border rounded-lg overflow-hidden transition-all "+(e.isFavorite?"border-yellow-300 bg-yellow-50/30":"border-gray-200 bg-white"),children:[h.jsxs("div",{className:"flex items-center justify-between p-3 cursor-pointer hover:bg-gray-50",onClick:()=>M(s?null:e.id),children:[h.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[h.jsx(re,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),h.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[h.jsx("span",{className:"font-medium text-gray-800 truncate",children:d(e)}),e.isFavorite&&h.jsx(fe,{className:"w-3.5 h-3.5 text-yellow-500 fill-yellow-500 flex-shrink-0"})]}),a&&h.jsx("span",{className:"text-sm text-gray-500 font-mono flex-shrink-0",children:a}),h.jsxs("span",{className:"text-sm text-blue-600 font-mono font-medium flex-shrink-0",children:[e.volume.toLocaleString(),"ml"]}),e.notes&&h.jsx("span",{className:"text-xs text-gray-400 truncate hidden sm:inline",children:e.notes})]}),h.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 ml-2",children:[h.jsx("button",{onClick:t=>{t.stopPropagation(),i(e.id)},className:"p-1.5 rounded hover:bg-gray-100 "+(e.isFavorite?"text-yellow-500":"text-gray-400"),title:t("settings.pan.favorites"),children:h.jsx(fe,{className:"w-4 h-4 "+(e.isFavorite?"fill-current":"")})}),s?h.jsx(U,{className:"w-4 h-4 text-gray-400"}):h.jsx(Q,{className:"w-4 h-4 text-gray-400"})]})]}),s&&k!==e.id&&h.jsx("div",{className:"px-3 pb-3 border-t border-gray-100",children:h.jsxs("div",{className:"pt-3 flex flex-wrap items-center gap-3",children:[h.jsx("span",{className:"px-2 py-0.5 text-xs bg-gray-100 text-gray-600 rounded",children:c(e.category)}),e.fillRatio&&h.jsxs("span",{className:"text-xs text-gray-500",children:[t("settings.pan.fillRatio"),": ",(100*e.fillRatio).toFixed(0),"%"]}),e.notes&&h.jsx("span",{className:"text-xs text-gray-500 italic sm:hidden",children:e.notes}),h.jsx("div",{className:"flex-1"}),h.jsxs("button",{onClick:()=>A(e),className:"flex items-center gap-1 px-2 py-1 text-xs bg-blue-50 text-blue-600 rounded hover:bg-blue-100",children:[h.jsx(pe,{className:"w-3 h-3"}),t("common.edit")]}),h.jsxs("button",{onClick:()=>z(e),className:"flex items-center gap-1 px-2 py-1 text-xs bg-gray-50 text-gray-600 rounded hover:bg-gray-100",children:[h.jsx(H,{className:"w-3 h-3"}),t("settings.pan.duplicate")]}),h.jsxs("button",{onClick:()=>{confirm(t("settings.pan.deleteConfirm",{name:d(e)}))&&n(e.id)},className:"flex items-center gap-1 px-2 py-1 text-xs bg-red-50 text-red-600 rounded hover:bg-red-100",children:[h.jsx(v,{className:"w-3 h-3"}),t("common.delete")]})]})}),k===e.id&&N&&h.jsxs("div",{className:"p-4 border-t border-orange-200 bg-orange-50/50",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h4",{className:"font-medium text-gray-800",children:t("settings.pan.editPan")}),h.jsx("button",{onClick:_,className:"p-1 hover:bg-gray-100 rounded",children:h.jsx(y,{className:"w-4 h-4 text-gray-500"})})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("settings.pan.nameOptional")}),h.jsx("input",{type:"text",value:F.name,onChange:e=>K(t=>o(l({},t),{name:e.target.value})),placeholder:t("settings.pan.namePlaceholder"),className:"w-full px-3 py-2 text-sm border rounded-lg"})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("settings.pan.category")}),h.jsx("select",{value:F.category,onChange:e=>E(e.target.value),className:"w-full px-3 py-2 text-sm border rounded-lg",children:Ce.map(e=>h.jsx("option",{value:e.value,children:t(`settings.pan.categories.${e.labelKey}`)},e.value))})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("settings.pan.subType")}),h.jsx("select",{value:F.type,onChange:e=>K(t=>o(l({},t),{type:e.target.value})),className:"w-full px-3 py-2 text-sm border rounded-lg",children:(Fe[F.category]||Fe["ì¼€ì´í¬íŒ¬"]).map(e=>h.jsx("option",{value:e.value,children:t(`settings.pan.types.${e.labelKey}`)},e.value))})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("settings.pan.dimensions")}),W()]}),h.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-50 rounded-lg",children:[h.jsx(re,{className:"w-5 h-5 text-blue-600"}),h.jsxs("div",{children:[h.jsxs("div",{className:"text-sm text-blue-700",children:[t("settings.pan.calculatedVolume"),": "," ",h.jsx("span",{className:"font-mono font-bold",children:O?`${Math.round(O).toLocaleString()} ml`:t("settings.pan.enterDimensions")})]}),!O&&h.jsxs("div",{className:"text-xs text-blue-500 flex items-center gap-1 mt-0.5",children:[h.jsx(f,{className:"w-3 h-3"}),t("settings.pan.dimensionsRequired")]})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("settings.pan.fillRatioOptional")}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("input",{type:"range",min:"30",max:"95",step:"5",value:100*(F.fillRatio||.7),onChange:e=>K(t=>o(l({},t),{fillRatio:parseInt(e.target.value)/100})),className:"flex-1"}),h.jsx("span",{className:"w-12 text-sm text-gray-600 font-mono",children:F.fillRatio?`${(100*F.fillRatio).toFixed(0)}%`:"70%"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("settings.pan.notesOptional")}),h.jsx("textarea",{value:F.notes,onChange:e=>K(t=>o(l({},t),{notes:e.target.value})),placeholder:t("settings.pan.notesPlaceholder"),rows:2,className:"w-full px-3 py-2 text-sm border rounded-lg resize-none"})]}),h.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[h.jsx("input",{type:"checkbox",checked:F.isFavorite,onChange:e=>K(t=>o(l({},t),{isFavorite:e.target.checked})),className:"rounded border-gray-300"}),h.jsx(fe,{className:"w-4 h-4 "+(F.isFavorite?"text-yellow-500 fill-yellow-500":"text-gray-400")}),h.jsx("span",{className:"text-sm text-gray-700",children:t("settings.pan.addToFavorites")})]}),h.jsxs("div",{className:"flex gap-2 pt-2",children:[h.jsxs("button",{onClick:V,disabled:!O,className:"flex items-center gap-1 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:[h.jsx(j,{className:"w-4 h-4"}),t("common.save")]}),h.jsx("button",{onClick:_,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:t("common.cancel")})]})]})]})]},e.id)})}),s.myPans.length>0&&h.jsxs("div",{className:"text-xs text-gray-400 pt-2 border-t",children:[t("settings.pan.totalPans",{count:s.myPans.length}),s.myPans.filter(e=>e.isFavorite).length>0&&h.jsxs(h.Fragment,{children:[" Â· ",t("settings.pan.favoritesCount",{count:s.myPans.filter(e=>e.isFavorite).length})]})]})]})}const Pe={spring:xe,summer:je,winter:ye};function Te({className:e=""}){const{t:t}=m(),{environment:s,setEnvironmentDefaults:a,addEnvironmentProfile:r,updateEnvironmentProfile:n,deleteEnvironmentProfile:i,setActiveProfile:c}=u(),[d,g]=x.useState(!1),[b,k]=x.useState(null),[C,F]=x.useState({name:"",temperature:25,humidity:60,altitude:0}),K=x.useMemo(()=>s.activeProfileId?s.profiles.find(e=>e.id===s.activeProfileId):null,[s.activeProfileId,s.profiles]),S=x.useMemo(()=>K||s.defaults,[K,s.defaults]),P=x.useMemo(()=>{const e=N(S.temperature,26);if(e<1){const s=Math.round(100*(1-e));return{direction:"faster",percent:s,message:t("settings.environment.fermentationFaster",{percent:s})}}if(e>1){const s=Math.round(100*(e-1));return{direction:"slower",percent:s,message:t("settings.environment.fermentationSlower",{percent:s})}}return{direction:"normal",percent:0,message:t("settings.environment.fermentationNormal")}},[S.temperature,t]),T=x.useMemo(()=>{const e=S.altitude;return e<900?null:e>=2100?{level:"high",message:t("settings.environment.altitudeHigh")}:e>=1500?{level:"medium",message:t("settings.environment.altitudeMedium")}:{level:"low",message:t("settings.environment.altitudeLow")}},[S.altitude,t]),L=x.useMemo(()=>{const e=S.humidity;return e<40?{level:"low",message:t("settings.environment.humidityLowWarning")}:e>70?{level:"high",message:t("settings.environment.humidityHighWarning")}:null},[S.humidity,t]),D=["spring","summer","winter"],R=x.useCallback(e=>D.includes(e.id)?t(`settings.environment.profileNames.${e.id}`):e.name,[t]),I=x.useCallback(()=>{F({name:"",temperature:25,humidity:60,altitude:0}),k(null),g(!1)},[]),M=x.useCallback(e=>{F({name:e.name,temperature:e.temperature,humidity:e.humidity,altitude:e.altitude}),k(e.id),g(!0)},[]),q=x.useCallback(()=>{C.name.trim()?(b?n(b,{name:C.name,temperature:C.temperature,humidity:C.humidity,altitude:C.altitude}):r({name:C.name,temperature:C.temperature,humidity:C.humidity,altitude:C.altitude}),I()):alert(t("settings.environment.profileNameRequired"))},[C,b,n,r,I,t]),$=x.useCallback((e,t)=>{a({[e]:t})},[a]);return h.jsxs("div",{className:`space-y-6 ${e}`,children:[h.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-lg border border-blue-100",children:[h.jsxs("h3",{className:"text-sm font-semibold text-blue-800 mb-3 flex items-center gap-2",children:[h.jsx(ve,{className:"w-4 h-4"}),t("settings.environment.currentEnvironment"),K&&h.jsx("span",{className:"px-2 py-0.5 text-xs bg-blue-100 text-blue-700 rounded-full",children:R(K)})]}),h.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[h.jsxs("div",{className:"text-center p-3 bg-white/70 rounded-lg",children:[h.jsx(ve,{className:"w-5 h-5 mx-auto text-red-500 mb-1"}),h.jsxs("div",{className:"text-2xl font-bold text-gray-800",children:[S.temperature,"Â°C"]}),h.jsx("div",{className:"text-xs text-gray-500",children:t("settings.environment.temperature")})]}),h.jsxs("div",{className:"text-center p-3 bg-white/70 rounded-lg",children:[h.jsx(W,{className:"w-5 h-5 mx-auto text-blue-500 mb-1"}),h.jsxs("div",{className:"text-2xl font-bold text-gray-800",children:[S.humidity,"%"]}),h.jsx("div",{className:"text-xs text-gray-500",children:t("settings.environment.humidity")})]}),h.jsxs("div",{className:"text-center p-3 bg-white/70 rounded-lg",children:[h.jsx(ge,{className:"w-5 h-5 mx-auto text-green-600 mb-1"}),h.jsxs("div",{className:"text-2xl font-bold text-gray-800",children:[S.altitude,"m"]}),h.jsx("div",{className:"text-xs text-gray-500",children:t("settings.environment.altitude")})]})]}),h.jsxs("div",{className:"mt-3 p-2 bg-white/50 rounded flex items-center gap-2",children:[h.jsx(Ne,{className:"w-4 h-4 text-orange-500"}),h.jsxs("span",{className:"text-sm text-gray-700",children:[t("settings.environment.fermentationTime"),": "," ",h.jsx("span",{className:"font-medium "+("faster"===P.direction?"text-orange-600":"slower"===P.direction?"text-blue-600":"text-green-600"),children:P.message})]})]}),(T||L)&&h.jsxs("div",{className:"mt-2 space-y-1",children:[T&&h.jsxs("div",{className:"flex items-start gap-2 p-2 bg-amber-50 rounded text-xs text-amber-700",children:[h.jsx(f,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),T.message]}),L&&h.jsxs("div",{className:"flex items-start gap-2 p-2 bg-blue-50 rounded text-xs text-blue-700",children:[h.jsx(w,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),L.message]})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t("settings.environment.defaultSettings")}),h.jsx("p",{className:"text-sm text-gray-500",children:t("settings.environment.defaultSettingsDesc")}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[h.jsx(ve,{className:"w-4 h-4 text-red-500"}),t("settings.environment.temperature")]}),h.jsxs("span",{className:"text-lg font-mono font-bold text-gray-800",children:[s.defaults.temperature,"Â°C"]})]}),h.jsx("input",{type:"range",min:"15",max:"35",step:"1",value:s.defaults.temperature,onChange:e=>$("temperature",parseInt(e.target.value)),className:"w-full h-2 bg-gradient-to-r from-blue-300 via-green-300 to-red-300 rounded-lg appearance-none cursor-pointer"}),h.jsxs("div",{className:"flex justify-between text-xs text-gray-400",children:[h.jsx("span",{children:t("settings.environment.tempWinter")}),h.jsx("span",{children:t("settings.environment.tempOptimal")}),h.jsx("span",{children:t("settings.environment.tempSummer")})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[h.jsx(W,{className:"w-4 h-4 text-blue-500"}),t("settings.environment.humidity")]}),h.jsxs("span",{className:"text-lg font-mono font-bold text-gray-800",children:[s.defaults.humidity,"%"]})]}),h.jsx("input",{type:"range",min:"30",max:"80",step:"5",value:s.defaults.humidity,onChange:e=>$("humidity",parseInt(e.target.value)),className:"w-full h-2 bg-gradient-to-r from-yellow-200 via-blue-300 to-blue-500 rounded-lg appearance-none cursor-pointer"}),h.jsxs("div",{className:"flex justify-between text-xs text-gray-400",children:[h.jsx("span",{children:t("settings.environment.humidityDry")}),h.jsx("span",{children:t("settings.environment.humidityOptimal")}),h.jsx("span",{children:t("settings.environment.humidityWet")})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[h.jsx(ge,{className:"w-4 h-4 text-green-600"}),t("settings.environment.altitudeLabel")]}),h.jsxs("span",{className:"text-lg font-mono font-bold text-gray-800",children:[s.defaults.altitude,"m"]})]}),h.jsx("input",{type:"range",min:"0",max:"3000",step:"100",value:s.defaults.altitude,onChange:e=>$("altitude",parseInt(e.target.value)),className:"w-full"}),h.jsxs("div",{className:"flex justify-between text-xs text-gray-400",children:[h.jsx("span",{children:t("settings.environment.seaLevel")}),h.jsx("span",{children:t("settings.environment.lowAltitude")}),h.jsx("span",{children:"1500m"}),h.jsx("span",{children:"3000m"})]})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t("settings.environment.profiles")}),h.jsx("p",{className:"text-sm text-gray-500",children:t("settings.environment.profilesDesc")})]}),h.jsxs("button",{onClick:()=>{I(),g(!0)},className:"flex items-center gap-1 px-3 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors",children:[h.jsx(p,{className:"w-4 h-4"}),t("settings.environment.addProfile")]})]}),d&&h.jsxs("div",{className:"p-4 border border-cyan-200 bg-cyan-50/50 rounded-lg space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("h4",{className:"font-medium text-gray-800",children:t(b?"settings.environment.editProfile":"settings.environment.newProfile")}),h.jsx("button",{onClick:I,className:"p-1 hover:bg-gray-100 rounded",children:h.jsx(y,{className:"w-4 h-4 text-gray-500"})})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("settings.environment.profileName")}),h.jsx("input",{type:"text",value:C.name,onChange:e=>F(t=>o(l({},t),{name:e.target.value})),placeholder:t("settings.environment.profileNamePlaceholder"),className:"w-full px-3 py-2 text-sm border rounded-lg"})]}),h.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[h.jsxs("div",{children:[h.jsxs("label",{className:"block text-xs text-gray-500 mb-1",children:[t("settings.environment.temperature")," (Â°C)"]}),h.jsx("input",{type:"number",value:C.temperature,onChange:e=>F(t=>o(l({},t),{temperature:parseInt(e.target.value)||25})),min:"10",max:"40",className:"w-full px-2 py-1.5 text-sm border rounded text-center font-mono"})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"block text-xs text-gray-500 mb-1",children:[t("settings.environment.humidity")," (%)"]}),h.jsx("input",{type:"number",value:C.humidity,onChange:e=>F(t=>o(l({},t),{humidity:parseInt(e.target.value)||60})),min:"20",max:"90",className:"w-full px-2 py-1.5 text-sm border rounded text-center font-mono"})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"block text-xs text-gray-500 mb-1",children:[t("settings.environment.altitude")," (m)"]}),h.jsx("input",{type:"number",value:C.altitude,onChange:e=>F(t=>o(l({},t),{altitude:parseInt(e.target.value)||0})),min:"0",max:"5000",step:"100",className:"w-full px-2 py-1.5 text-sm border rounded text-center font-mono"})]})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("button",{onClick:q,className:"flex items-center gap-1 px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors",children:[h.jsx(j,{className:"w-4 h-4"}),t(b?"common.save":"settings.environment.addProfile")]}),h.jsx("button",{onClick:I,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:t("common.cancel")})]})]}),h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[h.jsxs("button",{onClick:()=>c(null),className:"p-4 rounded-lg border-2 text-left transition-all "+(s.activeProfileId?"border-gray-200 bg-white hover:border-gray-300":"border-cyan-500 bg-cyan-50"),children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("span",{className:"font-medium text-gray-800",children:t("settings.environment.default")}),!s.activeProfileId&&h.jsx(Z,{className:"w-4 h-4 text-cyan-600"})]}),h.jsxs("div",{className:"text-xs text-gray-500 space-y-0.5",children:[h.jsxs("div",{children:[s.defaults.temperature,"Â°C"]}),h.jsxs("div",{children:[s.defaults.humidity,"% ",t("settings.environment.humidityUnit")]}),h.jsxs("div",{children:[s.defaults.altitude,"m"]})]})]}),s.profiles.map(e=>{const a=Pe[e.id]||ve,r=s.activeProfileId===e.id,n=["spring","summer","winter"].includes(e.id);return h.jsxs("div",{className:"relative p-4 rounded-lg border-2 transition-all "+(r?"border-cyan-500 bg-cyan-50":"border-gray-200 bg-white hover:border-gray-300"),children:[h.jsxs("button",{onClick:()=>c(e.id),className:"w-full text-left",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(a,{className:"w-4 h-4 "+("summer"===e.id?"text-orange-500":"winter"===e.id?"text-blue-500":"spring"===e.id?"text-green-500":"text-gray-500")}),h.jsx("span",{className:"font-medium text-gray-800",children:R(e)})]}),r&&h.jsx(Z,{className:"w-4 h-4 text-cyan-600"})]}),h.jsxs("div",{className:"text-xs text-gray-500 space-y-0.5",children:[h.jsxs("div",{children:[e.temperature,"Â°C"]}),h.jsxs("div",{children:[e.humidity,"% ",t("settings.environment.humidityUnit")]}),h.jsxs("div",{children:[e.altitude,"m"]})]})]}),!n&&h.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 hover:opacity-100 transition-opacity",children:[h.jsx("button",{onClick:t=>{t.stopPropagation(),M(e)},className:"p-1 bg-white rounded hover:bg-gray-100",children:h.jsx(pe,{className:"w-3 h-3 text-gray-500"})}),h.jsx("button",{onClick:s=>{s.stopPropagation(),confirm(t("settings.environment.deleteProfileConfirm",{name:R(e)}))&&i(e.id)},className:"p-1 bg-white rounded hover:bg-red-50",children:h.jsx(v,{className:"w-3 h-3 text-red-500"})})]})]},e.id)})]})]}),h.jsxs("div",{className:"p-4 bg-amber-50 border border-amber-100 rounded-lg",children:[h.jsxs("h4",{className:"font-medium text-amber-800 mb-2 flex items-center gap-2",children:[h.jsx(ge,{className:"w-4 h-4"}),t("settings.environment.altitudeGuide")]}),h.jsxs("div",{className:"text-sm text-amber-700 space-y-2",children:[h.jsxs("div",{className:"grid grid-cols-4 gap-2 text-xs",children:[h.jsx("div",{className:"font-medium",children:t("settings.environment.altitude")}),h.jsx("div",{className:"font-medium",children:t("settings.environment.flour")}),h.jsx("div",{className:"font-medium",children:t("settings.environment.sugar")}),h.jsx("div",{className:"font-medium",children:t("settings.environment.yeast")})]}),h.jsxs("div",{className:"grid grid-cols-4 gap-2 text-xs",children:[h.jsx("div",{children:"900~1500m"}),h.jsx("div",{children:"+1%"}),h.jsx("div",{children:"-1~2%"}),h.jsx("div",{children:"-8~15%"})]}),h.jsxs("div",{className:"grid grid-cols-4 gap-2 text-xs",children:[h.jsx("div",{children:"1500~2100m"}),h.jsx("div",{children:"+2~4%"}),h.jsx("div",{children:"-2~4%"}),h.jsx("div",{children:"-20%"})]}),h.jsxs("div",{className:"grid grid-cols-4 gap-2 text-xs",children:[h.jsx("div",{children:"2100m+"}),h.jsx("div",{children:"+4%"}),h.jsx("div",{children:"-4~8%"}),h.jsx("div",{children:"-25%"})]})]})]})]})}const Le={straight:{icon:"ðŸ¥–",color:"bg-gray-100 text-gray-700 border-gray-300"},sponge:{icon:"ðŸ§ª",color:"bg-amber-100 text-amber-700 border-amber-300"},poolish:{icon:"ðŸ«§",color:"bg-blue-100 text-blue-700 border-blue-300"},biga:{icon:"ðŸ‡®ðŸ‡¹",color:"bg-green-100 text-green-700 border-green-300"},tangzhong:{icon:"ðŸœ",color:"bg-pink-100 text-pink-700 border-pink-300"},levain:{icon:"ðŸŒ¾",color:"bg-orange-100 text-orange-700 border-orange-300"},coldFerment:{icon:"â„ï¸",color:"bg-cyan-100 text-cyan-700 border-cyan-300"},retard:{icon:"ðŸŒ™",color:"bg-indigo-100 text-indigo-700 border-indigo-300"},autolyse:{icon:"ðŸ’§",color:"bg-purple-100 text-purple-700 border-purple-300"}};function De({className:e=""}){const{t:t}=m(),{method:s,updateMethod:a,setYeastConversion:r,setBaseTemperature:n,setBaseSaltPercent:i,resetToDefaults:c}=u(),[d,g]=x.useState(null),[p,b]=x.useState(null),[y,v]=x.useState({}),N=x.useMemo(()=>["straight","sponge","poolish","biga","tangzhong","levain","coldFerment","retard","autolyse"].filter(e=>s.methods[e]).map(e=>s.methods[e]),[s.methods]),C=x.useCallback(e=>{const t=s.methods[e];v({flourRatio:t.flourRatio,waterRatio:t.waterRatio,yeastAdjustment:t.yeastAdjustment,prefermentTime:l({},t.prefermentTime),prefermentTemp:l({},t.prefermentTemp),mainDoughTime:l({},t.mainDoughTime),description:t.description}),b(e),g(e)},[s.methods]),F=x.useCallback(()=>{p&&(a(p,y),b(null),v({}))},[p,y,a]),K=x.useCallback(()=>{b(null),v({})},[]);return h.jsxs("div",{className:`space-y-6 ${e}`,children:[h.jsxs("div",{children:[h.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[h.jsx(ce,{className:"w-5 h-5 text-orange-500"}),t("settings.method.title")]}),h.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t("settings.method.titleDesc")})]}),h.jsxs("div",{className:"p-4 bg-amber-50 border border-amber-100 rounded-lg",children:[h.jsxs("h4",{className:"font-medium text-amber-800 mb-3 flex items-center gap-2",children:[h.jsx(ae,{className:"w-4 h-4"}),t("settings.method.yeastConversion")]}),h.jsx("p",{className:"text-xs text-amber-600 mb-3",children:t("settings.method.yeastConversionDesc")}),h.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:t("settings.method.freshYeast")}),h.jsx("input",{type:"number",value:s.yeastConversion.fresh,onChange:e=>r("fresh",parseFloat(e.target.value)||1),step:"0.1",min:"0.1",max:"2",className:"w-full px-2 py-1.5 text-sm border rounded text-center font-mono bg-white"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:t("settings.method.activeDry")}),h.jsx("input",{type:"number",value:s.yeastConversion.activeDry,onChange:e=>r("activeDry",parseFloat(e.target.value)||.4),step:"0.05",min:"0.1",max:"1",className:"w-full px-2 py-1.5 text-sm border rounded text-center font-mono bg-white"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:t("settings.method.instant")}),h.jsx("input",{type:"number",value:s.yeastConversion.instant,onChange:e=>r("instant",parseFloat(e.target.value)||.33),step:"0.05",min:"0.1",max:"1",className:"w-full px-2 py-1.5 text-sm border rounded text-center font-mono bg-white"})]})]}),h.jsxs("div",{className:"mt-3 text-xs text-amber-600",children:[h.jsx(w,{className:"w-3 h-3 inline mr-1"}),t("settings.method.yeastExample",{value:(10*s.yeastConversion.instant).toFixed(1)})]})]}),h.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-100 rounded-lg",children:[h.jsxs("h4",{className:"font-medium text-blue-800 mb-3 flex items-center gap-2",children:[h.jsx(k,{className:"w-4 h-4"}),t("settings.method.fermentationBase")]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:t("settings.method.baseTemp")}),h.jsx("input",{type:"number",value:s.baseTemperature,onChange:e=>n(parseInt(e.target.value)||26),min:"20",max:"32",className:"w-full px-2 py-1.5 text-sm border rounded text-center font-mono bg-white"}),h.jsx("p",{className:"text-xs text-gray-400 mt-1",children:t("settings.method.baseTempDesc")})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:t("settings.method.baseSalt")}),h.jsx("input",{type:"number",value:s.baseSaltPercent,onChange:e=>i(parseFloat(e.target.value)||1.5),min:"0.5",max:"3",step:"0.1",className:"w-full px-2 py-1.5 text-sm border rounded text-center font-mono bg-white"}),h.jsx("p",{className:"text-xs text-gray-400 mt-1",children:t("settings.method.baseSaltDesc")})]})]})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("h4",{className:"font-medium text-gray-700",children:t("settings.method.methodSettings")}),h.jsxs("button",{onClick:()=>{confirm(t("settings.method.resetConfirm"))&&c("method")},className:"flex items-center gap-1 text-sm text-gray-500 hover:text-gray-700",children:[h.jsx(B,{className:"w-4 h-4"}),t("settings.method.resetToDefault")]})]}),N.map(e=>(e=>{var s,a,r,n;const i=Le[e.id]||Le.straight,c=d===e.id,m=p===e.id;return h.jsxs("div",{className:`border rounded-lg overflow-hidden transition-all ${i.color.split(" ")[0]} ${m?"ring-2 ring-orange-400":""}`,children:[h.jsxs("button",{onClick:()=>g(c?null:e.id),className:`w-full flex items-center justify-between p-4 text-left ${i.color}`,children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("span",{className:"text-2xl",children:i.icon}),h.jsxs("div",{children:[h.jsx("div",{className:"font-semibold",children:t(`settings.method.methods.${e.id}.name`)}),h.jsx("div",{className:"text-xs opacity-75",children:e.name})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[e.flourRatio>0&&h.jsxs("span",{className:"text-xs px-2 py-0.5 bg-white/50 rounded",children:[t("settings.method.preferment")," ",(100*e.flourRatio).toFixed(0),"%"]}),c?h.jsx(U,{className:"w-5 h-5"}):h.jsx(Q,{className:"w-5 h-5"})]})]}),c&&h.jsxs("div",{className:"p-4 bg-white border-t space-y-4",children:[h.jsx("p",{className:"text-sm text-gray-600 italic",children:t(`settings.method.methods.${e.id}.desc`)}),m?h.jsxs("div",{className:"space-y-4",children:["straight"!==e.id&&h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:t("settings.method.flourRatio")}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("input",{type:"number",value:100*(y.flourRatio||0),onChange:e=>v(t=>o(l({},t),{flourRatio:parseFloat(e.target.value)/100||0})),min:"0",max:"100",step:"5",className:"w-full px-2 py-1.5 text-sm border rounded text-right font-mono"}),h.jsx("span",{className:"text-sm text-gray-500",children:"%"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:t("settings.method.waterRatio")}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("input",{type:"number",value:100*(y.waterRatio||0),onChange:e=>v(t=>o(l({},t),{waterRatio:parseFloat(e.target.value)/100||0})),min:"0",max:"150",step:"5",className:"w-full px-2 py-1.5 text-sm border rounded text-right font-mono"}),h.jsx("span",{className:"text-sm text-gray-500",children:"%"})]})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:t("settings.method.yeastAdjust")}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("input",{type:"range",min:"0",max:"150",step:"5",value:100*(y.yeastAdjustment||1),onChange:e=>v(t=>o(l({},t),{yeastAdjustment:parseFloat(e.target.value)/100})),className:"flex-1"}),h.jsxs("span",{className:"w-16 text-sm text-gray-600 font-mono text-right",children:[(100*(y.yeastAdjustment||1)).toFixed(0),"%"]})]}),h.jsx("p",{className:"text-xs text-gray-400 mt-1",children:0===(y.yeastAdjustment||1)?t("settings.method.yeastNone"):t("settings.method.yeastAmount",{percent:(100*(y.yeastAdjustment||1)).toFixed(0)})})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:t("settings.method.prefermentTime")}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("input",{type:"number",value:(null==(s=y.prefermentTime)?void 0:s.min)||0,onChange:e=>v(t=>o(l({},t),{prefermentTime:o(l({},t.prefermentTime),{min:parseFloat(e.target.value)||0})})),className:"w-full px-2 py-1.5 text-sm border rounded text-center font-mono",step:"0.5",min:"0"}),h.jsx("span",{className:"text-gray-400",children:"~"}),h.jsx("input",{type:"number",value:(null==(a=y.prefermentTime)?void 0:a.max)||0,onChange:e=>v(t=>o(l({},t),{prefermentTime:o(l({},t.prefermentTime),{max:parseFloat(e.target.value)||0})})),className:"w-full px-2 py-1.5 text-sm border rounded text-center font-mono",step:"0.5",min:"0"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:t("settings.method.prefermentTemp")}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("input",{type:"number",value:(null==(r=y.prefermentTemp)?void 0:r.min)||0,onChange:e=>v(t=>o(l({},t),{prefermentTemp:o(l({},t.prefermentTemp),{min:parseFloat(e.target.value)||0})})),className:"w-full px-2 py-1.5 text-sm border rounded text-center font-mono"}),h.jsx("span",{className:"text-gray-400",children:"~"}),h.jsx("input",{type:"number",value:(null==(n=y.prefermentTemp)?void 0:n.max)||0,onChange:e=>v(t=>o(l({},t),{prefermentTemp:o(l({},t.prefermentTemp),{max:parseFloat(e.target.value)||0})})),className:"w-full px-2 py-1.5 text-sm border rounded text-center font-mono"})]})]})]}),h.jsxs("div",{className:"flex gap-2 pt-2",children:[h.jsxs("button",{onClick:F,className:"flex items-center gap-1 px-3 py-1.5 bg-green-500 text-white rounded hover:bg-green-600 text-sm",children:[h.jsx(j,{className:"w-4 h-4"}),t("common.save")]}),h.jsx("button",{onClick:K,className:"px-3 py-1.5 border border-gray-300 rounded hover:bg-gray-50 text-sm",children:t("common.cancel")})]})]}):h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[e.flourRatio>0&&h.jsxs("div",{className:"p-2 bg-gray-50 rounded",children:[h.jsx("div",{className:"text-xs text-gray-500",children:t("settings.method.flour")}),h.jsxs("div",{className:"font-mono font-medium",children:[(100*e.flourRatio).toFixed(0),"%"]})]}),e.waterRatio>0&&h.jsxs("div",{className:"p-2 bg-gray-50 rounded",children:[h.jsx("div",{className:"text-xs text-gray-500",children:t("settings.method.water")}),h.jsxs("div",{className:"font-mono font-medium",children:[(100*e.waterRatio).toFixed(0),"%"]})]}),h.jsxs("div",{className:"p-2 bg-gray-50 rounded",children:[h.jsx("div",{className:"text-xs text-gray-500",children:t("settings.method.yeast")}),h.jsx("div",{className:"font-mono font-medium",children:0===e.yeastAdjustment?t("settings.method.none"):`${(100*e.yeastAdjustment).toFixed(0)}%`})]}),(e.prefermentTime.min>0||e.prefermentTime.max>0)&&h.jsxs("div",{className:"p-2 bg-gray-50 rounded",children:[h.jsx("div",{className:"text-xs text-gray-500",children:t("settings.method.fermentationTime")}),h.jsxs("div",{className:"font-mono font-medium",children:[e.prefermentTime.min,"~",e.prefermentTime.max,"h"]})]})]}),(e.prefermentTemp.min>0||e.prefermentTemp.max>0)&&h.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[h.jsx(ve,{className:"w-4 h-4 text-gray-400"}),t("settings.method.fermentationTemp"),": ",e.prefermentTemp.min,"~",e.prefermentTemp.max,"Â°C"]}),h.jsx("button",{onClick:()=>C(e.id),className:"text-sm text-blue-600 hover:text-blue-700",children:t("settings.method.editSettings")})]})]})]},e.id)})(e))]}),h.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-600",children:[h.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:t("settings.method.formulaTitle")}),h.jsxs("div",{className:"space-y-1 text-xs font-mono",children:[h.jsx("div",{children:t("settings.method.formulaTempCoef")}),h.jsx("div",{children:t("settings.method.formulaSaltCoef")}),h.jsx("div",{children:t("settings.method.formulaAdjustedTime")})]}),h.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[h.jsx(f,{className:"w-3 h-3 inline mr-1"}),t("settings.method.formulaNote")]})]})]})}const Re={bread:{mixing:1,fermentation:1.5,dividing:2,shaping:1,baking:12,cooling:2},cake:{mixing:.5,fermentation:0,dividing:.5,shaping:.5,baking:8,cooling:1},pastry:{mixing:1,fermentation:1,dividing:2.5,shaping:1.5,baking:10,cooling:1.5},cookie:{mixing:.5,fermentation:0,dividing:1,shaping:.5,baking:6,cooling:.5}},Ie=[{key:"mixing",icon:"ðŸ¥£"},{key:"fermentation",icon:"ðŸž"},{key:"dividing",icon:"âœ‚ï¸"},{key:"shaping",icon:"ðŸ‘"},{key:"baking",icon:"ðŸ”¥"},{key:"cooling",icon:"â„ï¸"}],Me=[{key:"bread",color:"bg-amber-100 border-amber-300"},{key:"cake",color:"bg-pink-100 border-pink-300"},{key:"pastry",color:"bg-blue-100 border-blue-300"},{key:"cookie",color:"bg-green-100 border-green-300"}],qe={bread:["pullman","mountain","brioche","baguette","ciabatta","sourdough"],cake:["genoise","chiffon","pound","brownie","cheesecake"],pastry:["croissant","danish","puff_pastry"],cookie:["cookie","scone"]};function $e({className:e=""}){var t;const{t:s}=m(),{yieldLoss:a,setCategoryLossOverride:r,setProductLossOverride:n,setEnvironmentAdjustment:i,resetToDefaults:c}=u(),[d,g]=x.useState(null),[p,b]=x.useState(null),[y,f]=x.useState(null),[v,N]=x.useState({}),[k,C]=x.useState({}),[F,K]=x.useState("bread"),S=x.useCallback(e=>{const t=Re[e]||Re.bread,s=a.categoryOverrides[e]||{};return l(l({},t),s)},[a.categoryOverrides]),P=x.useCallback((e,t)=>{const s=S(t),r=a.productOverrides[e]||{};return l(l({},s),r)},[S,a.productOverrides]),T=x.useCallback(e=>Object.values(e).reduce((e,t)=>e+t,0),[]),L=x.useCallback(e=>{N(a.categoryOverrides[e]||{}),b(e),g(e)},[a.categoryOverrides]),D=x.useCallback(()=>{p&&(r(p,v),b(null),N({}))},[p,v,r]),R=x.useCallback(e=>{C(a.productOverrides[e]||{}),f(e)},[a.productOverrides]),I=x.useCallback(()=>{y&&(n(y,k),f(null),C({}))},[y,k,n]),M=(e,t,a,r=!1)=>h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:Ie.map(n=>{const i=e[n.key],l=t[n.key],o=void 0!==i?i:l,c=void 0!==i;return h.jsxs("div",{className:"relative",children:[h.jsxs("label",{className:"block text-xs text-gray-500 mb-1 flex items-center gap-1",children:[h.jsx("span",{children:n.icon}),s(`settings.yieldLoss.stages.${n.key}.name`),c&&h.jsx("span",{className:"text-orange-500",children:"*"})]}),h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("input",{type:"number",value:o,onChange:e=>{const t=parseFloat(e.target.value);a(n.key,isNaN(t)?void 0:t)},className:"w-full px-2 py-1.5 text-sm border rounded text-right font-mono "+(c?"bg-orange-50 border-orange-200":"bg-white"),min:"0",max:"30",step:"0.5"}),h.jsx("span",{className:"text-xs text-gray-400",children:"%"})]}),r&&c&&h.jsxs("div",{className:"text-xs mt-0.5 "+(i>l?"text-red-500":"text-green-500"),children:[s("settings.yieldLoss.base")," ",l,"%",i>l?" â†‘":" â†“"]})]},n.key)})});return h.jsxs("div",{className:`space-y-6 ${e}`,children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[h.jsx(G,{className:"w-5 h-5 text-orange-500"}),s("settings.yieldLoss.title")]}),h.jsx("p",{className:"text-sm text-gray-500 mt-1",children:s("settings.yieldLoss.titleDesc")})]}),h.jsxs("button",{onClick:()=>{confirm(s("settings.yieldLoss.resetConfirm"))&&c("yieldLoss")},className:"flex items-center gap-1 text-sm text-gray-500 hover:text-gray-700",children:[h.jsx(B,{className:"w-4 h-4"}),s("settings.yieldLoss.resetToDefault")]})]}),h.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-100 rounded-lg",children:[h.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(be,{className:"w-5 h-5 text-blue-600"}),h.jsxs("div",{children:[h.jsx("div",{className:"font-medium text-gray-800",children:s("settings.yieldLoss.envAdjustment")}),h.jsx("div",{className:"text-xs text-gray-500",children:s("settings.yieldLoss.envAdjustmentDesc")})]})]}),h.jsx("div",{className:`w-12 h-6 rounded-full transition-colors ${a.enableEnvironmentAdjustment?"bg-blue-500":"bg-gray-300"} relative cursor-pointer`,onClick:()=>i(!a.enableEnvironmentAdjustment),children:h.jsx("div",{className:"absolute top-1 w-4 h-4 bg-white rounded-full transition-transform "+(a.enableEnvironmentAdjustment?"translate-x-7":"translate-x-1")})})]}),a.enableEnvironmentAdjustment&&h.jsxs("div",{className:"mt-2 text-xs text-blue-600 flex items-center gap-1",children:[h.jsx(w,{className:"w-3 h-3"}),s("settings.yieldLoss.envAdjustmentNote")]})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsx("h4",{className:"font-medium text-gray-700",children:s("settings.yieldLoss.categorySettings")}),Me.map(e=>{const t=d===e.key,n=p===e.key,i=S(e.key),c=T(i),m=Object.keys(a.categoryOverrides[e.key]||{}).length>0;return h.jsxs("div",{className:`border rounded-lg overflow-hidden ${e.color}`,children:[h.jsxs("button",{onClick:()=>g(t?null:e.key),className:"w-full flex items-center justify-between p-3 text-left",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"font-medium text-gray-800",children:s(`settings.yieldLoss.categories.${e.key}`)}),m&&h.jsx("span",{className:"px-1.5 py-0.5 text-xs bg-orange-200 text-orange-700 rounded",children:s("settings.yieldLoss.custom")})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("span",{className:"text-sm font-mono",children:[s("settings.yieldLoss.totalLoss"),": ",h.jsxs("span",{className:"font-bold",children:[c.toFixed(1),"%"]})]}),t?h.jsx(U,{className:"w-4 h-4"}):h.jsx(Q,{className:"w-4 h-4"})]})]}),t&&h.jsx("div",{className:"p-4 bg-white border-t space-y-4",children:n?h.jsxs(h.Fragment,{children:[M(v,Re[e.key],(e,t)=>N(s=>o(l({},s),{[e]:t})),!0),h.jsxs("div",{className:"flex gap-2 pt-2",children:[h.jsxs("button",{onClick:D,className:"flex items-center gap-1 px-3 py-1.5 bg-green-500 text-white rounded text-sm hover:bg-green-600",children:[h.jsx(j,{className:"w-4 h-4"}),s("common.save")]}),h.jsx("button",{onClick:()=>{b(null),N({})},className:"px-3 py-1.5 border border-gray-300 rounded text-sm hover:bg-gray-50",children:s("common.cancel")}),m&&h.jsx("button",{onClick:()=>{r(e.key,{}),b(null)},className:"px-3 py-1.5 text-red-600 text-sm hover:bg-red-50 rounded",children:s("settings.yieldLoss.resetToDefault")})]})]}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-3 text-sm",children:Ie.map(e=>h.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded",children:[h.jsx("div",{className:"text-lg",children:e.icon}),h.jsx("div",{className:"text-xs text-gray-500",children:s(`settings.yieldLoss.stages.${e.key}.name`)}),h.jsxs("div",{className:"font-mono font-medium",children:[i[e.key],"%"]})]},e.key))}),h.jsx("button",{onClick:()=>L(e.key),className:"text-sm text-blue-600 hover:text-blue-700",children:s("settings.yieldLoss.editLoss")})]})})]},e.key)})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("h4",{className:"font-medium text-gray-700",children:s("settings.yieldLoss.productOverride")}),h.jsx("select",{value:F,onChange:e=>K(e.target.value),className:"text-sm border rounded px-2 py-1",children:Me.map(e=>h.jsx("option",{value:e.key,children:s(`settings.yieldLoss.categories.${e.key}`)},e.key))})]}),h.jsx("div",{className:"space-y-2",children:null==(t=qe[F])?void 0:t.map(e=>{const t=Boolean(a.productOverrides[e]),r=y===e,i=P(e,F),c=T(i);return h.jsxs("div",{className:"border rounded-lg p-3 "+(t?"bg-orange-50 border-orange-200":"bg-white"),children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"font-medium text-gray-800",children:s(`settings.yieldLoss.products.${e}`)}),t&&h.jsx(Z,{className:"w-4 h-4 text-orange-500"})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("span",{className:"text-sm font-mono text-gray-600",children:[c.toFixed(1),"%"]}),r?h.jsxs("div",{className:"flex gap-1",children:[h.jsx("button",{onClick:I,className:"px-2 py-1 bg-green-500 text-white rounded text-xs",children:s("common.save")}),h.jsx("button",{onClick:()=>{f(null),C({})},className:"px-2 py-1 border rounded text-xs",children:s("common.cancel")})]}):h.jsx("button",{onClick:()=>R(e),className:"text-xs text-blue-600 hover:text-blue-700",children:s("settings.yieldLoss.edit")})]})]}),r&&h.jsxs("div",{className:"mt-3 pt-3 border-t",children:[M(k,S(F),(e,t)=>C(s=>o(l({},s),{[e]:t})),!0),t&&h.jsx("button",{onClick:()=>{n(e,{}),f(null)},className:"mt-2 text-xs text-red-600 hover:text-red-700",children:s("settings.yieldLoss.removeOverride")})]})]},e)})})]}),h.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[h.jsxs("h4",{className:"font-medium text-gray-700 mb-3 flex items-center gap-2",children:[h.jsx(w,{className:"w-4 h-4"}),s("settings.yieldLoss.guide")]}),h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:Ie.map(e=>h.jsxs("div",{children:[h.jsxs("div",{className:"font-medium text-gray-600 mb-1",children:[e.icon," ",s(`settings.yieldLoss.stages.${e.key}.name`)]}),h.jsx("div",{className:"text-xs text-gray-500",children:s(`settings.yieldLoss.stages.${e.key}.range`)})]},e.key))}),h.jsxs("div",{className:"mt-3 text-xs text-gray-500 flex items-start gap-1",children:[h.jsx(J,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),h.jsx("span",{children:s("settings.yieldLoss.guideNote")})]})]})]})}const Oe={"ê°•ë ¥ë¶„":{name:"bread_flour",nameKo:"ê°•ë ¥ë¶„",calories:361,protein:11.7,carbohydrates:75.3,fat:1.2,fiber:2.7,sugar:.3,sodium:2,cholesterol:0,calcium:15,iron:1.2},"ì¤‘ë ¥ë¶„":{name:"all_purpose_flour",nameKo:"ì¤‘ë ¥ë¶„",calories:364,protein:10.3,carbohydrates:76.3,fat:1,fiber:2.7,sugar:.3,sodium:2,cholesterol:0},"ë°•ë ¥ë¶„":{name:"cake_flour",nameKo:"ë°•ë ¥ë¶„",calories:362,protein:8.3,carbohydrates:78.3,fat:.9,fiber:2.4,sugar:.3,sodium:2,cholesterol:0},"í†µë°€ê°€ë£¨":{name:"whole_wheat_flour",nameKo:"í†µë°€ê°€ë£¨",calories:340,protein:13.2,carbohydrates:71.9,fat:2.5,fiber:10.7,sugar:.4,sodium:2,cholesterol:0,iron:3.6},"í˜¸ë°€ê°€ë£¨":{name:"rye_flour",nameKo:"í˜¸ë°€ê°€ë£¨",calories:349,protein:9.8,carbohydrates:75.9,fat:1.3,fiber:11.8,sugar:.9,sodium:2,cholesterol:0},"ìŒ€ê°€ë£¨":{name:"rice_flour",nameKo:"ìŒ€ê°€ë£¨",calories:366,protein:5.9,carbohydrates:80.1,fat:1.4,fiber:2.4,sugar:.1,sodium:0,cholesterol:0},"ì°¹ìŒ€ê°€ë£¨":{name:"glutinous_rice_flour",nameKo:"ì°¹ìŒ€ê°€ë£¨",calories:370,protein:6.8,carbohydrates:81.7,fat:.6,fiber:2.8,sugar:.1,sodium:0,cholesterol:0},"ì•„ëª¬ë“œê°€ë£¨":{name:"almond_flour",nameKo:"ì•„ëª¬ë“œê°€ë£¨",calories:579,protein:21.2,carbohydrates:21.5,fat:49.9,fiber:12.5,sugar:4.4,sodium:1,cholesterol:0},"ì½”ì½”ë„›ê°€ë£¨":{name:"coconut_flour",nameKo:"ì½”ì½”ë„›ê°€ë£¨",calories:443,protein:19.3,carbohydrates:60,fat:14.1,fiber:39,sugar:8,sodium:32,cholesterol:0},"ì˜¥ìˆ˜ìˆ˜ì „ë¶„":{name:"corn_starch",nameKo:"ì˜¥ìˆ˜ìˆ˜ì „ë¶„",calories:381,protein:.3,carbohydrates:91.3,fat:.1,fiber:.9,sugar:0,sodium:9,cholesterol:0},"íƒ€í”¼ì˜¤ì¹´ì „ë¶„":{name:"tapioca_starch",nameKo:"íƒ€í”¼ì˜¤ì¹´ì „ë¶„",calories:358,protein:.2,carbohydrates:88.7,fat:0,fiber:.9,sugar:3.4,sodium:1,cholesterol:0},"ê°ìžì „ë¶„":{name:"potato_starch",nameKo:"ê°ìžì „ë¶„",calories:333,protein:.1,carbohydrates:83.1,fat:0,fiber:0,sugar:0,sodium:0,cholesterol:0},"ì„¤íƒ•":{name:"sugar",nameKo:"ì„¤íƒ•",calories:387,protein:0,carbohydrates:99.9,fat:0,fiber:0,sugar:99.9,sodium:1,cholesterol:0},"í™©ì„¤íƒ•":{name:"brown_sugar",nameKo:"í™©ì„¤íƒ•",calories:380,protein:.1,carbohydrates:98.1,fat:0,fiber:0,sugar:97.3,sodium:28,cholesterol:0,calcium:83},"ê¿€":{name:"honey",nameKo:"ê¿€",calories:304,protein:.3,carbohydrates:82.4,fat:0,fiber:.2,sugar:82.1,sodium:4,cholesterol:0},"ë©”ì´í”Œì‹œëŸ½":{name:"maple_syrup",nameKo:"ë©”ì´í”Œì‹œëŸ½",calories:260,protein:.1,carbohydrates:67,fat:.1,fiber:0,sugar:60.5,sodium:12,cholesterol:0,calcium:102},"í‘ì„¤íƒ•":{name:"dark_brown_sugar",nameKo:"í‘ì„¤íƒ•",calories:377,protein:.1,carbohydrates:97.3,fat:0,fiber:0,sugar:96.2,sodium:39,cholesterol:0,calcium:85},"ìŠˆê°€íŒŒìš°ë”":{name:"powdered_sugar",nameKo:"ìŠˆê°€íŒŒìš°ë”",calories:389,protein:0,carbohydrates:99.8,fat:0,fiber:0,sugar:97.8,sodium:1,cholesterol:0},"ë¬¼ì—¿":{name:"corn_syrup",nameKo:"ë¬¼ì—¿",calories:286,protein:0,carbohydrates:77,fat:0,fiber:0,sugar:35,sodium:55,cholesterol:0},"ì¡°ì²­":{name:"rice_syrup",nameKo:"ì¡°ì²­",calories:316,protein:.3,carbohydrates:85.5,fat:0,fiber:0,sugar:48,sodium:6,cholesterol:0},"ì˜¬ë¦¬ê³ ë‹¹":{name:"oligosaccharide",nameKo:"ì˜¬ë¦¬ê³ ë‹¹",calories:240,protein:0,carbohydrates:80,fat:0,fiber:0,sugar:30,sodium:0,cholesterol:0},"íŠ¸ë ˆí• ë¡œìŠ¤":{name:"trehalose",nameKo:"íŠ¸ë ˆí• ë¡œìŠ¤",calories:380,protein:0,carbohydrates:100,fat:0,fiber:0,sugar:100,sodium:0,cholesterol:0},"ë²„í„°":{name:"butter",nameKo:"ë²„í„°",calories:717,protein:.9,carbohydrates:.1,fat:81.1,fiber:0,sugar:.1,sodium:11,cholesterol:215,saturatedFat:51.4,vitaminA:2499},"ë§ˆê°€ë¦°":{name:"margarine",nameKo:"ë§ˆê°€ë¦°",calories:719,protein:.2,carbohydrates:.9,fat:80.5,fiber:0,sugar:0,sodium:751,cholesterol:0,saturatedFat:13,transFat:14.9},"ì‡¼íŠ¸ë‹":{name:"shortening",nameKo:"ì‡¼íŠ¸ë‹",calories:884,protein:0,carbohydrates:0,fat:100,fiber:0,sugar:0,sodium:0,cholesterol:0,saturatedFat:25},"ì˜¬ë¦¬ë¸Œì˜¤ì¼":{name:"olive_oil",nameKo:"ì˜¬ë¦¬ë¸Œì˜¤ì¼",calories:884,protein:0,carbohydrates:0,fat:100,fiber:0,sugar:0,sodium:2,cholesterol:0,saturatedFat:13.8},"ì˜¬ë¦¬ë¸Œìœ ":{name:"olive_oil",nameKo:"ì˜¬ë¦¬ë¸Œìœ ",calories:884,protein:0,carbohydrates:0,fat:100,fiber:0,sugar:0,sodium:2,cholesterol:0,saturatedFat:13.8},"ë¬´ì—¼ë²„í„°":{name:"unsalted_butter",nameKo:"ë¬´ì—¼ë²„í„°",calories:717,protein:.9,carbohydrates:.1,fat:81.1,fiber:0,sugar:.1,sodium:11,cholesterol:215,saturatedFat:51.4},"ê°€ì—¼ë²„í„°":{name:"salted_butter",nameKo:"ê°€ì—¼ë²„í„°",calories:717,protein:.9,carbohydrates:.1,fat:81.1,fiber:0,sugar:.1,sodium:643,cholesterol:215,saturatedFat:51.4},"ì‹ìš©ìœ ":{name:"vegetable_oil",nameKo:"ì‹ìš©ìœ ",calories:884,protein:0,carbohydrates:0,fat:100,fiber:0,sugar:0,sodium:0,cholesterol:0},"í¬ë„ì”¨ìœ ":{name:"grapeseed_oil",nameKo:"í¬ë„ì”¨ìœ ",calories:884,protein:0,carbohydrates:0,fat:100,fiber:0,sugar:0,sodium:0,cholesterol:0},"ì½”ì½”ë„›ì˜¤ì¼":{name:"coconut_oil",nameKo:"ì½”ì½”ë„›ì˜¤ì¼",calories:862,protein:0,carbohydrates:0,fat:100,fiber:0,sugar:0,sodium:0,cholesterol:0,saturatedFat:82.5},"ë¼ë“œ":{name:"lard",nameKo:"ë¼ë“œ",calories:902,protein:0,carbohydrates:0,fat:100,fiber:0,sugar:0,sodium:0,cholesterol:95,saturatedFat:39.2},"ìš°ìœ ":{name:"milk",nameKo:"ìš°ìœ ",calories:61,protein:3.2,carbohydrates:4.8,fat:3.3,fiber:0,sugar:5.1,sodium:43,cholesterol:10,calcium:113},"ìƒí¬ë¦¼":{name:"heavy_cream",nameKo:"ìƒí¬ë¦¼",calories:345,protein:2.1,carbohydrates:2.8,fat:37,fiber:0,sugar:2.9,sodium:38,cholesterol:137,saturatedFat:23},"í¬ë¦¼ì¹˜ì¦ˆ":{name:"cream_cheese",nameKo:"í¬ë¦¼ì¹˜ì¦ˆ",calories:342,protein:5.9,carbohydrates:4.1,fat:34.2,fiber:0,sugar:3.2,sodium:321,cholesterol:110,saturatedFat:19.3},"ìš”ê±°íŠ¸":{name:"yogurt",nameKo:"ìš”ê±°íŠ¸",calories:59,protein:3.5,carbohydrates:4.7,fat:3.3,fiber:0,sugar:4.7,sodium:46,cholesterol:13,calcium:121},"ê·¸ë¦­ìš”ê±°íŠ¸":{name:"greek_yogurt",nameKo:"ê·¸ë¦­ìš”ê±°íŠ¸",calories:97,protein:9,carbohydrates:3.6,fat:5,fiber:0,sugar:3.2,sodium:36,cholesterol:14},"ì‚¬ì›Œí¬ë¦¼":{name:"sour_cream",nameKo:"ì‚¬ì›Œí¬ë¦¼",calories:193,protein:2.4,carbohydrates:4.6,fat:19.4,fiber:0,sugar:3.5,sodium:80,cholesterol:52},"ë§ˆìŠ¤ì¹´í¬ë„¤":{name:"mascarpone",nameKo:"ë§ˆìŠ¤ì¹´í¬ë„¤",calories:429,protein:4.8,carbohydrates:3.6,fat:44.6,fiber:0,sugar:3.5,sodium:41,cholesterol:140},"ë¦¬ì½”íƒ€ì¹˜ì¦ˆ":{name:"ricotta_cheese",nameKo:"ë¦¬ì½”íƒ€ì¹˜ì¦ˆ",calories:174,protein:11.3,carbohydrates:3,fat:13,fiber:0,sugar:.3,sodium:84,cholesterol:51},"ë²„í„°ë°€í¬":{name:"buttermilk",nameKo:"ë²„í„°ë°€í¬",calories:40,protein:3.3,carbohydrates:4.8,fat:.9,fiber:0,sugar:4.8,sodium:105,cholesterol:4},"íƒˆì§€ë¶„ìœ ":{name:"skim_milk_powder",nameKo:"íƒˆì§€ë¶„ìœ ",calories:362,protein:36.2,carbohydrates:52,fat:.8,fiber:0,sugar:52,sodium:535,cholesterol:18},"ë‘ìœ ":{name:"soy_milk",nameKo:"ë‘ìœ ",calories:54,protein:3.3,carbohydrates:6.3,fat:1.8,fiber:.6,sugar:4,sodium:51,cholesterol:0},"ì•„ëª¬ë“œìš°ìœ ":{name:"almond_milk",nameKo:"ì•„ëª¬ë“œìš°ìœ ",calories:17,protein:.6,carbohydrates:2.5,fat:.6,fiber:.2,sugar:0,sodium:67,cholesterol:0},"ê·€ë¦¬ìš°ìœ ":{name:"oat_milk",nameKo:"ê·€ë¦¬ìš°ìœ ",calories:47,protein:1,carbohydrates:9.3,fat:1.5,fiber:.8,sugar:4,sodium:40,cholesterol:0},"ì½”ì½”ë„›ë°€í¬":{name:"coconut_milk",nameKo:"ì½”ì½”ë„›ë°€í¬",calories:230,protein:2.3,carbohydrates:5.5,fat:23.8,fiber:2.2,sugar:3.3,sodium:15,cholesterol:0},"ì—°ìœ ":{name:"condensed_milk",nameKo:"ì—°ìœ ",calories:321,protein:7.9,carbohydrates:54.4,fat:8.7,fiber:0,sugar:54.4,sodium:127,cholesterol:34},"ê³„ëž€":{name:"egg",nameKo:"ê³„ëž€",calories:155,protein:13,carbohydrates:1.1,fat:10.6,fiber:0,sugar:1.1,sodium:124,cholesterol:373,saturatedFat:3.1,iron:1.8},"ê³„ëž€í°ìž":{name:"egg_white",nameKo:"ê³„ëž€í°ìž",calories:52,protein:10.9,carbohydrates:.7,fat:.2,fiber:0,sugar:.7,sodium:166,cholesterol:0},"ê³„ëž€ë…¸ë¥¸ìž":{name:"egg_yolk",nameKo:"ê³„ëž€ë…¸ë¥¸ìž",calories:322,protein:15.9,carbohydrates:3.6,fat:26.5,fiber:0,sugar:.6,sodium:48,cholesterol:1085,saturatedFat:9.6},"ì•„ëª¬ë“œ":{name:"almond",nameKo:"ì•„ëª¬ë“œ",calories:579,protein:21.2,carbohydrates:21.6,fat:49.9,fiber:12.5,sugar:4.4,sodium:1,cholesterol:0,calcium:269,iron:3.7},"í˜¸ë‘":{name:"walnut",nameKo:"í˜¸ë‘",calories:654,protein:15.2,carbohydrates:13.7,fat:65.2,fiber:6.7,sugar:2.6,sodium:2,cholesterol:0},"í”¼ìŠ¤íƒ€ì¹˜ì˜¤":{name:"pistachio",nameKo:"í”¼ìŠ¤íƒ€ì¹˜ì˜¤",calories:560,protein:20.2,carbohydrates:27.2,fat:45.3,fiber:10.6,sugar:7.7,sodium:1,cholesterol:0},"ë‹¤í¬ì´ˆì½œë¦¿":{name:"dark_chocolate",nameKo:"ë‹¤í¬ì´ˆì½œë¦¿",calories:546,protein:4.9,carbohydrates:61.2,fat:31.3,fiber:7,sugar:47.9,sodium:24,cholesterol:3,saturatedFat:18.5},"ë°€í¬ì´ˆì½œë¦¿":{name:"milk_chocolate",nameKo:"ë°€í¬ì´ˆì½œë¦¿",calories:535,protein:7.6,carbohydrates:59.4,fat:29.7,fiber:3.4,sugar:51.5,sodium:79,cholesterol:23,saturatedFat:18.5},"ì½”ì½”ì•„íŒŒìš°ë”":{name:"cocoa_powder",nameKo:"ì½”ì½”ì•„íŒŒìš°ë”",calories:228,protein:19.6,carbohydrates:57.9,fat:13.7,fiber:33.2,sugar:1.8,sodium:21,cholesterol:0},"ì´ìŠ¤íŠ¸":{name:"yeast",nameKo:"ì´ìŠ¤íŠ¸",calories:325,protein:40.4,carbohydrates:41.2,fat:7.6,fiber:26.9,sugar:0,sodium:51,cholesterol:0},"ì¸ìŠ¤í„´íŠ¸ì´ìŠ¤íŠ¸":{name:"instant_yeast",nameKo:"ì¸ìŠ¤í„´íŠ¸ì´ìŠ¤íŠ¸",calories:325,protein:40.4,carbohydrates:41.2,fat:7.6,fiber:26.9,sugar:0,sodium:51,cholesterol:0},"ë“œë¼ì´ì´ìŠ¤íŠ¸":{name:"active_dry_yeast",nameKo:"ë“œë¼ì´ì´ìŠ¤íŠ¸",calories:325,protein:40.4,carbohydrates:41.2,fat:7.6,fiber:26.9,sugar:0,sodium:51,cholesterol:0},"ìƒì´ìŠ¤íŠ¸":{name:"fresh_yeast",nameKo:"ìƒì´ìŠ¤íŠ¸",calories:105,protein:8.4,carbohydrates:18.1,fat:1.9,fiber:8,sugar:0,sodium:16,cholesterol:0},"ë² ì´í‚¹ì†Œë‹¤":{name:"baking_soda",nameKo:"ë² ì´í‚¹ì†Œë‹¤",calories:0,protein:0,carbohydrates:0,fat:0,fiber:0,sugar:0,sodium:27360,cholesterol:0},"ë² ì´í‚¹íŒŒìš°ë”":{name:"baking_powder",nameKo:"ë² ì´í‚¹íŒŒìš°ë”",calories:53,protein:0,carbohydrates:27.7,fat:0,fiber:.2,sugar:0,sodium:10600,cholesterol:0},"ì†Œê¸ˆ":{name:"salt",nameKo:"ì†Œê¸ˆ",calories:0,protein:0,carbohydrates:0,fat:0,fiber:0,sugar:0,sodium:38758,cholesterol:0},"ë°”ë‹ë¼ì¶”ì¶œë¬¼":{name:"vanilla_extract",nameKo:"ë°”ë‹ë¼ì¶”ì¶œë¬¼",calories:288,protein:.1,carbohydrates:12.7,fat:.1,fiber:0,sugar:12.7,sodium:9,cholesterol:0},"ë°”ë‹ë¼ìµìŠ¤íŠ¸ëž™":{name:"vanilla_extract",nameKo:"ë°”ë‹ë¼ìµìŠ¤íŠ¸ëž™",calories:288,protein:.1,carbohydrates:12.7,fat:.1,fiber:0,sugar:12.7,sodium:9,cholesterol:0},"ì²œì¼ì—¼":{name:"sea_salt",nameKo:"ì²œì¼ì—¼",calories:0,protein:0,carbohydrates:0,fat:0,fiber:0,sugar:0,sodium:37800,cholesterol:0},"ê±´í¬ë„":{name:"raisins",nameKo:"ê±´í¬ë„",calories:299,protein:3.1,carbohydrates:79.2,fat:.5,fiber:3.7,sugar:59.2,sodium:11,cholesterol:0},"ê±´í¬ëžœë² ë¦¬":{name:"dried_cranberry",nameKo:"ê±´í¬ëžœë² ë¦¬",calories:308,protein:.1,carbohydrates:82.4,fat:1.4,fiber:5.7,sugar:65,sodium:3,cholesterol:0},"ê±´ë¸”ë£¨ë² ë¦¬":{name:"dried_blueberry",nameKo:"ê±´ë¸”ë£¨ë² ë¦¬",calories:317,protein:2.5,carbohydrates:80,fat:1,fiber:7,sugar:67,sodium:2,cholesterol:0},"ì‚¬ê³¼":{name:"apple",nameKo:"ì‚¬ê³¼",calories:52,protein:.3,carbohydrates:13.8,fat:.2,fiber:2.4,sugar:10.4,sodium:1,cholesterol:0},"ë°”ë‚˜ë‚˜":{name:"banana",nameKo:"ë°”ë‚˜ë‚˜",calories:89,protein:1.1,carbohydrates:22.8,fat:.3,fiber:2.6,sugar:12.2,sodium:1,cholesterol:0},"ë”¸ê¸°":{name:"strawberry",nameKo:"ë”¸ê¸°",calories:32,protein:.7,carbohydrates:7.7,fat:.3,fiber:2,sugar:4.9,sodium:1,cholesterol:0},"ë¸”ë£¨ë² ë¦¬":{name:"blueberry",nameKo:"ë¸”ë£¨ë² ë¦¬",calories:57,protein:.7,carbohydrates:14.5,fat:.3,fiber:2.4,sugar:10,sodium:1,cholesterol:0},"ì˜¤ë Œì§€í•„":{name:"candied_orange_peel",nameKo:"ì˜¤ë Œì§€í•„",calories:300,protein:.5,carbohydrates:75,fat:.2,fiber:2.5,sugar:65,sodium:10,cholesterol:0},"í”¼ì¹¸":{name:"pecan",nameKo:"í”¼ì¹¸",calories:691,protein:9.2,carbohydrates:13.9,fat:72,fiber:9.6,sugar:4,sodium:0,cholesterol:0},"í—¤ì´ì¦ë„›":{name:"hazelnut",nameKo:"í—¤ì´ì¦ë„›",calories:628,protein:15,carbohydrates:16.7,fat:60.8,fiber:9.7,sugar:4.3,sodium:0,cholesterol:0},"ìºìŠˆë„›":{name:"cashew",nameKo:"ìºìŠˆë„›",calories:553,protein:18.2,carbohydrates:30.2,fat:43.8,fiber:3.3,sugar:5.9,sodium:12,cholesterol:0},"ë§ˆì¹´ë‹¤ë¯¸ì•„":{name:"macadamia",nameKo:"ë§ˆì¹´ë‹¤ë¯¸ì•„",calories:718,protein:7.9,carbohydrates:13.8,fat:75.8,fiber:8.6,sugar:4.6,sodium:5,cholesterol:0},"ë•…ì½©":{name:"peanut",nameKo:"ë•…ì½©",calories:567,protein:25.8,carbohydrates:16.1,fat:49.2,fiber:8.5,sugar:4.7,sodium:18,cholesterol:0},"í™”ì´íŠ¸ì´ˆì½œë¦¿":{name:"white_chocolate",nameKo:"í™”ì´íŠ¸ì´ˆì½œë¦¿",calories:539,protein:5.9,carbohydrates:59.2,fat:32.1,fiber:0,sugar:59,sodium:90,cholesterol:21},"ì´ˆì½”ì¹©":{name:"chocolate_chips",nameKo:"ì´ˆì½”ì¹©",calories:479,protein:4.5,carbohydrates:62.5,fat:24.5,fiber:6,sugar:52,sodium:24,cholesterol:3},"ì¹´ì¹´ì˜¤ë‹™ìŠ¤":{name:"cacao_nibs",nameKo:"ì¹´ì¹´ì˜¤ë‹™ìŠ¤",calories:228,protein:14.3,carbohydrates:34.7,fat:42.6,fiber:33,sugar:0,sodium:21,cholesterol:0},"ì¹´ì¹´ì˜¤ë²„í„°":{name:"cocoa_butter",nameKo:"ì¹´ì¹´ì˜¤ë²„í„°",calories:884,protein:0,carbohydrates:0,fat:100,fiber:0,sugar:0,sodium:0,cholesterol:0},"ì ¤ë¼í‹´":{name:"gelatin",nameKo:"ì ¤ë¼í‹´",calories:335,protein:85.6,carbohydrates:0,fat:.1,fiber:0,sugar:0,sodium:196,cholesterol:0},"í•œì²œ":{name:"agar",nameKo:"í•œì²œ",calories:26,protein:.5,carbohydrates:6.8,fat:0,fiber:.5,sugar:0,sodium:9,cholesterol:0},"íŽ™í‹´":{name:"pectin",nameKo:"íŽ™í‹´",calories:325,protein:0,carbohydrates:89,fat:0,fiber:89,sugar:0,sodium:200,cholesterol:0},"ëª°íŠ¸":{name:"malt",nameKo:"ëª°íŠ¸",calories:318,protein:6,carbohydrates:71,fat:1.9,fiber:0,sugar:45,sodium:35,cholesterol:0},"ì‹œë‚˜ëª¬":{name:"cinnamon",nameKo:"ì‹œë‚˜ëª¬",calories:247,protein:4,carbohydrates:80.6,fat:1.2,fiber:53.1,sugar:2.2,sodium:10,cholesterol:0},"ë…¹ì°¨ê°€ë£¨":{name:"matcha",nameKo:"ë…¹ì°¨ê°€ë£¨",calories:324,protein:29.6,carbohydrates:38.9,fat:5.3,fiber:38.5,sugar:0,sodium:32,cholesterol:0},"ë ˆëª¬ì¦™":{name:"lemon_juice",nameKo:"ë ˆëª¬ì¦™",calories:22,protein:.4,carbohydrates:6.9,fat:.2,fiber:.3,sugar:2.5,sodium:1,cholesterol:0}},_e=[{original:"ë°•ë ¥ë¶„",substitute:"ì¤‘ë ¥ë¶„",ratio:.93,notes:"ì¤‘ë ¥ë¶„ 93g + ì˜¥ìˆ˜ìˆ˜ì „ë¶„ 7g = ë°•ë ¥ë¶„ 100g íš¨ê³¼. ê¸€ë£¨í… í•¨ëŸ‰ ì°¨ì´ë¡œ ì˜¥ìˆ˜ìˆ˜ì „ë¶„ ì¶”ê°€",category:"adjusted",qualityImpact:"minor",bestFor:["ì¼€ì´í¬","ì¿ í‚¤","ë¨¸í•€"],notRecommendedFor:["ìŠ¤íŽ€ì§€ì¼€ì´í¬","ì‰¬í°ì¼€ì´í¬"]},{original:"ê°•ë ¥ë¶„",substitute:"ì¤‘ë ¥ë¶„",ratio:1,notes:"ì¤‘ë ¥ë¶„ 100g + ê¸€ë£¨í… 1-2g = ê°•ë ¥ë¶„ 100g íš¨ê³¼. ë¹µì˜ ì«„ê¹ƒí•¨ ë³´ì™„",category:"adjusted",qualityImpact:"moderate",bestFor:["ê°„ë‹¨í•œ ë¹µ","í”¼ìžë„ìš°"],notRecommendedFor:["ë°”ê²ŒíŠ¸","ì¹˜ì•„ë°”íƒ€","ê³ ê¸‰ ìœ ëŸ½ë¹µ"]},{original:"í†µë°€ê°€ë£¨",substitute:"ì¤‘ë ¥ë¶„",ratio:1,notes:"ì˜ì–‘ ë° ì‹ì´ì„¬ìœ  ì†ì‹¤. ìˆ˜ë¶„ í¡ìˆ˜ìœ¨ ë‹¤ë¦„",category:"direct",qualityImpact:"moderate",bestFor:["ë¹µ","ë¨¸í•€"],notRecommendedFor:["í†µë°€ íŠ¹ìœ  í’ë¯¸ í•„ìš”í•œ ë ˆì‹œí”¼"]},{original:"ì„¤íƒ•",substitute:"ê¿€",ratio:.75,notes:"ì„¤íƒ• 100g = ê¿€ 75g. ì•¡ì²´ ìž¬ë£Œ 20ml ê°ì†Œ í•„ìš”. ê°ˆë³€ ë¹¨ë¼ì§",category:"adjusted",qualityImpact:"moderate",bestFor:["ì¼€ì´í¬","ì¿ í‚¤","ë¹µ"],notRecommendedFor:["ë§ˆì¹´ë¡±","ë¨¸ëž­"]},{original:"ì„¤íƒ•",substitute:"ë©”ì´í”Œì‹œëŸ½",ratio:.75,notes:"ì„¤íƒ• 100g = ë©”ì´í”Œì‹œëŸ½ 75g. ì•¡ì²´ ìž¬ë£Œ 30ml ê°ì†Œ. ë©”ì´í”Œ í’ë¯¸ ì¶”ê°€",category:"adjusted",qualityImpact:"moderate",bestFor:["íŒ¬ì¼€ì´í¬","ì™€í”Œ","ë¨¸í•€"]},{original:"í™©ì„¤íƒ•",substitute:"ì„¤íƒ•",ratio:1,notes:"ì„¤íƒ• 100g + ëª°ë¼ì„¸ìŠ¤ 2-3í°ìˆ  = í™©ì„¤íƒ• 100g íš¨ê³¼",category:"adjusted",qualityImpact:"minor",bestFor:["ì¿ í‚¤","ì¼€ì´í¬"]},{original:"í‘ì„¤íƒ•",substitute:"ì„¤íƒ•",ratio:1,notes:"ì„¤íƒ• 100g + ëª°ë¼ì„¸ìŠ¤ 3-4í°ìˆ  = í‘ì„¤íƒ• 100g íš¨ê³¼",category:"adjusted",qualityImpact:"minor",bestFor:["ì§„ì €ë¸Œë ˆë“œ","ê³¼ì¼ì¼€ì´í¬"]},{original:"ë²„í„°",substitute:"ì‹ìš©ìœ ",ratio:.85,notes:"ë²„í„° 100g = ì‹ìš©ìœ  85g. ë²„í„° í’ë¯¸ ì†ì‹¤, ë” ì´‰ì´‰í•œ ì§ˆê°",category:"adjusted",qualityImpact:"moderate",bestFor:["ë¨¸í•€","ì¼€ì´í¬"],notRecommendedFor:["ì¿ í‚¤","íŒŒì´","í¬ë£¨ì•„ìƒ"]},{original:"ë²„í„°",substitute:"ì½”ì½”ë„›ì˜¤ì¼",ratio:1,notes:"1:1 ëŒ€ì²´. ê³ ì²´ ìƒíƒœì—ì„œ ì‚¬ìš©. ì½”ì½”ë„› í’ë¯¸ ì•½ê°„ ëŠê»´ì§",category:"direct",qualityImpact:"minor",bestFor:["ë¹„ê±´ ë² ì´í‚¹","ì¿ í‚¤","ì¼€ì´í¬"]},{original:"ë²„í„°",substitute:"ë§ˆê°€ë¦°",ratio:1,notes:"1:1 ëŒ€ì²´ ê°€ëŠ¥. í’ë¯¸ ì°¨ì´ ìžˆìŒ",category:"direct",qualityImpact:"minor",bestFor:["ì¿ í‚¤","ì¼€ì´í¬","ë¹µ"]},{original:"ë²„í„°",substitute:"ì‡¼íŠ¸ë‹",ratio:1,notes:"1:1 ëŒ€ì²´. ì†Œê¸ˆ 1/2 í‹°ìŠ¤í‘¼ ì¶”ê°€ ê¶Œìž¥",category:"adjusted",qualityImpact:"moderate",bestFor:["íŒŒì´","íƒ€ë¥´íŠ¸","ì¿ í‚¤"],notRecommendedFor:["ë²„í„°í¬ë¦¼","ë¸Œë¦¬ì˜¤ìŠˆ"]},{original:"ë¼ë“œ",substitute:"ë²„í„°",ratio:.875,notes:"ë¼ë“œ 100g = ë²„í„° 87.5g. ìˆ˜ë¶„ í•¨ëŸ‰ ì°¨ì´ ë³´ì •",category:"adjusted",qualityImpact:"minor",bestFor:["íŒŒì´í¬ëŸ¬ìŠ¤íŠ¸"]},{original:"ê³„ëž€",substitute:"ì•„ë§ˆì”¨",ratio:1,notes:"ê³„ëž€ 1ê°œ = ì•„ë§ˆì”¨ 1í°ìˆ  + ë¬¼ 3í°ìˆ  (5ë¶„ ë¶ˆë¦¼). ë°”ì¸ë” ì—­í• ",category:"special",qualityImpact:"moderate",bestFor:["ì¿ í‚¤","ë¨¸í•€","íŒ¬ì¼€ì´í¬"],notRecommendedFor:["ì»¤ìŠ¤í„°ë“œ","ìˆ˜í”Œë ˆ","ë§ˆì¹´ë¡±"]},{original:"ê³„ëž€",substitute:"ì¹˜ì•„ì”¨ë“œ",ratio:1,notes:"ê³„ëž€ 1ê°œ = ì¹˜ì•„ì”¨ë“œ 1í°ìˆ  + ë¬¼ 3í°ìˆ  (5ë¶„ ë¶ˆë¦¼)",category:"special",qualityImpact:"moderate",bestFor:["ì¿ í‚¤","ë¨¸í•€","íŒ¬ì¼€ì´í¬"]},{original:"ê³„ëž€",substitute:"ì‚¬ê³¼ì†ŒìŠ¤",ratio:1,notes:"ê³„ëž€ 1ê°œ = ì‚¬ê³¼ì†ŒìŠ¤ 1/3ì»µ (ì•½ 80g). ì´‰ì´‰í•¨ ìœ ì§€",category:"special",qualityImpact:"moderate",bestFor:["ì¼€ì´í¬","ë¨¸í•€","ë¸Œë¼ìš°ë‹ˆ"]},{original:"ê³„ëž€",substitute:"ë°”ë‚˜ë‚˜",ratio:1,notes:"ê³„ëž€ 1ê°œ = ìœ¼ê¹¬ ë°”ë‚˜ë‚˜ 1/2ê°œ (ì•½ 60g). ë°”ë‚˜ë‚˜ í–¥ ì¶”ê°€ë¨",category:"special",qualityImpact:"moderate",bestFor:["ì¼€ì´í¬","ë¨¸í•€","ë¹µ"]},{original:"ê³„ëž€í°ìž",substitute:"ì•„ì¿ ì•„íŒŒë°”",ratio:1,notes:"í°ìž 1ê°œ = ì•„ì¿ ì•„íŒŒë°” 3í°ìˆ . ë¨¸ëž­, ë§ˆì¹´ë¡±ì— ì í•©",category:"special",qualityImpact:"minor",bestFor:["ë¨¸ëž­","ë§ˆì¹´ë¡±","ë¬´ìŠ¤"]},{original:"ìš°ìœ ",substitute:"ë‘ìœ ",ratio:1,notes:"1:1 ëŒ€ì²´. ë¬´ê°€ë‹¹ ì‚¬ìš© ê¶Œìž¥",category:"direct",qualityImpact:"minor",bestFor:["ì¼€ì´í¬","ë¹µ","ë¨¸í•€"]},{original:"ìš°ìœ ",substitute:"ì•„ëª¬ë“œìš°ìœ ",ratio:1,notes:"1:1 ëŒ€ì²´. ìš°ìœ ë³´ë‹¤ ë¬½ìŒ, ì•½ê°„ì˜ ê²¬ê³¼í–¥",category:"direct",qualityImpact:"minor",bestFor:["ì¼€ì´í¬","ë¨¸í•€","íŒ¬ì¼€ì´í¬"]},{original:"ìš°ìœ ",substitute:"ê·€ë¦¬ìš°ìœ ",ratio:1,notes:"1:1 ëŒ€ì²´. í¬ë¦¬ë¯¸í•œ ì§ˆê°ì´ ìš°ìœ ì™€ ê°€ìž¥ ìœ ì‚¬",category:"direct",qualityImpact:"none",bestFor:["ëª¨ë“  ë² ì´í‚¹"]},{original:"ë²„í„°ë°€í¬",substitute:"ìš°ìœ ",ratio:1,notes:"ìš°ìœ  1ì»µ + ë ˆëª¬ì¦™/ì‹ì´ˆ 1í°ìˆ , 5ë¶„ ë°©ì¹˜",category:"adjusted",qualityImpact:"none",bestFor:["íŒ¬ì¼€ì´í¬","ìŠ¤ì½˜","ì¼€ì´í¬"]},{original:"ìƒí¬ë¦¼",substitute:"ì½”ì½”ë„›í¬ë¦¼",ratio:1,notes:"1:1 ëŒ€ì²´. ëƒ‰ìž¥ë³´ê´€í•œ ì½”ì½”ë„›ë°€í¬ ìœ—ì¸µ ì‚¬ìš©",category:"direct",qualityImpact:"minor",bestFor:["ë¬´ìŠ¤","ê°„ë‚˜ìŠˆ","íœ˜í•‘"]},{original:"ì‚¬ì›Œí¬ë¦¼",substitute:"ê·¸ë¦­ìš”ê±°íŠ¸",ratio:1,notes:"1:1 ëŒ€ì²´. ê±°ì˜ ë™ì¼í•œ íš¨ê³¼",category:"direct",qualityImpact:"none",bestFor:["ì¼€ì´í¬","ë¨¸í•€","ì¹˜ì¦ˆì¼€ì´í¬"]},{original:"í¬ë¦¼ì¹˜ì¦ˆ",substitute:"ë§ˆìŠ¤ì¹´í¬ë„¤",ratio:1,notes:"1:1 ëŒ€ì²´. ë” ë¶€ë“œëŸ½ê³  í’ë¶€í•œ ë§›",category:"direct",qualityImpact:"none",bestFor:["ì¹˜ì¦ˆì¼€ì´í¬","í”„ë¡œìŠ¤íŒ…","í‹°ë¼ë¯¸ìˆ˜"]},{original:"ë² ì´í‚¹íŒŒìš°ë”",substitute:"ë² ì´í‚¹ì†Œë‹¤",ratio:.25,notes:"ë² ì´í‚¹íŒŒìš°ë” 1ts = ë² ì´í‚¹ì†Œë‹¤ 1/4ts + í¬ë¦¼ì˜¤ë¸Œíƒ€ë¥´íƒ€ë¥´ 1/2ts",category:"adjusted",qualityImpact:"minor",bestFor:["ì¼€ì´í¬","ì¿ í‚¤","ë¨¸í•€"]},{original:"ì¸ìŠ¤í„´íŠ¸ì´ìŠ¤íŠ¸",substitute:"ë“œë¼ì´ì´ìŠ¤íŠ¸",ratio:1.25,notes:"ì¸ìŠ¤í„´íŠ¸ 1g = ë“œë¼ì´ 1.25g. ë“œë¼ì´ëŠ” ë¯¸ì§€ê·¼í•œ ë¬¼ì— ì˜ˆë¹„ë°œíš¨ í•„ìš”",category:"adjusted",qualityImpact:"none",bestFor:["ëª¨ë“  ë¹µ ì¢…ë¥˜"]},{original:"ì¸ìŠ¤í„´íŠ¸ì´ìŠ¤íŠ¸",substitute:"ìƒì´ìŠ¤íŠ¸",ratio:3,notes:"ì¸ìŠ¤í„´íŠ¸ 1g = ìƒì´ìŠ¤íŠ¸ 3g. ìƒì´ìŠ¤íŠ¸ëŠ” ì‹ ì„ ë„ ì¤‘ìš”",category:"adjusted",qualityImpact:"none",bestFor:["ëª¨ë“  ë¹µ ì¢…ë¥˜"]},{original:"ë“œë¼ì´ì´ìŠ¤íŠ¸",substitute:"ìƒì´ìŠ¤íŠ¸",ratio:2.5,notes:"ë“œë¼ì´ 1g = ìƒì´ìŠ¤íŠ¸ 2.5g",category:"adjusted",qualityImpact:"none",bestFor:["ëª¨ë“  ë¹µ ì¢…ë¥˜"]},{original:"ì˜¥ìˆ˜ìˆ˜ì „ë¶„",substitute:"ê°ìžì „ë¶„",ratio:1,notes:"1:1 ëŒ€ì²´. ê±°ì˜ ë™ì¼í•œ íš¨ê³¼",category:"direct",qualityImpact:"none",bestFor:["ì†ŒìŠ¤","ì»¤ìŠ¤í„°ë“œ","ì¼€ì´í¬"]},{original:"ì˜¥ìˆ˜ìˆ˜ì „ë¶„",substitute:"íƒ€í”¼ì˜¤ì¹´ì „ë¶„",ratio:1,notes:"1:1 ëŒ€ì²´. íƒ€í”¼ì˜¤ì¹´ê°€ ë” ì«„ê¹ƒí•œ ì§ˆê°",category:"direct",qualityImpact:"minor",bestFor:["í‘¸ë”©","íŒŒì´í•„ë§"]},{original:"ë‹¤í¬ì´ˆì½œë¦¿",substitute:"ì½”ì½”ì•„íŒŒìš°ë”",ratio:.33,notes:"ë‹¤í¬ì´ˆì½œë¦¿ 100g = ì½”ì½”ì•„ 33g + ë²„í„° 17g + ì„¤íƒ• 50g",category:"adjusted",qualityImpact:"moderate",bestFor:["ë¸Œë¼ìš°ë‹ˆ","ì¼€ì´í¬"]},{original:"ë°€í¬ì´ˆì½œë¦¿",substitute:"ë‹¤í¬ì´ˆì½œë¦¿",ratio:1,notes:"1:1 ëŒ€ì²´. ì„¤íƒ• ì•½ê°„ ì¶”ê°€ ê¶Œìž¥",category:"adjusted",qualityImpact:"minor",bestFor:["ê°„ë‚˜ìŠˆ","ì¼€ì´í¬"]},{original:"ì•„ëª¬ë“œ",substitute:"í˜¸ë‘",ratio:1,notes:"1:1 ëŒ€ì²´. í’ë¯¸ì™€ ì‹ê° ì°¨ì´",category:"direct",qualityImpact:"minor",bestFor:["ì¿ í‚¤","ì¼€ì´í¬","ë¹µ"]},{original:"ì•„ëª¬ë“œê°€ë£¨",substitute:"í—¤ì´ì¦ë„›ê°€ë£¨",ratio:1,notes:"1:1 ëŒ€ì²´. í—¤ì´ì¦ë„› íŠ¹ìœ ì˜ í’ë¯¸",category:"direct",qualityImpact:"minor",bestFor:["ë§ˆì¹´ë¡±","í”¼ë‚­ì‹œì—","ì¼€ì´í¬"]},{original:"ì ¤ë¼í‹´",substitute:"í•œì²œ",ratio:.5,notes:"ì ¤ë¼í‹´ 100g = í•œì²œ 50g. í•œì²œì´ ë” ë‹¨ë‹¨í•œ ì§ˆê°",category:"adjusted",qualityImpact:"moderate",bestFor:["ì ¤ë¦¬","ë¬´ìŠ¤","í‘¸ë”©"],notRecommendedFor:["íŒë‚˜ì½”íƒ€ (ë¶€ë“œëŸ¬ìš´ ì§ˆê° í•„ìš”)"]},{original:"ë°”ë‹ë¼ë¹ˆ",substitute:"ë°”ë‹ë¼ìµìŠ¤íŠ¸ëž™",ratio:1,notes:"ë°”ë‹ë¼ë¹ˆ 1ê°œ = ë°”ë‹ë¼ìµìŠ¤íŠ¸ëž™ 1ts",category:"direct",qualityImpact:"minor",bestFor:["ëª¨ë“  ë² ì´í‚¹"]}],Ae=[{value:"flour",icon:"ðŸŒ¾"},{value:"liquid",icon:"ðŸ’§"},{value:"fat",icon:"ðŸ§ˆ"},{value:"sugar",icon:"ðŸ¬"},{value:"egg",icon:"ðŸ¥š"},{value:"dairy",icon:"ðŸ¥›"},{value:"leavening",icon:"ðŸ«§"},{value:"salt",icon:"ðŸ§‚"},{value:"flavoring",icon:"ðŸ‹"},{value:"nut",icon:"ðŸ¥œ"},{value:"fruit",icon:"ðŸŽ"},{value:"chocolate",icon:"ðŸ«"},{value:"other",icon:"ðŸ“¦"}];function Ve({className:e=""}){var t;const{t:s,i18n:a}=m(),r="en"===a.language?"en":"ko",n=x.useCallback(e=>{if(C.includes(e)){const t=s(`settings.ingredient.ingredientNames.${e}`,{defaultValue:""});if(t)return t}if("en"===r){const t=F(e);if(t)return t.en}return e},[s,r]),i=x.useCallback((e,t)=>{const s=F(e);if(null==s?void 0:s.aliases){const e="en"===r?s.aliases.en:s.aliases.ko;if(e&&e.length>0)return e[0]}if(t&&t.length>0){const e=e=>/^[a-zA-Z\s]+$/.test(e);if("en"===r){return t.find(t=>e(t))||null}return t.find(t=>!e(t))||null}return null},[r]),{ingredient:c,addCustomIngredient:d,deleteCustomIngredient:g,setMoistureOverride:f,addSubstitution:N,deleteSubstitution:w,setCostOverride:k,deleteCostOverride:L,setNutritionOverride:D,deleteNutritionOverride:R}=u(),[I,M]=x.useState(""),[q,$]=x.useState("all"),[O,_]=x.useState(!1),[A,V]=x.useState(null),[z,E]=x.useState({}),[H,W]=x.useState(!1),[Z,B]=x.useState({name:"",category:"other",aliases:[],moisture:void 0,isFlour:!1}),[G,J]=x.useState(null),[Y,te]=x.useState({original:"",substitute:"",ratio:1,notes:""}),[ae,re]=x.useState(new Set),ne=x.useMemo(()=>{const e=[];for(const t of K){const s=c.moistureOverrides[t.name],a=(c.costOverrides||{})[t.name],r=(c.nutritionOverrides||{})[t.name],n=c.substitutions.filter(e=>e.original===t.name),i=Oe[t.name],l=_e.filter(e=>e.original===t.name);e.push({name:t.name,category:t.category,moisture:null!=s?s:t.moisture,moistureOverridden:void 0!==s,cost:a,nutrition:r,defaultNutrition:i,substitutions:n,defaultSubstitutions:l,isCustom:!1,originalData:t})}for(const t of c.customIngredients){if(e.some(e=>e.name===t.name))continue;const s=(c.costOverrides||{})[t.name],a=(c.nutritionOverrides||{})[t.name],r=c.substitutions.filter(e=>e.original===t.name),n=Oe[t.name],i=_e.filter(e=>e.original===t.name);e.push({name:t.name,category:t.category,moisture:t.moisture,moistureOverridden:!1,cost:s,nutrition:a,defaultNutrition:n,substitutions:r,defaultSubstitutions:i,isCustom:!0})}return e},[c]),ie=x.useMemo(()=>{let e=ne;if(I){const t=I.toLowerCase();e=e.filter(e=>{var s,a;const r=e.name.toLowerCase().includes(t),n=null==(a=null==(s=e.originalData)?void 0:s.aliases)?void 0:a.some(e=>e.toLowerCase().includes(t));return r||n})}return"all"!==q&&(e=e.filter(e=>e.category===q)),O&&(e=e.filter(e=>e.moistureOverridden||void 0!==e.cost||void 0!==e.nutrition||e.substitutions.length>0||e.isCustom)),e},[ne,I,q,O]),le=x.useCallback(e=>{const t=ne.find(t=>t.name===e);t&&(V(e),E({moisture:t.moisture,cost:t.cost?l({},t.cost):{},nutrition:t.nutrition?l({},t.nutrition):{}}))},[ne]),oe=x.useCallback(()=>{var e;if(!A)return;const t=ne.find(e=>e.name===A);if(t){if(void 0!==z.moisture&&z.moisture!==(null==(e=t.originalData)?void 0:e.moisture)&&f(A,z.moisture),z.cost&&Object.keys(z.cost).length>0){const e={};z.cost.retailPrice&&z.cost.retailPrice>0&&(e.retailPrice=z.cost.retailPrice),z.cost.wholesalePrice&&z.cost.wholesalePrice>0&&(e.wholesalePrice=z.cost.wholesalePrice),z.cost.bulkPrice&&z.cost.bulkPrice>0&&(e.bulkPrice=z.cost.bulkPrice),Object.keys(e).length>0&&k(A,e)}if(z.nutrition&&Object.keys(z.nutrition).length>0){const e={};void 0!==z.nutrition.calories&&z.nutrition.calories>=0&&(e.calories=z.nutrition.calories),void 0!==z.nutrition.protein&&z.nutrition.protein>=0&&(e.protein=z.nutrition.protein),void 0!==z.nutrition.carbohydrates&&z.nutrition.carbohydrates>=0&&(e.carbohydrates=z.nutrition.carbohydrates),void 0!==z.nutrition.fat&&z.nutrition.fat>=0&&(e.fat=z.nutrition.fat),Object.keys(e).length>0&&D(A,e)}V(null),E({})}},[A,z,ne,f,k,D]),ce=x.useCallback(()=>{V(null),E({})},[]),de=x.useCallback(()=>{Z.name.trim()?(d(Z),B({name:"",category:"other",aliases:[],moisture:void 0,isFlour:!1}),W(!1)):alert(s("settings.ingredient.alerts.nameRequired"))},[Z,d,s]),me=x.useCallback(()=>{Y.original.trim()&&Y.substitute.trim()?(N(Y),te({original:"",substitute:"",ratio:1,notes:""}),J(null)):alert(s("settings.ingredient.alerts.substituteRequired"))},[Y,N,s]),ue=x.useCallback(e=>{re(t=>{const s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},[]),xe=x.useCallback(e=>{var t;const s=ne.find(t=>t.name===e);s&&(s.moistureOverridden&&void 0!==(null==(t=s.originalData)?void 0:t.moisture)&&f(e,s.originalData.moisture),s.cost&&L(e),s.nutrition&&R(e))},[ne,f,L,R]),ge=x.useMemo(()=>ne.filter(e=>e.moistureOverridden||void 0!==e.cost||void 0!==e.nutrition||e.substitutions.length>0||e.isCustom).length,[ne]);return h.jsxs("div",{className:`space-y-4 ${e}`,children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[h.jsx(se,{className:"w-5 h-5 text-green-500"}),s("settings.ingredient.title"),h.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["(",s("settings.ingredient.databaseCount",{dbCount:K.length,customCount:c.customIngredients.length}),")"]})]}),h.jsx("p",{className:"text-sm text-gray-500 mt-1",children:s("settings.ingredient.titleDesc")})]}),h.jsxs("button",{onClick:()=>W(!0),className:"flex items-center gap-1 px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 text-sm",children:[h.jsx(p,{className:"w-4 h-4"}),s("settings.ingredient.addIngredient")]})]}),H&&h.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg space-y-3",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("h4",{className:"font-medium text-gray-800",children:s("settings.ingredient.newIngredient")}),h.jsx("button",{onClick:()=>W(!1),className:"p-1 hover:bg-white rounded",children:h.jsx(y,{className:"w-4 h-4 text-gray-500"})})]}),h.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[h.jsx("input",{type:"text",value:Z.name,onChange:e=>B(t=>o(l({},t),{name:e.target.value})),placeholder:s("settings.ingredient.ingredientName"),className:"px-3 py-2 text-sm border rounded-lg"}),h.jsx("select",{value:Z.category,onChange:e=>B(t=>o(l({},t),{category:e.target.value})),className:"px-3 py-2 text-sm border rounded-lg",children:Ae.map(e=>h.jsxs("option",{value:e.value,children:[e.icon," ",s(`settings.ingredient.categories.${e.value}`)]},e.value))}),h.jsx("input",{type:"number",value:null!=(t=Z.moisture)?t:"",onChange:e=>B(t=>o(l({},t),{moisture:parseFloat(e.target.value)||void 0})),placeholder:s("settings.ingredient.moisturePercent"),className:"px-3 py-2 text-sm border rounded-lg",min:"0",max:"100"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("button",{onClick:de,className:"flex-1 flex items-center justify-center gap-1 px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 text-sm",children:[h.jsx(j,{className:"w-4 h-4"}),s("settings.ingredient.buttons.save")]}),h.jsx("button",{onClick:()=>W(!1),className:"px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm",children:s("settings.ingredient.buttons.cancel")})]})]})]}),h.jsxs("div",{className:"flex gap-3 items-center",children:[h.jsxs("div",{className:"relative flex-1",children:[h.jsx(b,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),h.jsx("input",{type:"text",value:I,onChange:e=>M(e.target.value),placeholder:s("settings.ingredient.searchPlaceholder"),className:"w-full pl-10 pr-4 py-2 border rounded-lg text-sm"})]}),h.jsxs("select",{value:q,onChange:e=>$(e.target.value),className:"px-3 py-2 border rounded-lg text-sm",children:[h.jsx("option",{value:"all",children:s("settings.ingredient.allCategories")}),Ae.map(e=>h.jsxs("option",{value:e.value,children:[e.icon," ",s(`settings.ingredient.categories.${e.value}`)]},e.value))]}),h.jsxs("button",{onClick:()=>_(!O),className:"flex items-center gap-1 px-3 py-2 border rounded-lg text-sm "+(O?"bg-amber-100 border-amber-300 text-amber-700":"hover:bg-gray-50"),children:[h.jsx(X,{className:"w-4 h-4"}),s("settings.ingredient.modified")," (",ge,")"]})]}),h.jsx("div",{className:"border rounded-lg overflow-hidden",children:h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-sm",children:[h.jsx("thead",{className:"bg-gray-50 border-b",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600 w-10"}),h.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600 min-w-[140px]",children:s("settings.ingredient.table.name")}),h.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600 w-24",children:s("settings.ingredient.table.category")}),h.jsx("th",{className:"px-3 py-2 text-center font-medium text-gray-600 w-20",children:h.jsxs("span",{className:"flex items-center justify-center gap-1",children:["ðŸ’§ ",s("settings.ingredient.table.moisture")]})}),h.jsx("th",{className:"px-3 py-2 text-center font-medium text-gray-600 w-28",children:h.jsxs("span",{className:"flex items-center justify-center gap-1",children:["ðŸ’° ",s("settings.ingredient.table.cost")]})}),h.jsx("th",{className:"px-3 py-2 text-center font-medium text-gray-600 w-24",children:h.jsxs("span",{className:"flex items-center justify-center gap-1",children:["ðŸ”¥ ",s("settings.ingredient.table.calories")]})}),h.jsx("th",{className:"px-3 py-2 text-center font-medium text-gray-600 w-20",children:h.jsxs("span",{className:"flex items-center justify-center gap-1",children:["ðŸ”„ ",s("settings.ingredient.table.substitutes")]})}),h.jsx("th",{className:"px-3 py-2 text-center font-medium text-gray-600 w-16",children:s("settings.ingredient.table.edit")})]})}),h.jsx("tbody",{className:"divide-y",children:ie.map(e=>{var t,a,d,m,u,x,p,b,f;const N=(k=e.category,Ae.find(e=>e.value===k)||{value:"other",icon:"ðŸ“¦"});var k;const C=ae.has(e.name),F=A===e.name,K=e.moistureOverridden||e.cost||e.nutrition||e.isCustom;return h.jsxs(S.Fragment,{children:[h.jsxs("tr",{className:`\n                      ${K?"bg-amber-50":"hover:bg-gray-50"}\n                      ${F?"bg-blue-50":""}\n                    `,children:[h.jsx("td",{className:"px-2 py-2 text-center",children:(e.substitutions.length>0||e.defaultSubstitutions.length>0)&&h.jsx("button",{onClick:()=>ue(e.name),className:"p-1 hover:bg-gray-200 rounded",children:C?h.jsx(U,{className:"w-4 h-4 text-gray-500"}):h.jsx(Q,{className:"w-4 h-4 text-gray-500"})})}),h.jsx("td",{className:"px-3 py-2",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{children:N.icon}),h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-gray-800",children:n(e.name)}),e.isCustom&&h.jsx("span",{className:"ml-1 px-1 py-0.5 bg-green-100 text-green-700 text-xs rounded",children:s("settings.ingredient.custom")}),(()=>{var t;const s=i(e.name,null==(t=e.originalData)?void 0:t.aliases);return s&&h.jsx("div",{className:"text-xs text-gray-400 truncate max-w-[120px]",children:s})})()]})]})}),h.jsx("td",{className:"px-3 py-2 text-gray-600",children:h.jsx("span",{className:"text-xs",children:s(`settings.ingredient.categories.${e.category}`)})}),h.jsx("td",{className:"px-3 py-2 text-center",children:F?h.jsx("input",{type:"number",value:null!=(t=z.moisture)?t:"",onChange:e=>E(t=>o(l({},t),{moisture:parseFloat(e.target.value)||void 0})),className:"w-16 px-2 py-1 text-center border rounded text-xs font-mono",min:"0",max:"100"}):h.jsx("span",{className:"font-mono text-xs "+(e.moistureOverridden?"text-amber-600 font-medium":""),children:void 0!==e.moisture?`${e.moisture}%`:"-"})}),h.jsx("td",{className:"px-3 py-2 text-center",children:F?h.jsx("input",{type:"number",value:null!=(d=null==(a=z.cost)?void 0:a.retailPrice)?d:"",onChange:e=>E(t=>o(l({},t),{cost:o(l({},t.cost),{retailPrice:parseFloat(e.target.value)||void 0})})),placeholder:"â‚©/kg",className:"w-20 px-2 py-1 text-center border rounded text-xs font-mono"}):e.cost?h.jsxs("span",{className:"text-xs font-mono text-emerald-600",children:["â‚©",(e.cost.retailPrice||e.cost.wholesalePrice||e.cost.bulkPrice||0).toLocaleString()]}):h.jsx("span",{className:"text-gray-400 text-xs",children:"-"})}),h.jsx("td",{className:"px-3 py-2 text-center",children:F?h.jsx("input",{type:"number",value:null!=(p=null!=(x=null==(m=z.nutrition)?void 0:m.calories)?x:null==(u=e.defaultNutrition)?void 0:u.calories)?p:"",onChange:e=>E(t=>o(l({},t),{nutrition:o(l({},t.nutrition),{calories:parseFloat(e.target.value)||void 0})})),placeholder:"kcal",className:"w-16 px-2 py-1 text-center border rounded text-xs font-mono"}):(null==(b=e.nutrition)?void 0:b.calories)?h.jsx("span",{className:"text-xs font-mono text-purple-600",title:s("settings.ingredient.userDefined"),children:e.nutrition.calories}):(null==(f=e.defaultNutrition)?void 0:f.calories)?h.jsx("span",{className:"text-xs font-mono text-gray-600",title:s("settings.ingredient.defaultTooltip",{protein:e.defaultNutrition.protein,carbs:e.defaultNutrition.carbohydrates,fat:e.defaultNutrition.fat}),children:e.defaultNutrition.calories}):h.jsx("span",{className:"text-gray-400 text-xs",children:"-"})}),h.jsx("td",{className:"px-3 py-2 text-center",children:(()=>{const t=e.substitutions.length+e.defaultSubstitutions.length;return t>0?h.jsx("button",{onClick:()=>ue(e.name),className:"px-2 py-0.5 rounded text-xs font-medium hover:opacity-80 "+(e.substitutions.length>0?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"),title:s("settings.ingredient.subsTooltip",{defaultCount:e.defaultSubstitutions.length,userCount:e.substitutions.length}),children:s("settings.ingredient.subsCount",{count:t})}):h.jsx("button",{onClick:()=>{te({original:e.name,substitute:"",ratio:1,notes:""}),J(e.name)},className:"px-2 py-0.5 bg-gray-100 text-gray-500 rounded text-xs hover:bg-gray-200",children:"+"})})()}),h.jsx("td",{className:"px-3 py-2 text-center",children:F?h.jsxs("div",{className:"flex gap-1 justify-center",children:[h.jsx("button",{onClick:oe,className:"p-1 bg-blue-500 text-white rounded hover:bg-blue-600",title:s("settings.ingredient.buttons.save"),children:h.jsx(j,{className:"w-3 h-3"})}),h.jsx("button",{onClick:ce,className:"p-1 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",title:s("settings.ingredient.buttons.cancel"),children:h.jsx(y,{className:"w-3 h-3"})})]}):h.jsxs("div",{className:"flex gap-1 justify-center",children:[h.jsx("button",{onClick:()=>le(e.name),className:"p-1 text-gray-500 hover:bg-gray-200 rounded",title:s("settings.ingredient.buttons.edit"),children:h.jsx(he,{className:"w-3 h-3"})}),K&&h.jsx("button",{onClick:()=>xe(e.name),className:"p-1 text-amber-500 hover:bg-amber-100 rounded",title:s("settings.ingredient.buttons.reset"),children:h.jsx(P,{className:"w-3 h-3"})}),e.isCustom&&h.jsx("button",{onClick:()=>{if(confirm(s("settings.ingredient.alerts.deleteConfirm",{name:n(e.name)}))){const t=c.customIngredients.find(t=>t.name===e.name);t&&g(t.id)}},className:"p-1 text-red-500 hover:bg-red-100 rounded",title:s("settings.ingredient.buttons.delete"),children:h.jsx(v,{className:"w-3 h-3"})})]})})]}),C&&(e.substitutions.length>0||e.defaultSubstitutions.length>0)&&h.jsx("tr",{className:"bg-orange-50/50",children:h.jsx("td",{colSpan:8,className:"px-6 py-2",children:h.jsxs("div",{className:"space-y-2",children:[e.defaultSubstitutions.length>0&&h.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[h.jsxs("span",{className:"text-xs text-blue-600 font-medium mr-2",children:["ðŸ“š ",s("settings.ingredient.defaultRules")]}),e.defaultSubstitutions.map((e,t)=>h.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-blue-50 border border-blue-200 rounded text-xs",title:"en"===r?T(e.notes||"","en"):e.notes||"",children:[h.jsx(ee,{className:"w-3 h-3 text-blue-400"}),h.jsx("span",{className:"font-medium text-blue-700",children:n(e.substitute)}),h.jsxs("span",{className:"text-blue-500 font-mono",children:["Ã—",e.ratio]}),e.qualityImpact&&"none"!==e.qualityImpact&&h.jsxs("span",{className:"px-1 py-0.5 rounded text-[10px] "+("minor"===e.qualityImpact?"bg-green-100 text-green-600":"moderate"===e.qualityImpact?"bg-yellow-100 text-yellow-600":"bg-red-100 text-red-600"),children:[s(`settings.ingredient.qualityImpact.${e.qualityImpact}`)," ",s("settings.ingredient.impact")]})]},`default-${t}`))]}),h.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[e.substitutions.length>0&&h.jsxs(h.Fragment,{children:[h.jsxs("span",{className:"text-xs text-orange-600 font-medium mr-2",children:["âœï¸ ",s("settings.ingredient.userRules")]}),e.substitutions.map(e=>h.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-white border border-orange-200 rounded text-xs",children:[h.jsx(ee,{className:"w-3 h-3 text-gray-400"}),h.jsx("span",{className:"font-medium text-orange-700",children:n(e.substitute)}),h.jsxs("span",{className:"text-gray-500 font-mono",children:["Ã—",e.ratio]}),e.notes&&h.jsxs("span",{className:"text-gray-400 italic",children:["(","en"===r?T(e.notes,"en"):e.notes,")"]}),h.jsx("button",{onClick:()=>{confirm(s("settings.ingredient.alerts.deleteSubConfirm"))&&w(e.id)},className:"ml-1 p-0.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded",children:h.jsx(y,{className:"w-3 h-3"})})]},e.id))]}),h.jsx("button",{onClick:()=>{te({original:e.name,substitute:"",ratio:1,notes:""}),J(e.name)},className:"px-2 py-1 text-orange-600 hover:bg-orange-100 rounded text-xs",children:s("settings.ingredient.addSub")})]})]})})})]},e.name)})})]})})}),G&&h.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:h.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-4 w-96 space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("h4",{className:"font-medium text-gray-800",children:["ðŸ”„ ",s("settings.ingredient.substitution.title",{name:n(G)})]}),h.jsx("button",{onClick:()=>J(null),className:"p-1 hover:bg-gray-100 rounded",children:h.jsx(y,{className:"w-4 h-4 text-gray-500"})})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"font-medium text-gray-700",children:n(G)}),h.jsx(ee,{className:"w-4 h-4 text-gray-400"}),h.jsx("input",{type:"text",value:Y.substitute,onChange:e=>te(t=>o(l({},t),{substitute:e.target.value})),placeholder:s("settings.ingredient.substitution.substitute"),className:"flex-1 px-3 py-2 text-sm border rounded-lg"})]}),h.jsxs("div",{className:"flex gap-3",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:s("settings.ingredient.substitution.ratio")}),h.jsx("input",{type:"number",value:Y.ratio,onChange:e=>te(t=>o(l({},t),{ratio:parseFloat(e.target.value)||1})),step:"0.05",min:"0.1",max:"3",className:"w-full px-3 py-2 text-sm border rounded-lg font-mono"})]}),h.jsxs("div",{className:"flex-1",children:[h.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:s("settings.ingredient.substitution.notes")}),h.jsx("input",{type:"text",value:Y.notes||"",onChange:e=>te(t=>o(l({},t),{notes:e.target.value})),placeholder:s("settings.ingredient.substitution.notesPlaceholder"),className:"w-full px-3 py-2 text-sm border rounded-lg"})]})]})]}),h.jsxs("div",{className:"flex gap-2 pt-2",children:[h.jsxs("button",{onClick:me,className:"flex-1 flex items-center justify-center gap-1 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:[h.jsx(j,{className:"w-4 h-4"}),s("settings.ingredient.buttons.save")]}),h.jsx("button",{onClick:()=>J(null),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:s("settings.ingredient.buttons.cancel")})]})]})}),0===ie.length&&h.jsxs("div",{className:"text-center py-8 text-gray-500",children:[h.jsx(b,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),h.jsx("p",{children:s("settings.ingredient.noResults")})]}),h.jsxs("div",{className:"text-xs text-gray-500 bg-gray-50 p-3 rounded-lg",children:[h.jsxs("p",{className:"font-medium mb-1",children:["ðŸ’¡ ",s("settings.ingredient.tips.title")]}),h.jsxs("ul",{className:"space-y-0.5",children:[h.jsxs("li",{children:["â€¢ ",s("settings.ingredient.tips.edit")]}),h.jsxs("li",{children:["â€¢ ",s("settings.ingredient.tips.subs")]}),h.jsxs("li",{children:["â€¢ ",s("settings.ingredient.tips.filter")]}),h.jsxs("li",{children:["â€¢ ",s("settings.ingredient.tips.reset")]})]})]})]})}const ze=[{key:"hand",icon:h.jsx(me,{className:"w-5 h-5"}),defaultValue:0},{key:"stand",icon:h.jsx(ie,{className:"w-5 h-5"}),defaultValue:24},{key:"spiral",icon:h.jsx(we,{className:"w-5 h-5"}),defaultValue:22},{key:"planetary",icon:h.jsx(te,{className:"w-5 h-5"}),defaultValue:26}],Ee={weight:["g","oz"],volume:["ml","cup"],temperature:["C","F"]},Ue=[0,1,2];function He({className:e=""}){var t;const{t:s}=m(),{advanced:a,setMixerFriction:r,setUnits:n,setPrecision:i,setExpertMode:l,resetToDefaults:o}=u(),[c,d]=x.useState(!1),g=x.useCallback((e,t)=>{r(e,t)},[r]),p=x.useCallback((e,t)=>{n({[e]:t})},[n]);return h.jsxs("div",{className:`space-y-6 ${e}`,children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[h.jsx(te,{className:"w-5 h-5 text-gray-500"}),s("settings.advanced.title")]}),h.jsx("p",{className:"text-sm text-gray-500 mt-1",children:s("settings.advanced.titleDesc")})]}),h.jsxs("button",{onClick:()=>{confirm(s("settings.advanced.resetConfirm"))&&o("advanced")},className:"flex items-center gap-1 text-sm text-gray-500 hover:text-gray-700",children:[h.jsx(B,{className:"w-4 h-4"}),s("settings.advanced.resetToDefault")]})]}),h.jsxs("div",{className:"p-4 bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-100 rounded-lg",children:[h.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 bg-white rounded-lg shadow-sm",children:h.jsx(oe,{className:"w-6 h-6 text-purple-600"})}),h.jsxs("div",{children:[h.jsx("div",{className:"font-medium text-gray-800",children:s("settings.advanced.expertMode.title")}),h.jsx("div",{className:"text-xs text-gray-500",children:s("settings.advanced.expertMode.description")})]})]}),h.jsx("div",{className:`w-14 h-7 rounded-full transition-colors ${a.expertMode?"bg-purple-500":"bg-gray-300"} relative cursor-pointer`,onClick:()=>l(!a.expertMode),children:h.jsx("div",{className:"absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform "+(a.expertMode?"translate-x-8":"translate-x-1")})})]}),a.expertMode&&h.jsxs("div",{className:"mt-3 text-xs text-purple-600 flex items-center gap-1",children:[h.jsx(w,{className:"w-3 h-3"}),s("settings.advanced.expertMode.enabledInfo")]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsxs("h4",{className:"font-medium text-gray-700 flex items-center gap-2",children:[h.jsx(we,{className:"w-4 h-4 text-amber-500"}),s("settings.advanced.mixer.title")]}),h.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:s("settings.advanced.mixer.titleDesc")})]}),h.jsx("button",{onClick:()=>d(!c),className:"text-xs text-blue-600 hover:text-blue-700",children:s(c?"settings.advanced.mixer.showLess":"settings.advanced.mixer.showMore")})]}),c&&h.jsxs("div",{className:"p-3 bg-amber-50 border border-amber-100 rounded-lg text-sm text-amber-700",children:[h.jsx("p",{className:"font-medium mb-2",children:s("settings.advanced.mixer.infoTitle")}),h.jsx("p",{className:"text-xs",children:s("settings.advanced.mixer.infoDesc")}),h.jsx("div",{className:"mt-2 text-xs",children:h.jsx("strong",{children:s("settings.advanced.mixer.formula")})})]}),h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:ze.map(e=>{var t;const r=null!=(t=a.mixerFriction[e.key])?t:e.defaultValue,n="custom"===e.key;return h.jsxs("div",{className:"p-4 border rounded-lg "+(n?"bg-gray-50 border-gray-200":"bg-white border-gray-200"),children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2 text-gray-600",children:[e.icon,h.jsx("span",{className:"font-medium text-sm",children:s(`settings.advanced.mixer.types.${e.key}.name`)})]}),h.jsx("p",{className:"text-xs text-gray-500 mb-3",children:s(`settings.advanced.mixer.types.${e.key}.description`)}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("input",{type:"number",value:r,onChange:t=>g(e.key,parseInt(t.target.value)||0),min:"0",max:"40",className:"w-full px-2 py-1.5 text-sm border rounded text-center font-mono"}),h.jsx("span",{className:"text-sm text-gray-500",children:"Â°C"})]}),r!==e.defaultValue&&h.jsx("button",{onClick:()=>g(e.key,e.defaultValue),className:"text-xs text-gray-400 hover:text-gray-600 mt-1",children:s("settings.advanced.mixer.defaultValue",{value:e.defaultValue})})]},e.key)})}),a.expertMode&&h.jsxs("div",{className:"p-4 border border-dashed border-gray-300 rounded-lg",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx(te,{className:"w-4 h-4 text-gray-400"}),h.jsx("span",{className:"font-medium text-sm text-gray-600",children:s("settings.advanced.mixer.custom")})]}),h.jsx("p",{className:"text-xs text-gray-500 mb-3",children:s("settings.advanced.mixer.customDesc")}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("input",{type:"number",value:null!=(t=a.mixerFriction.custom)?t:"",onChange:e=>g("custom",parseInt(e.target.value)||0),placeholder:s("settings.advanced.mixer.customPlaceholder"),min:"0",max:"40",className:"w-full px-2 py-1.5 text-sm border rounded text-center font-mono"}),h.jsx("span",{className:"text-sm text-gray-500",children:"Â°C"})]})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("h4",{className:"font-medium text-gray-700 flex items-center gap-2",children:[h.jsx(L,{className:"w-4 h-4 text-blue-500"}),s("settings.advanced.units.title")]}),h.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[h.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:s("settings.advanced.units.weight")}),h.jsx("div",{className:"space-y-2",children:Ee.weight.map(e=>h.jsxs("label",{className:"flex items-center gap-2 p-2 rounded cursor-pointer transition-colors "+(a.units.weight===e?"bg-blue-100 text-blue-700":"hover:bg-gray-100"),children:[h.jsx("input",{type:"radio",name:"weight-unit",value:e,checked:a.units.weight===e,onChange:()=>p("weight",e),className:"sr-only"}),h.jsx("div",{className:"w-4 h-4 rounded-full border-2 flex items-center justify-center "+(a.units.weight===e?"border-blue-500 bg-blue-500":"border-gray-300"),children:a.units.weight===e&&h.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),h.jsx("span",{className:"text-sm",children:s(`settings.advanced.units.options.${e}`)})]},e))})]}),h.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:s("settings.advanced.units.volume")}),h.jsx("div",{className:"space-y-2",children:Ee.volume.map(e=>h.jsxs("label",{className:"flex items-center gap-2 p-2 rounded cursor-pointer transition-colors "+(a.units.volume===e?"bg-blue-100 text-blue-700":"hover:bg-gray-100"),children:[h.jsx("input",{type:"radio",name:"volume-unit",value:e,checked:a.units.volume===e,onChange:()=>p("volume",e),className:"sr-only"}),h.jsx("div",{className:"w-4 h-4 rounded-full border-2 flex items-center justify-center "+(a.units.volume===e?"border-blue-500 bg-blue-500":"border-gray-300"),children:a.units.volume===e&&h.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),h.jsx("span",{className:"text-sm",children:s(`settings.advanced.units.options.${e}`)})]},e))})]}),h.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[h.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-1",children:[h.jsx(ve,{className:"w-4 h-4"}),s("settings.advanced.units.temperature")]}),h.jsx("div",{className:"space-y-2",children:Ee.temperature.map(e=>h.jsxs("label",{className:"flex items-center gap-2 p-2 rounded cursor-pointer transition-colors "+(a.units.temperature===e?"bg-blue-100 text-blue-700":"hover:bg-gray-100"),children:[h.jsx("input",{type:"radio",name:"temp-unit",value:e,checked:a.units.temperature===e,onChange:()=>p("temperature",e),className:"sr-only"}),h.jsx("div",{className:"w-4 h-4 rounded-full border-2 flex items-center justify-center "+(a.units.temperature===e?"border-blue-500 bg-blue-500":"border-gray-300"),children:a.units.temperature===e&&h.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),h.jsx("span",{className:"text-sm",children:s(`settings.advanced.units.options.${e}`)})]},e))})]})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("h4",{className:"font-medium text-gray-700",children:s("settings.advanced.precision.title")}),h.jsx("div",{className:"space-y-2",children:Ue.map(e=>h.jsxs("label",{className:"flex items-center justify-between p-4 border rounded-lg cursor-pointer transition-all "+(a.precision===e?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"),children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-5 h-5 rounded-full border-2 flex items-center justify-center "+(a.precision===e?"border-green-500 bg-green-500":"border-gray-300"),children:a.precision===e&&h.jsx("div",{className:"w-2.5 h-2.5 bg-white rounded-full"})}),h.jsxs("div",{children:[h.jsx("div",{className:"font-medium text-gray-800",children:s(`settings.advanced.precision.options.${e}.label`)}),h.jsx("div",{className:"text-xs text-gray-500",children:s(`settings.advanced.precision.options.${e}.description`)})]})]}),h.jsx("input",{type:"radio",name:"precision",value:e,checked:a.precision===e,onChange:()=>i(e),className:"sr-only"})]},e))})]}),h.jsx("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-600",children:h.jsxs("div",{className:"flex items-start gap-2",children:[h.jsx(f,{className:"w-4 h-4 mt-0.5 text-gray-400"}),h.jsxs("div",{children:[h.jsx("p",{className:"font-medium text-gray-700",children:s("settings.advanced.tips.title")}),h.jsxs("ul",{className:"text-xs mt-1 space-y-1",children:[h.jsxs("li",{children:["â€¢ ",s("settings.advanced.tips.mixer")]}),h.jsxs("li",{children:["â€¢ ",s("settings.advanced.tips.hand")]}),h.jsxs("li",{children:["â€¢ ",s("settings.advanced.tips.precision")]}),h.jsxs("li",{children:["â€¢ ",s("settings.advanced.tips.expert")]})]})]})]})})]})}function We(){const{t:e}=m(),{storage:t,setStorageDirectory:s,setAutoSave:a,updateLastSaved:r}=u(),{recipes:n,importRecipes:i,exportRecipes:d,resetToSampleRecipes:g}=D(),[p,b]=x.useState(!1),[y,f]=x.useState(!1),[j,v]=x.useState(!1),N=x.useRef(null);x.useEffect(()=>{(()=>{c(this,null,function*(){const s=$();if(b(s),s&&"filesystem"===t.type){const s=yield R.initialize();v(s),!s&&t.directoryName&&I.info(e("settings.storage.permissionExpiredToast"))}})})()},[t.type,t.directoryName,e]);const k=x.useCallback(()=>c(this,null,function*(){f(!0);try{const t=yield R.selectDirectory();t&&(s(t),v(!0),I.success(e("settings.storage.folderConnected",{name:t})))}catch(t){I.error(t.message||e("settings.storage.folderSelectFailed"))}finally{f(!1)}}),[s,e]),C=x.useCallback(()=>c(this,null,function*(){window.confirm(e("settings.storage.disconnectConfirm"))&&(yield R.disconnect(),s(null),v(!1),I.success(e("settings.storage.disconnected")))}),[s,e]),F=u(),K=x.useCallback(()=>{const{pan:e,product:t,yieldLoss:s,method:a,environment:r,ingredient:n,advanced:i}=F;return{pan:e,product:t,yieldLoss:s,method:a,environment:r,ingredient:n,advanced:i}},[F]),S=x.useCallback(()=>c(this,null,function*(){if(j)try{yield R.writeFile("RECIPES",n),yield R.writeFile("SETTINGS",K()),r(),I.success(e("settings.storage.savedSuccess"))}catch(t){I.error(t.message||e("settings.storage.saveFailed"))}else I.error(e("settings.storage.selectFolderFirst"))}),[j,n,K,r,e]),T=x.useCallback(()=>c(this,null,function*(){if(j)try{let t=0;const s=yield R.readFile("RECIPES");s&&Array.isArray(s)&&(yield i(s),t+=s.length);const a=yield R.readFile("SETTINGS");a&&F.importSettings(JSON.stringify(a)),t>0||a?I.success(e("settings.storage.loadedSuccess",{count:t})):I.info(e("settings.storage.noSavedFiles"))}catch(t){I.error(t.message||e("settings.storage.loadFailed"))}else I.error(e("settings.storage.selectFolderFirst"))}),[j,i,F,e]),L=x.useCallback(()=>c(this,null,function*(){try{const t=yield d(),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=`recipes-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s),I.success(e("settings.storage.exportedSuccess"))}catch(t){I.error(e("settings.storage.exportFailed"))}}),[d,e]),O=x.useCallback(t=>c(this,null,function*(){var s;const a=null==(s=t.target.files)?void 0:s[0];if(a)try{const t=yield a.text(),s=JSON.parse(t);if(!Array.isArray(s))throw new Error(e("settings.storage.invalidFileFormat"));const r=s.map(e=>o(l({},e),{createdAt:e.createdAt?new Date(e.createdAt):new Date,updatedAt:e.updatedAt?new Date(e.updatedAt):new Date}));yield i(r),I.success(e("settings.storage.importedSuccess",{count:s.length}))}catch(r){I.error(e("settings.storage.invalidFileFormatError"))}finally{N.current&&(N.current.value="")}}),[i,e]),_=x.useCallback(()=>{window.confirm(e("settings.storage.resetSamplesConfirm"))&&(g(),I.success(e("settings.storage.samplesLoaded")))},[g,e]),A=t.lastSavedAt?new Date(t.lastSavedAt).toLocaleString():e("settings.storage.none");return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[h.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[h.jsx(ue,{className:"w-5 h-5 text-amber-600"}),e("settings.storage.title")]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:"filesystem"===t.type&&j?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"p-2 bg-green-100 rounded-full",children:h.jsx(Z,{className:"w-5 h-5 text-green-600"})}),h.jsxs("div",{className:"flex-1",children:[h.jsxs("p",{className:"font-medium text-gray-800",children:[e("settings.storage.localFolder"),": ",t.directoryName]}),h.jsxs("p",{className:"text-sm text-gray-500",children:[e("settings.storage.lastSaved"),": ",A]})]}),h.jsx("button",{onClick:C,className:"px-3 py-1.5 text-sm text-red-600 hover:bg-red-50 rounded-md transition-colors",children:e("settings.storage.disconnect")})]}):"filesystem"!==t.type||j?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:h.jsx(M,{className:"w-5 h-5 text-blue-600"})}),h.jsxs("div",{className:"flex-1",children:[h.jsx("p",{className:"font-medium text-gray-800",children:e("settings.storage.browserStorage")}),h.jsx("p",{className:"text-sm text-gray-500",children:e("settings.storage.browserStorageDesc")})]})]}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"p-2 bg-yellow-100 rounded-full",children:h.jsx(J,{className:"w-5 h-5 text-yellow-600"})}),h.jsxs("div",{className:"flex-1",children:[h.jsx("p",{className:"font-medium text-gray-800",children:e("settings.storage.folderNeeded")}),h.jsx("p",{className:"text-sm text-gray-500",children:e("settings.storage.permissionExpired")})]})]})}),p?h.jsxs("div",{className:"flex flex-col gap-3",children:[h.jsxs("button",{onClick:k,disabled:y,className:"flex items-center justify-center gap-2 w-full px-4 py-3 bg-amber-500 text-white rounded-lg hover:bg-amber-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[y?h.jsx(P,{className:"w-5 h-5 animate-spin"}):h.jsx(de,{className:"w-5 h-5"}),"filesystem"===t.type?e("settings.storage.selectOtherFolder"):e("settings.storage.selectFolder")]}),"filesystem"===t.type&&j&&h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("button",{onClick:S,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:[h.jsx(q,{className:"w-4 h-4"}),e("settings.storage.saveToFolder")]}),h.jsxs("button",{onClick:T,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[h.jsx(Y,{className:"w-4 h-4"}),e("settings.storage.loadFromFolder")]})]})]}):h.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(J,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),h.jsxs("div",{children:[h.jsx("p",{className:"font-medium text-yellow-800",children:e("settings.storage.notSupported")}),h.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:e("settings.storage.useChromeEdge")})]})]})}),h.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg cursor-pointer",children:[h.jsx("input",{type:"checkbox",checked:t.autoSave,onChange:e=>a(e.target.checked),className:"w-5 h-5 rounded border-gray-300 text-amber-600 focus:ring-amber-500"}),h.jsxs("div",{children:[h.jsx("p",{className:"font-medium text-gray-800",children:e("settings.storage.autoSave")}),h.jsx("p",{className:"text-sm text-gray-500",children:e("settings.storage.autoSaveDesc")})]})]})]})]}),h.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[h.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[h.jsx(q,{className:"w-5 h-5 text-amber-600"}),e("settings.storage.backupRestore")]}),h.jsx("p",{className:"text-sm text-gray-600 mb-4",children:e("settings.storage.backupRestoreDesc")}),h.jsxs("div",{className:"flex flex-wrap gap-2",children:[h.jsx("input",{ref:N,type:"file",accept:".json",onChange:O,className:"hidden"}),h.jsxs("button",{onClick:L,disabled:0===n.length,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[h.jsx(q,{className:"w-4 h-4"}),e("settings.storage.exportJson")]}),h.jsxs("button",{onClick:()=>{var e;return null==(e=N.current)?void 0:e.click()},className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[h.jsx(Y,{className:"w-4 h-4"}),e("settings.storage.importJson")]}),h.jsxs("button",{onClick:_,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[h.jsx(P,{className:"w-4 h-4"}),e("settings.storage.loadSamples")]})]}),h.jsxs("p",{className:"text-xs text-gray-400 mt-3",children:[e("settings.storage.currentRecipes"),": ",n.length]})]}),h.jsx("section",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(w,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),h.jsxs("div",{className:"text-sm text-blue-800",children:[h.jsx("p",{className:"font-medium mb-2",children:e("settings.storage.infoTitle")}),h.jsxs("ul",{className:"space-y-1 text-blue-700",children:[h.jsxs("li",{children:["- ",e("settings.storage.infoLine1")]}),h.jsxs("li",{children:["- ",e("settings.storage.infoLine2")]}),h.jsxs("li",{className:"ml-4",children:["â€¢ ",h.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"recipes.json"})," - ",e("settings.storage.infoRecipesFile")]}),h.jsxs("li",{className:"ml-4",children:["â€¢ ",h.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"settings.json"})," - ",e("settings.storage.infoSettingsFile")]}),h.jsxs("li",{children:["- ",e("settings.storage.infoLine3")]}),h.jsxs("li",{children:["- ",e("settings.storage.infoLine4")]})]})]})]})})]})}function Ze(){const{t:e}=m(),{language:t,unitSystem:s,temperature:a,weight:r,volume:n,length:i,decimalSeparator:l,decimalPlaces:o,showIngredientTranslation:c,setLanguage:d,setUnitSystem:u,setTemperatureUnit:x,setWeightUnit:g,setVolumeUnit:p,setLengthUnit:b,setDecimalSeparator:y,setDecimalPlaces:f,setShowIngredientTranslation:j,resetToDefaults:v}=O();return h.jsxs("div",{className:"space-y-8",children:[h.jsxs("section",{className:"bg-white rounded-lg shadow-sm border p-6",children:[h.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[h.jsx("span",{className:"text-xl",children:"ðŸŒ"}),e("settings.language")]}),h.jsx("p",{className:"text-sm text-gray-500 mb-4",children:e("settings.languageDescription")}),h.jsx("div",{className:"grid grid-cols-2 gap-3",children:_.map(e=>h.jsxs("button",{onClick:()=>d(e),className:"p-4 rounded-lg border-2 transition-all "+(t===e?"border-bread-500 bg-bread-50 text-bread-700":"border-gray-200 hover:border-gray-300 text-gray-700"),children:[h.jsx("div",{className:"text-2xl mb-1",children:"ko"===e?"ðŸ‡°ðŸ‡·":"ðŸ‡ºðŸ‡¸"}),h.jsx("div",{className:"font-medium",children:A[e]})]},e))})]}),h.jsxs("section",{className:"bg-white rounded-lg shadow-sm border p-6",children:[h.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[h.jsx("span",{className:"text-xl",children:"ðŸ“"}),e("settings.unitSystem")]}),h.jsx("p",{className:"text-sm text-gray-500 mb-4",children:e("settings.unitSystemDescription")}),h.jsx("div",{className:"grid grid-cols-3 gap-3 mb-6",children:Object.keys(V).map(e=>h.jsxs("button",{onClick:()=>u(e),className:"p-4 rounded-lg border-2 transition-all text-left "+(s===e?"border-bread-500 bg-bread-50":"border-gray-200 hover:border-gray-300"),children:[h.jsx("div",{className:"font-medium text-gray-900",children:"ko"===t?V[e].nameKo:V[e].name}),h.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["metric"===e&&"g, ml, Â°C","imperial"===e&&"oz, cups, Â°F","hybrid"===e&&"g, ml, Â°F"]})]},e))}),h.jsxs("div",{className:"border-t pt-4",children:[h.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:e("settings.individualUnitSettings")}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:e("settings.temperatureUnit")}),h.jsxs("select",{value:a,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-bread-500 focus:border-bread-500",children:[h.jsx("option",{value:"celsius",children:"Â°C (Celsius)"}),h.jsx("option",{value:"fahrenheit",children:"Â°F (Fahrenheit)"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:e("settings.weightUnit")}),h.jsxs("select",{value:r,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-bread-500 focus:border-bread-500",children:[h.jsx("option",{value:"gram",children:"g (Gram)"}),h.jsx("option",{value:"ounce",children:"oz (Ounce)"}),h.jsx("option",{value:"pound",children:"lb (Pound)"}),h.jsx("option",{value:"kilogram",children:"kg (Kilogram)"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:e("settings.volumeUnit")}),h.jsxs("select",{value:n,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-bread-500 focus:border-bread-500",children:[h.jsx("option",{value:"milliliter",children:"ml (Milliliter)"}),h.jsx("option",{value:"cup",children:"cup (US Cup)"}),h.jsx("option",{value:"liter",children:"L (Liter)"}),h.jsx("option",{value:"fluidOunce",children:"fl oz (Fluid Ounce)"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:e("settings.lengthUnit")}),h.jsxs("select",{value:i,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-bread-500 focus:border-bread-500",children:[h.jsx("option",{value:"centimeter",children:"cm (Centimeter)"}),h.jsx("option",{value:"inch",children:"in (Inch)"})]})]})]})]})]}),h.jsxs("section",{className:"bg-white rounded-lg shadow-sm border p-6",children:[h.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[h.jsx("span",{className:"text-xl",children:"ðŸ”¢"}),e("settings.numberFormat")]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:e("settings.decimalSeparator")}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>y("."),className:"flex-1 py-2 px-4 rounded-lg border-2 transition-all "+("."===l?"border-bread-500 bg-bread-50 text-bread-700":"border-gray-200 text-gray-600"),children:e("settings.dot")}),h.jsx("button",{onClick:()=>y(","),className:"flex-1 py-2 px-4 rounded-lg border-2 transition-all "+(","===l?"border-bread-500 bg-bread-50 text-bread-700":"border-gray-200 text-gray-600"),children:e("settings.comma")})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:e("settings.decimalPlaces")}),h.jsxs("select",{value:o,onChange:e=>f(Number(e.target.value)),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-bread-500 focus:border-bread-500",children:[h.jsx("option",{value:0,children:"0 (100)"}),h.jsx("option",{value:1,children:"1 (100.5)"}),h.jsx("option",{value:2,children:"2 (100.55)"}),h.jsx("option",{value:3,children:"3 (100.555)"})]})]})]})]}),h.jsxs("section",{className:"bg-white rounded-lg shadow-sm border p-6",children:[h.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[h.jsx("span",{className:"text-xl",children:"ðŸ¥–"}),e("settings.ingredientDisplay")]}),h.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[h.jsx("input",{type:"checkbox",checked:c,onChange:e=>j(e.target.checked),className:"w-5 h-5 rounded border-gray-300 text-bread-500 focus:ring-bread-500"}),h.jsx("span",{className:"text-gray-700",children:e("settings.showIngredientTranslation")})]}),h.jsxs("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg text-sm text-gray-600",children:[h.jsx("div",{className:"font-medium mb-1",children:e("settings.example")}),e(c?"settings.ingredientExampleWithTranslation":"settings.ingredientExampleWithoutTranslation")]})]}),h.jsxs("section",{className:"bg-white rounded-lg shadow-sm border p-6",children:[h.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[h.jsx("span",{className:"text-xl",children:"ðŸ‘ï¸"}),e("settings.preview")]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[h.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[h.jsx("div",{className:"text-gray-500 mb-1",children:e("recipe.bakingTemp")}),h.jsx("div",{className:"font-medium",children:"celsius"===a?"180Â°C":"356Â°F"})]}),h.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[h.jsx("div",{className:"text-gray-500 mb-1",children:e("ingredientCategory.flour")}),h.jsxs("div",{className:"font-medium",children:["gram"===r&&"500g","ounce"===r&&"17.6oz","pound"===r&&"1.1lb","kilogram"===r&&"0.5kg"]})]}),h.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[h.jsx("div",{className:"text-gray-500 mb-1",children:e("ingredientCategory.liquid")}),h.jsxs("div",{className:"font-medium",children:["milliliter"===n&&"300ml","cup"===n&&"1.3 cups","liter"===n&&"0.3L","fluidOunce"===n&&"10.1 fl oz"]})]}),h.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[h.jsx("div",{className:"text-gray-500 mb-1",children:e("settings.panDiameter")}),h.jsx("div",{className:"font-medium",children:"centimeter"===i?"18cm":"7in"})]})]})]}),h.jsx("div",{className:"flex justify-end",children:h.jsx("button",{onClick:v,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:e("common.reset")})})]})}const Be=[{id:"locale",nameKey:"settingsTabs.locale",icon:z,color:"text-indigo-500",bgColor:"bg-indigo-50",borderColor:"border-indigo-200",descKey:"settingsTabs.localeDesc"},{id:"storage",nameKey:"settingsTabs.storage",icon:ue,color:"text-purple-500",bgColor:"bg-purple-50",borderColor:"border-purple-200",descKey:"settingsTabs.storageDesc"},{id:"pan",nameKey:"settingsTabs.pan",icon:re,color:"text-orange-500",bgColor:"bg-orange-50",borderColor:"border-orange-200",descKey:"settingsTabs.panDesc"},{id:"product",nameKey:"settingsTabs.product",icon:L,color:"text-amber-500",bgColor:"bg-amber-50",borderColor:"border-amber-200",descKey:"settingsTabs.productDesc"},{id:"environment",nameKey:"settingsTabs.environment",icon:ve,color:"text-blue-500",bgColor:"bg-blue-50",borderColor:"border-blue-200",descKey:"settingsTabs.environmentDesc"},{id:"method",nameKey:"settingsTabs.method",icon:ce,color:"text-amber-500",bgColor:"bg-amber-50",borderColor:"border-amber-200",descKey:"settingsTabs.methodDesc"},{id:"yieldLoss",nameKey:"settingsTabs.yieldLoss",icon:G,color:"text-red-500",bgColor:"bg-red-50",borderColor:"border-red-200",descKey:"settingsTabs.yieldLossDesc"},{id:"ingredient",nameKey:"settingsTabs.ingredient",icon:se,color:"text-green-500",bgColor:"bg-green-50",borderColor:"border-green-200",descKey:"settingsTabs.ingredientDesc"},{id:"advanced",nameKey:"settingsTabs.advanced",icon:le,color:"text-gray-500",bgColor:"bg-gray-50",borderColor:"border-gray-200",descKey:"settingsTabs.advancedDesc"}];function Ge({className:e="",onClose:t,initialTab:s="locale"}){const{t:a}=m(),[r,n]=x.useState(s),[i,l]=x.useState(!1),[o,c]=x.useState(!1),[d,g]=x.useState(""),[p,b]=x.useState(""),[f,j]=x.useState(!1),{exportSettings:v,importSettings:N,resetAllSettings:w}=u(),k=x.useCallback(()=>{const e=v(),t=new Blob([e],{type:"application/json"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=`recipe-settings-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s),l(!1)},[v]),C=x.useCallback(()=>{if(b(""),j(!1),!d.trim())return void b(a("settings.modal.enterData"));N(d)?(j(!0),setTimeout(()=>{c(!1),g(""),j(!1)},1500)):b(a("settings.modal.invalidFormat"))},[d,N,a]),F=x.useCallback(e=>{var t;const s=null==(t=e.target.files)?void 0:t[0];if(!s)return;const a=new FileReader;a.onload=e=>{var t;const s=null==(t=e.target)?void 0:t.result;g(s)},a.readAsText(s)},[]),K=x.useCallback(()=>{confirm(a("settings.modal.resetConfirm"))&&confirm(a("settings.modal.resetConfirm2"))&&w()},[w,a]);return h.jsxs("div",{className:`min-h-screen bg-gray-50 ${e}`,children:[h.jsx("div",{className:"sticky top-0 z-10 bg-white border-b shadow-sm",children:h.jsx("div",{className:"max-w-6xl mx-auto px-4",children:h.jsxs("div",{className:"flex items-center justify-between h-16",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[t&&h.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:h.jsx(ne,{className:"w-5 h-5"})}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(te,{className:"w-6 h-6 text-gray-600"}),h.jsx("h1",{className:"text-xl font-bold text-gray-800",children:a("settings.title")})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-1 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:[h.jsx(q,{className:"w-4 h-4"}),a("common.export")]}),h.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-1 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:[h.jsx(Y,{className:"w-4 h-4"}),a("common.import")]}),h.jsxs("button",{onClick:K,className:"flex items-center gap-1 px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[h.jsx(B,{className:"w-4 h-4"}),a("common.reset")]})]})]})})}),h.jsx("div",{className:"max-w-6xl mx-auto px-4 py-6",children:h.jsxs("div",{className:"flex gap-6",children:[h.jsx("div",{className:"w-56 flex-shrink-0",children:h.jsx("nav",{className:"space-y-1 sticky top-24",children:Be.map(e=>{const t=e.icon,s=r===e.id;return h.jsxs("button",{onClick:()=>n(e.id),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-all "+(s?`${e.bgColor} ${e.borderColor} border-2`:"hover:bg-gray-100"),children:[h.jsx(t,{className:`w-5 h-5 ${s?e.color:"text-gray-400"}`}),h.jsxs("div",{children:[h.jsx("div",{className:"font-medium "+(s?"text-gray-800":"text-gray-600"),children:a(e.nameKey)}),h.jsx("div",{className:"text-xs text-gray-500 truncate",children:a(e.descKey)})]})]},e.id)})})}),h.jsx("div",{className:"flex-1 min-w-0",children:h.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:(()=>{switch(r){case"locale":return h.jsx(Ze,{});case"storage":default:return h.jsx(We,{});case"pan":return h.jsx(Se,{});case"product":return h.jsx(E,{});case"environment":return h.jsx(Te,{});case"method":return h.jsx(De,{});case"yieldLoss":return h.jsx($e,{});case"ingredient":return h.jsx(Ve,{});case"advanced":return h.jsx(He,{})}})()})})]})}),i&&h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:h.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md mx-4 p-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h3",{className:"text-lg font-semibold",children:a("settings.modal.exportTitle")}),h.jsx("button",{onClick:()=>l(!1),className:"p-1 hover:bg-gray-100 rounded",children:h.jsx(y,{className:"w-5 h-5"})})]}),h.jsx("p",{className:"text-sm text-gray-600 mb-4",children:a("settings.modal.exportDesc")}),h.jsxs("div",{className:"flex gap-2 justify-end",children:[h.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:a("common.cancel")}),h.jsxs("button",{onClick:k,className:"flex items-center gap-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:[h.jsx(q,{className:"w-4 h-4"}),a("common.download")]})]})]})}),o&&h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:h.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg mx-4 p-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h3",{className:"text-lg font-semibold",children:a("settings.modal.importTitle")}),h.jsx("button",{onClick:()=>{c(!1),g(""),b(""),j(!1)},className:"p-1 hover:bg-gray-100 rounded",children:h.jsx(y,{className:"w-5 h-5"})})]}),f?h.jsxs("div",{className:"flex items-center gap-2 p-4 bg-green-50 text-green-700 rounded-lg",children:[h.jsx(Z,{className:"w-5 h-5"}),a("settings.modal.importSuccess")]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:a("settings.modal.selectFile")}),h.jsx("input",{type:"file",accept:".json",onChange:F,className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:a("settings.modal.orPaste")}),h.jsx("textarea",{value:d,onChange:e=>g(e.target.value),placeholder:'{"pan": {...}, "method": {...}, ...}',rows:6,className:"w-full px-3 py-2 border rounded-lg text-sm font-mono resize-none"})]}),p&&h.jsxs("div",{className:"flex items-center gap-2 p-3 mb-4 bg-red-50 text-red-600 rounded-lg text-sm",children:[h.jsx(J,{className:"w-4 h-4"}),p]}),h.jsxs("div",{className:"flex gap-2 justify-end",children:[h.jsx("button",{onClick:()=>{c(!1),g(""),b("")},className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:a("common.cancel")}),h.jsxs("button",{onClick:C,disabled:!d.trim(),className:"flex items-center gap-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:[h.jsx(Y,{className:"w-4 h-4"}),a("common.import")]})]})]})]})})]})}export{Ge as default};
//# sourceMappingURL=SettingsPage.tsx-v7qikn8D.js.map
